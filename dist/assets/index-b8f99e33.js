function Aw(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wp={exports:{}},pc={},Cp={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=Symbol.for("react.element"),Tw=Symbol.for("react.portal"),Iw=Symbol.for("react.fragment"),bw=Symbol.for("react.strict_mode"),Nw=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),Dw=Symbol.for("react.forward_ref"),Ow=Symbol.for("react.suspense"),_w=Symbol.for("react.memo"),kw=Symbol.for("react.lazy"),v0=Symbol.iterator;function Pw(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Ep={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vp=Object.assign,Sp={};function $s(e,t,n){this.props=e,this.context=t,this.refs=Sp,this.updater=n||Ep}$s.prototype.isReactComponent={};$s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ap(){}Ap.prototype=$s.prototype;function xf(e,t,n){this.props=e,this.context=t,this.refs=Sp,this.updater=n||Ep}var yf=xf.prototype=new Ap;yf.constructor=xf;vp(yf,$s.prototype);yf.isPureReactComponent=!0;var S0=Array.isArray,Tp=Object.prototype.hasOwnProperty,wf={current:null},Ip={key:!0,ref:!0,__self:!0,__source:!0};function bp(e,t,n){var i,a={},l=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(l=""+t.key),t)Tp.call(t,i)&&!Ip.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var m=Array(g),p=0;p<g;p++)m[p]=arguments[p+2];a.children=m}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:Ea,type:e,key:l,ref:f,props:a,_owner:wf.current}}function Lw(e,t){return{$$typeof:Ea,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ea}function Bw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var A0=/\/+/g;function iu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bw(""+e.key):t.toString(36)}function hl(e,t,n,i,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Ea:case Tw:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+iu(f,0):i,S0(a)?(n="",e!=null&&(n=e.replace(A0,"$&/")+"/"),hl(a,t,n,"",function(p){return p})):a!=null&&(Cf(a)&&(a=Lw(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(A0,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",S0(e))for(var g=0;g<e.length;g++){l=e[g];var m=i+iu(l,g);f+=hl(l,t,n,m,a)}else if(m=Pw(e),typeof m=="function")for(e=m.call(e),g=0;!(l=e.next()).done;)l=l.value,m=i+iu(l,g++),f+=hl(l,t,n,m,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Ha(e,t,n){if(e==null)return e;var i=[],a=0;return hl(e,i,"","",function(l){return t.call(n,l,a++)}),i}function jw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gn={current:null},gl={transition:null},Fw={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:gl,ReactCurrentOwner:wf};function Np(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Ha,forEach:function(e,t,n){Ha(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ha(e,function(){t++}),t},toArray:function(e){return Ha(e,function(t){return t})||[]},only:function(e){if(!Cf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=$s;Xe.Fragment=Iw;Xe.Profiler=Nw;Xe.PureComponent=xf;Xe.StrictMode=bw;Xe.Suspense=Ow;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fw;Xe.act=Np;Xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=vp({},e.props),a=e.key,l=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,f=wf.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(m in t)Tp.call(t,m)&&!Ip.hasOwnProperty(m)&&(i[m]=t[m]===void 0&&g!==void 0?g[m]:t[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){g=Array(m);for(var p=0;p<m;p++)g[p]=arguments[p+2];i.children=g}return{$$typeof:Ea,type:e.type,key:a,ref:l,props:i,_owner:f}};Xe.createContext=function(e){return e={$$typeof:Mw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rw,_context:e},e.Consumer=e};Xe.createElement=bp;Xe.createFactory=function(e){var t=bp.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:Dw,render:e}};Xe.isValidElement=Cf;Xe.lazy=function(e){return{$$typeof:kw,_payload:{_status:-1,_result:e},_init:jw}};Xe.memo=function(e,t){return{$$typeof:_w,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=gl.transition;gl.transition={};try{e()}finally{gl.transition=t}};Xe.unstable_act=Np;Xe.useCallback=function(e,t){return gn.current.useCallback(e,t)};Xe.useContext=function(e){return gn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return gn.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return gn.current.useEffect(e,t)};Xe.useId=function(){return gn.current.useId()};Xe.useImperativeHandle=function(e,t,n){return gn.current.useImperativeHandle(e,t,n)};Xe.useInsertionEffect=function(e,t){return gn.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return gn.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return gn.current.useMemo(e,t)};Xe.useReducer=function(e,t,n){return gn.current.useReducer(e,t,n)};Xe.useRef=function(e){return gn.current.useRef(e)};Xe.useState=function(e){return gn.current.useState(e)};Xe.useSyncExternalStore=function(e,t,n){return gn.current.useSyncExternalStore(e,t,n)};Xe.useTransition=function(){return gn.current.useTransition()};Xe.version="18.3.1";Cp.exports=Xe;var D=Cp.exports;const fi=yp(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw=D,Vw=Symbol.for("react.element"),zw=Symbol.for("react.fragment"),Hw=Object.prototype.hasOwnProperty,Ww=Uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gw={key:!0,ref:!0,__self:!0,__source:!0};function Rp(e,t,n){var i,a={},l=null,f=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)Hw.call(t,i)&&!Gw.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Vw,type:e,key:l,ref:f,props:a,_owner:Ww.current}}pc.Fragment=zw;pc.jsx=Rp;pc.jsxs=Rp;wp.exports=pc;var y=wp.exports,Mp={exports:{}},Ln={},Dp={exports:{}},Op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,he){var le=J.length;J.push(he);e:for(;0<le;){var De=le-1>>>1,Oe=J[De];if(0<a(Oe,he))J[De]=he,J[le]=Oe,le=De;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],le=J.pop();if(le!==he){J[0]=le;e:for(var De=0,Oe=J.length,ct=Oe>>>1;De<ct;){var Ze=2*(De+1)-1,Ht=J[Ze],fe=Ze+1,Re=J[fe];if(0>a(Ht,le))fe<Oe&&0>a(Re,Ht)?(J[De]=Re,J[fe]=le,De=fe):(J[De]=Ht,J[Ze]=le,De=Ze);else if(fe<Oe&&0>a(Re,le))J[De]=Re,J[fe]=le,De=fe;else break e}}return he}function a(J,he){var le=J.sortIndex-he.sortIndex;return le!==0?le:J.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var m=[],p=[],C=1,E=null,S=3,R=!1,O=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(J){for(var he=n(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=J)i(p),he.sortIndex=he.expirationTime,t(m,he);else break;he=n(p)}}function P(J){if(_=!1,I(J),!O)if(n(m)!==null)O=!0,se(F);else{var he=n(p);he!==null&&oe(P,he.startTime-J)}}function F(J,he){O=!1,_&&(_=!1,N(H),H=-1),R=!0;var le=S;try{for(I(he),E=n(m);E!==null&&(!(E.expirationTime>he)||J&&!ge());){var De=E.callback;if(typeof De=="function"){E.callback=null,S=E.priorityLevel;var Oe=De(E.expirationTime<=he);he=e.unstable_now(),typeof Oe=="function"?E.callback=Oe:E===n(m)&&i(m),I(he)}else i(m);E=n(m)}if(E!==null)var ct=!0;else{var Ze=n(p);Ze!==null&&oe(P,Ze.startTime-he),ct=!1}return ct}finally{E=null,S=le,R=!1}}var W=!1,B=null,H=-1,G=5,q=-1;function ge(){return!(e.unstable_now()-q<G)}function ue(){if(B!==null){var J=e.unstable_now();q=J;var he=!0;try{he=B(!0,J)}finally{he?Ee():(W=!1,B=null)}}else W=!1}var Ee;if(typeof b=="function")Ee=function(){b(ue)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,V=Ne.port2;Ne.port1.onmessage=ue,Ee=function(){V.postMessage(null)}}else Ee=function(){j(ue,0)};function se(J){B=J,W||(W=!0,Ee())}function oe(J,he){H=j(function(){J(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){O||R||(O=!0,se(F))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(J){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var le=S;S=he;try{return J()}finally{S=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var le=S;S=J;try{return he()}finally{S=le}},e.unstable_scheduleCallback=function(J,he,le){var De=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?De+le:De):le=De,J){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=le+Oe,J={id:C++,callback:he,priorityLevel:J,startTime:le,expirationTime:Oe,sortIndex:-1},le>De?(J.sortIndex=le,t(p,J),n(m)===null&&J===n(p)&&(_?(N(H),H=-1):_=!0,oe(P,le-De))):(J.sortIndex=Oe,t(m,J),O||R||(O=!0,se(F))),J},e.unstable_shouldYield=ge,e.unstable_wrapCallback=function(J){var he=S;return function(){var le=S;S=he;try{return J.apply(this,arguments)}finally{S=le}}}})(Op);Dp.exports=Op;var Yw=Dp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw=D,Pn=Yw;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _p=new Set,Ko={};function es(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(Ko[e]=t,e=0;e<t.length;e++)_p.add(t[e])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zu=Object.prototype.hasOwnProperty,Qw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T0={},I0={};function Kw(e){return Zu.call(I0,e)?!0:Zu.call(T0,e)?!1:Qw.test(e)?I0[e]=!0:(T0[e]=!0,!1)}function Zw(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $w(e,t,n,i){if(t===null||typeof t>"u"||Zw(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pn(e,t,n,i,a,l,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=f}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){en[e]=new pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];en[t]=new pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){en[e]=new pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){en[e]=new pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){en[e]=new pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){en[e]=new pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){en[e]=new pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){en[e]=new pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){en[e]=new pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function vf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ef,vf);en[t]=new pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ef,vf);en[t]=new pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ef,vf);en[t]=new pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){en[e]=new pn(e,1,!1,e.toLowerCase(),null,!1,!1)});en.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){en[e]=new pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sf(e,t,n,i){var a=en.hasOwnProperty(t)?en[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($w(t,n,a,i)&&(n=null),i||a===null?Kw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Xr=Xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wa=Symbol.for("react.element"),hs=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),Af=Symbol.for("react.strict_mode"),$u=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),Pp=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),Ju=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),Lp=Symbol.for("react.offscreen"),b0=Symbol.iterator;function wo(e){return e===null||typeof e!="object"?null:(e=b0&&e[b0]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,su;function Ro(e){if(su===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);su=t&&t[1]||""}return`
`+su+e}var ou=!1;function au(e,t){if(!e||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var i=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){i=p}e.call(t.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),l=i.stack.split(`
`),f=a.length-1,g=l.length-1;1<=f&&0<=g&&a[f]!==l[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==l[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==l[g]){var m=`
`+a[f].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=f&&0<=g);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ro(e):""}function qw(e){switch(e.tag){case 5:return Ro(e.type);case 16:return Ro("Lazy");case 13:return Ro("Suspense");case 19:return Ro("SuspenseList");case 0:case 2:case 15:return e=au(e.type,!1),e;case 11:return e=au(e.type.render,!1),e;case 1:return e=au(e.type,!0),e;default:return""}}function ed(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gs:return"Fragment";case hs:return"Portal";case $u:return"Profiler";case Af:return"StrictMode";case qu:return"Suspense";case Ju:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pp:return(e.displayName||"Context")+".Consumer";case kp:return(e._context.displayName||"Context")+".Provider";case Tf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case If:return t=e.displayName||null,t!==null?t:ed(e.type)||"Memo";case si:t=e._payload,e=e._init;try{return ed(e(t))}catch{}}return null}function Jw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(t);case 8:return t===Af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ei(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eC(e){var t=Bp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ga(e){e._valueTracker||(e._valueTracker=eC(e))}function jp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Bp(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Dl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function td(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function N0(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Ei(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fp(e,t){t=t.checked,t!=null&&Sf(e,"checked",t,!1)}function nd(e,t){Fp(e,t);var n=Ei(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rd(e,t.type,n):t.hasOwnProperty("defaultValue")&&rd(e,t.type,Ei(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function R0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function rd(e,t,n){(t!=="number"||Dl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mo=Array.isArray;function Ds(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ei(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function id(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function M0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(Mo(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ei(n)}}function Up(e,t){var n=Ei(t.value),i=Ei(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function D0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ya,zp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ya=Ya||document.createElement("div"),Ya.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ya.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tC=["Webkit","ms","Moz","O"];Object.keys(ko).forEach(function(e){tC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ko[t]=ko[e]})});function Hp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ko.hasOwnProperty(e)&&ko[e]?(""+t).trim():t+"px"}function Wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=Hp(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var nC=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(e,t){if(t){if(nC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function ad(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function bf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cd=null,Os=null,_s=null;function O0(e){if(e=Aa(e)){if(typeof cd!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Cc(t),cd(e.stateNode,e.type,t))}}function Gp(e){Os?_s?_s.push(e):_s=[e]:Os=e}function Yp(){if(Os){var e=Os,t=_s;if(_s=Os=null,O0(e),t)for(e=0;e<t.length;e++)O0(t[e])}}function Xp(e,t){return e(t)}function Qp(){}var lu=!1;function Kp(e,t,n){if(lu)return e(t,n);lu=!0;try{return Xp(e,t,n)}finally{lu=!1,(Os!==null||_s!==null)&&(Qp(),Yp())}}function $o(e,t){var n=e.stateNode;if(n===null)return null;var i=Cc(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var ud=!1;if(Fr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){ud=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{ud=!1}function rC(e,t,n,i,a,l,f,g,m){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(C){this.onError(C)}}var Po=!1,Ol=null,_l=!1,dd=null,iC={onError:function(e){Po=!0,Ol=e}};function sC(e,t,n,i,a,l,f,g,m){Po=!1,Ol=null,rC.apply(iC,arguments)}function oC(e,t,n,i,a,l,f,g,m){if(sC.apply(this,arguments),Po){if(Po){var p=Ol;Po=!1,Ol=null}else throw Error(ae(198));_l||(_l=!0,dd=p)}}function ts(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _0(e){if(ts(e)!==e)throw Error(ae(188))}function aC(e){var t=e.alternate;if(!t){if(t=ts(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return _0(a),e;if(l===i)return _0(a),t;l=l.sibling}throw Error(ae(188))}if(n.return!==i.return)n=a,i=l;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=l;break}if(g===i){f=!0,i=a,n=l;break}g=g.sibling}if(!f){for(g=l.child;g;){if(g===n){f=!0,n=l,i=a;break}if(g===i){f=!0,i=l,n=a;break}g=g.sibling}if(!f)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function $p(e){return e=aC(e),e!==null?qp(e):null}function qp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qp(e);if(t!==null)return t;e=e.sibling}return null}var Jp=Pn.unstable_scheduleCallback,k0=Pn.unstable_cancelCallback,lC=Pn.unstable_shouldYield,cC=Pn.unstable_requestPaint,Pt=Pn.unstable_now,uC=Pn.unstable_getCurrentPriorityLevel,Nf=Pn.unstable_ImmediatePriority,em=Pn.unstable_UserBlockingPriority,kl=Pn.unstable_NormalPriority,dC=Pn.unstable_LowPriority,tm=Pn.unstable_IdlePriority,mc=null,Ar=null;function fC(e){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(mc,e,void 0,(e.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:pC,hC=Math.log,gC=Math.LN2;function pC(e){return e>>>=0,e===0?32:31-(hC(e)/gC|0)|0}var Xa=64,Qa=4194304;function Do(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pl(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=Do(g):(l&=f,l!==0&&(i=Do(l)))}else f=n&~a,f!==0?i=Do(f):l!==0&&(i=Do(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-lr(t),a=1<<n,i|=e[n],t&=~a;return i}function mC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xC(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var f=31-lr(l),g=1<<f,m=a[f];m===-1?(!(g&n)||g&i)&&(a[f]=mC(g,t)):m<=t&&(e.expiredLanes|=g),l&=~g}}function fd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nm(){var e=Xa;return Xa<<=1,!(Xa&4194240)&&(Xa=64),e}function cu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function va(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lr(t),e[t]=n}function yC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-lr(n),l=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~l}}function Rf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-lr(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var it=0;function rm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var im,Mf,sm,om,am,hd=!1,Ka=[],hi=null,gi=null,pi=null,qo=new Map,Jo=new Map,ai=[],wC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P0(e,t){switch(e){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(t.pointerId)}}function Eo(e,t,n,i,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Aa(t),t!==null&&Mf(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function CC(e,t,n,i,a){switch(t){case"focusin":return hi=Eo(hi,e,t,n,i,a),!0;case"dragenter":return gi=Eo(gi,e,t,n,i,a),!0;case"mouseover":return pi=Eo(pi,e,t,n,i,a),!0;case"pointerover":var l=a.pointerId;return qo.set(l,Eo(qo.get(l)||null,e,t,n,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Jo.set(l,Eo(Jo.get(l)||null,e,t,n,i,a)),!0}return!1}function lm(e){var t=Ui(e.target);if(t!==null){var n=ts(t);if(n!==null){if(t=n.tag,t===13){if(t=Zp(n),t!==null){e.blockedOn=t,am(e.priority,function(){sm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);ld=i,n.target.dispatchEvent(i),ld=null}else return t=Aa(n),t!==null&&Mf(t),e.blockedOn=n,!1;t.shift()}return!0}function L0(e,t,n){pl(e)&&n.delete(t)}function EC(){hd=!1,hi!==null&&pl(hi)&&(hi=null),gi!==null&&pl(gi)&&(gi=null),pi!==null&&pl(pi)&&(pi=null),qo.forEach(L0),Jo.forEach(L0)}function vo(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,EC)))}function ea(e){function t(a){return vo(a,e)}if(0<Ka.length){vo(Ka[0],e);for(var n=1;n<Ka.length;n++){var i=Ka[n];i.blockedOn===e&&(i.blockedOn=null)}}for(hi!==null&&vo(hi,e),gi!==null&&vo(gi,e),pi!==null&&vo(pi,e),qo.forEach(t),Jo.forEach(t),n=0;n<ai.length;n++)i=ai[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)lm(n),n.blockedOn===null&&ai.shift()}var ks=Xr.ReactCurrentBatchConfig,Ll=!0;function vC(e,t,n,i){var a=it,l=ks.transition;ks.transition=null;try{it=1,Df(e,t,n,i)}finally{it=a,ks.transition=l}}function SC(e,t,n,i){var a=it,l=ks.transition;ks.transition=null;try{it=4,Df(e,t,n,i)}finally{it=a,ks.transition=l}}function Df(e,t,n,i){if(Ll){var a=gd(e,t,n,i);if(a===null)wu(e,t,i,Bl,n),P0(e,i);else if(CC(a,e,t,n,i))i.stopPropagation();else if(P0(e,i),t&4&&-1<wC.indexOf(e)){for(;a!==null;){var l=Aa(a);if(l!==null&&im(l),l=gd(e,t,n,i),l===null&&wu(e,t,i,Bl,n),l===a)break;a=l}a!==null&&i.stopPropagation()}else wu(e,t,i,null,n)}}var Bl=null;function gd(e,t,n,i){if(Bl=null,e=bf(i),e=Ui(e),e!==null)if(t=ts(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Zp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bl=e,null}function cm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uC()){case Nf:return 1;case em:return 4;case kl:case dC:return 16;case tm:return 536870912;default:return 16}default:return 16}}var ci=null,Of=null,ml=null;function um(){if(ml)return ml;var e,t=Of,n=t.length,i,a="value"in ci?ci.value:ci.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[l-i];i++);return ml=a.slice(e,1<i?1-i:void 0)}function xl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Za(){return!0}function B0(){return!1}function Bn(e){function t(n,i,a,l,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Za:B0,this.isPropagationStopped=B0,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),t}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_f=Bn(qs),Sa=Tt({},qs,{view:0,detail:0}),AC=Bn(Sa),uu,du,So,xc=Tt({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==So&&(So&&e.type==="mousemove"?(uu=e.screenX-So.screenX,du=e.screenY-So.screenY):du=uu=0,So=e),uu)},movementY:function(e){return"movementY"in e?e.movementY:du}}),j0=Bn(xc),TC=Tt({},xc,{dataTransfer:0}),IC=Bn(TC),bC=Tt({},Sa,{relatedTarget:0}),fu=Bn(bC),NC=Tt({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),RC=Bn(NC),MC=Tt({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),DC=Bn(MC),OC=Tt({},qs,{data:0}),F0=Bn(OC),_C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PC[e])?!!t[e]:!1}function kf(){return LC}var BC=Tt({},Sa,{key:function(e){if(e.key){var t=_C[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kf,charCode:function(e){return e.type==="keypress"?xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jC=Bn(BC),FC=Tt({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U0=Bn(FC),UC=Tt({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kf}),VC=Bn(UC),zC=Tt({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),HC=Bn(zC),WC=Tt({},xc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GC=Bn(WC),YC=[9,13,27,32],Pf=Fr&&"CompositionEvent"in window,Lo=null;Fr&&"documentMode"in document&&(Lo=document.documentMode);var XC=Fr&&"TextEvent"in window&&!Lo,dm=Fr&&(!Pf||Lo&&8<Lo&&11>=Lo),V0=String.fromCharCode(32),z0=!1;function fm(e,t){switch(e){case"keyup":return YC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function QC(e,t){switch(e){case"compositionend":return hm(t);case"keypress":return t.which!==32?null:(z0=!0,V0);case"textInput":return e=t.data,e===V0&&z0?null:e;default:return null}}function KC(e,t){if(ps)return e==="compositionend"||!Pf&&fm(e,t)?(e=um(),ml=Of=ci=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dm&&t.locale!=="ko"?null:t.data;default:return null}}var ZC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZC[e.type]:t==="textarea"}function gm(e,t,n,i){Gp(i),t=jl(t,"onChange"),0<t.length&&(n=new _f("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Bo=null,ta=null;function $C(e){Tm(e,0)}function yc(e){var t=ys(e);if(jp(t))return e}function qC(e,t){if(e==="change")return t}var pm=!1;if(Fr){var hu;if(Fr){var gu="oninput"in document;if(!gu){var W0=document.createElement("div");W0.setAttribute("oninput","return;"),gu=typeof W0.oninput=="function"}hu=gu}else hu=!1;pm=hu&&(!document.documentMode||9<document.documentMode)}function G0(){Bo&&(Bo.detachEvent("onpropertychange",mm),ta=Bo=null)}function mm(e){if(e.propertyName==="value"&&yc(ta)){var t=[];gm(t,ta,e,bf(e)),Kp($C,t)}}function JC(e,t,n){e==="focusin"?(G0(),Bo=t,ta=n,Bo.attachEvent("onpropertychange",mm)):e==="focusout"&&G0()}function e3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yc(ta)}function t3(e,t){if(e==="click")return yc(t)}function n3(e,t){if(e==="input"||e==="change")return yc(t)}function r3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ur=typeof Object.is=="function"?Object.is:r3;function na(e,t){if(ur(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Zu.call(t,a)||!ur(e[a],t[a]))return!1}return!0}function Y0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function X0(e,t){var n=Y0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y0(n)}}function xm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ym(){for(var e=window,t=Dl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dl(e.document)}return t}function Lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function i3(e){var t=ym(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xm(n.ownerDocument.documentElement,n)){if(i!==null&&Lf(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!e.extend&&l>i&&(a=i,i=l,l=a),a=X0(n,l);var f=X0(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var s3=Fr&&"documentMode"in document&&11>=document.documentMode,ms=null,pd=null,jo=null,md=!1;function Q0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;md||ms==null||ms!==Dl(i)||(i=ms,"selectionStart"in i&&Lf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),jo&&na(jo,i)||(jo=i,i=jl(pd,"onSelect"),0<i.length&&(t=new _f("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ms)))}function $a(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xs={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},pu={},wm={};Fr&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function wc(e){if(pu[e])return pu[e];if(!xs[e])return e;var t=xs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wm)return pu[e]=t[n];return e}var Cm=wc("animationend"),Em=wc("animationiteration"),vm=wc("animationstart"),Sm=wc("transitionend"),Am=new Map,K0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(e,t){Am.set(e,t),es(t,[e])}for(var mu=0;mu<K0.length;mu++){var xu=K0[mu],o3=xu.toLowerCase(),a3=xu[0].toUpperCase()+xu.slice(1);Ti(o3,"on"+a3)}Ti(Cm,"onAnimationEnd");Ti(Em,"onAnimationIteration");Ti(vm,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(Sm,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function Z0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,oC(i,t,void 0,e),e.currentTarget=null}function Tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],m=g.instance,p=g.currentTarget;if(g=g.listener,m!==l&&a.isPropagationStopped())break e;Z0(a,g,p),l=m}else for(f=0;f<i.length;f++){if(g=i[f],m=g.instance,p=g.currentTarget,g=g.listener,m!==l&&a.isPropagationStopped())break e;Z0(a,g,p),l=m}}}if(_l)throw e=dd,_l=!1,dd=null,e}function ht(e,t){var n=t[Ed];n===void 0&&(n=t[Ed]=new Set);var i=e+"__bubble";n.has(i)||(Im(t,e,2,!1),n.add(i))}function yu(e,t,n){var i=0;t&&(i|=4),Im(n,e,i,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function ra(e){if(!e[qa]){e[qa]=!0,_p.forEach(function(n){n!=="selectionchange"&&(l3.has(n)||yu(n,!1,e),yu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qa]||(t[qa]=!0,yu("selectionchange",!1,t))}}function Im(e,t,n,i){switch(cm(t)){case 1:var a=vC;break;case 4:a=SC;break;default:a=Df}n=a.bind(null,t,n,e),a=void 0,!ud||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function wu(e,t,n,i,a){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;f=f.return}for(;g!==null;){if(f=Ui(g),f===null)return;if(m=f.tag,m===5||m===6){i=l=f;continue e}g=g.parentNode}}i=i.return}Kp(function(){var p=l,C=bf(n),E=[];e:{var S=Am.get(e);if(S!==void 0){var R=_f,O=e;switch(e){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":R=jC;break;case"focusin":O="focus",R=fu;break;case"focusout":O="blur",R=fu;break;case"beforeblur":case"afterblur":R=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=IC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=VC;break;case Cm:case Em:case vm:R=RC;break;case Sm:R=HC;break;case"scroll":R=AC;break;case"wheel":R=GC;break;case"copy":case"cut":case"paste":R=DC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=U0}var _=(t&4)!==0,j=!_&&e==="scroll",N=_?S!==null?S+"Capture":null:S;_=[];for(var b=p,I;b!==null;){I=b;var P=I.stateNode;if(I.tag===5&&P!==null&&(I=P,N!==null&&(P=$o(b,N),P!=null&&_.push(ia(b,P,I)))),j)break;b=b.return}0<_.length&&(S=new R(S,O,null,n,C),E.push({event:S,listeners:_}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",S&&n!==ld&&(O=n.relatedTarget||n.fromElement)&&(Ui(O)||O[Ur]))break e;if((R||S)&&(S=C.window===C?C:(S=C.ownerDocument)?S.defaultView||S.parentWindow:window,R?(O=n.relatedTarget||n.toElement,R=p,O=O?Ui(O):null,O!==null&&(j=ts(O),O!==j||O.tag!==5&&O.tag!==6)&&(O=null)):(R=null,O=p),R!==O)){if(_=j0,P="onMouseLeave",N="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(_=U0,P="onPointerLeave",N="onPointerEnter",b="pointer"),j=R==null?S:ys(R),I=O==null?S:ys(O),S=new _(P,b+"leave",R,n,C),S.target=j,S.relatedTarget=I,P=null,Ui(C)===p&&(_=new _(N,b+"enter",O,n,C),_.target=I,_.relatedTarget=j,P=_),j=P,R&&O)t:{for(_=R,N=O,b=0,I=_;I;I=fs(I))b++;for(I=0,P=N;P;P=fs(P))I++;for(;0<b-I;)_=fs(_),b--;for(;0<I-b;)N=fs(N),I--;for(;b--;){if(_===N||N!==null&&_===N.alternate)break t;_=fs(_),N=fs(N)}_=null}else _=null;R!==null&&$0(E,S,R,_,!1),O!==null&&j!==null&&$0(E,j,O,_,!0)}}e:{if(S=p?ys(p):window,R=S.nodeName&&S.nodeName.toLowerCase(),R==="select"||R==="input"&&S.type==="file")var F=qC;else if(H0(S))if(pm)F=n3;else{F=e3;var W=JC}else(R=S.nodeName)&&R.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(F=t3);if(F&&(F=F(e,p))){gm(E,F,n,C);break e}W&&W(e,S,p),e==="focusout"&&(W=S._wrapperState)&&W.controlled&&S.type==="number"&&rd(S,"number",S.value)}switch(W=p?ys(p):window,e){case"focusin":(H0(W)||W.contentEditable==="true")&&(ms=W,pd=p,jo=null);break;case"focusout":jo=pd=ms=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,Q0(E,n,C);break;case"selectionchange":if(s3)break;case"keydown":case"keyup":Q0(E,n,C)}var B;if(Pf)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ps?fm(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(dm&&n.locale!=="ko"&&(ps||H!=="onCompositionStart"?H==="onCompositionEnd"&&ps&&(B=um()):(ci=C,Of="value"in ci?ci.value:ci.textContent,ps=!0)),W=jl(p,H),0<W.length&&(H=new F0(H,e,null,n,C),E.push({event:H,listeners:W}),B?H.data=B:(B=hm(n),B!==null&&(H.data=B)))),(B=XC?QC(e,n):KC(e,n))&&(p=jl(p,"onBeforeInput"),0<p.length&&(C=new F0("onBeforeInput","beforeinput",null,n,C),E.push({event:C,listeners:p}),C.data=B))}Tm(E,t)})}function ia(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jl(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=$o(e,n),l!=null&&i.unshift(ia(e,l,a)),l=$o(e,t),l!=null&&i.push(ia(e,l,a))),e=e.return}return i}function fs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $0(e,t,n,i,a){for(var l=t._reactName,f=[];n!==null&&n!==i;){var g=n,m=g.alternate,p=g.stateNode;if(m!==null&&m===i)break;g.tag===5&&p!==null&&(g=p,a?(m=$o(n,l),m!=null&&f.unshift(ia(n,m,g))):a||(m=$o(n,l),m!=null&&f.push(ia(n,m,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var c3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function q0(e){return(typeof e=="string"?e:""+e).replace(c3,`
`).replace(u3,"")}function Ja(e,t,n){if(t=q0(t),q0(e)!==t&&n)throw Error(ae(425))}function Fl(){}var xd=null,yd=null;function wd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,d3=typeof clearTimeout=="function"?clearTimeout:void 0,J0=typeof Promise=="function"?Promise:void 0,f3=typeof queueMicrotask=="function"?queueMicrotask:typeof J0<"u"?function(e){return J0.resolve(null).then(e).catch(h3)}:Cd;function h3(e){setTimeout(function(){throw e})}function Cu(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),ea(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);ea(t)}function mi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function e1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Js=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Js,sa="__reactProps$"+Js,Ur="__reactContainer$"+Js,Ed="__reactEvents$"+Js,g3="__reactListeners$"+Js,p3="__reactHandles$"+Js;function Ui(e){var t=e[Sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ur]||n[Sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=e1(e);e!==null;){if(n=e[Sr])return n;e=e1(e)}return t}e=n,n=e.parentNode}return null}function Aa(e){return e=e[Sr]||e[Ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ys(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Cc(e){return e[sa]||null}var vd=[],ws=-1;function Ii(e){return{current:e}}function pt(e){0>ws||(e.current=vd[ws],vd[ws]=null,ws--)}function dt(e,t){ws++,vd[ws]=e.current,e.current=t}var vi={},cn=Ii(vi),Tn=Ii(!1),Ki=vi;function js(e,t){var n=e.type.contextTypes;if(!n)return vi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function In(e){return e=e.childContextTypes,e!=null}function Ul(){pt(Tn),pt(cn)}function t1(e,t,n){if(cn.current!==vi)throw Error(ae(168));dt(cn,t),dt(Tn,n)}function bm(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(ae(108,Jw(e)||"Unknown",a));return Tt({},n,i)}function Vl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,Ki=cn.current,dt(cn,e),dt(Tn,Tn.current),!0}function n1(e,t,n){var i=e.stateNode;if(!i)throw Error(ae(169));n?(e=bm(e,t,Ki),i.__reactInternalMemoizedMergedChildContext=e,pt(Tn),pt(cn),dt(cn,e)):pt(Tn),dt(Tn,n)}var _r=null,Ec=!1,Eu=!1;function Nm(e){_r===null?_r=[e]:_r.push(e)}function m3(e){Ec=!0,Nm(e)}function bi(){if(!Eu&&_r!==null){Eu=!0;var e=0,t=it;try{var n=_r;for(it=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}_r=null,Ec=!1}catch(a){throw _r!==null&&(_r=_r.slice(e+1)),Jp(Nf,bi),a}finally{it=t,Eu=!1}}return null}var Cs=[],Es=0,zl=null,Hl=0,Qn=[],Kn=0,Zi=null,kr=1,Pr="";function Bi(e,t){Cs[Es++]=Hl,Cs[Es++]=zl,zl=e,Hl=t}function Rm(e,t,n){Qn[Kn++]=kr,Qn[Kn++]=Pr,Qn[Kn++]=Zi,Zi=e;var i=kr;e=Pr;var a=32-lr(i)-1;i&=~(1<<a),n+=1;var l=32-lr(t)+a;if(30<l){var f=a-a%5;l=(i&(1<<f)-1).toString(32),i>>=f,a-=f,kr=1<<32-lr(t)+a|n<<a|i,Pr=l+e}else kr=1<<l|n<<a|i,Pr=e}function Bf(e){e.return!==null&&(Bi(e,1),Rm(e,1,0))}function jf(e){for(;e===zl;)zl=Cs[--Es],Cs[Es]=null,Hl=Cs[--Es],Cs[Es]=null;for(;e===Zi;)Zi=Qn[--Kn],Qn[Kn]=null,Pr=Qn[--Kn],Qn[Kn]=null,kr=Qn[--Kn],Qn[Kn]=null}var kn=null,_n=null,xt=!1,ar=null;function Mm(e,t){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function r1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kn=e,_n=mi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kn=e,_n=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zi!==null?{id:kr,overflow:Pr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kn=e,_n=null,!0):!1;default:return!1}}function Sd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ad(e){if(xt){var t=_n;if(t){var n=t;if(!r1(e,t)){if(Sd(e))throw Error(ae(418));t=mi(n.nextSibling);var i=kn;t&&r1(e,t)?Mm(i,n):(e.flags=e.flags&-4097|2,xt=!1,kn=e)}}else{if(Sd(e))throw Error(ae(418));e.flags=e.flags&-4097|2,xt=!1,kn=e}}}function i1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kn=e}function el(e){if(e!==kn)return!1;if(!xt)return i1(e),xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wd(e.type,e.memoizedProps)),t&&(t=_n)){if(Sd(e))throw Dm(),Error(ae(418));for(;t;)Mm(e,t),t=mi(t.nextSibling)}if(i1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_n=mi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_n=null}}else _n=kn?mi(e.stateNode.nextSibling):null;return!0}function Dm(){for(var e=_n;e;)e=mi(e.nextSibling)}function Fs(){_n=kn=null,xt=!1}function Ff(e){ar===null?ar=[e]:ar.push(e)}var x3=Xr.ReactCurrentBatchConfig;function Ao(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,e));var a=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(f){var g=a.refs;f===null?delete g[l]:g[l]=f},t._stringRef=l,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function tl(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function s1(e){var t=e._init;return t(e._payload)}function Om(e){function t(N,b){if(e){var I=N.deletions;I===null?(N.deletions=[b],N.flags|=16):I.push(b)}}function n(N,b){if(!e)return null;for(;b!==null;)t(N,b),b=b.sibling;return null}function i(N,b){for(N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(N,b){return N=Ci(N,b),N.index=0,N.sibling=null,N}function l(N,b,I){return N.index=I,e?(I=N.alternate,I!==null?(I=I.index,I<b?(N.flags|=2,b):I):(N.flags|=2,b)):(N.flags|=1048576,b)}function f(N){return e&&N.alternate===null&&(N.flags|=2),N}function g(N,b,I,P){return b===null||b.tag!==6?(b=Nu(I,N.mode,P),b.return=N,b):(b=a(b,I),b.return=N,b)}function m(N,b,I,P){var F=I.type;return F===gs?C(N,b,I.props.children,P,I.key):b!==null&&(b.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===si&&s1(F)===b.type)?(P=a(b,I.props),P.ref=Ao(N,b,I),P.return=N,P):(P=Al(I.type,I.key,I.props,null,N.mode,P),P.ref=Ao(N,b,I),P.return=N,P)}function p(N,b,I,P){return b===null||b.tag!==4||b.stateNode.containerInfo!==I.containerInfo||b.stateNode.implementation!==I.implementation?(b=Ru(I,N.mode,P),b.return=N,b):(b=a(b,I.children||[]),b.return=N,b)}function C(N,b,I,P,F){return b===null||b.tag!==7?(b=Yi(I,N.mode,P,F),b.return=N,b):(b=a(b,I),b.return=N,b)}function E(N,b,I){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Nu(""+b,N.mode,I),b.return=N,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wa:return I=Al(b.type,b.key,b.props,null,N.mode,I),I.ref=Ao(N,null,b),I.return=N,I;case hs:return b=Ru(b,N.mode,I),b.return=N,b;case si:var P=b._init;return E(N,P(b._payload),I)}if(Mo(b)||wo(b))return b=Yi(b,N.mode,I,null),b.return=N,b;tl(N,b)}return null}function S(N,b,I,P){var F=b!==null?b.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:g(N,b,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Wa:return I.key===F?m(N,b,I,P):null;case hs:return I.key===F?p(N,b,I,P):null;case si:return F=I._init,S(N,b,F(I._payload),P)}if(Mo(I)||wo(I))return F!==null?null:C(N,b,I,P,null);tl(N,I)}return null}function R(N,b,I,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return N=N.get(I)||null,g(b,N,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Wa:return N=N.get(P.key===null?I:P.key)||null,m(b,N,P,F);case hs:return N=N.get(P.key===null?I:P.key)||null,p(b,N,P,F);case si:var W=P._init;return R(N,b,I,W(P._payload),F)}if(Mo(P)||wo(P))return N=N.get(I)||null,C(b,N,P,F,null);tl(b,P)}return null}function O(N,b,I,P){for(var F=null,W=null,B=b,H=b=0,G=null;B!==null&&H<I.length;H++){B.index>H?(G=B,B=null):G=B.sibling;var q=S(N,B,I[H],P);if(q===null){B===null&&(B=G);break}e&&B&&q.alternate===null&&t(N,B),b=l(q,b,H),W===null?F=q:W.sibling=q,W=q,B=G}if(H===I.length)return n(N,B),xt&&Bi(N,H),F;if(B===null){for(;H<I.length;H++)B=E(N,I[H],P),B!==null&&(b=l(B,b,H),W===null?F=B:W.sibling=B,W=B);return xt&&Bi(N,H),F}for(B=i(N,B);H<I.length;H++)G=R(B,N,H,I[H],P),G!==null&&(e&&G.alternate!==null&&B.delete(G.key===null?H:G.key),b=l(G,b,H),W===null?F=G:W.sibling=G,W=G);return e&&B.forEach(function(ge){return t(N,ge)}),xt&&Bi(N,H),F}function _(N,b,I,P){var F=wo(I);if(typeof F!="function")throw Error(ae(150));if(I=F.call(I),I==null)throw Error(ae(151));for(var W=F=null,B=b,H=b=0,G=null,q=I.next();B!==null&&!q.done;H++,q=I.next()){B.index>H?(G=B,B=null):G=B.sibling;var ge=S(N,B,q.value,P);if(ge===null){B===null&&(B=G);break}e&&B&&ge.alternate===null&&t(N,B),b=l(ge,b,H),W===null?F=ge:W.sibling=ge,W=ge,B=G}if(q.done)return n(N,B),xt&&Bi(N,H),F;if(B===null){for(;!q.done;H++,q=I.next())q=E(N,q.value,P),q!==null&&(b=l(q,b,H),W===null?F=q:W.sibling=q,W=q);return xt&&Bi(N,H),F}for(B=i(N,B);!q.done;H++,q=I.next())q=R(B,N,H,q.value,P),q!==null&&(e&&q.alternate!==null&&B.delete(q.key===null?H:q.key),b=l(q,b,H),W===null?F=q:W.sibling=q,W=q);return e&&B.forEach(function(ue){return t(N,ue)}),xt&&Bi(N,H),F}function j(N,b,I,P){if(typeof I=="object"&&I!==null&&I.type===gs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Wa:e:{for(var F=I.key,W=b;W!==null;){if(W.key===F){if(F=I.type,F===gs){if(W.tag===7){n(N,W.sibling),b=a(W,I.props.children),b.return=N,N=b;break e}}else if(W.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===si&&s1(F)===W.type){n(N,W.sibling),b=a(W,I.props),b.ref=Ao(N,W,I),b.return=N,N=b;break e}n(N,W);break}else t(N,W);W=W.sibling}I.type===gs?(b=Yi(I.props.children,N.mode,P,I.key),b.return=N,N=b):(P=Al(I.type,I.key,I.props,null,N.mode,P),P.ref=Ao(N,b,I),P.return=N,N=P)}return f(N);case hs:e:{for(W=I.key;b!==null;){if(b.key===W)if(b.tag===4&&b.stateNode.containerInfo===I.containerInfo&&b.stateNode.implementation===I.implementation){n(N,b.sibling),b=a(b,I.children||[]),b.return=N,N=b;break e}else{n(N,b);break}else t(N,b);b=b.sibling}b=Ru(I,N.mode,P),b.return=N,N=b}return f(N);case si:return W=I._init,j(N,b,W(I._payload),P)}if(Mo(I))return O(N,b,I,P);if(wo(I))return _(N,b,I,P);tl(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,b!==null&&b.tag===6?(n(N,b.sibling),b=a(b,I),b.return=N,N=b):(n(N,b),b=Nu(I,N.mode,P),b.return=N,N=b),f(N)):n(N,b)}return j}var Us=Om(!0),_m=Om(!1),Wl=Ii(null),Gl=null,vs=null,Uf=null;function Vf(){Uf=vs=Gl=null}function zf(e){var t=Wl.current;pt(Wl),e._currentValue=t}function Td(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Gl=e,Uf=vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sn=!0),e.firstContext=null)}function Jn(e){var t=e._currentValue;if(Uf!==e)if(e={context:e,memoizedValue:t,next:null},vs===null){if(Gl===null)throw Error(ae(308));vs=e,Gl.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var Vi=null;function Hf(e){Vi===null?Vi=[e]:Vi.push(e)}function km(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Hf(t)):(n.next=a.next,a.next=n),t.interleaved=n,Vr(e,i)}function Vr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var oi=!1;function Wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,et&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Vr(e,n)}return a=i.interleaved,a===null?(t.next=t,Hf(i)):(t.next=a.next,a.next=t),i.interleaved=t,Vr(e,n)}function yl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rf(e,n)}}function o1(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yl(e,t,n,i){var a=e.updateQueue;oi=!1;var l=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var m=g,p=m.next;m.next=null,f===null?l=p:f.next=p,f=m;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==f&&(g===null?C.firstBaseUpdate=p:g.next=p,C.lastBaseUpdate=m))}if(l!==null){var E=a.baseState;f=0,C=p=m=null,g=l;do{var S=g.lane,R=g.eventTime;if((i&S)===S){C!==null&&(C=C.next={eventTime:R,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var O=e,_=g;switch(S=t,R=n,_.tag){case 1:if(O=_.payload,typeof O=="function"){E=O.call(R,E,S);break e}E=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=_.payload,S=typeof O=="function"?O.call(R,E,S):O,S==null)break e;E=Tt({},E,S);break e;case 2:oi=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,S=a.effects,S===null?a.effects=[g]:S.push(g))}else R={eventTime:R,lane:S,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(p=C=R,m=E):C=C.next=R,f|=S;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;S=g,g=S.next,S.next=null,a.lastBaseUpdate=S,a.shared.pending=null}}while(1);if(C===null&&(m=E),a.baseState=m,a.firstBaseUpdate=p,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);qi|=f,e.lanes=f,e.memoizedState=E}}function a1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(ae(191,a));a.call(i)}}}var Ta={},Tr=Ii(Ta),oa=Ii(Ta),aa=Ii(Ta);function zi(e){if(e===Ta)throw Error(ae(174));return e}function Gf(e,t){switch(dt(aa,t),dt(oa,e),dt(Tr,Ta),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sd(t,e)}pt(Tr),dt(Tr,t)}function Vs(){pt(Tr),pt(oa),pt(aa)}function Lm(e){zi(aa.current);var t=zi(Tr.current),n=sd(t,e.type);t!==n&&(dt(oa,e),dt(Tr,n))}function Yf(e){oa.current===e&&(pt(Tr),pt(oa))}var Et=Ii(0);function Xl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vu=[];function Xf(){for(var e=0;e<vu.length;e++)vu[e]._workInProgressVersionPrimary=null;vu.length=0}var wl=Xr.ReactCurrentDispatcher,Su=Xr.ReactCurrentBatchConfig,$i=0,St=null,Vt=null,Yt=null,Ql=!1,Fo=!1,la=0,y3=0;function rn(){throw Error(ae(321))}function Qf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Kf(e,t,n,i,a,l){if($i=l,St=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wl.current=e===null||e.memoizedState===null?v3:S3,e=n(i,a),Fo){l=0;do{if(Fo=!1,la=0,25<=l)throw Error(ae(301));l+=1,Yt=Vt=null,t.updateQueue=null,wl.current=A3,e=n(i,a)}while(Fo)}if(wl.current=Kl,t=Vt!==null&&Vt.next!==null,$i=0,Yt=Vt=St=null,Ql=!1,t)throw Error(ae(300));return e}function Zf(){var e=la!==0;return la=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?St.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function er(){if(Vt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Yt===null?St.memoizedState:Yt.next;if(t!==null)Yt=t,Vt=e;else{if(e===null)throw Error(ae(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yt===null?St.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function ca(e,t){return typeof t=="function"?t(e):t}function Au(e){var t=er(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var i=Vt,a=i.baseQueue,l=n.pending;if(l!==null){if(a!==null){var f=a.next;a.next=l.next,l.next=f}i.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,i=i.baseState;var g=f=null,m=null,p=l;do{var C=p.lane;if(($i&C)===C)m!==null&&(m=m.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var E={lane:C,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};m===null?(g=m=E,f=i):m=m.next=E,St.lanes|=C,qi|=C}p=p.next}while(p!==null&&p!==l);m===null?f=i:m.next=g,ur(i,t.memoizedState)||(Sn=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=m,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do l=a.lane,St.lanes|=l,qi|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tu(e){var t=er(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do l=e(l,f.action),f=f.next;while(f!==a);ur(l,t.memoizedState)||(Sn=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function Bm(){}function jm(e,t){var n=St,i=er(),a=t(),l=!ur(i.memoizedState,a);if(l&&(i.memoizedState=a,Sn=!0),i=i.queue,$f(Vm.bind(null,n,i,e),[e]),i.getSnapshot!==t||l||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,ua(9,Um.bind(null,n,i,a,t),void 0,null),Xt===null)throw Error(ae(349));$i&30||Fm(n,t,a)}return a}function Fm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Um(e,t,n,i){t.value=n,t.getSnapshot=i,zm(t)&&Hm(e)}function Vm(e,t,n){return n(function(){zm(t)&&Hm(e)})}function zm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch{return!0}}function Hm(e){var t=Vr(e,1);t!==null&&cr(t,e,1,-1)}function l1(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t.queue=e,e=e.dispatch=E3.bind(null,St,e),[t.memoizedState,e]}function ua(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Wm(){return er().memoizedState}function Cl(e,t,n,i){var a=Er();St.flags|=e,a.memoizedState=ua(1|t,n,void 0,i===void 0?null:i)}function vc(e,t,n,i){var a=er();i=i===void 0?null:i;var l=void 0;if(Vt!==null){var f=Vt.memoizedState;if(l=f.destroy,i!==null&&Qf(i,f.deps)){a.memoizedState=ua(t,n,l,i);return}}St.flags|=e,a.memoizedState=ua(1|t,n,l,i)}function c1(e,t){return Cl(8390656,8,e,t)}function $f(e,t){return vc(2048,8,e,t)}function Gm(e,t){return vc(4,2,e,t)}function Ym(e,t){return vc(4,4,e,t)}function Xm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qm(e,t,n){return n=n!=null?n.concat([e]):null,vc(4,4,Xm.bind(null,t,e),n)}function qf(){}function Km(e,t){var n=er();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Qf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Zm(e,t){var n=er();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Qf(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function $m(e,t,n){return $i&21?(ur(n,t)||(n=nm(),St.lanes|=n,qi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sn=!0),e.memoizedState=n)}function w3(e,t){var n=it;it=n!==0&&4>n?n:4,e(!0);var i=Su.transition;Su.transition={};try{e(!1),t()}finally{it=n,Su.transition=i}}function qm(){return er().memoizedState}function C3(e,t,n){var i=wi(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Jm(e))ex(t,n);else if(n=km(e,t,n,i),n!==null){var a=hn();cr(n,e,i,a),tx(n,t,i)}}function E3(e,t,n){var i=wi(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jm(e))ex(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,g=l(f,n);if(a.hasEagerState=!0,a.eagerState=g,ur(g,f)){var m=t.interleaved;m===null?(a.next=a,Hf(t)):(a.next=m.next,m.next=a),t.interleaved=a;return}}catch{}finally{}n=km(e,t,a,i),n!==null&&(a=hn(),cr(n,e,i,a),tx(n,t,i))}}function Jm(e){var t=e.alternate;return e===St||t!==null&&t===St}function ex(e,t){Fo=Ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tx(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rf(e,n)}}var Kl={readContext:Jn,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},v3={readContext:Jn,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:Jn,useEffect:c1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cl(4194308,4,Xm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cl(4,2,e,t)},useMemo:function(e,t){var n=Er();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Er();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=C3.bind(null,St,e),[i.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:l1,useDebugValue:qf,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=l1(!1),t=e[0];return e=w3.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=St,a=Er();if(xt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),Xt===null)throw Error(ae(349));$i&30||Fm(i,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,c1(Vm.bind(null,i,l,e),[e]),i.flags|=2048,ua(9,Um.bind(null,i,l,n,t),void 0,null),n},useId:function(){var e=Er(),t=Xt.identifierPrefix;if(xt){var n=Pr,i=kr;n=(i&~(1<<32-lr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=la++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=y3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},S3={readContext:Jn,useCallback:Km,useContext:Jn,useEffect:$f,useImperativeHandle:Qm,useInsertionEffect:Gm,useLayoutEffect:Ym,useMemo:Zm,useReducer:Au,useRef:Wm,useState:function(){return Au(ca)},useDebugValue:qf,useDeferredValue:function(e){var t=er();return $m(t,Vt.memoizedState,e)},useTransition:function(){var e=Au(ca)[0],t=er().memoizedState;return[e,t]},useMutableSource:Bm,useSyncExternalStore:jm,useId:qm,unstable_isNewReconciler:!1},A3={readContext:Jn,useCallback:Km,useContext:Jn,useEffect:$f,useImperativeHandle:Qm,useInsertionEffect:Gm,useLayoutEffect:Ym,useMemo:Zm,useReducer:Tu,useRef:Wm,useState:function(){return Tu(ca)},useDebugValue:qf,useDeferredValue:function(e){var t=er();return Vt===null?t.memoizedState=e:$m(t,Vt.memoizedState,e)},useTransition:function(){var e=Tu(ca)[0],t=er().memoizedState;return[e,t]},useMutableSource:Bm,useSyncExternalStore:jm,useId:qm,unstable_isNewReconciler:!1};function ir(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Id(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Sc={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=hn(),a=wi(e),l=Br(i,a);l.payload=t,n!=null&&(l.callback=n),t=xi(e,l,a),t!==null&&(cr(t,e,a,i),yl(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=hn(),a=wi(e),l=Br(i,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=xi(e,l,a),t!==null&&(cr(t,e,a,i),yl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hn(),i=wi(e),a=Br(n,i);a.tag=2,t!=null&&(a.callback=t),t=xi(e,a,i),t!==null&&(cr(t,e,i,n),yl(t,e,i))}};function u1(e,t,n,i,a,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,f):t.prototype&&t.prototype.isPureReactComponent?!na(n,i)||!na(a,l):!0}function nx(e,t,n){var i=!1,a=vi,l=t.contextType;return typeof l=="object"&&l!==null?l=Jn(l):(a=In(t)?Ki:cn.current,i=t.contextTypes,l=(i=i!=null)?js(e,a):vi),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sc,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function d1(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Sc.enqueueReplaceState(t,t.state,null)}function bd(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Wf(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Jn(l):(l=In(t)?Ki:cn.current,a.context=js(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Id(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Sc.enqueueReplaceState(a,a.state,null),Yl(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function zs(e,t){try{var n="",i=t;do n+=qw(i),i=i.return;while(i);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Iu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var T3=typeof WeakMap=="function"?WeakMap:Map;function rx(e,t,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){$l||($l=!0,jd=i),Nd(e,t)},n}function ix(e,t,n){n=Br(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){Nd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Nd(e,t),typeof i!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function f1(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new T3;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=F3.bind(null,e,t,n),t.then(e,e))}function h1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function g1(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Br(-1,1),t.tag=2,xi(n,t,1))),n.lanes|=1),e)}var I3=Xr.ReactCurrentOwner,Sn=!1;function dn(e,t,n,i){t.child=e===null?_m(t,null,n,i):Us(t,e.child,n,i)}function p1(e,t,n,i,a){n=n.render;var l=t.ref;return Ps(t,a),i=Kf(e,t,n,i,l,a),n=Zf(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zr(e,t,a)):(xt&&n&&Bf(t),t.flags|=1,dn(e,t,i,a),t.child)}function m1(e,t,n,i,a){if(e===null){var l=n.type;return typeof l=="function"&&!oh(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,sx(e,t,l,i,a)):(e=Al(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:na,n(f,i)&&e.ref===t.ref)return zr(e,t,a)}return t.flags|=1,e=Ci(l,i),e.ref=t.ref,e.return=t,t.child=e}function sx(e,t,n,i,a){if(e!==null){var l=e.memoizedProps;if(na(l,i)&&e.ref===t.ref)if(Sn=!1,t.pendingProps=i=l,(e.lanes&a)!==0)e.flags&131072&&(Sn=!0);else return t.lanes=e.lanes,zr(e,t,a)}return Rd(e,t,n,i,a)}function ox(e,t,n){var i=t.pendingProps,a=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(As,Dn),Dn|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dt(As,Dn),Dn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,dt(As,Dn),Dn|=i}else l!==null?(i=l.baseLanes|n,t.memoizedState=null):i=n,dt(As,Dn),Dn|=i;return dn(e,t,a,n),t.child}function ax(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rd(e,t,n,i,a){var l=In(n)?Ki:cn.current;return l=js(t,l),Ps(t,a),n=Kf(e,t,n,i,l,a),i=Zf(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zr(e,t,a)):(xt&&i&&Bf(t),t.flags|=1,dn(e,t,n,a),t.child)}function x1(e,t,n,i,a){if(In(n)){var l=!0;Vl(t)}else l=!1;if(Ps(t,a),t.stateNode===null)El(e,t),nx(t,n,i),bd(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var m=f.context,p=n.contextType;typeof p=="object"&&p!==null?p=Jn(p):(p=In(n)?Ki:cn.current,p=js(t,p));var C=n.getDerivedStateFromProps,E=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";E||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||m!==p)&&d1(t,f,i,p),oi=!1;var S=t.memoizedState;f.state=S,Yl(t,i,f,a),m=t.memoizedState,g!==i||S!==m||Tn.current||oi?(typeof C=="function"&&(Id(t,n,C,i),m=t.memoizedState),(g=oi||u1(t,n,g,i,S,m,p))?(E||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=m),f.props=i,f.state=m,f.context=p,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Pm(e,t),g=t.memoizedProps,p=t.type===t.elementType?g:ir(t.type,g),f.props=p,E=t.pendingProps,S=f.context,m=n.contextType,typeof m=="object"&&m!==null?m=Jn(m):(m=In(n)?Ki:cn.current,m=js(t,m));var R=n.getDerivedStateFromProps;(C=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==E||S!==m)&&d1(t,f,i,m),oi=!1,S=t.memoizedState,f.state=S,Yl(t,i,f,a);var O=t.memoizedState;g!==E||S!==O||Tn.current||oi?(typeof R=="function"&&(Id(t,n,R,i),O=t.memoizedState),(p=oi||u1(t,n,p,i,S,O,m)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,O,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,O,m)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=O),f.props=i,f.state=O,f.context=m,i=p):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),i=!1)}return Md(e,t,n,i,l,a)}function Md(e,t,n,i,a,l){ax(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&n1(t,n,!1),zr(e,t,l);i=t.stateNode,I3.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=Us(t,e.child,null,l),t.child=Us(t,null,g,l)):dn(e,t,g,l),t.memoizedState=i.state,a&&n1(t,n,!0),t.child}function lx(e){var t=e.stateNode;t.pendingContext?t1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&t1(e,t.context,!1),Gf(e,t.containerInfo)}function y1(e,t,n,i,a){return Fs(),Ff(a),t.flags|=256,dn(e,t,n,i),t.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Od(e){return{baseLanes:e,cachePool:null,transitions:null}}function cx(e,t,n){var i=t.pendingProps,a=Et.current,l=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),dt(Et,a&1),e===null)return Ad(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,l?(i=t.mode,l=t.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Ic(f,i,0,null),e=Yi(e,i,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Od(n),t.memoizedState=Dd,e):Jf(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return b3(e,t,f,i,g,a,n);if(l){l=i.fallback,f=t.mode,a=e.child,g=a.sibling;var m={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=m,t.deletions=null):(i=Ci(a,m),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?l=Ci(g,l):(l=Yi(l,f,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,f=e.child.memoizedState,f=f===null?Od(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=e.childLanes&~n,t.memoizedState=Dd,i}return l=e.child,e=l.sibling,i=Ci(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Jf(e,t){return t=Ic({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function nl(e,t,n,i){return i!==null&&Ff(i),Us(t,e.child,null,n),e=Jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function b3(e,t,n,i,a,l,f){if(n)return t.flags&256?(t.flags&=-257,i=Iu(Error(ae(422))),nl(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,a=t.mode,i=Ic({mode:"visible",children:i.children},a,0,null),l=Yi(l,a,f,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&Us(t,e.child,null,f),t.child.memoizedState=Od(f),t.memoizedState=Dd,l);if(!(t.mode&1))return nl(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(ae(419)),i=Iu(l,i,void 0),nl(e,t,f,i)}if(g=(f&e.childLanes)!==0,Sn||g){if(i=Xt,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Vr(e,a),cr(i,e,a,-1))}return sh(),i=Iu(Error(ae(421))),nl(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=U3.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,_n=mi(a.nextSibling),kn=t,xt=!0,ar=null,e!==null&&(Qn[Kn++]=kr,Qn[Kn++]=Pr,Qn[Kn++]=Zi,kr=e.id,Pr=e.overflow,Zi=t),t=Jf(t,i.children),t.flags|=4096,t)}function w1(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Td(e.return,t,n)}function bu(e,t,n,i,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a)}function ux(e,t,n){var i=t.pendingProps,a=i.revealOrder,l=i.tail;if(dn(e,t,i.children,n),i=Et.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w1(e,n,t);else if(e.tag===19)w1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(dt(Et,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Xl(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),bu(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Xl(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}bu(t,!0,n,null,l);break;case"together":bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function El(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Ci(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ci(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function N3(e,t,n){switch(t.tag){case 3:lx(t),Fs();break;case 5:Lm(t);break;case 1:In(t.type)&&Vl(t);break;case 4:Gf(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;dt(Wl,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(dt(Et,Et.current&1),t.flags|=128,null):n&t.child.childLanes?cx(e,t,n):(dt(Et,Et.current&1),e=zr(e,t,n),e!==null?e.sibling:null);dt(Et,Et.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return ux(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),dt(Et,Et.current),i)break;return null;case 22:case 23:return t.lanes=0,ox(e,t,n)}return zr(e,t,n)}var dx,_d,fx,hx;dx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_d=function(){};fx=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,zi(Tr.current);var l=null;switch(n){case"input":a=td(e,a),i=td(e,i),l=[];break;case"select":a=Tt({},a,{value:void 0}),i=Tt({},i,{value:void 0}),l=[];break;case"textarea":a=id(e,a),i=id(e,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Fl)}od(n,i);var f;n=null;for(p in a)if(!i.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var g=a[p];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ko.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var m=i[p];if(g=a!=null?a[p]:void 0,i.hasOwnProperty(p)&&m!==g&&(m!=null||g!=null))if(p==="style")if(g){for(f in g)!g.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in m)m.hasOwnProperty(f)&&g[f]!==m[f]&&(n||(n={}),n[f]=m[f])}else n||(l||(l=[]),l.push(p,n)),n=m;else p==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,g=g?g.__html:void 0,m!=null&&g!==m&&(l=l||[]).push(p,m)):p==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(p,""+m):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ko.hasOwnProperty(p)?(m!=null&&p==="onScroll"&&ht("scroll",e),l||g===m||(l=[])):(l=l||[]).push(p,m))}n&&(l=l||[]).push("style",n);var p=l;(t.updateQueue=p)&&(t.flags|=4)}};hx=function(e,t,n,i){n!==i&&(t.flags|=4)};function To(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function R3(e,t,n){var i=t.pendingProps;switch(jf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(t),null;case 1:return In(t.type)&&Ul(),sn(t),null;case 3:return i=t.stateNode,Vs(),pt(Tn),pt(cn),Xf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(el(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ar!==null&&(Vd(ar),ar=null))),_d(e,t),sn(t),null;case 5:Yf(t);var a=zi(aa.current);if(n=t.type,e!==null&&t.stateNode!=null)fx(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ae(166));return sn(t),null}if(e=zi(Tr.current),el(t)){i=t.stateNode,n=t.type;var l=t.memoizedProps;switch(i[Sr]=t,i[sa]=l,e=(t.mode&1)!==0,n){case"dialog":ht("cancel",i),ht("close",i);break;case"iframe":case"object":case"embed":ht("load",i);break;case"video":case"audio":for(a=0;a<Oo.length;a++)ht(Oo[a],i);break;case"source":ht("error",i);break;case"img":case"image":case"link":ht("error",i),ht("load",i);break;case"details":ht("toggle",i);break;case"input":N0(i,l),ht("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},ht("invalid",i);break;case"textarea":M0(i,l),ht("invalid",i)}od(n,l),a=null;for(var f in l)if(l.hasOwnProperty(f)){var g=l[f];f==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&Ja(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&Ja(i.textContent,g,e),a=["children",""+g]):Ko.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&ht("scroll",i)}switch(n){case"input":Ga(i),R0(i,l,!0);break;case"textarea":Ga(i),D0(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Fl)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Sr]=t,e[sa]=i,dx(e,t,!1,!1),t.stateNode=e;e:{switch(f=ad(n,i),n){case"dialog":ht("cancel",e),ht("close",e),a=i;break;case"iframe":case"object":case"embed":ht("load",e),a=i;break;case"video":case"audio":for(a=0;a<Oo.length;a++)ht(Oo[a],e);a=i;break;case"source":ht("error",e),a=i;break;case"img":case"image":case"link":ht("error",e),ht("load",e),a=i;break;case"details":ht("toggle",e),a=i;break;case"input":N0(e,i),a=td(e,i),ht("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Tt({},i,{value:void 0}),ht("invalid",e);break;case"textarea":M0(e,i),a=id(e,i),ht("invalid",e);break;default:a=i}od(n,a),g=a;for(l in g)if(g.hasOwnProperty(l)){var m=g[l];l==="style"?Wp(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&zp(e,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Zo(e,m):typeof m=="number"&&Zo(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ko.hasOwnProperty(l)?m!=null&&l==="onScroll"&&ht("scroll",e):m!=null&&Sf(e,l,m,f))}switch(n){case"input":Ga(e),R0(e,i,!1);break;case"textarea":Ga(e),D0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ei(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?Ds(e,!!i.multiple,l,!1):i.defaultValue!=null&&Ds(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sn(t),null;case 6:if(e&&t.stateNode!=null)hx(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ae(166));if(n=zi(aa.current),zi(Tr.current),el(t)){if(i=t.stateNode,n=t.memoizedProps,i[Sr]=t,(l=i.nodeValue!==n)&&(e=kn,e!==null))switch(e.tag){case 3:Ja(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ja(i.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sr]=t,t.stateNode=i}return sn(t),null;case 13:if(pt(Et),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xt&&_n!==null&&t.mode&1&&!(t.flags&128))Dm(),Fs(),t.flags|=98560,l=!1;else if(l=el(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(ae(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ae(317));l[Sr]=t}else Fs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sn(t),l=!1}else ar!==null&&(Vd(ar),ar=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Et.current&1?zt===0&&(zt=3):sh())),t.updateQueue!==null&&(t.flags|=4),sn(t),null);case 4:return Vs(),_d(e,t),e===null&&ra(t.stateNode.containerInfo),sn(t),null;case 10:return zf(t.type._context),sn(t),null;case 17:return In(t.type)&&Ul(),sn(t),null;case 19:if(pt(Et),l=t.memoizedState,l===null)return sn(t),null;if(i=(t.flags&128)!==0,f=l.rendering,f===null)if(i)To(l,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Xl(e),f!==null){for(t.flags|=128,To(l,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)l=n,e=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,e=f.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return dt(Et,Et.current&1|2),t.child}e=e.sibling}l.tail!==null&&Pt()>Hs&&(t.flags|=128,i=!0,To(l,!1),t.lanes=4194304)}else{if(!i)if(e=Xl(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),To(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!xt)return sn(t),null}else 2*Pt()-l.renderingStartTime>Hs&&n!==1073741824&&(t.flags|=128,i=!0,To(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(n=l.last,n!==null?n.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Pt(),t.sibling=null,n=Et.current,dt(Et,i?n&1|2:n&1),t):(sn(t),null);case 22:case 23:return ih(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Dn&1073741824&&(sn(t),t.subtreeFlags&6&&(t.flags|=8192)):sn(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function M3(e,t){switch(jf(t),t.tag){case 1:return In(t.type)&&Ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vs(),pt(Tn),pt(cn),Xf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yf(t),null;case 13:if(pt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Fs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pt(Et),null;case 4:return Vs(),null;case 10:return zf(t.type._context),null;case 22:case 23:return ih(),null;case 24:return null;default:return null}}var rl=!1,an=!1,D3=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Dt(e,t,i)}else n.current=null}function kd(e,t,n){try{n()}catch(i){Dt(e,t,i)}}var C1=!1;function O3(e,t){if(xd=Ll,e=ym(),Lf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,g=-1,m=-1,p=0,C=0,E=e,S=null;t:for(;;){for(var R;E!==n||a!==0&&E.nodeType!==3||(g=f+a),E!==l||i!==0&&E.nodeType!==3||(m=f+i),E.nodeType===3&&(f+=E.nodeValue.length),(R=E.firstChild)!==null;)S=E,E=R;for(;;){if(E===e)break t;if(S===n&&++p===a&&(g=f),S===l&&++C===i&&(m=f),(R=E.nextSibling)!==null)break;E=S,S=E.parentNode}E=R}n=g===-1||m===-1?null:{start:g,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:e,selectionRange:n},Ll=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var _=O.memoizedProps,j=O.memoizedState,N=t.stateNode,b=N.getSnapshotBeforeUpdate(t.elementType===t.type?_:ir(t.type,_),j);N.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(P){Dt(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return O=C1,C1=!1,O}function Uo(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&kd(t,n,l)}a=a.next}while(a!==i)}}function Ac(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Pd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gx(e){var t=e.alternate;t!==null&&(e.alternate=null,gx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sr],delete t[sa],delete t[Ed],delete t[g3],delete t[p3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function px(e){return e.tag===5||e.tag===3||e.tag===4}function E1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||px(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fl));else if(i!==4&&(e=e.child,e!==null))for(Ld(e,t,n),e=e.sibling;e!==null;)Ld(e,t,n),e=e.sibling}function Bd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Bd(e,t,n),e=e.sibling;e!==null;)Bd(e,t,n),e=e.sibling}var $t=null,sr=!1;function ni(e,t,n){for(n=n.child;n!==null;)mx(e,t,n),n=n.sibling}function mx(e,t,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(mc,n)}catch{}switch(n.tag){case 5:an||Ss(n,t);case 6:var i=$t,a=sr;$t=null,ni(e,t,n),$t=i,sr=a,$t!==null&&(sr?(e=$t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(sr?(e=$t,n=n.stateNode,e.nodeType===8?Cu(e.parentNode,n):e.nodeType===1&&Cu(e,n),ea(e)):Cu($t,n.stateNode));break;case 4:i=$t,a=sr,$t=n.stateNode.containerInfo,sr=!0,ni(e,t,n),$t=i,sr=a;break;case 0:case 11:case 14:case 15:if(!an&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&kd(n,t,f),a=a.next}while(a!==i)}ni(e,t,n);break;case 1:if(!an&&(Ss(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Dt(n,t,g)}ni(e,t,n);break;case 21:ni(e,t,n);break;case 22:n.mode&1?(an=(i=an)||n.memoizedState!==null,ni(e,t,n),an=i):ni(e,t,n);break;default:ni(e,t,n)}}function v1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new D3),t.forEach(function(i){var a=V3.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function nr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var l=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:$t=g.stateNode,sr=!1;break e;case 3:$t=g.stateNode.containerInfo,sr=!0;break e;case 4:$t=g.stateNode.containerInfo,sr=!0;break e}g=g.return}if($t===null)throw Error(ae(160));mx(l,f,a),$t=null,sr=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(p){Dt(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xx(t,e),t=t.sibling}function xx(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nr(t,e),Cr(e),i&4){try{Uo(3,e,e.return),Ac(3,e)}catch(_){Dt(e,e.return,_)}try{Uo(5,e,e.return)}catch(_){Dt(e,e.return,_)}}break;case 1:nr(t,e),Cr(e),i&512&&n!==null&&Ss(n,n.return);break;case 5:if(nr(t,e),Cr(e),i&512&&n!==null&&Ss(n,n.return),e.flags&32){var a=e.stateNode;try{Zo(a,"")}catch(_){Dt(e,e.return,_)}}if(i&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,f=n!==null?n.memoizedProps:l,g=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&Fp(a,l),ad(g,f);var p=ad(g,l);for(f=0;f<m.length;f+=2){var C=m[f],E=m[f+1];C==="style"?Wp(a,E):C==="dangerouslySetInnerHTML"?zp(a,E):C==="children"?Zo(a,E):Sf(a,C,E,p)}switch(g){case"input":nd(a,l);break;case"textarea":Up(a,l);break;case"select":var S=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?Ds(a,!!l.multiple,R,!1):S!==!!l.multiple&&(l.defaultValue!=null?Ds(a,!!l.multiple,l.defaultValue,!0):Ds(a,!!l.multiple,l.multiple?[]:"",!1))}a[sa]=l}catch(_){Dt(e,e.return,_)}}break;case 6:if(nr(t,e),Cr(e),i&4){if(e.stateNode===null)throw Error(ae(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(_){Dt(e,e.return,_)}}break;case 3:if(nr(t,e),Cr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ea(t.containerInfo)}catch(_){Dt(e,e.return,_)}break;case 4:nr(t,e),Cr(e);break;case 13:nr(t,e),Cr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(nh=Pt())),i&4&&v1(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(an=(p=an)||C,nr(t,e),an=p):nr(t,e),Cr(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!C&&e.mode&1)for(Ce=e,C=e.child;C!==null;){for(E=Ce=C;Ce!==null;){switch(S=Ce,R=S.child,S.tag){case 0:case 11:case 14:case 15:Uo(4,S,S.return);break;case 1:Ss(S,S.return);var O=S.stateNode;if(typeof O.componentWillUnmount=="function"){i=S,n=S.return;try{t=i,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(_){Dt(i,n,_)}}break;case 5:Ss(S,S.return);break;case 22:if(S.memoizedState!==null){A1(E);continue}}R!==null?(R.return=S,Ce=R):A1(E)}C=C.sibling}e:for(C=null,E=e;;){if(E.tag===5){if(C===null){C=E;try{a=E.stateNode,p?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=E.stateNode,m=E.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,g.style.display=Hp("display",f))}catch(_){Dt(e,e.return,_)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=p?"":E.memoizedProps}catch(_){Dt(e,e.return,_)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:nr(t,e),Cr(e),i&4&&v1(e);break;case 21:break;default:nr(t,e),Cr(e)}}function Cr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(px(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Zo(a,""),i.flags&=-33);var l=E1(e);Bd(e,l,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=E1(e);Ld(e,g,f);break;default:throw Error(ae(161))}}catch(m){Dt(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _3(e,t,n){Ce=e,yx(e)}function yx(e,t,n){for(var i=(e.mode&1)!==0;Ce!==null;){var a=Ce,l=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||rl;if(!f){var g=a.alternate,m=g!==null&&g.memoizedState!==null||an;g=rl;var p=an;if(rl=f,(an=m)&&!p)for(Ce=a;Ce!==null;)f=Ce,m=f.child,f.tag===22&&f.memoizedState!==null?T1(a):m!==null?(m.return=f,Ce=m):T1(a);for(;l!==null;)Ce=l,yx(l),l=l.sibling;Ce=a,rl=g,an=p}S1(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Ce=l):S1(e)}}function S1(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:an||Ac(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!an)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ir(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&a1(t,l,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}a1(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var C=p.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&ea(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}an||t.flags&512&&Pd(t)}catch(S){Dt(t,t.return,S)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function A1(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function T1(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ac(4,t)}catch(m){Dt(t,n,m)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(m){Dt(t,a,m)}}var l=t.return;try{Pd(t)}catch(m){Dt(t,l,m)}break;case 5:var f=t.return;try{Pd(t)}catch(m){Dt(t,f,m)}}}catch(m){Dt(t,t.return,m)}if(t===e){Ce=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ce=g;break}Ce=t.return}}var k3=Math.ceil,Zl=Xr.ReactCurrentDispatcher,eh=Xr.ReactCurrentOwner,$n=Xr.ReactCurrentBatchConfig,et=0,Xt=null,Lt=null,Jt=0,Dn=0,As=Ii(0),zt=0,da=null,qi=0,Tc=0,th=0,Vo=null,vn=null,nh=0,Hs=1/0,Or=null,$l=!1,jd=null,yi=null,il=!1,ui=null,ql=0,zo=0,Fd=null,vl=-1,Sl=0;function hn(){return et&6?Pt():vl!==-1?vl:vl=Pt()}function wi(e){return e.mode&1?et&2&&Jt!==0?Jt&-Jt:x3.transition!==null?(Sl===0&&(Sl=nm()),Sl):(e=it,e!==0||(e=window.event,e=e===void 0?16:cm(e.type)),e):1}function cr(e,t,n,i){if(50<zo)throw zo=0,Fd=null,Error(ae(185));va(e,n,i),(!(et&2)||e!==Xt)&&(e===Xt&&(!(et&2)&&(Tc|=n),zt===4&&li(e,Jt)),bn(e,i),n===1&&et===0&&!(t.mode&1)&&(Hs=Pt()+500,Ec&&bi()))}function bn(e,t){var n=e.callbackNode;xC(e,t);var i=Pl(e,e===Xt?Jt:0);if(i===0)n!==null&&k0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&k0(n),t===1)e.tag===0?m3(I1.bind(null,e)):Nm(I1.bind(null,e)),f3(function(){!(et&6)&&bi()}),n=null;else{switch(rm(i)){case 1:n=Nf;break;case 4:n=em;break;case 16:n=kl;break;case 536870912:n=tm;break;default:n=kl}n=Ix(n,wx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wx(e,t){if(vl=-1,Sl=0,et&6)throw Error(ae(327));var n=e.callbackNode;if(Ls()&&e.callbackNode!==n)return null;var i=Pl(e,e===Xt?Jt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Jl(e,i);else{t=i;var a=et;et|=2;var l=Ex();(Xt!==e||Jt!==t)&&(Or=null,Hs=Pt()+500,Gi(e,t));do try{B3();break}catch(g){Cx(e,g)}while(1);Vf(),Zl.current=l,et=a,Lt!==null?t=0:(Xt=null,Jt=0,t=zt)}if(t!==0){if(t===2&&(a=fd(e),a!==0&&(i=a,t=Ud(e,a))),t===1)throw n=da,Gi(e,0),li(e,i),bn(e,Pt()),n;if(t===6)li(e,i);else{if(a=e.current.alternate,!(i&30)&&!P3(a)&&(t=Jl(e,i),t===2&&(l=fd(e),l!==0&&(i=l,t=Ud(e,l))),t===1))throw n=da,Gi(e,0),li(e,i),bn(e,Pt()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(ae(345));case 2:ji(e,vn,Or);break;case 3:if(li(e,i),(i&130023424)===i&&(t=nh+500-Pt(),10<t)){if(Pl(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){hn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Cd(ji.bind(null,e,vn,Or),t);break}ji(e,vn,Or);break;case 4:if(li(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-lr(i);l=1<<f,f=t[f],f>a&&(a=f),i&=~l}if(i=a,i=Pt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*k3(i/1960))-i,10<i){e.timeoutHandle=Cd(ji.bind(null,e,vn,Or),i);break}ji(e,vn,Or);break;case 5:ji(e,vn,Or);break;default:throw Error(ae(329))}}}return bn(e,Pt()),e.callbackNode===n?wx.bind(null,e):null}function Ud(e,t){var n=Vo;return e.current.memoizedState.isDehydrated&&(Gi(e,t).flags|=256),e=Jl(e,t),e!==2&&(t=vn,vn=n,t!==null&&Vd(t)),e}function Vd(e){vn===null?vn=e:vn.push.apply(vn,e)}function P3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],l=a.getSnapshot;a=a.value;try{if(!ur(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function li(e,t){for(t&=~th,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-lr(t),i=1<<n;e[n]=-1,t&=~i}}function I1(e){if(et&6)throw Error(ae(327));Ls();var t=Pl(e,0);if(!(t&1))return bn(e,Pt()),null;var n=Jl(e,t);if(e.tag!==0&&n===2){var i=fd(e);i!==0&&(t=i,n=Ud(e,i))}if(n===1)throw n=da,Gi(e,0),li(e,t),bn(e,Pt()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ji(e,vn,Or),bn(e,Pt()),null}function rh(e,t){var n=et;et|=1;try{return e(t)}finally{et=n,et===0&&(Hs=Pt()+500,Ec&&bi())}}function Ji(e){ui!==null&&ui.tag===0&&!(et&6)&&Ls();var t=et;et|=1;var n=$n.transition,i=it;try{if($n.transition=null,it=1,e)return e()}finally{it=i,$n.transition=n,et=t,!(et&6)&&bi()}}function ih(){Dn=As.current,pt(As)}function Gi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,d3(n)),Lt!==null)for(n=Lt.return;n!==null;){var i=n;switch(jf(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ul();break;case 3:Vs(),pt(Tn),pt(cn),Xf();break;case 5:Yf(i);break;case 4:Vs();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:zf(i.type._context);break;case 22:case 23:ih()}n=n.return}if(Xt=e,Lt=e=Ci(e.current,null),Jt=Dn=t,zt=0,da=null,th=Tc=qi=0,vn=Vo=null,Vi!==null){for(t=0;t<Vi.length;t++)if(n=Vi[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=a,i.next=f}n.pending=i}Vi=null}return e}function Cx(e,t){do{var n=Lt;try{if(Vf(),wl.current=Kl,Ql){for(var i=St.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Ql=!1}if($i=0,Yt=Vt=St=null,Fo=!1,la=0,eh.current=null,n===null||n.return===null){zt=1,da=t,Lt=null;break}e:{var l=e,f=n.return,g=n,m=t;if(t=Jt,g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var p=m,C=g,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var S=C.alternate;S?(C.updateQueue=S.updateQueue,C.memoizedState=S.memoizedState,C.lanes=S.lanes):(C.updateQueue=null,C.memoizedState=null)}var R=h1(f);if(R!==null){R.flags&=-257,g1(R,f,g,l,t),R.mode&1&&f1(l,p,t),t=R,m=p;var O=t.updateQueue;if(O===null){var _=new Set;_.add(m),t.updateQueue=_}else O.add(m);break e}else{if(!(t&1)){f1(l,p,t),sh();break e}m=Error(ae(426))}}else if(xt&&g.mode&1){var j=h1(f);if(j!==null){!(j.flags&65536)&&(j.flags|=256),g1(j,f,g,l,t),Ff(zs(m,g));break e}}l=m=zs(m,g),zt!==4&&(zt=2),Vo===null?Vo=[l]:Vo.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var N=rx(l,m,t);o1(l,N);break e;case 1:g=m;var b=l.type,I=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(yi===null||!yi.has(I)))){l.flags|=65536,t&=-t,l.lanes|=t;var P=ix(l,g,t);o1(l,P);break e}}l=l.return}while(l!==null)}Sx(n)}catch(F){t=F,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(1)}function Ex(){var e=Zl.current;return Zl.current=Kl,e===null?Kl:e}function sh(){(zt===0||zt===3||zt===2)&&(zt=4),Xt===null||!(qi&268435455)&&!(Tc&268435455)||li(Xt,Jt)}function Jl(e,t){var n=et;et|=2;var i=Ex();(Xt!==e||Jt!==t)&&(Or=null,Gi(e,t));do try{L3();break}catch(a){Cx(e,a)}while(1);if(Vf(),et=n,Zl.current=i,Lt!==null)throw Error(ae(261));return Xt=null,Jt=0,zt}function L3(){for(;Lt!==null;)vx(Lt)}function B3(){for(;Lt!==null&&!lC();)vx(Lt)}function vx(e){var t=Tx(e.alternate,e,Dn);e.memoizedProps=e.pendingProps,t===null?Sx(e):Lt=t,eh.current=null}function Sx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=M3(n,t),n!==null){n.flags&=32767,Lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,Lt=null;return}}else if(n=R3(n,t,Dn),n!==null){Lt=n;return}if(t=t.sibling,t!==null){Lt=t;return}Lt=t=e}while(t!==null);zt===0&&(zt=5)}function ji(e,t,n){var i=it,a=$n.transition;try{$n.transition=null,it=1,j3(e,t,n,i)}finally{$n.transition=a,it=i}return null}function j3(e,t,n,i){do Ls();while(ui!==null);if(et&6)throw Error(ae(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(yC(e,l),e===Xt&&(Lt=Xt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,Ix(kl,function(){return Ls(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=$n.transition,$n.transition=null;var f=it;it=1;var g=et;et|=4,eh.current=null,O3(e,n),xx(n,e),i3(yd),Ll=!!xd,yd=xd=null,e.current=n,_3(n),cC(),et=g,it=f,$n.transition=l}else e.current=n;if(il&&(il=!1,ui=e,ql=a),l=e.pendingLanes,l===0&&(yi=null),fC(n.stateNode),bn(e,Pt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,e=jd,jd=null,e;return ql&1&&e.tag!==0&&Ls(),l=e.pendingLanes,l&1?e===Fd?zo++:(zo=0,Fd=e):zo=0,bi(),null}function Ls(){if(ui!==null){var e=rm(ql),t=$n.transition,n=it;try{if($n.transition=null,it=16>e?16:e,ui===null)var i=!1;else{if(e=ui,ui=null,ql=0,et&6)throw Error(ae(331));var a=et;for(et|=4,Ce=e.current;Ce!==null;){var l=Ce,f=l.child;if(Ce.flags&16){var g=l.deletions;if(g!==null){for(var m=0;m<g.length;m++){var p=g[m];for(Ce=p;Ce!==null;){var C=Ce;switch(C.tag){case 0:case 11:case 15:Uo(8,C,l)}var E=C.child;if(E!==null)E.return=C,Ce=E;else for(;Ce!==null;){C=Ce;var S=C.sibling,R=C.return;if(gx(C),C===p){Ce=null;break}if(S!==null){S.return=R,Ce=S;break}Ce=R}}}var O=l.alternate;if(O!==null){var _=O.child;if(_!==null){O.child=null;do{var j=_.sibling;_.sibling=null,_=j}while(_!==null)}}Ce=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ce=f;else e:for(;Ce!==null;){if(l=Ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Uo(9,l,l.return)}var N=l.sibling;if(N!==null){N.return=l.return,Ce=N;break e}Ce=l.return}}var b=e.current;for(Ce=b;Ce!==null;){f=Ce;var I=f.child;if(f.subtreeFlags&2064&&I!==null)I.return=f,Ce=I;else e:for(f=b;Ce!==null;){if(g=Ce,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Ac(9,g)}}catch(F){Dt(g,g.return,F)}if(g===f){Ce=null;break e}var P=g.sibling;if(P!==null){P.return=g.return,Ce=P;break e}Ce=g.return}}if(et=a,bi(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(mc,e)}catch{}i=!0}return i}finally{it=n,$n.transition=t}}return!1}function b1(e,t,n){t=zs(n,t),t=rx(e,t,1),e=xi(e,t,1),t=hn(),e!==null&&(va(e,1,t),bn(e,t))}function Dt(e,t,n){if(e.tag===3)b1(e,e,n);else for(;t!==null;){if(t.tag===3){b1(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yi===null||!yi.has(i))){e=zs(n,e),e=ix(t,e,1),t=xi(t,e,1),e=hn(),t!==null&&(va(t,1,e),bn(t,e));break}}t=t.return}}function F3(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=hn(),e.pingedLanes|=e.suspendedLanes&n,Xt===e&&(Jt&n)===n&&(zt===4||zt===3&&(Jt&130023424)===Jt&&500>Pt()-nh?Gi(e,0):th|=n),bn(e,t)}function Ax(e,t){t===0&&(e.mode&1?(t=Qa,Qa<<=1,!(Qa&130023424)&&(Qa=4194304)):t=1);var n=hn();e=Vr(e,t),e!==null&&(va(e,t,n),bn(e,n))}function U3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ax(e,n)}function V3(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(t),Ax(e,n)}var Tx;Tx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tn.current)Sn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Sn=!1,N3(e,t,n);Sn=!!(e.flags&131072)}else Sn=!1,xt&&t.flags&1048576&&Rm(t,Hl,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;El(e,t),e=t.pendingProps;var a=js(t,cn.current);Ps(t,n),a=Kf(null,t,i,e,a,n);var l=Zf();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(i)?(l=!0,Vl(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Wf(t),a.updater=Sc,t.stateNode=a,a._reactInternals=t,bd(t,i,e,n),t=Md(null,t,i,!0,l,n)):(t.tag=0,xt&&l&&Bf(t),dn(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(El(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=H3(i),e=ir(i,e),a){case 0:t=Rd(null,t,i,e,n);break e;case 1:t=x1(null,t,i,e,n);break e;case 11:t=p1(null,t,i,e,n);break e;case 14:t=m1(null,t,i,ir(i.type,e),n);break e}throw Error(ae(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ir(i,a),Rd(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ir(i,a),x1(e,t,i,a,n);case 3:e:{if(lx(t),e===null)throw Error(ae(387));i=t.pendingProps,l=t.memoizedState,a=l.element,Pm(e,t),Yl(t,i,null,n);var f=t.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=zs(Error(ae(423)),t),t=y1(e,t,i,n,a);break e}else if(i!==a){a=zs(Error(ae(424)),t),t=y1(e,t,i,n,a);break e}else for(_n=mi(t.stateNode.containerInfo.firstChild),kn=t,xt=!0,ar=null,n=_m(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),i===a){t=zr(e,t,n);break e}dn(e,t,i,n)}t=t.child}return t;case 5:return Lm(t),e===null&&Ad(t),i=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,f=a.children,wd(i,a)?f=null:l!==null&&wd(i,l)&&(t.flags|=32),ax(e,t),dn(e,t,f,n),t.child;case 6:return e===null&&Ad(t),null;case 13:return cx(e,t,n);case 4:return Gf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Us(t,null,i,n):dn(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ir(i,a),p1(e,t,i,a,n);case 7:return dn(e,t,t.pendingProps,n),t.child;case 8:return dn(e,t,t.pendingProps.children,n),t.child;case 12:return dn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,l=t.memoizedProps,f=a.value,dt(Wl,i._currentValue),i._currentValue=f,l!==null)if(ur(l.value,f)){if(l.children===a.children&&!Tn.current){t=zr(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var g=l.dependencies;if(g!==null){f=l.child;for(var m=g.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=Br(-1,n&-n),m.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var C=p.pending;C===null?m.next=m:(m.next=C.next,C.next=m),p.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Td(l.return,n,t),g.lanes|=n;break}m=m.next}}else if(l.tag===10)f=l.type===t.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ae(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),Td(f,n,t),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===t){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}dn(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Ps(t,n),a=Jn(a),i=i(a),t.flags|=1,dn(e,t,i,n),t.child;case 14:return i=t.type,a=ir(i,t.pendingProps),a=ir(i.type,a),m1(e,t,i,a,n);case 15:return sx(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ir(i,a),El(e,t),t.tag=1,In(i)?(e=!0,Vl(t)):e=!1,Ps(t,n),nx(t,i,a),bd(t,i,a,n),Md(null,t,i,!0,e,n);case 19:return ux(e,t,n);case 22:return ox(e,t,n)}throw Error(ae(156,t.tag))};function Ix(e,t){return Jp(e,t)}function z3(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,n,i){return new z3(e,t,n,i)}function oh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H3(e){if(typeof e=="function")return oh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tf)return 11;if(e===If)return 14}return 2}function Ci(e,t){var n=e.alternate;return n===null?(n=Zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Al(e,t,n,i,a,l){var f=2;if(i=e,typeof e=="function")oh(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case gs:return Yi(n.children,a,l,t);case Af:f=8,a|=8;break;case $u:return e=Zn(12,n,t,a|2),e.elementType=$u,e.lanes=l,e;case qu:return e=Zn(13,n,t,a),e.elementType=qu,e.lanes=l,e;case Ju:return e=Zn(19,n,t,a),e.elementType=Ju,e.lanes=l,e;case Lp:return Ic(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kp:f=10;break e;case Pp:f=9;break e;case Tf:f=11;break e;case If:f=14;break e;case si:f=16,i=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Zn(f,n,t,a),t.elementType=e,t.type=i,t.lanes=l,t}function Yi(e,t,n,i){return e=Zn(7,e,i,t),e.lanes=n,e}function Ic(e,t,n,i){return e=Zn(22,e,i,t),e.elementType=Lp,e.lanes=n,e.stateNode={isHidden:!1},e}function Nu(e,t,n){return e=Zn(6,e,null,t),e.lanes=n,e}function Ru(e,t,n){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function W3(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ah(e,t,n,i,a,l,f,g,m){return e=new W3(e,t,n,g,m),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Zn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wf(l),e}function G3(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function bx(e){if(!e)return vi;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(In(n))return bm(e,n,t)}return t}function Nx(e,t,n,i,a,l,f,g,m){return e=ah(n,i,!0,e,a,l,f,g,m),e.context=bx(null),n=e.current,i=hn(),a=wi(n),l=Br(i,a),l.callback=t??null,xi(n,l,a),e.current.lanes=a,va(e,a,i),bn(e,i),e}function bc(e,t,n,i){var a=t.current,l=hn(),f=wi(a);return n=bx(n),t.context===null?t.context=n:t.pendingContext=n,t=Br(l,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=xi(a,t,f),e!==null&&(cr(e,a,f,l),yl(e,a,f)),f}function ec(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function N1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lh(e,t){N1(e,t),(e=e.alternate)&&N1(e,t)}function Y3(){return null}var Rx=typeof reportError=="function"?reportError:function(e){console.error(e)};function ch(e){this._internalRoot=e}Nc.prototype.render=ch.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));bc(e,t,null,null)};Nc.prototype.unmount=ch.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ji(function(){bc(null,e,null,null)}),t[Ur]=null}};function Nc(e){this._internalRoot=e}Nc.prototype.unstable_scheduleHydration=function(e){if(e){var t=om();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ai.length&&t!==0&&t<ai[n].priority;n++);ai.splice(n,0,e),n===0&&lm(e)}};function uh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function R1(){}function X3(e,t,n,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var p=ec(f);l.call(p)}}var f=Nx(t,i,e,0,null,!1,!1,"",R1);return e._reactRootContainer=f,e[Ur]=f.current,ra(e.nodeType===8?e.parentNode:e),Ji(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var p=ec(m);g.call(p)}}var m=ah(e,0,!1,null,null,!1,!1,"",R1);return e._reactRootContainer=m,e[Ur]=m.current,ra(e.nodeType===8?e.parentNode:e),Ji(function(){bc(t,m,n,i)}),m}function Mc(e,t,n,i,a){var l=n._reactRootContainer;if(l){var f=l;if(typeof a=="function"){var g=a;a=function(){var m=ec(f);g.call(m)}}bc(t,f,e,a)}else f=X3(n,t,e,a,i);return ec(f)}im=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Do(t.pendingLanes);n!==0&&(Rf(t,n|1),bn(t,Pt()),!(et&6)&&(Hs=Pt()+500,bi()))}break;case 13:Ji(function(){var i=Vr(e,1);if(i!==null){var a=hn();cr(i,e,1,a)}}),lh(e,1)}};Mf=function(e){if(e.tag===13){var t=Vr(e,134217728);if(t!==null){var n=hn();cr(t,e,134217728,n)}lh(e,134217728)}};sm=function(e){if(e.tag===13){var t=wi(e),n=Vr(e,t);if(n!==null){var i=hn();cr(n,e,t,i)}lh(e,t)}};om=function(){return it};am=function(e,t){var n=it;try{return it=e,t()}finally{it=n}};cd=function(e,t,n){switch(t){case"input":if(nd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=Cc(i);if(!a)throw Error(ae(90));jp(i),nd(i,a)}}}break;case"textarea":Up(e,n);break;case"select":t=n.value,t!=null&&Ds(e,!!n.multiple,t,!1)}};Xp=rh;Qp=Ji;var Q3={usingClientEntryPoint:!1,Events:[Aa,ys,Cc,Gp,Yp,rh]},Io={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K3={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$p(e),e===null?null:e.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||Y3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{mc=sl.inject(K3),Ar=sl}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q3;Ln.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uh(t))throw Error(ae(200));return G3(e,t,null,n)};Ln.createRoot=function(e,t){if(!uh(e))throw Error(ae(299));var n=!1,i="",a=Rx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ah(e,1,!1,null,null,n,!1,i,a),e[Ur]=t.current,ra(e.nodeType===8?e.parentNode:e),new ch(t)};Ln.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=$p(t),e=e===null?null:e.stateNode,e};Ln.flushSync=function(e){return Ji(e)};Ln.hydrate=function(e,t,n){if(!Rc(t))throw Error(ae(200));return Mc(null,e,t,!0,n)};Ln.hydrateRoot=function(e,t,n){if(!uh(e))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,a=!1,l="",f=Rx;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Nx(t,null,e,1,n??null,a,!1,l,f),e[Ur]=t.current,ra(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Nc(t)};Ln.render=function(e,t,n){if(!Rc(t))throw Error(ae(200));return Mc(null,e,t,!1,n)};Ln.unmountComponentAtNode=function(e){if(!Rc(e))throw Error(ae(40));return e._reactRootContainer?(Ji(function(){Mc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ur]=null})}),!0):!1};Ln.unstable_batchedUpdates=rh;Ln.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Rc(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Mc(e,t,n,!1,i)};Ln.version="18.3.1-next-f1338f8080-20240426";function Mx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mx)}catch(e){console.error(e)}}Mx(),Mp.exports=Ln;var Z3=Mp.exports,Dx,M1=Z3;Dx=M1.createRoot,M1.hydrateRoot;const $3="modulepreload",q3=function(e){return"/"+e},D1={},J3=function(t,n,i){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=q3(l),l in D1)return;D1[l]=!0;const f=l.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(!!i)for(let C=a.length-1;C>=0;C--){const E=a[C];if(E.href===l&&(!f||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":$3,f||(p.as="script",p.crossOrigin=""),p.href=l,document.head.appendChild(p),f)return new Promise((C,E)=>{p.addEventListener("load",C),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l})};var dh={};Object.defineProperty(dh,"__esModule",{value:!0});dh.parse=oE;dh.serialize=aE;const eE=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,tE=/^[\u0021-\u003A\u003C-\u007E]*$/,nE=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,rE=/^[\u0020-\u003A\u003D-\u007E]*$/,iE=Object.prototype.toString,sE=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function oE(e,t){const n=new sE,i=e.length;if(i<2)return n;const a=(t==null?void 0:t.decode)||lE;let l=0;do{const f=e.indexOf("=",l);if(f===-1)break;const g=e.indexOf(";",l),m=g===-1?i:g;if(f>m){l=e.lastIndexOf(";",f-1)+1;continue}const p=O1(e,l,f),C=_1(e,f,p),E=e.slice(p,C);if(n[E]===void 0){let S=O1(e,f+1,m),R=_1(e,m,S);const O=a(e.slice(S,R));n[E]=O}l=m+1}while(l<i);return n}function O1(e,t,n){do{const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}while(++t<n);return n}function _1(e,t,n){for(;t>n;){const i=e.charCodeAt(--t);if(i!==32&&i!==9)return t+1}return n}function aE(e,t,n){const i=(n==null?void 0:n.encode)||encodeURIComponent;if(!eE.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=i(t);if(!tE.test(a))throw new TypeError(`argument val is invalid: ${t}`);let l=e+"="+a;if(!n)return l;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);l+="; Max-Age="+n.maxAge}if(n.domain){if(!nE.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);l+="; Domain="+n.domain}if(n.path){if(!rE.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);l+="; Path="+n.path}if(n.expires){if(!cE(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.partitioned&&(l+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return l}function lE(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function cE(e){return iE.call(e)==="[object Date]"}var k1="popstate";function uE(e={}){function t(i,a){let{pathname:l,search:f,hash:g}=i.location;return zd("",{pathname:l,search:f,hash:g},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:fa(a)}return fE(t,n,null,e)}function yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dE(){return Math.random().toString(36).substring(2,10)}function P1(e,t){return{usr:e.state,key:e.key,idx:t}}function zd(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?eo(t):t,state:n,key:t&&t.key||i||dE()}}function fa({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function eo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function fE(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,f=a.history,g="POP",m=null,p=C();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function C(){return(f.state||{idx:null}).idx}function E(){g="POP";let j=C(),N=j==null?null:j-p;p=j,m&&m({action:g,location:_.location,delta:N})}function S(j,N){g="PUSH";let b=zd(_.location,j,N);n&&n(b,j),p=C()+1;let I=P1(b,p),P=_.createHref(b);try{f.pushState(I,"",P)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;a.location.assign(P)}l&&m&&m({action:g,location:_.location,delta:1})}function R(j,N){g="REPLACE";let b=zd(_.location,j,N);n&&n(b,j),p=C();let I=P1(b,p),P=_.createHref(b);f.replaceState(I,"",P),l&&m&&m({action:g,location:_.location,delta:0})}function O(j){return hE(j)}let _={get action(){return g},get location(){return e(a,f)},listen(j){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(k1,E),m=j,()=>{a.removeEventListener(k1,E),m=null}},createHref(j){return t(a,j)},createURL:O,encodeLocation(j){let N=O(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:S,replace:R,go(j){return f.go(j)}};return _}function hE(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yt(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:fa(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Ox(e,t,n="/"){return gE(e,t,n,!1)}function gE(e,t,n,i){let a=typeof t=="string"?eo(t):t,l=Hr(a.pathname||"/",n);if(l==null)return null;let f=_x(e);pE(f);let g=null;for(let m=0;g==null&&m<f.length;++m){let p=IE(l);g=AE(f[m],p,i)}return g}function _x(e,t=[],n=[],i=""){let a=(l,f,g)=>{let m={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};m.relativePath.startsWith("/")&&(yt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=jr([i,m.relativePath]),C=n.concat(m);l.children&&l.children.length>0&&(yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),_x(l.children,t,C,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:vE(p,l.index),routesMeta:C})};return e.forEach((l,f)=>{var g;if(l.path===""||!((g=l.path)!=null&&g.includes("?")))a(l,f);else for(let m of kx(l.path))a(l,f,m)}),t}function kx(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let f=kx(i.join("/")),g=[];return g.push(...f.map(m=>m===""?l:[l,m].join("/"))),a&&g.push(...f),g.map(m=>e.startsWith("/")&&m===""?"/":m)}function pE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:SE(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var mE=/^:[\w-]+$/,xE=3,yE=2,wE=1,CE=10,EE=-2,L1=e=>e==="*";function vE(e,t){let n=e.split("/"),i=n.length;return n.some(L1)&&(i+=EE),t&&(i+=yE),n.filter(a=>!L1(a)).reduce((a,l)=>a+(mE.test(l)?xE:l===""?wE:CE),i)}function SE(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function AE(e,t,n=!1){let{routesMeta:i}=e,a={},l="/",f=[];for(let g=0;g<i.length;++g){let m=i[g],p=g===i.length-1,C=l==="/"?t:t.slice(l.length)||"/",E=tc({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},C),S=m.route;if(!E&&p&&n&&!i[i.length-1].route.index&&(E=tc({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},C)),!E)return null;Object.assign(a,E.params),f.push({params:a,pathname:jr([l,E.pathname]),pathnameBase:ME(jr([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=jr([l,E.pathnameBase]))}return f}function tc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=TE(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],f=l.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((p,{paramName:C,isOptional:E},S)=>{if(C==="*"){let O=g[S]||"";f=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const R=g[S];return E&&!R?p[C]=void 0:p[C]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:f,pattern:e}}function TE(e,t=!1,n=!0){dr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,m)=>(i.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function IE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return dr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function bE(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?eo(e):e;return{pathname:n?n.startsWith("/")?n:NE(n,t):t,search:DE(i),hash:OE(a)}}function NE(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Mu(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function fh(e){let t=RE(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function hh(e,t,n,i=!1){let a;typeof e=="string"?a=eo(e):(a={...e},yt(!a.pathname||!a.pathname.includes("?"),Mu("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),Mu("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),Mu("#","search","hash",a)));let l=e===""||a.pathname==="",f=l?"/":a.pathname,g;if(f==null)g=n;else{let E=t.length-1;if(!i&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),E-=1;a.pathname=S.join("/")}g=E>=0?t[E]:"/"}let m=bE(a,g),p=f&&f!=="/"&&f.endsWith("/"),C=(l||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||C)&&(m.pathname+="/"),m}var jr=e=>e.join("/").replace(/\/\/+/g,"/"),ME=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _E(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Px=["POST","PUT","PATCH","DELETE"];new Set(Px);var kE=["GET",...Px];new Set(kE);var to=D.createContext(null);to.displayName="DataRouter";var Dc=D.createContext(null);Dc.displayName="DataRouterState";var Lx=D.createContext({isTransitioning:!1});Lx.displayName="ViewTransition";var PE=D.createContext(new Map);PE.displayName="Fetchers";var LE=D.createContext(null);LE.displayName="Await";var fr=D.createContext(null);fr.displayName="Navigation";var Ia=D.createContext(null);Ia.displayName="Location";var Rr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var gh=D.createContext(null);gh.displayName="RouteError";function BE(e,{relative:t}={}){yt(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(fr),{hash:a,pathname:l,search:f}=ba(e,{relative:t}),g=l;return n!=="/"&&(g=l==="/"?n:jr([n,l])),i.createHref({pathname:g,search:f,hash:a})}function no(){return D.useContext(Ia)!=null}function Mr(){return yt(no(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Ia).location}var Bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jx(e){D.useContext(fr).static||D.useLayoutEffect(e)}function Qr(){let{isDataRoute:e}=D.useContext(Rr);return e?ZE():jE()}function jE(){yt(no(),"useNavigate() may be used only in the context of a <Router> component.");let e=D.useContext(to),{basename:t,navigator:n}=D.useContext(fr),{matches:i}=D.useContext(Rr),{pathname:a}=Mr(),l=JSON.stringify(fh(i)),f=D.useRef(!1);return jx(()=>{f.current=!0}),D.useCallback((m,p={})=>{if(dr(f.current,Bx),!f.current)return;if(typeof m=="number"){n.go(m);return}let C=hh(m,JSON.parse(l),a,p.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:jr([t,C.pathname])),(p.replace?n.replace:n.push)(C,p.state,p)},[t,n,l,a,e])}D.createContext(null);function ba(e,{relative:t}={}){let{matches:n}=D.useContext(Rr),{pathname:i}=Mr(),a=JSON.stringify(fh(n));return D.useMemo(()=>hh(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function FE(e,t){return Fx(e,t)}function Fx(e,t,n,i){var N;yt(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(fr),{matches:l}=D.useContext(Rr),f=l[l.length-1],g=f?f.params:{},m=f?f.pathname:"/",p=f?f.pathnameBase:"/",C=f&&f.route;{let b=C&&C.path||"";Ux(m,!C||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let E=Mr(),S;if(t){let b=typeof t=="string"?eo(t):t;yt(p==="/"||((N=b.pathname)==null?void 0:N.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${b.pathname}" was given in the \`location\` prop.`),S=b}else S=E;let R=S.pathname||"/",O=R;if(p!=="/"){let b=p.replace(/^\//,"").split("/");O="/"+R.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=Ox(e,{pathname:O});dr(C||_!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),dr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=WE(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},g,b.params),pathname:jr([p,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?p:jr([p,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,i);return t&&j?D.createElement(Ia.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},j):j}function UE(){let e=KE(),t=_E(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:l},"ErrorBoundary")," or"," ",D.createElement("code",{style:l},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:a},n):null,f)}var VE=D.createElement(UE,null),zE=class extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Rr.Provider,{value:this.props.routeContext},D.createElement(gh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HE({routeContext:e,match:t,children:n}){let i=D.useContext(to);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Rr.Provider,{value:e},n)}function WE(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);yt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let f=!1,g=-1;if(n)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(g=m),p.route.id){let{loaderData:C,errors:E}=n,S=p.route.loader&&!C.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){f=!0,g>=0?a=a.slice(0,g+1):a=[a[0]];break}}}return a.reduceRight((m,p,C)=>{let E,S=!1,R=null,O=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||VE,f&&(g<0&&C===0?(Ux("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,O=null):g===C&&(S=!0,O=p.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,C+1)),j=()=>{let N;return E?N=R:S?N=O:p.route.Component?N=D.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=m,D.createElement(HE,{match:p,routeContext:{outlet:m,matches:_,isDataRoute:n!=null},children:N})};return n&&(p.route.ErrorBoundary||p.route.errorElement||C===0)?D.createElement(zE,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:j(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):j()},null)}function ph(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GE(e){let t=D.useContext(to);return yt(t,ph(e)),t}function YE(e){let t=D.useContext(Dc);return yt(t,ph(e)),t}function XE(e){let t=D.useContext(Rr);return yt(t,ph(e)),t}function mh(e){let t=XE(e),n=t.matches[t.matches.length-1];return yt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function QE(){return mh("useRouteId")}function KE(){var i;let e=D.useContext(gh),t=YE("useRouteError"),n=mh("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function ZE(){let{router:e}=GE("useNavigate"),t=mh("useNavigate"),n=D.useRef(!1);return jx(()=>{n.current=!0}),D.useCallback(async(a,l={})=>{dr(n.current,Bx),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var B1={};function Ux(e,t,n){!t&&!B1[e]&&(B1[e]=!0,dr(!1,n))}D.memo($E);function $E({routes:e,future:t,state:n}){return Fx(e,void 0,n,t)}function qE({to:e,replace:t,state:n,relative:i}){yt(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=D.useContext(fr);dr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=D.useContext(Rr),{pathname:f}=Mr(),g=Qr(),m=hh(e,fh(l),f,i==="path"),p=JSON.stringify(m);return D.useEffect(()=>{g(JSON.parse(p),{replace:t,state:n,relative:i})},[g,p,i,t,n]),null}function Yn(e){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JE({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:l=!1}){yt(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),g=D.useMemo(()=>({basename:f,navigator:a,static:l,future:{}}),[f,a,l]);typeof n=="string"&&(n=eo(n));let{pathname:m="/",search:p="",hash:C="",state:E=null,key:S="default"}=n,R=D.useMemo(()=>{let O=Hr(m,f);return O==null?null:{location:{pathname:O,search:p,hash:C,state:E,key:S},navigationType:i}},[f,m,p,C,E,S,i]);return dr(R!=null,`<Router basename="${f}"> is not able to match the URL "${m}${p}${C}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:D.createElement(fr.Provider,{value:g},D.createElement(Ia.Provider,{children:t,value:R}))}function ev({children:e,location:t}){return FE(Hd(e),t)}function Hd(e,t=[]){let n=[];return D.Children.forEach(e,(i,a)=>{if(!D.isValidElement(i))return;let l=[...t,a];if(i.type===D.Fragment){n.push.apply(n,Hd(i.props.children,l));return}yt(i.type===Yn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Hd(i.props.children,l)),n.push(f)}),n}var Tl="get",Il="application/x-www-form-urlencoded";function Oc(e){return e!=null&&typeof e.tagName=="string"}function tv(e){return Oc(e)&&e.tagName.toLowerCase()==="button"}function nv(e){return Oc(e)&&e.tagName.toLowerCase()==="form"}function rv(e){return Oc(e)&&e.tagName.toLowerCase()==="input"}function iv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sv(e,t){return e.button===0&&(!t||t==="_self")&&!iv(e)}var ol=null;function ov(){if(ol===null)try{new FormData(document.createElement("form"),0),ol=!1}catch{ol=!0}return ol}var av=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Du(e){return e!=null&&!av.has(e)?(dr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Il}"`),null):e}function lv(e,t){let n,i,a,l,f;if(nv(e)){let g=e.getAttribute("action");i=g?Hr(g,t):null,n=e.getAttribute("method")||Tl,a=Du(e.getAttribute("enctype"))||Il,l=new FormData(e)}else if(tv(e)||rv(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||g.getAttribute("action");if(i=m?Hr(m,t):null,n=e.getAttribute("formmethod")||g.getAttribute("method")||Tl,a=Du(e.getAttribute("formenctype"))||Du(g.getAttribute("enctype"))||Il,l=new FormData(g,e),!ov()){let{name:p,type:C,value:E}=e;if(C==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,E)}}else{if(Oc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Tl,i=null,a=Il,f=e}return l&&a==="text/plain"&&(f=l,l=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:l,body:f}}function xh(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function cv(e,t){if(e.id in t)return t[e.id];try{let n=await J3(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uv(e){return e!=null&&typeof e.page=="string"}function dv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fv(e,t,n){let i=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let f=await cv(l,n);return f.links?f.links():[]}return[]}));return mv(i.flat(1).filter(dv).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function j1(e,t,n,i,a,l){let f=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,g=(m,p)=>{var C;return n[p].pathname!==m.pathname||((C=n[p].route.path)==null?void 0:C.endsWith("*"))&&n[p].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,p)=>f(m,p)||g(m,p)):l==="data"?t.filter((m,p)=>{var E;let C=i.routes[m.route.id];if(!C||!C.hasLoader)return!1;if(f(m,p)||g(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function hv(e,t,{includeHydrateFallback:n}={}){return gv(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function gv(e){return[...new Set(e)]}function pv(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function mv(e,t){let n=new Set,i=new Set(t);return e.reduce((a,l)=>{if(t&&!uv(l)&&l.as==="script"&&l.href&&i.has(l.href))return a;let g=JSON.stringify(pv(l));return n.has(g)||(n.add(g),a.push({key:g,link:l})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xv=new Set([100,101,204,205]);function yv(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Hr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Vx(){let e=D.useContext(to);return xh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function wv(){let e=D.useContext(Dc);return xh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yh=D.createContext(void 0);yh.displayName="FrameworkContext";function zx(){let e=D.useContext(yh);return xh(e,"You must render this element inside a <HydratedRouter> element"),e}function Cv(e,t){let n=D.useContext(yh),[i,a]=D.useState(!1),[l,f]=D.useState(!1),{onFocus:g,onBlur:m,onMouseEnter:p,onMouseLeave:C,onTouchStart:E}=t,S=D.useRef(null);D.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let _=N=>{N.forEach(b=>{f(b.isIntersecting)})},j=new IntersectionObserver(_,{threshold:.5});return S.current&&j.observe(S.current),()=>{j.disconnect()}}},[e]),D.useEffect(()=>{if(i){let _=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(_)}}},[i]);let R=()=>{a(!0)},O=()=>{a(!1),f(!1)};return n?e!=="intent"?[l,S,{}]:[l,S,{onFocus:bo(g,R),onBlur:bo(m,O),onMouseEnter:bo(p,R),onMouseLeave:bo(C,O),onTouchStart:bo(E,R)}]:[!1,S,{}]}function bo(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ev({page:e,...t}){let{router:n}=Vx(),i=D.useMemo(()=>Ox(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?D.createElement(Sv,{page:e,matches:i,...t}):null}function vv(e){let{manifest:t,routeModules:n}=zx(),[i,a]=D.useState([]);return D.useEffect(()=>{let l=!1;return fv(e,t,n).then(f=>{l||a(f)}),()=>{l=!0}},[e,t,n]),i}function Sv({page:e,matches:t,...n}){let i=Mr(),{manifest:a,routeModules:l}=zx(),{basename:f}=Vx(),{loaderData:g,matches:m}=wv(),p=D.useMemo(()=>j1(e,t,m,a,i,"data"),[e,t,m,a,i]),C=D.useMemo(()=>j1(e,t,m,a,i,"assets"),[e,t,m,a,i]),E=D.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let O=new Set,_=!1;if(t.forEach(N=>{var I;let b=a.routes[N.route.id];!b||!b.hasLoader||(!p.some(P=>P.route.id===N.route.id)&&N.route.id in g&&((I=l[N.route.id])!=null&&I.shouldRevalidate)||b.hasClientLoader?_=!0:O.add(N.route.id))}),O.size===0)return[];let j=yv(e,f);return _&&O.size>0&&j.searchParams.set("_routes",t.filter(N=>O.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[f,g,i,a,p,t,e,l]),S=D.useMemo(()=>hv(C,a),[C,a]),R=vv(C);return D.createElement(D.Fragment,null,E.map(O=>D.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),S.map(O=>D.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),R.map(({key:O,link:_})=>D.createElement("link",{key:O,..._})))}function Av(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Hx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hx&&(window.__reactRouterVersion="7.6.2")}catch{}function Tv({basename:e,children:t,window:n}){let i=D.useRef();i.current==null&&(i.current=uE({window:n,v5Compat:!0}));let a=i.current,[l,f]=D.useState({action:a.action,location:a.location}),g=D.useCallback(m=>{D.startTransition(()=>f(m))},[f]);return D.useLayoutEffect(()=>a.listen(g),[a,g]),D.createElement(JE,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var Wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wh=D.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:l,replace:f,state:g,target:m,to:p,preventScrollReset:C,viewTransition:E,...S},R){let{basename:O}=D.useContext(fr),_=typeof p=="string"&&Wx.test(p),j,N=!1;if(typeof p=="string"&&_&&(j=p,Hx))try{let G=new URL(window.location.href),q=p.startsWith("//")?new URL(G.protocol+p):new URL(p),ge=Hr(q.pathname,O);q.origin===G.origin&&ge!=null?p=ge+q.search+q.hash:N=!0}catch{dr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=BE(p,{relative:a}),[I,P,F]=Cv(i,S),W=Rv(p,{replace:f,state:g,target:m,preventScrollReset:C,relative:a,viewTransition:E});function B(G){t&&t(G),G.defaultPrevented||W(G)}let H=D.createElement("a",{...S,...F,href:j||b,onClick:N||l?t:B,ref:Av(R,P),target:m,"data-discover":!_&&n==="render"?"true":void 0});return I&&!_?D.createElement(D.Fragment,null,H,D.createElement(Ev,{page:b})):H});wh.displayName="Link";var Iv=D.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:l,to:f,viewTransition:g,children:m,...p},C){let E=ba(f,{relative:p.relative}),S=Mr(),R=D.useContext(Dc),{navigator:O,basename:_}=D.useContext(fr),j=R!=null&&kv(E)&&g===!0,N=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,b=S.pathname,I=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(b=b.toLowerCase(),I=I?I.toLowerCase():null,N=N.toLowerCase()),I&&_&&(I=Hr(I,_)||I);const P=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let F=b===N||!a&&b.startsWith(N)&&b.charAt(P)==="/",W=I!=null&&(I===N||!a&&I.startsWith(N)&&I.charAt(N.length)==="/"),B={isActive:F,isPending:W,isTransitioning:j},H=F?t:void 0,G;typeof i=="function"?G=i(B):G=[i,F?"active":null,W?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let q=typeof l=="function"?l(B):l;return D.createElement(wh,{...p,"aria-current":H,className:G,ref:C,style:q,to:f,viewTransition:g},typeof m=="function"?m(B):m)});Iv.displayName="NavLink";var bv=D.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:l,method:f=Tl,action:g,onSubmit:m,relative:p,preventScrollReset:C,viewTransition:E,...S},R)=>{let O=Ov(),_=_v(g,{relative:p}),j=f.toLowerCase()==="get"?"get":"post",N=typeof g=="string"&&Wx.test(g),b=I=>{if(m&&m(I),I.defaultPrevented)return;I.preventDefault();let P=I.nativeEvent.submitter,F=(P==null?void 0:P.getAttribute("formmethod"))||f;O(P||I.currentTarget,{fetcherKey:t,method:F,navigate:n,replace:a,state:l,relative:p,preventScrollReset:C,viewTransition:E})};return D.createElement("form",{ref:R,method:j,action:_,onSubmit:i?m:b,...S,"data-discover":!N&&e==="render"?"true":void 0})});bv.displayName="Form";function Nv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gx(e){let t=D.useContext(to);return yt(t,Nv(e)),t}function Rv(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:l,viewTransition:f}={}){let g=Qr(),m=Mr(),p=ba(e,{relative:l});return D.useCallback(C=>{if(sv(C,t)){C.preventDefault();let E=n!==void 0?n:fa(m)===fa(p);g(e,{replace:E,state:i,preventScrollReset:a,relative:l,viewTransition:f})}},[m,g,p,n,i,t,e,a,l,f])}var Mv=0,Dv=()=>`__${String(++Mv)}__`;function Ov(){let{router:e}=Gx("useSubmit"),{basename:t}=D.useContext(fr),n=QE();return D.useCallback(async(i,a={})=>{let{action:l,method:f,encType:g,formData:m,body:p}=lv(i,t);if(a.navigate===!1){let C=a.fetcherKey||Dv();await e.fetch(C,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||f,formEncType:a.encType||g,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||f,formEncType:a.encType||g,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function _v(e,{relative:t}={}){let{basename:n}=D.useContext(fr),i=D.useContext(Rr);yt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...ba(e||".",{relative:t})},f=Mr();if(e==null){l.search=f.search;let g=new URLSearchParams(l.search),m=g.getAll("index");if(m.some(C=>C==="")){g.delete("index"),m.filter(E=>E).forEach(E=>g.append("index",E));let C=g.toString();l.search=C?`?${C}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:jr([n,l.pathname])),fa(l)}function kv(e,t={}){let n=D.useContext(Lx);yt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Gx("useViewTransitionState"),a=ba(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Hr(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=Hr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return tc(a.pathname,f)!=null||tc(a.pathname,l)!=null}[...xv];const Ch=D.createContext({});function Eh(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const vh=typeof window<"u",Yx=vh?D.useLayoutEffect:D.useEffect,_c=D.createContext(null);function Sh(e,t){e.indexOf(t)===-1&&e.push(t)}function Ah(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Wr=(e,t,n)=>n>t?t:n<e?e:n;let Th=()=>{};const Gr={},Xx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Qx(e){return typeof e=="object"&&e!==null}const Kx=e=>/^0[^.\s]+$/u.test(e);function Ih(e){let t;return()=>(t===void 0&&(t=e()),t)}const qn=e=>e,Pv=(e,t)=>n=>t(e(n)),Na=(...e)=>e.reduce(Pv),ha=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class bh{constructor(){this.subscriptions=[]}add(t){return Sh(this.subscriptions,t),()=>Ah(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let l=0;l<a;l++){const f=this.subscriptions[l];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ir=e=>e*1e3,br=e=>e/1e3;function Zx(e,t){return t?e*(1e3/t):0}const $x=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Lv=1e-7,Bv=12;function jv(e,t,n,i,a){let l,f,g=0;do f=t+(n-t)/2,l=$x(f,i,a)-e,l>0?n=f:t=f;while(Math.abs(l)>Lv&&++g<Bv);return f}function Ra(e,t,n,i){if(e===t&&n===i)return qn;const a=l=>jv(l,0,1,e,n);return l=>l===0||l===1?l:$x(a(l),t,i)}const qx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Jx=e=>t=>1-e(1-t),e2=Ra(.33,1.53,.69,.99),Nh=Jx(e2),t2=qx(Nh),n2=e=>(e*=2)<1?.5*Nh(e):.5*(2-Math.pow(2,-10*(e-1))),Rh=e=>1-Math.sin(Math.acos(e)),r2=Jx(Rh),i2=qx(Rh),Fv=Ra(.42,0,1,1),Uv=Ra(0,0,.58,1),s2=Ra(.42,0,.58,1),Vv=e=>Array.isArray(e)&&typeof e[0]!="number",o2=e=>Array.isArray(e)&&typeof e[0]=="number",zv={linear:qn,easeIn:Fv,easeInOut:s2,easeOut:Uv,circIn:Rh,circInOut:i2,circOut:r2,backIn:Nh,backInOut:t2,backOut:e2,anticipate:n2},Hv=e=>typeof e=="string",F1=e=>{if(o2(e)){Th(e.length===4);const[t,n,i,a]=e;return Ra(t,n,i,a)}else if(Hv(e))return zv[e];return e},al=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],U1={value:null,addProjectionMetrics:null};function Wv(e,t){let n=new Set,i=new Set,a=!1,l=!1;const f=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1},m=0;function p(E){f.has(E)&&(C.schedule(E),e()),m++,E(g)}const C={schedule:(E,S=!1,R=!1)=>{const _=R&&a?n:i;return S&&f.add(E),_.has(E)||_.add(E),E},cancel:E=>{i.delete(E),f.delete(E)},process:E=>{if(g=E,a){l=!0;return}a=!0,[n,i]=[i,n],n.forEach(p),t&&U1.value&&U1.value.frameloop[t].push(m),m=0,n.clear(),a=!1,l&&(l=!1,C.process(E))}};return C}const Gv=40;function a2(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,f=al.reduce((I,P)=>(I[P]=Wv(l,t?P:void 0),I),{}),{setup:g,read:m,resolveKeyframes:p,preUpdate:C,update:E,preRender:S,render:R,postRender:O}=f,_=()=>{const I=Gr.useManualTiming?a.timestamp:performance.now();n=!1,Gr.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(I-a.timestamp,Gv),1)),a.timestamp=I,a.isProcessing=!0,g.process(a),m.process(a),p.process(a),C.process(a),E.process(a),S.process(a),R.process(a),O.process(a),a.isProcessing=!1,n&&t&&(i=!1,e(_))},j=()=>{n=!0,i=!0,a.isProcessing||e(_)};return{schedule:al.reduce((I,P)=>{const F=f[P];return I[P]=(W,B=!1,H=!1)=>(n||j(),F.schedule(W,B,H)),I},{}),cancel:I=>{for(let P=0;P<al.length;P++)f[al[P]].cancel(I)},state:a,steps:f}}const{schedule:At,cancel:Si,state:qt,steps:Ou}=a2(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0);let bl;function Yv(){bl=void 0}const An={now:()=>(bl===void 0&&An.set(qt.isProcessing||Gr.useManualTiming?qt.timestamp:performance.now()),bl),set:e=>{bl=e,queueMicrotask(Yv)}},l2=e=>t=>typeof t=="string"&&t.startsWith(e),Mh=l2("--"),Xv=l2("var(--"),Dh=e=>Xv(e)?Qv.test(e.split("/*")[0].trim()):!1,Qv=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ro={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ga={...ro,transform:e=>Wr(0,1,e)},ll={...ro,default:1},Ho=e=>Math.round(e*1e5)/1e5,Oh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Kv(e){return e==null}const Zv=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_h=(e,t)=>n=>!!(typeof n=="string"&&Zv.test(n)&&n.startsWith(e)||t&&!Kv(n)&&Object.prototype.hasOwnProperty.call(n,t)),c2=(e,t,n)=>i=>{if(typeof i!="string")return i;const[a,l,f,g]=i.match(Oh);return{[e]:parseFloat(a),[t]:parseFloat(l),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},$v=e=>Wr(0,255,e),_u={...ro,transform:e=>Math.round($v(e))},Hi={test:_h("rgb","red"),parse:c2("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+_u.transform(e)+", "+_u.transform(t)+", "+_u.transform(n)+", "+Ho(ga.transform(i))+")"};function qv(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Wd={test:_h("#"),parse:qv,transform:Hi.transform},Ma=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ii=Ma("deg"),Nr=Ma("%"),Be=Ma("px"),Jv=Ma("vh"),eS=Ma("vw"),V1=(()=>({...Nr,parse:e=>Nr.parse(e)/100,transform:e=>Nr.transform(e*100)}))(),Ts={test:_h("hsl","hue"),parse:c2("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Nr.transform(Ho(t))+", "+Nr.transform(Ho(n))+", "+Ho(ga.transform(i))+")"},on={test:e=>Hi.test(e)||Wd.test(e)||Ts.test(e),parse:e=>Hi.test(e)?Hi.parse(e):Ts.test(e)?Ts.parse(e):Wd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hi.transform(e):Ts.transform(e)},tS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nS(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Oh))==null?void 0:t.length)||0)+(((n=e.match(tS))==null?void 0:n.length)||0)>0}const u2="number",d2="color",rS="var",iS="var(",z1="${}",sS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pa(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},a=[];let l=0;const g=t.replace(sS,m=>(on.test(m)?(i.color.push(l),a.push(d2),n.push(on.parse(m))):m.startsWith(iS)?(i.var.push(l),a.push(rS),n.push(m)):(i.number.push(l),a.push(u2),n.push(parseFloat(m))),++l,z1)).split(z1);return{values:n,split:g,indexes:i,types:a}}function f2(e){return pa(e).values}function h2(e){const{split:t,types:n}=pa(e),i=t.length;return a=>{let l="";for(let f=0;f<i;f++)if(l+=t[f],a[f]!==void 0){const g=n[f];g===u2?l+=Ho(a[f]):g===d2?l+=on.transform(a[f]):l+=a[f]}return l}}const oS=e=>typeof e=="number"?0:e;function aS(e){const t=f2(e);return h2(e)(t.map(oS))}const Ai={test:nS,parse:f2,createTransformer:h2,getAnimatableNone:aS};function ku(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lS({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,l=0,f=0;if(!t)a=l=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,m=2*n-g;a=ku(m,g,e+1/3),l=ku(m,g,e),f=ku(m,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(f*255),alpha:i}}function nc(e,t){return n=>n>0?t:e}const vt=(e,t,n)=>e+(t-e)*n,Pu=(e,t,n)=>{const i=e*e,a=n*(t*t-i)+i;return a<0?0:Math.sqrt(a)},cS=[Wd,Hi,Ts],uS=e=>cS.find(t=>t.test(e));function H1(e){const t=uS(e);if(!t)return!1;let n=t.parse(e);return t===Ts&&(n=lS(n)),n}const W1=(e,t)=>{const n=H1(e),i=H1(t);if(!n||!i)return nc(e,t);const a={...n};return l=>(a.red=Pu(n.red,i.red,l),a.green=Pu(n.green,i.green,l),a.blue=Pu(n.blue,i.blue,l),a.alpha=vt(n.alpha,i.alpha,l),Hi.transform(a))},Gd=new Set(["none","hidden"]);function dS(e,t){return Gd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function fS(e,t){return n=>vt(e,t,n)}function kh(e){return typeof e=="number"?fS:typeof e=="string"?Dh(e)?nc:on.test(e)?W1:pS:Array.isArray(e)?g2:typeof e=="object"?on.test(e)?W1:hS:nc}function g2(e,t){const n=[...e],i=n.length,a=e.map((l,f)=>kh(l)(l,t[f]));return l=>{for(let f=0;f<i;f++)n[f]=a[f](l);return n}}function hS(e,t){const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=kh(e[a])(e[a],t[a]));return a=>{for(const l in i)n[l]=i[l](a);return n}}function gS(e,t){const n=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],f=e.indexes[l][i[l]],g=e.values[f]??0;n[a]=g,i[l]++}return n}const pS=(e,t)=>{const n=Ai.createTransformer(t),i=pa(e),a=pa(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?Gd.has(e)&&!a.values.length||Gd.has(t)&&!i.values.length?dS(e,t):Na(g2(gS(i,a),a.values),n):nc(e,t)};function p2(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?vt(e,t,n):kh(e)(e,t)}const mS=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>At.update(t,n),stop:()=>Si(t),now:()=>qt.isProcessing?qt.timestamp:An.now()}},m2=(e,t,n=10)=>{let i="";const a=Math.max(Math.round(t/n),2);for(let l=0;l<a;l++)i+=e(l/(a-1))+", ";return`linear(${i.substring(0,i.length-2)})`},rc=2e4;function Ph(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<rc;)t+=n,i=e.next(t);return t>=rc?1/0:t}function xS(e,t=100,n){const i=n({...e,keyframes:[0,t]}),a=Math.min(Ph(i),rc);return{type:"keyframes",ease:l=>i.next(a*l).value/t,duration:br(a)}}const yS=5;function x2(e,t,n){const i=Math.max(t-yS,0);return Zx(n-e(i),t-i)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lu=.001;function wS({duration:e=Mt.duration,bounce:t=Mt.bounce,velocity:n=Mt.velocity,mass:i=Mt.mass}){let a,l,f=1-t;f=Wr(Mt.minDamping,Mt.maxDamping,f),e=Wr(Mt.minDuration,Mt.maxDuration,br(e)),f<1?(a=p=>{const C=p*f,E=C*e,S=C-n,R=Yd(p,f),O=Math.exp(-E);return Lu-S/R*O},l=p=>{const E=p*f*e,S=E*n+n,R=Math.pow(f,2)*Math.pow(p,2)*e,O=Math.exp(-E),_=Yd(Math.pow(p,2),f);return(-a(p)+Lu>0?-1:1)*((S-R)*O)/_}):(a=p=>{const C=Math.exp(-p*e),E=(p-n)*e+1;return-Lu+C*E},l=p=>{const C=Math.exp(-p*e),E=(n-p)*(e*e);return C*E});const g=5/e,m=ES(a,l,g);if(e=Ir(e),isNaN(m))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:e};{const p=Math.pow(m,2)*i;return{stiffness:p,damping:f*2*Math.sqrt(i*p),duration:e}}}const CS=12;function ES(e,t,n){let i=n;for(let a=1;a<CS;a++)i=i-e(i)/t(i);return i}function Yd(e,t){return e*Math.sqrt(1-t*t)}const vS=["duration","bounce"],SS=["stiffness","damping","mass"];function G1(e,t){return t.some(n=>e[n]!==void 0)}function AS(e){let t={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...e};if(!G1(e,SS)&&G1(e,vS))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),a=i*i,l=2*Wr(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Mt.mass,stiffness:a,damping:l}}else{const n=wS(e);t={...t,...n,mass:Mt.mass},t.isResolvedFromDuration=!0}return t}function ic(e=Mt.visualDuration,t=Mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:a}=n;const l=n.keyframes[0],f=n.keyframes[n.keyframes.length-1],g={done:!1,value:l},{stiffness:m,damping:p,mass:C,duration:E,velocity:S,isResolvedFromDuration:R}=AS({...n,velocity:-br(n.velocity||0)}),O=S||0,_=p/(2*Math.sqrt(m*C)),j=f-l,N=br(Math.sqrt(m/C)),b=Math.abs(j)<5;i||(i=b?Mt.restSpeed.granular:Mt.restSpeed.default),a||(a=b?Mt.restDelta.granular:Mt.restDelta.default);let I;if(_<1){const F=Yd(N,_);I=W=>{const B=Math.exp(-_*N*W);return f-B*((O+_*N*j)/F*Math.sin(F*W)+j*Math.cos(F*W))}}else if(_===1)I=F=>f-Math.exp(-N*F)*(j+(O+N*j)*F);else{const F=N*Math.sqrt(_*_-1);I=W=>{const B=Math.exp(-_*N*W),H=Math.min(F*W,300);return f-B*((O+_*N*j)*Math.sinh(H)+F*j*Math.cosh(H))/F}}const P={calculatedDuration:R&&E||null,next:F=>{const W=I(F);if(R)g.done=F>=E;else{let B=F===0?O:0;_<1&&(B=F===0?Ir(O):x2(I,F,W));const H=Math.abs(B)<=i,G=Math.abs(f-W)<=a;g.done=H&&G}return g.value=g.done?f:W,g},toString:()=>{const F=Math.min(Ph(P),rc),W=m2(B=>P.next(F*B).value,F,30);return F+"ms "+W},toTransition:()=>{}};return P}ic.applyToOptions=e=>{const t=xS(e,100,ic);return e.ease=t.ease,e.duration=Ir(t.duration),e.type="keyframes",e};function Xd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:f,min:g,max:m,restDelta:p=.5,restSpeed:C}){const E=e[0],S={done:!1,value:E},R=H=>g!==void 0&&H<g||m!==void 0&&H>m,O=H=>g===void 0?m:m===void 0||Math.abs(g-H)<Math.abs(m-H)?g:m;let _=n*t;const j=E+_,N=f===void 0?j:f(j);N!==j&&(_=N-E);const b=H=>-_*Math.exp(-H/i),I=H=>N+b(H),P=H=>{const G=b(H),q=I(H);S.done=Math.abs(G)<=p,S.value=S.done?N:q};let F,W;const B=H=>{R(S.value)&&(F=H,W=ic({keyframes:[S.value,O(S.value)],velocity:x2(I,H,S.value),damping:a,stiffness:l,restDelta:p,restSpeed:C}))};return B(0),{calculatedDuration:null,next:H=>{let G=!1;return!W&&F===void 0&&(G=!0,P(H),B(H)),F!==void 0&&H>=F?W.next(H-F):(!G&&P(H),S)}}}function TS(e,t,n){const i=[],a=n||Gr.mix||p2,l=e.length-1;for(let f=0;f<l;f++){let g=a(e[f],e[f+1]);if(t){const m=Array.isArray(t)?t[f]||qn:t;g=Na(m,g)}i.push(g)}return i}function IS(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const l=e.length;if(Th(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const f=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=TS(t,i,a),m=g.length,p=C=>{if(f&&C<e[0])return t[0];let E=0;if(m>1)for(;E<e.length-2&&!(C<e[E+1]);E++);const S=ha(e[E],e[E+1],C);return g[E](S)};return n?C=>p(Wr(e[0],e[l-1],C)):p}function bS(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=ha(0,t,i);e.push(vt(n,1,a))}}function NS(e){const t=[0];return bS(t,e.length-1),t}function RS(e,t){return e.map(n=>n*t)}function MS(e,t){return e.map(()=>t||s2).splice(0,e.length-1)}function Wo({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=Vv(i)?i.map(F1):F1(i),l={done:!1,value:t[0]},f=RS(n&&n.length===t.length?n:NS(t),e),g=IS(f,t,{ease:Array.isArray(a)?a:MS(t,a)});return{calculatedDuration:e,next:m=>(l.value=g(m),l.done=m>=e,l)}}const DS=e=>e!==null;function Lh(e,{repeat:t,repeatType:n="loop"},i,a=1){const l=e.filter(DS),g=a<0||t&&n!=="loop"&&t%2===1?0:l.length-1;return!g||i===void 0?l[g]:i}const OS={decay:Xd,inertia:Xd,tween:Wo,keyframes:Wo,spring:ic};function y2(e){typeof e.type=="string"&&(e.type=OS[e.type])}class Bh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const _S=e=>e/100;class jh extends Bh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:n}=this.options;n&&n.updatedAt!==An.now()&&this.tick(An.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;y2(t);const{type:n=Wo,repeat:i=0,repeatDelay:a=0,repeatType:l,velocity:f=0}=t;let{keyframes:g}=t;const m=n||Wo;m!==Wo&&typeof g[0]!="number"&&(this.mixKeyframes=Na(_S,p2(g[0],g[1])),g=[0,100]);const p=m({...t,keyframes:g});l==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...g].reverse(),velocity:-f})),p.calculatedDuration===null&&(p.calculatedDuration=Ph(p));const{calculatedDuration:C}=p;this.calculatedDuration=C,this.resolvedDuration=C+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=p}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:a,mixKeyframes:l,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:m}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:C,repeat:E,repeatType:S,repeatDelay:R,type:O,onUpdate:_,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const N=this.currentTime-p*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let I=this.currentTime,P=i;if(E){const H=Math.min(this.currentTime,a)/g;let G=Math.floor(H),q=H%1;!q&&H>=1&&(q=1),q===1&&G--,G=Math.min(G,E+1),!!(G%2)&&(S==="reverse"?(q=1-q,R&&(q-=R/g)):S==="mirror"&&(P=f)),I=Wr(0,1,q)*g}const F=b?{done:!1,value:C[0]}:P.next(I);l&&(F.value=l(F.value));let{done:W}=F;!b&&m!==null&&(W=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return B&&O!==Xd&&(F.value=Lh(C,this.options,j,this.speed)),_&&_(F.value),B&&this.finish(),F}then(t,n){return this.finished.then(t,n)}get duration(){return br(this.calculatedDuration)}get time(){return br(this.currentTime)}set time(t){var n;t=Ir(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(An.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=br(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:t=mS,startTime:n}=this.options;this.driver||(this.driver=t(f=>this.tick(f))),(l=(a=this.options).onPlay)==null||l.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(An.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function kS(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Wi=e=>e*180/Math.PI,Qd=e=>{const t=Wi(Math.atan2(e[1],e[0]));return Kd(t)},PS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Qd,rotateZ:Qd,skewX:e=>Wi(Math.atan(e[1])),skewY:e=>Wi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Kd=e=>(e=e%360,e<0&&(e+=360),e),Y1=Qd,X1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Q1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),LS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X1,scaleY:Q1,scale:e=>(X1(e)+Q1(e))/2,rotateX:e=>Kd(Wi(Math.atan2(e[6],e[5]))),rotateY:e=>Kd(Wi(Math.atan2(-e[2],e[0]))),rotateZ:Y1,rotate:Y1,skewX:e=>Wi(Math.atan(e[4])),skewY:e=>Wi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Zd(e){return e.includes("scale")?1:0}function $d(e,t){if(!e||e==="none")return Zd(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(n)i=LS,a=n;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=PS,a=g}if(!a)return Zd(t);const l=i[t],f=a[1].split(",").map(jS);return typeof l=="function"?l(f):f[l]}const BS=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return $d(n,t)};function jS(e){return parseFloat(e.trim())}const io=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],so=(()=>new Set(io))(),K1=e=>e===ro||e===Be,FS=new Set(["x","y","z"]),US=io.filter(e=>!FS.has(e));function VS(e){const t=[];return US.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Xi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>$d(t,"x"),y:(e,{transform:t})=>$d(t,"y")};Xi.translateX=Xi.x;Xi.translateY=Xi.y;const Qi=new Set;let qd=!1,Jd=!1,ef=!1;function w2(){if(Jd){const e=Array.from(Qi).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const a=VS(i);a.length&&(n.set(i,a),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=n.get(i);a&&a.forEach(([l,f])=>{var g;(g=i.getValue(l))==null||g.set(f)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Jd=!1,qd=!1,Qi.forEach(e=>e.complete(ef)),Qi.clear()}function C2(){Qi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Jd=!0)})}function zS(){ef=!0,C2(),w2(),ef=!1}class Fh{constructor(t,n,i,a,l,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=a,this.element=l,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(Qi.add(this),qd||(qd=!0,At.read(C2),At.resolveKeyframes(w2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:a}=this;if(t[0]===null){const l=a==null?void 0:a.get(),f=t[t.length-1];if(l!==void 0)t[0]=l;else if(i&&n){const g=i.readValue(n,f);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=f),a&&l===void 0&&a.set(t[0])}kS(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Qi.delete(this)}cancel(){this.state==="scheduled"&&(Qi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const HS=e=>e.startsWith("--");function WS(e,t,n){HS(t)?e.style.setProperty(t,n):e.style[t]=n}const GS=Ih(()=>window.ScrollTimeline!==void 0),YS={};function XS(e,t){const n=Ih(e);return()=>YS[t]??n()}const E2=XS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_o=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Z1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_o([0,.65,.55,1]),circOut:_o([.55,0,1,.45]),backIn:_o([.31,.01,.66,-.59]),backOut:_o([.33,1.53,.69,.99])};function v2(e,t){if(e)return typeof e=="function"?E2()?m2(e,t):"ease-out":o2(e)?_o(e):Array.isArray(e)?e.map(n=>v2(n,t)||Z1.easeOut):Z1[e]}function QS(e,t,n,{delay:i=0,duration:a=300,repeat:l=0,repeatType:f="loop",ease:g="easeOut",times:m}={},p=void 0){const C={[t]:n};m&&(C.offset=m);const E=v2(g,a);Array.isArray(E)&&(C.easing=E);const S={delay:i,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:l+1,direction:f==="reverse"?"alternate":"normal"};return p&&(S.pseudoElement=p),e.animate(C,S)}function S2(e){return typeof e=="function"&&"applyToOptions"in e}function KS({type:e,...t}){return S2(e)&&E2()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ZS extends Bh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:a,pseudoElement:l,allowFlatten:f=!1,finalKeyframe:g,onComplete:m}=t;this.isPseudoElement=!!l,this.allowFlatten=f,this.options=t,Th(typeof t.type!="string");const p=KS(t);this.animation=QS(n,i,a,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const C=Lh(a,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(C):WS(n,i,C),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return br(Number(t))}get time(){return br(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ir(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&GS()?(this.animation.timeline=t,qn):n(this)}}const A2={anticipate:n2,backInOut:t2,circInOut:i2};function $S(e){return e in A2}function qS(e){typeof e.ease=="string"&&$S(e.ease)&&(e.ease=A2[e.ease])}const $1=10;class JS extends ZS{constructor(t){qS(t),y2(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:a,element:l,...f}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const g=new jh({...f,autoplay:!1}),m=Ir(this.finishedTime??this.time);n.setWithVelocity(g.sample(m-$1).value,g.sample(m).value,$1),g.stop()}}const q1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ai.test(e)||e==="0")&&!e.startsWith("url("));function eA(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function tA(e,t,n,i){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],f=q1(a,t),g=q1(l,t);return!f||!g?!1:eA(e)||(n==="spring"||S2(n))&&i}function Uh(e){return Qx(e)&&"offsetHeight"in e}const nA=new Set(["opacity","clipPath","filter","transform"]),rA=Ih(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iA(e){var p;const{motionValue:t,name:n,repeatDelay:i,repeatType:a,damping:l,type:f}=e;if(!Uh((p=t==null?void 0:t.owner)==null?void 0:p.current))return!1;const{onUpdate:g,transformTemplate:m}=t.owner.getProps();return rA()&&n&&nA.has(n)&&(n!=="transform"||!m)&&!g&&!i&&a!=="mirror"&&l!==0&&f!=="inertia"}const sA=40;class oA extends Bh{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:f="loop",keyframes:g,name:m,motionValue:p,element:C,...E}){var O;super(),this.stop=()=>{var _,j;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=An.now();const S={autoplay:t,delay:n,type:i,repeat:a,repeatDelay:l,repeatType:f,name:m,motionValue:p,element:C,...E},R=(C==null?void 0:C.KeyframeResolver)||Fh;this.keyframeResolver=new R(g,(_,j,N)=>this.onKeyframesResolved(_,j,S,!N),m,p,C),(O=this.keyframeResolver)==null||O.scheduleResolve()}onKeyframesResolved(t,n,i,a){this.keyframeResolver=void 0;const{name:l,type:f,velocity:g,delay:m,isHandoff:p,onUpdate:C}=i;this.resolvedAt=An.now(),tA(t,l,f,g)||((Gr.instantAnimations||!m)&&(C==null||C(Lh(t,i,n))),t[0]=t[t.length-1],i.duration=0,i.repeat=0);const S={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>sA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},R=!p&&iA(S)?new JS({...S,element:S.motionValue.owner.current}):new jh(S);R.finished.then(()=>this.notifyFinished()).catch(qn),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),zS()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const aA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lA(e){const t=aA.exec(e);if(!t)return[,];const[,n,i,a]=t;return[`--${n??i}`,a]}function T2(e,t,n=1){const[i,a]=lA(e);if(!i)return;const l=window.getComputedStyle(t).getPropertyValue(i);if(l){const f=l.trim();return Xx(f)?parseFloat(f):f}return Dh(a)?T2(a,t,n+1):a}function Vh(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const I2=new Set(["width","height","top","left","right","bottom",...io]),cA={test:e=>e==="auto",parse:e=>e},b2=e=>t=>t.test(e),N2=[ro,Be,Nr,ii,eS,Jv,cA],J1=e=>N2.find(b2(e));function uA(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Kx(e):!0}const dA=new Set(["brightness","contrast","saturate","opacity"]);function fA(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Oh)||[];if(!i)return e;const a=n.replace(i,"");let l=dA.has(t)?1:0;return i!==n&&(l*=100),t+"("+l+a+")"}const hA=/\b([a-z-]*)\(.*?\)/gu,tf={...Ai,getAnimatableNone:e=>{const t=e.match(hA);return t?t.map(fA).join(" "):e}},eg={...ro,transform:Math.round},gA={rotate:ii,rotateX:ii,rotateY:ii,rotateZ:ii,scale:ll,scaleX:ll,scaleY:ll,scaleZ:ll,skew:ii,skewX:ii,skewY:ii,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:ga,originX:V1,originY:V1,originZ:Be},zh={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...gA,zIndex:eg,fillOpacity:ga,strokeOpacity:ga,numOctaves:eg},pA={...zh,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:tf,WebkitFilter:tf},R2=e=>pA[e];function M2(e,t){let n=R2(e);return n!==tf&&(n=Ai),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mA=new Set(["auto","none","0"]);function xA(e,t,n){let i=0,a;for(;i<e.length&&!a;){const l=e[i];typeof l=="string"&&!mA.has(l)&&pa(l).values.length&&(a=e[i]),i++}if(a&&n)for(const l of t)e[l]=M2(n,a)}class yA extends Fh{constructor(t,n,i,a,l){super(t,n,i,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let p=t[m];if(typeof p=="string"&&(p=p.trim(),Dh(p))){const C=T2(p,n.current);C!==void 0&&(t[m]=C),m===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!I2.has(i)||t.length!==2)return;const[a,l]=t,f=J1(a),g=J1(l);if(f!==g)if(K1(f)&&K1(g))for(let m=0;m<t.length;m++){const p=t[m];typeof p=="string"&&(t[m]=parseFloat(p))}else Xi[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let a=0;a<t.length;a++)(t[a]===null||uA(t[a]))&&i.push(a);i.length&&xA(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xi[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){var g;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,f=i[l];i[l]=Xi[n](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),(g=this.removedTransforms)!=null&&g.length&&this.removedTransforms.forEach(([m,p])=>{t.getValue(m).set(p)}),this.resolveNoneKeyframes()}}function wA(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const a=(n==null?void 0:n[e])??i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const D2=(e,t)=>t&&typeof e=="number"?t.transform(e):e,tg=30,CA=e=>!isNaN(parseFloat(e));class EA{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,a=!0)=>{var f,g;const l=An.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((f=this.events.change)==null||f.notify(this.current),this.dependents))for(const m of this.dependents)m.dirty();a&&((g=this.events.renderRequest)==null||g.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=An.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=CA(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new bh);const i=this.events[t].add(n);return t==="change"?()=>{i(),At.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=An.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tg);return Zx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ws(e,t){return new EA(e,t)}const{schedule:Hh,cancel:pb}=a2(queueMicrotask,!1),rr={x:!1,y:!1};function O2(){return rr.x||rr.y}function vA(e){return e==="x"||e==="y"?rr[e]?null:(rr[e]=!0,()=>{rr[e]=!1}):rr.x||rr.y?null:(rr.x=rr.y=!0,()=>{rr.x=rr.y=!1})}function _2(e,t){const n=wA(e),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[n,a,()=>i.abort()]}function ng(e){return!(e.pointerType==="touch"||O2())}function SA(e,t,n={}){const[i,a,l]=_2(e,n),f=g=>{if(!ng(g))return;const{target:m}=g,p=t(m,g);if(typeof p!="function"||!m)return;const C=E=>{ng(E)&&(p(E),m.removeEventListener("pointerleave",C))};m.addEventListener("pointerleave",C,a)};return i.forEach(g=>{g.addEventListener("pointerenter",f,a)}),l}const k2=(e,t)=>t?e===t?!0:k2(e,t.parentElement):!1,Wh=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,AA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function TA(e){return AA.has(e.tagName)||e.tabIndex!==-1}const Nl=new WeakSet;function rg(e){return t=>{t.key==="Enter"&&e(t)}}function Bu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const IA=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=rg(()=>{if(Nl.has(n))return;Bu(n,"down");const a=rg(()=>{Bu(n,"up")}),l=()=>Bu(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function ig(e){return Wh(e)&&!O2()}function bA(e,t,n={}){const[i,a,l]=_2(e,n),f=g=>{const m=g.currentTarget;if(!ig(g))return;Nl.add(m);const p=t(m,g),C=(R,O)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",S),Nl.has(m)&&Nl.delete(m),ig(R)&&typeof p=="function"&&p(R,{success:O})},E=R=>{C(R,m===window||m===document||n.useGlobalTarget||k2(m,R.target))},S=R=>{C(R,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",S,a)};return i.forEach(g=>{(n.useGlobalTarget?window:g).addEventListener("pointerdown",f,a),Uh(g)&&(g.addEventListener("focus",p=>IA(p,a)),!TA(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),l}function P2(e){return Qx(e)&&"ownerSVGElement"in e}function NA(e){return P2(e)&&e.tagName==="svg"}const ln=e=>!!(e&&e.getVelocity),RA=[...N2,on,Ai],MA=e=>RA.find(b2(e)),Gh=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class DA extends D.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,a=Uh(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OA({children:e,isPresent:t,anchorX:n}){const i=D.useId(),a=D.useRef(null),l=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=D.useContext(Gh);return D.useInsertionEffect(()=>{const{width:g,height:m,top:p,left:C,right:E}=l.current;if(t||!a.current||!g||!m)return;const S=n==="left"?`left: ${C}`:`right: ${E}`;a.current.dataset.motionPopId=i;const R=document.createElement("style");return f&&(R.nonce=f),document.head.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${m}px !important;
            ${S}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.contains(R)&&document.head.removeChild(R)}},[t]),y.jsx(DA,{isPresent:t,childRef:a,sizeRef:l,children:D.cloneElement(e,{ref:a})})}const _A=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:l,mode:f,anchorX:g})=>{const m=Eh(kA),p=D.useId();let C=!0,E=D.useMemo(()=>(C=!1,{id:p,initial:t,isPresent:n,custom:a,onExitComplete:S=>{m.set(S,!0);for(const R of m.values())if(!R)return;i&&i()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[n,m,i]);return l&&C&&(E={...E}),D.useMemo(()=>{m.forEach((S,R)=>m.set(R,!1))},[n]),D.useEffect(()=>{!n&&!m.size&&i&&i()},[n]),f==="popLayout"&&(e=y.jsx(OA,{isPresent:n,anchorX:g,children:e})),y.jsx(_c.Provider,{value:E,children:e})};function kA(){return new Map}function L2(e=!0){const t=D.useContext(_c);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:a}=t,l=D.useId();D.useEffect(()=>{if(e)return a(l)},[e]);const f=D.useCallback(()=>e&&i&&i(l),[l,i,e]);return!n&&i?[!1,f]:[!0]}const cl=e=>e.key||"";function sg(e){const t=[];return D.Children.forEach(e,n=>{D.isValidElement(n)&&t.push(n)}),t}const sc=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:l="sync",propagate:f=!1,anchorX:g="left"})=>{const[m,p]=L2(f),C=D.useMemo(()=>sg(e),[e]),E=f&&!m?[]:C.map(cl),S=D.useRef(!0),R=D.useRef(C),O=Eh(()=>new Map),[_,j]=D.useState(C),[N,b]=D.useState(C);Yx(()=>{S.current=!1,R.current=C;for(let F=0;F<N.length;F++){const W=cl(N[F]);E.includes(W)?O.delete(W):O.get(W)!==!0&&O.set(W,!1)}},[N,E.length,E.join("-")]);const I=[];if(C!==_){let F=[...C];for(let W=0;W<N.length;W++){const B=N[W],H=cl(B);E.includes(H)||(F.splice(W,0,B),I.push(B))}return l==="wait"&&I.length&&(F=I),b(sg(F)),j(C),null}const{forceRender:P}=D.useContext(Ch);return y.jsx(y.Fragment,{children:N.map(F=>{const W=cl(F),B=f&&!m?!1:C===N||E.includes(W),H=()=>{if(O.has(W))O.set(W,!0);else return;let G=!0;O.forEach(q=>{q||(G=!1)}),G&&(P==null||P(),b(R.current),f&&(p==null||p()),i&&i())};return y.jsx(_A,{isPresent:B,initial:!S.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:l,onExitComplete:B?void 0:H,anchorX:g,children:F},W)})})},B2=D.createContext({strict:!1}),og={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gs={};for(const e in og)Gs[e]={isEnabled:t=>og[e].some(n=>!!t[n])};function PA(e){for(const t in e)Gs[t]={...Gs[t],...e[t]}}const LA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||LA.has(e)}let j2=e=>!oc(e);function BA(e){e&&(j2=t=>t.startsWith("on")?!oc(t):e(t))}try{BA(require("@emotion/is-prop-valid").default)}catch{}function jA(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(j2(a)||n===!0&&oc(a)||!t&&!oc(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function FA(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...i)=>e(...i);return new Proxy(n,{get:(i,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const kc=D.createContext({});function Pc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ma(e){return typeof e=="string"||Array.isArray(e)}const Yh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xh=["initial",...Yh];function Lc(e){return Pc(e.animate)||Xh.some(t=>ma(e[t]))}function F2(e){return!!(Lc(e)||e.variants)}function UA(e,t){if(Lc(e)){const{initial:n,animate:i}=e;return{initial:n===!1||ma(n)?n:void 0,animate:ma(i)?i:void 0}}return e.inherit!==!1?t:{}}function VA(e){const{initial:t,animate:n}=UA(e,D.useContext(kc));return D.useMemo(()=>({initial:t,animate:n}),[ag(t),ag(n)])}function ag(e){return Array.isArray(e)?e.join(" "):e}const zA=Symbol.for("motionComponentSymbol");function Is(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function HA(e,t,n){return D.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Is(n)&&(n.current=i))},[t])}const Qh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WA="framerAppearId",U2="data-"+Qh(WA),V2=D.createContext({});function GA(e,t,n,i,a){var _,j;const{visualElement:l}=D.useContext(kc),f=D.useContext(B2),g=D.useContext(_c),m=D.useContext(Gh).reducedMotion,p=D.useRef(null);i=i||f.renderer,!p.current&&i&&(p.current=i(e,{visualState:t,parent:l,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:m}));const C=p.current,E=D.useContext(V2);C&&!C.projection&&a&&(C.type==="html"||C.type==="svg")&&YA(p.current,n,a,E);const S=D.useRef(!1);D.useInsertionEffect(()=>{C&&S.current&&C.update(n,g)});const R=n[U2],O=D.useRef(!!R&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,R))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,R)));return Yx(()=>{C&&(S.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),Hh.render(C.render),O.current&&C.animationState&&C.animationState.animateChanges())}),D.useEffect(()=>{C&&(!O.current&&C.animationState&&C.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,R)}),O.current=!1))}),C}function YA(e,t,n,i){const{layoutId:a,layout:l,drag:f,dragConstraints:g,layoutScroll:m,layoutRoot:p,layoutCrossfade:C}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:z2(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!f||g&&Is(g),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:C,layoutScroll:m,layoutRoot:p})}function z2(e){if(e)return e.options.allowProjection!==!1?e.projection:z2(e.parent)}function XA({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&PA(e);function l(g,m){let p;const C={...D.useContext(Gh),...g,layoutId:QA(g)},{isStatic:E}=C,S=VA(g),R=i(g,E);if(!E&&vh){KA();const O=ZA(C);p=O.MeasureLayout,S.visualElement=GA(a,R,C,t,O.ProjectionNode)}return y.jsxs(kc.Provider,{value:S,children:[p&&S.visualElement?y.jsx(p,{visualElement:S.visualElement,...C}):null,n(a,g,HA(R,S.visualElement,m),R,E,S.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const f=D.forwardRef(l);return f[zA]=a,f}function QA({layoutId:e}){const t=D.useContext(Ch).id;return t&&e!==void 0?t+"-"+e:e}function KA(e,t){D.useContext(B2).strict}function ZA(e){const{drag:t,layout:n}=Gs;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const xa={};function $A(e){for(const t in e)xa[t]=e[t],Mh(t)&&(xa[t].isCSSVariable=!0)}function H2(e,{layout:t,layoutId:n}){return so.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!xa[e]||e==="opacity")}const qA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JA=io.length;function e4(e,t,n){let i="",a=!0;for(let l=0;l<JA;l++){const f=io[l],g=e[f];if(g===void 0)continue;let m=!0;if(typeof g=="number"?m=g===(f.startsWith("scale")?1:0):m=parseFloat(g)===0,!m||n){const p=D2(g,zh[f]);if(!m){a=!1;const C=qA[f]||f;i+=`${C}(${p}) `}n&&(t[f]=p)}}return i=i.trim(),n?i=n(t,a?"":i):a&&(i="none"),i}function Kh(e,t,n){const{style:i,vars:a,transformOrigin:l}=e;let f=!1,g=!1;for(const m in t){const p=t[m];if(so.has(m)){f=!0;continue}else if(Mh(m)){a[m]=p;continue}else{const C=D2(p,zh[m]);m.startsWith("origin")?(g=!0,l[m]=C):i[m]=C}}if(t.transform||(f||n?i.transform=e4(t,e.transform,n):i.transform&&(i.transform="none")),g){const{originX:m="50%",originY:p="50%",originZ:C=0}=l;i.transformOrigin=`${m} ${p} ${C}`}}const Zh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W2(e,t,n){for(const i in t)!ln(t[i])&&!H2(i,n)&&(e[i]=t[i])}function t4({transformTemplate:e},t){return D.useMemo(()=>{const n=Zh();return Kh(n,t,e),Object.assign({},n.vars,n.style)},[t])}function n4(e,t){const n=e.style||{},i={};return W2(i,n,e),Object.assign(i,t4(e,t)),i}function r4(e,t){const n={},i=n4(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const i4={offset:"stroke-dashoffset",array:"stroke-dasharray"},s4={offset:"strokeDashoffset",array:"strokeDasharray"};function o4(e,t,n=1,i=0,a=!0){e.pathLength=1;const l=a?i4:s4;e[l.offset]=Be.transform(-i);const f=Be.transform(t),g=Be.transform(n);e[l.array]=`${f} ${g}`}function G2(e,{attrX:t,attrY:n,attrScale:i,pathLength:a,pathSpacing:l=1,pathOffset:f=0,...g},m,p,C){if(Kh(e,g,p),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:S}=e;E.transform&&(S.transform=E.transform,delete E.transform),(S.transform||E.transformOrigin)&&(S.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),S.transform&&(S.transformBox=(C==null?void 0:C.transformBox)??"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),a!==void 0&&o4(E,a,l,f,!1)}const Y2=()=>({...Zh(),attrs:{}}),X2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function a4(e,t,n,i){const a=D.useMemo(()=>{const l=Y2();return G2(l,t,X2(i),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};W2(l,e.style,e),a.style={...l,...a.style}}return a}const l4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $h(e){return typeof e!="string"||e.includes("-")?!1:!!(l4.indexOf(e)>-1||/[A-Z]/u.test(e))}function c4(e=!1){return(n,i,a,{latestValues:l},f)=>{const m=($h(n)?a4:r4)(i,l,f,n),p=jA(i,typeof n=="string",e),C=n!==D.Fragment?{...p,...m,ref:a}:{},{children:E}=i,S=D.useMemo(()=>ln(E)?E.get():E,[E]);return D.createElement(n,{...C,children:S})}}function lg(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function qh(e,t,n,i){if(typeof t=="function"){const[a,l]=lg(i);t=t(n!==void 0?n:e.custom,a,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,l]=lg(i);t=t(n!==void 0?n:e.custom,a,l)}return t}function Rl(e){return ln(e)?e.get():e}function u4({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,a){return{latestValues:d4(n,i,a,e),renderState:t()}}const Q2=e=>(t,n)=>{const i=D.useContext(kc),a=D.useContext(_c),l=()=>u4(e,t,i,a);return n?l():Eh(l)};function d4(e,t,n,i){const a={},l=i(e,{});for(const S in l)a[S]=Rl(l[S]);let{initial:f,animate:g}=e;const m=Lc(e),p=F2(e);t&&p&&!m&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const E=C?g:f;if(E&&typeof E!="boolean"&&!Pc(E)){const S=Array.isArray(E)?E:[E];for(let R=0;R<S.length;R++){const O=qh(e,S[R]);if(O){const{transitionEnd:_,transition:j,...N}=O;for(const b in N){let I=N[b];if(Array.isArray(I)){const P=C?I.length-1:0;I=I[P]}I!==null&&(a[b]=I)}for(const b in _)a[b]=_[b]}}}return a}function Jh(e,t,n){var l;const{style:i}=e,a={};for(const f in i)(ln(i[f])||t.style&&ln(t.style[f])||H2(f,e)||((l=n==null?void 0:n.getValue(f))==null?void 0:l.liveStyle)!==void 0)&&(a[f]=i[f]);return a}const f4={useVisualState:Q2({scrapeMotionValuesFromProps:Jh,createRenderState:Zh})};function K2(e,t,n){const i=Jh(e,t,n);for(const a in e)if(ln(e[a])||ln(t[a])){const l=io.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[l]=e[a]}return i}const h4={useVisualState:Q2({scrapeMotionValuesFromProps:K2,createRenderState:Y2})};function g4(e,t){return function(i,{forwardMotionProps:a}={forwardMotionProps:!1}){const f={...$h(i)?h4:f4,preloadedFeatures:e,useRender:c4(a),createVisualElement:t,Component:i};return XA(f)}}function ya(e,t,n){const i=e.getProps();return qh(i,t,n!==void 0?n:i.custom,e)}const nf=e=>Array.isArray(e);function p4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ws(n))}function m4(e){return nf(e)?e[e.length-1]||0:e}function x4(e,t){const n=ya(e,t);let{transitionEnd:i={},transition:a={},...l}=n||{};l={...l,...i};for(const f in l){const g=m4(l[f]);p4(e,f,g)}}function y4(e){return!!(ln(e)&&e.add)}function rf(e,t){const n=e.getValue("willChange");if(y4(n))return n.add(t);if(!n&&Gr.WillChange){const i=new Gr.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function Z2(e){return e.props[U2]}const w4=e=>e!==null;function C4(e,{repeat:t,repeatType:n="loop"},i){const a=e.filter(w4),l=t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||i===void 0?a[l]:i}const E4={type:"spring",stiffness:500,damping:25,restSpeed:10},v4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),S4={type:"keyframes",duration:.8},A4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T4=(e,{keyframes:t})=>t.length>2?S4:so.has(e)?e.startsWith("scale")?v4(t[1]):E4:A4;function I4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:l,repeatType:f,repeatDelay:g,from:m,elapsed:p,...C}){return!!Object.keys(C).length}const e0=(e,t,n,i={},a,l)=>f=>{const g=Vh(i,e)||{},m=g.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Ir(m);const C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-p,onUpdate:S=>{t.set(S),g.onUpdate&&g.onUpdate(S)},onComplete:()=>{f(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:l?void 0:a};I4(g)||Object.assign(C,T4(e,C)),C.duration&&(C.duration=Ir(C.duration)),C.repeatDelay&&(C.repeatDelay=Ir(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let E=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(E=!0)),(Gr.instantAnimations||Gr.skipAnimations)&&(E=!0,C.duration=0,C.delay=0),C.allowFlatten=!g.type&&!g.ease,E&&!l&&t.get()!==void 0){const S=C4(C.keyframes,g);if(S!==void 0){At.update(()=>{C.onUpdate(S),C.onComplete()});return}}return g.isSync?new jh(C):new oA(C)};function b4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function $2(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:f,...g}=t;i&&(l=i);const m=[],p=a&&e.animationState&&e.animationState.getState()[a];for(const C in g){const E=e.getValue(C,e.latestValues[C]??null),S=g[C];if(S===void 0||p&&b4(p,C))continue;const R={delay:n,...Vh(l||{},C)},O=E.get();if(O!==void 0&&!E.isAnimating&&!Array.isArray(S)&&S===O&&!R.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const N=Z2(e);if(N){const b=window.MotionHandoffAnimation(N,C,At);b!==null&&(R.startTime=b,_=!0)}}rf(e,C),E.start(e0(C,E,S,e.shouldReduceMotion&&I2.has(C)?{type:!1}:R,e,_));const j=E.animation;j&&m.push(j)}return f&&Promise.all(m).then(()=>{At.update(()=>{f&&x4(e,f)})}),m}function sf(e,t,n={}){var m;const i=ya(e,t,n.type==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const l=i?()=>Promise.all($2(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:C=0,staggerChildren:E,staggerDirection:S}=a;return N4(e,t,C+p,E,S,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[p,C]=g==="beforeChildren"?[l,f]:[f,l];return p().then(()=>C())}else return Promise.all([l(),f(n.delay)])}function N4(e,t,n=0,i=0,a=1,l){const f=[],g=(e.variantChildren.size-1)*i,m=a===1?(p=0)=>p*i:(p=0)=>g-p*i;return Array.from(e.variantChildren).sort(R4).forEach((p,C)=>{p.notify("AnimationStart",t),f.push(sf(p,t,{...l,delay:n+m(C)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(f)}function R4(e,t){return e.sortNodePosition(t)}function M4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(l=>sf(e,l,n));i=Promise.all(a)}else if(typeof t=="string")i=sf(e,t,n);else{const a=typeof t=="function"?ya(e,t,n.custom):t;i=Promise.all($2(e,a,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function q2(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const D4=Xh.length;function J2(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?J2(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<D4;n++){const i=Xh[n],a=e.props[i];(ma(a)||a===!1)&&(t[i]=a)}return t}const O4=[...Yh].reverse(),_4=Yh.length;function k4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>M4(e,n,i)))}function P4(e){let t=k4(e),n=cg(),i=!0;const a=m=>(p,C)=>{var S;const E=ya(e,C,m==="exit"?(S=e.presenceContext)==null?void 0:S.custom:void 0);if(E){const{transition:R,transitionEnd:O,..._}=E;p={...p,..._,...O}}return p};function l(m){t=m(e)}function f(m){const{props:p}=e,C=J2(e.parent)||{},E=[],S=new Set;let R={},O=1/0;for(let j=0;j<_4;j++){const N=O4[j],b=n[N],I=p[N]!==void 0?p[N]:C[N],P=ma(I),F=N===m?b.isActive:null;F===!1&&(O=j);let W=I===C[N]&&I!==p[N]&&P;if(W&&i&&e.manuallyAnimateOnMount&&(W=!1),b.protectedKeys={...R},!b.isActive&&F===null||!I&&!b.prevProp||Pc(I)||typeof I=="boolean")continue;const B=L4(b.prevProp,I);let H=B||N===m&&b.isActive&&!W&&P||j>O&&P,G=!1;const q=Array.isArray(I)?I:[I];let ge=q.reduce(a(N),{});F===!1&&(ge={});const{prevResolvedValues:ue={}}=b,Ee={...ue,...ge},Ne=oe=>{H=!0,S.has(oe)&&(G=!0,S.delete(oe)),b.needsAnimating[oe]=!0;const J=e.getValue(oe);J&&(J.liveStyle=!1)};for(const oe in Ee){const J=ge[oe],he=ue[oe];if(R.hasOwnProperty(oe))continue;let le=!1;nf(J)&&nf(he)?le=!q2(J,he):le=J!==he,le?J!=null?Ne(oe):S.add(oe):J!==void 0&&S.has(oe)?Ne(oe):b.protectedKeys[oe]=!0}b.prevProp=I,b.prevResolvedValues=ge,b.isActive&&(R={...R,...ge}),i&&e.blockInitialAnimation&&(H=!1),H&&(!(W&&B)||G)&&E.push(...q.map(oe=>({animation:oe,options:{type:N}})))}if(S.size){const j={};if(typeof p.initial!="boolean"){const N=ya(e,Array.isArray(p.initial)?p.initial[0]:p.initial);N&&N.transition&&(j.transition=N.transition)}S.forEach(N=>{const b=e.getBaseTarget(N),I=e.getValue(N);I&&(I.liveStyle=!0),j[N]=b??null}),E.push({animation:j})}let _=!!E.length;return i&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(_=!1),i=!1,_?t(E):Promise.resolve()}function g(m,p){var E;if(n[m].isActive===p)return Promise.resolve();(E=e.variantChildren)==null||E.forEach(S=>{var R;return(R=S.animationState)==null?void 0:R.setActive(m,p)}),n[m].isActive=p;const C=f(m);for(const S in n)n[S].protectedKeys={};return C}return{animateChanges:f,setActive:g,setAnimateFunction:l,getState:()=>n,reset:()=>{n=cg(),i=!0}}}function L4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!q2(t,e):!1}function Pi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cg(){return{animate:Pi(!0),whileInView:Pi(),whileHover:Pi(),whileTap:Pi(),whileDrag:Pi(),whileFocus:Pi(),exit:Pi()}}class Ni{constructor(t){this.isMounted=!1,this.node=t}update(){}}class B4 extends Ni{constructor(t){super(t),t.animationState||(t.animationState=P4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let j4=0;class F4 extends Ni{constructor(){super(...arguments),this.id=j4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const U4={animation:{Feature:B4},exit:{Feature:F4}};function wa(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Da(e){return{point:{x:e.pageX,y:e.pageY}}}const V4=e=>t=>Wh(t)&&e(t,Da(t));function Go(e,t,n,i){return wa(e,t,V4(n),i)}function ey({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function z4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function H4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const ty=1e-4,W4=1-ty,G4=1+ty,ny=.01,Y4=0-ny,X4=0+ny;function fn(e){return e.max-e.min}function Q4(e,t,n){return Math.abs(e-t)<=n}function ug(e,t,n,i=.5){e.origin=i,e.originPoint=vt(t.min,t.max,e.origin),e.scale=fn(n)/fn(t),e.translate=vt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=W4&&e.scale<=G4||isNaN(e.scale))&&(e.scale=1),(e.translate>=Y4&&e.translate<=X4||isNaN(e.translate))&&(e.translate=0)}function Yo(e,t,n,i){ug(e.x,t.x,n.x,i?i.originX:void 0),ug(e.y,t.y,n.y,i?i.originY:void 0)}function dg(e,t,n){e.min=n.min+t.min,e.max=e.min+fn(t)}function K4(e,t,n){dg(e.x,t.x,n.x),dg(e.y,t.y,n.y)}function fg(e,t,n){e.min=t.min-n.min,e.max=e.min+fn(t)}function Xo(e,t,n){fg(e.x,t.x,n.x),fg(e.y,t.y,n.y)}const hg=()=>({translate:0,scale:1,origin:0,originPoint:0}),bs=()=>({x:hg(),y:hg()}),gg=()=>({min:0,max:0}),kt=()=>({x:gg(),y:gg()});function Xn(e){return[e("x"),e("y")]}function ju(e){return e===void 0||e===1}function of({scale:e,scaleX:t,scaleY:n}){return!ju(e)||!ju(t)||!ju(n)}function Fi(e){return of(e)||ry(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ry(e){return pg(e.x)||pg(e.y)}function pg(e){return e&&e!=="0%"}function ac(e,t,n){const i=e-n,a=t*i;return n+a}function mg(e,t,n,i,a){return a!==void 0&&(e=ac(e,a,i)),ac(e,n,i)+t}function af(e,t=0,n=1,i,a){e.min=mg(e.min,t,n,i,a),e.max=mg(e.max,t,n,i,a)}function iy(e,{x:t,y:n}){af(e.x,t.translate,t.scale,t.originPoint),af(e.y,n.translate,n.scale,n.originPoint)}const xg=.999999999999,yg=1.0000000000001;function Z4(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let l,f;for(let g=0;g<a;g++){l=n[g],f=l.projectionDelta;const{visualElement:m}=l.options;m&&m.props.style&&m.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Rs(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,iy(e,f)),i&&Fi(l.latestValues)&&Rs(e,l.latestValues))}t.x<yg&&t.x>xg&&(t.x=1),t.y<yg&&t.y>xg&&(t.y=1)}function Ns(e,t){e.min=e.min+t,e.max=e.max+t}function wg(e,t,n,i,a=.5){const l=vt(e.min,e.max,a);af(e,t,n,l,i)}function Rs(e,t){wg(e.x,t.x,t.scaleX,t.scale,t.originX),wg(e.y,t.y,t.scaleY,t.scale,t.originY)}function sy(e,t){return ey(H4(e.getBoundingClientRect(),t))}function $4(e,t,n){const i=sy(e,n),{scroll:a}=t;return a&&(Ns(i.x,a.offset.x),Ns(i.y,a.offset.y)),i}const oy=({current:e})=>e?e.ownerDocument.defaultView:null,Cg=(e,t)=>Math.abs(e-t);function q4(e,t){const n=Cg(e.x,t.x),i=Cg(e.y,t.y);return Math.sqrt(n**2+i**2)}class ay{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Uu(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,R=q4(E.offset,{x:0,y:0})>=3;if(!S&&!R)return;const{point:O}=E,{timestamp:_}=qt;this.history.push({...O,timestamp:_});const{onStart:j,onMove:N}=this.handlers;S||(j&&j(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,E)},this.handlePointerMove=(E,S)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Fu(S,this.transformPagePoint),At.update(this.updatePoint,!0)},this.handlePointerUp=(E,S)=>{this.end();const{onEnd:R,onSessionEnd:O,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Uu(E.type==="pointercancel"?this.lastMoveEventInfo:Fu(S,this.transformPagePoint),this.history);this.startEvent&&R&&R(E,j),O&&O(E,j)},!Wh(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=Da(t),g=Fu(f,this.transformPagePoint),{point:m}=g,{timestamp:p}=qt;this.history=[{...m,timestamp:p}];const{onSessionStart:C}=n;C&&C(t,Uu(g,this.history)),this.removeListeners=Na(Go(this.contextWindow,"pointermove",this.handlePointerMove),Go(this.contextWindow,"pointerup",this.handlePointerUp),Go(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Si(this.updatePoint)}}function Fu(e,t){return t?{point:t(e.point)}:e}function Eg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Uu({point:e},t){return{point:e,delta:Eg(e,ly(t)),offset:Eg(e,J4(t)),velocity:e8(t,.1)}}function J4(e){return e[0]}function ly(e){return e[e.length-1]}function e8(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=ly(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>Ir(t)));)n--;if(!i)return{x:0,y:0};const l=br(a.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const f={x:(a.x-i.x)/l,y:(a.y-i.y)/l};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function t8(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?vt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?vt(n,e,i.max):Math.min(e,n)),e}function vg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function n8(e,{top:t,left:n,bottom:i,right:a}){return{x:vg(e.x,n,a),y:vg(e.y,t,i)}}function Sg(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function r8(e,t){return{x:Sg(e.x,t.x),y:Sg(e.y,t.y)}}function i8(e,t){let n=.5;const i=fn(e),a=fn(t);return a>i?n=ha(t.min,t.max-i,e.min):i>a&&(n=ha(e.min,e.max-a,t.min)),Wr(0,1,n)}function s8(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const lf=.35;function o8(e=lf){return e===!1?e=0:e===!0&&(e=lf),{x:Ag(e,"left","right"),y:Ag(e,"top","bottom")}}function Ag(e,t,n){return{min:Tg(e,t),max:Tg(e,n)}}function Tg(e,t){return typeof e=="number"?e:e[t]||0}const a8=new WeakMap;class l8{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=C=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Da(C).point)},l=(C,E)=>{const{drag:S,dragPropagation:R,onDragStart:O}=this.getProps();if(S&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vA(S),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xn(j=>{let N=this.getAxisMotionValue(j).get()||0;if(Nr.test(N)){const{projection:b}=this.visualElement;if(b&&b.layout){const I=b.layout.layoutBox[j];I&&(N=fn(I)*(parseFloat(N)/100))}}this.originPoint[j]=N}),O&&At.postRender(()=>O(C,E)),rf(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},f=(C,E)=>{const{dragPropagation:S,dragDirectionLock:R,onDirectionLock:O,onDrag:_}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:j}=E;if(R&&this.currentDirection===null){this.currentDirection=c8(j),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",E.point,j),this.updateAxis("y",E.point,j),this.visualElement.render(),_&&_(C,E)},g=(C,E)=>this.stop(C,E),m=()=>Xn(C=>{var E;return this.getAnimationState(C)==="paused"&&((E=this.getAxisMotionValue(C).animation)==null?void 0:E.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new ay(t,{onSessionStart:a,onStart:l,onMove:f,onSessionEnd:g,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:oy(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&At.postRender(()=>l(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!ul(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=t8(f,this.constraints[t],this.elastic[t])),l.set(f)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;t&&Is(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=n8(i.layoutBox,t):this.constraints=!1,this.elastic=o8(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Xn(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=s8(i.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Is(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=$4(i,a.root,this.visualElement.getTransformPagePoint());let f=r8(a.layout.layoutBox,l);if(n){const g=n(z4(f));this.hasMutatedConstraints=!!g,g&&(f=ey(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:l,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),m=this.constraints||{},p=Xn(C=>{if(!ul(C,n,this.currentDirection))return;let E=m&&m[C]||{};f&&(E={min:0,max:0});const S=a?200:1e6,R=a?40:1e7,O={type:"inertia",velocity:i?t[C]:0,bounceStiffness:S,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...l,...E};return this.startAxisValueAnimation(C,O)});return Promise.all(p).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return rf(this.visualElement,t),i.start(e0(t,i,0,n,this.visualElement,!1))}stopAnimation(){Xn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Xn(n=>{const{drag:i}=this.getProps();if(!ul(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];l.set(t[n]-vt(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Is(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Xn(f=>{const g=this.getAxisMotionValue(f);if(g&&this.constraints!==!1){const m=g.get();a[f]=i8({min:m,max:m},this.constraints[f])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Xn(f=>{if(!ul(f,t,null))return;const g=this.getAxisMotionValue(f),{min:m,max:p}=this.constraints[f];g.set(vt(m,p,a[f]))})}addListeners(){if(!this.visualElement.current)return;a8.set(this.visualElement,this);const t=this.visualElement.current,n=Go(t,"pointerdown",m=>{const{drag:p,dragListener:C=!0}=this.getProps();p&&C&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();Is(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),At.read(i);const f=wa(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p})=>{this.isDragging&&p&&(Xn(C=>{const E=this.getAxisMotionValue(C);E&&(this.originPoint[C]+=m[C].translate,E.set(E.get()+m[C].translate))}),this.visualElement.render())});return()=>{f(),n(),l(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:f=lf,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:l,dragElastic:f,dragMomentum:g}}}function ul(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function c8(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class u8 extends Ni{constructor(t){super(t),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new l8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ig=e=>(t,n)=>{e&&At.postRender(()=>e(t,n))};class d8 extends Ni{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(t){this.session=new ay(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ig(t),onStart:Ig(n),onMove:i,onEnd:(l,f)=>{delete this.session,a&&At.postRender(()=>a(l,f))}}}mount(){this.removePointerDownListener=Go(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ml={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const No={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=bg(e,t.target.x),i=bg(e,t.target.y);return`${n}% ${i}%`}},f8={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=Ai.parse(e);if(a.length>5)return i;const l=Ai.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,m=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=m;const p=vt(g,m,.5);return typeof a[2+f]=="number"&&(a[2+f]/=p),typeof a[3+f]=="number"&&(a[3+f]/=p),l(a)}};class h8 extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:l}=t;$A(g8),l&&(n.group&&n.group.add(l),i&&i.register&&a&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ml.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:l}=this.props,{projection:f}=i;return f&&(f.isPresent=l,a||t.layoutDependency!==n||n===void 0||t.isPresent!==l?f.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?f.promote():f.relegate()||At.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Hh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cy(e){const[t,n]=L2(),i=D.useContext(Ch);return y.jsx(h8,{...e,layoutGroup:i,switchLayoutGroup:D.useContext(V2),isPresent:t,safeToRemove:n})}const g8={borderRadius:{...No,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:No,borderTopRightRadius:No,borderBottomLeftRadius:No,borderBottomRightRadius:No,boxShadow:f8};function p8(e,t,n){const i=ln(e)?e:Ws(e);return i.start(e0("",i,t,n)),i.animation}const m8=(e,t)=>e.depth-t.depth;class x8{constructor(){this.children=[],this.isDirty=!1}add(t){Sh(this.children,t),this.isDirty=!0}remove(t){Ah(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m8),this.isDirty=!1,this.children.forEach(t)}}function y8(e,t){const n=An.now(),i=({timestamp:a})=>{const l=a-n;l>=t&&(Si(i),e(l-t))};return At.setup(i,!0),()=>Si(i)}const uy=["TopLeft","TopRight","BottomLeft","BottomRight"],w8=uy.length,Ng=e=>typeof e=="string"?parseFloat(e):e,Rg=e=>typeof e=="number"||Be.test(e);function C8(e,t,n,i,a,l){a?(e.opacity=vt(0,n.opacity??1,E8(i)),e.opacityExit=vt(t.opacity??1,0,v8(i))):l&&(e.opacity=vt(t.opacity??1,n.opacity??1,i));for(let f=0;f<w8;f++){const g=`border${uy[f]}Radius`;let m=Mg(t,g),p=Mg(n,g);if(m===void 0&&p===void 0)continue;m||(m=0),p||(p=0),m===0||p===0||Rg(m)===Rg(p)?(e[g]=Math.max(vt(Ng(m),Ng(p),i),0),(Nr.test(p)||Nr.test(m))&&(e[g]+="%")):e[g]=p}(t.rotate||n.rotate)&&(e.rotate=vt(t.rotate||0,n.rotate||0,i))}function Mg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const E8=dy(0,.5,r2),v8=dy(.5,.95,qn);function dy(e,t,n){return i=>i<e?0:i>t?1:n(ha(e,t,i))}function Dg(e,t){e.min=t.min,e.max=t.max}function Gn(e,t){Dg(e.x,t.x),Dg(e.y,t.y)}function Og(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function _g(e,t,n,i,a){return e-=t,e=ac(e,1/n,i),a!==void 0&&(e=ac(e,1/a,i)),e}function S8(e,t=0,n=1,i=.5,a,l=e,f=e){if(Nr.test(t)&&(t=parseFloat(t),t=vt(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=vt(l.min,l.max,i);e===l&&(g-=t),e.min=_g(e.min,t,n,g,a),e.max=_g(e.max,t,n,g,a)}function kg(e,t,[n,i,a],l,f){S8(e,t[n],t[i],t[a],t.scale,l,f)}const A8=["x","scaleX","originX"],T8=["y","scaleY","originY"];function Pg(e,t,n,i){kg(e.x,t,A8,n?n.x:void 0,i?i.x:void 0),kg(e.y,t,T8,n?n.y:void 0,i?i.y:void 0)}function Lg(e){return e.translate===0&&e.scale===1}function fy(e){return Lg(e.x)&&Lg(e.y)}function Bg(e,t){return e.min===t.min&&e.max===t.max}function I8(e,t){return Bg(e.x,t.x)&&Bg(e.y,t.y)}function jg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function hy(e,t){return jg(e.x,t.x)&&jg(e.y,t.y)}function Fg(e){return fn(e.x)/fn(e.y)}function Ug(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class b8{constructor(){this.members=[]}add(t){Sh(this.members,t),t.scheduleRender()}remove(t){if(Ah(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N8(e,t,n){let i="";const a=e.x.translate/t.x,l=e.y.translate/t.y,f=(n==null?void 0:n.z)||0;if((a||l||f)&&(i=`translate3d(${a}px, ${l}px, ${f}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:C,rotateX:E,rotateY:S,skewX:R,skewY:O}=n;p&&(i=`perspective(${p}px) ${i}`),C&&(i+=`rotate(${C}deg) `),E&&(i+=`rotateX(${E}deg) `),S&&(i+=`rotateY(${S}deg) `),R&&(i+=`skewX(${R}deg) `),O&&(i+=`skewY(${O}deg) `)}const g=e.x.scale*t.x,m=e.y.scale*t.y;return(g!==1||m!==1)&&(i+=`scale(${g}, ${m})`),i||"none"}const Vu=["","X","Y","Z"],R8={visibility:"hidden"},M8=1e3;let D8=0;function zu(e,t,n,i){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),i&&(i[e]=0))}function gy(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Z2(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",At,!(a||l))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&gy(i)}function py({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=D8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(k8),this.nodes.forEach(F8),this.nodes.forEach(U8),this.nodes.forEach(P8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new x8)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new bh),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const m=this.eventHandlers.get(f);m&&m.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=P2(f)&&!NA(f),this.instance=f;const{layoutId:g,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||g)&&(this.isLayoutDirty=!0),e){let C;const E=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,C&&C(),C=y8(E,250),Ml.hasAnimatedSinceResize&&(Ml.hasAnimatedSinceResize=!1,this.nodes.forEach(zg))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&p&&(g||m)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:E,hasRelativeLayoutChanged:S,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||p.getDefaultTransition()||G8,{onLayoutAnimationStart:_,onLayoutAnimationComplete:j}=p.getProps(),N=!this.targetLayout||!hy(this.targetLayout,R),b=!E&&S;if(this.options.layoutRoot||this.resumeFrom||b||E&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...Vh(O,"layout"),onPlay:_,onComplete:j};(p.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(C,b)}else E||zg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(V8),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const E=this.path[C];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:g,layout:m}=this.options;if(g===void 0&&!m)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vg);return}this.isUpdating||this.nodes.forEach(B8),this.isUpdating=!1,this.nodes.forEach(j8),this.nodes.forEach(O8),this.nodes.forEach(_8),this.clearAllSnapshots();const g=An.now();qt.delta=Wr(0,1e3/60,g-qt.timestamp),qt.timestamp=g,qt.isProcessing=!0,Ou.update.process(qt),Ou.preRender.process(qt),Ou.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(L8),this.sharedNodes.forEach(z8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,At.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){At.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&this.instance){const m=i(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:m,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!fy(this.projectionDelta),m=this.getTransformTemplate(),p=m?m(this.latestValues,""):void 0,C=p!==this.prevTransformTemplateValue;f&&this.instance&&(g||Fi(this.latestValues)||C)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let m=this.removeElementScroll(g);return f&&(m=this.removeTransform(m)),Y8(m),{animationId:this.root.animationId,measuredBox:g,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:f}=this.options;if(!f)return kt();const g=f.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(X8))){const{scroll:C}=this.root;C&&(Ns(g.x,C.offset.x),Ns(g.y,C.offset.y))}return g}removeElementScroll(f){var m;const g=kt();if(Gn(g,f),(m=this.scroll)!=null&&m.wasRoot)return g;for(let p=0;p<this.path.length;p++){const C=this.path[p],{scroll:E,options:S}=C;C!==this.root&&E&&S.layoutScroll&&(E.wasRoot&&Gn(g,f),Ns(g.x,E.offset.x),Ns(g.y,E.offset.y))}return g}applyTransform(f,g=!1){const m=kt();Gn(m,f);for(let p=0;p<this.path.length;p++){const C=this.path[p];!g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Rs(m,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Fi(C.latestValues)&&Rs(m,C.latestValues)}return Fi(this.latestValues)&&Rs(m,this.latestValues),m}removeTransform(f){const g=kt();Gn(g,f);for(let m=0;m<this.path.length;m++){const p=this.path[m];if(!p.instance||!Fi(p.latestValues))continue;of(p.latestValues)&&p.updateSnapshot();const C=kt(),E=p.measurePageBox();Gn(C,E),Pg(g,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,C)}return Fi(this.latestValues)&&Pg(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var S;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==g;if(!(f||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:E}=this.options;if(!(!this.layout||!(C||E))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Xo(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),iy(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Xo(this.relativeTargetOrigin,this.target,R.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||of(this.parent.latestValues)||ry(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var O;const f=this.getLead(),g=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||(O=this.parent)!=null&&O.isProjectionDirty)&&(m=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(m=!1),m)return;const{layout:p,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||C))return;Gn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;Z4(this.layoutCorrected,this.treeScale,this.path,g),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=kt());const{target:R}=f;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Og(this.prevProjectionDelta.x,this.projectionDelta.x),Og(this.prevProjectionDelta.y,this.projectionDelta.y)),Yo(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==S||!Ug(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ug(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var g;if((g=this.options.visualElement)==null||g.scheduleRender(),f){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bs(),this.projectionDelta=bs(),this.projectionDeltaWithTransform=bs()}setAnimationOrigin(f,g=!1){const m=this.snapshot,p=m?m.latestValues:{},C={...this.latestValues},E=bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const S=kt(),R=m?m.source:void 0,O=this.layout?this.layout.source:void 0,_=R!==O,j=this.getStack(),N=!j||j.members.length<=1,b=!!(_&&!N&&this.options.crossfade===!0&&!this.path.some(W8));this.animationProgress=0;let I;this.mixTargetDelta=P=>{const F=P/1e3;Hg(E.x,f.x,F),Hg(E.y,f.y,F),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xo(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H8(this.relativeTarget,this.relativeTargetOrigin,S,F),I&&I8(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=kt()),Gn(I,this.relativeTarget)),_&&(this.animationValues=C,C8(C,p,this.latestValues,F,b,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){var g,m,p;this.notifyListeners("animationStart"),(g=this.currentAnimation)==null||g.stop(),(p=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=At.update(()=>{Ml.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ws(0)),this.currentAnimation=p8(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:C=>{this.mixTargetDelta(C),f.onUpdate&&f.onUpdate(C)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:m,layout:p,latestValues:C}=f;if(!(!g||!m||!p)){if(this!==f&&this.layout&&p&&my(this.options.animationType,this.layout.layoutBox,p.layoutBox)){m=this.target||kt();const E=fn(this.layout.layoutBox.x);m.x.min=f.target.x.min,m.x.max=m.x.min+E;const S=fn(this.layout.layoutBox.y);m.y.min=f.target.y.min,m.y.max=m.y.min+S}Gn(g,m),Rs(g,C),Yo(this.projectionDeltaWithTransform,this.layoutCorrected,g,C)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new b8),this.sharedNodes.get(f).add(g);const p=g.options.initialPromotionConfig;g.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var g;const{layoutId:f}=this.options;return f?((g=this.getStack())==null?void 0:g.lead)||this:this}getPrevLead(){var g;const{layoutId:f}=this.options;return f?(g=this.getStack())==null?void 0:g.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:m}={}){const p=this.getStack();p&&p.promote(this,m),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:m}=f;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(g=!0),!g)return;const p={};m.z&&zu("z",f,p,this.animationValues);for(let C=0;C<Vu.length;C++)zu(`rotate${Vu[C]}`,f,p,this.animationValues),zu(`skew${Vu[C]}`,f,p,this.animationValues);f.render();for(const C in p)f.setStaticValue(C,p[C]),this.animationValues&&(this.animationValues[C]=p[C]);f.scheduleRender()}getProjectionStyles(f){if(!this.instance||this.isSVG)return;if(!this.isVisible)return R8;const g={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Rl(f==null?void 0:f.pointerEvents)||"",g.transform=m?m(this.latestValues,""):"none",g;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=Rl(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Fi(this.latestValues)&&(R.transform=m?m({},""):"none",this.hasProjected=!1),R}const C=p.animationValues||p.latestValues;this.applyTransformsToTarget(),g.transform=N8(this.projectionDeltaWithTransform,this.treeScale,C),m&&(g.transform=m(C,g.transform));const{x:E,y:S}=this.projectionDelta;g.transformOrigin=`${E.origin*100}% ${S.origin*100}% 0`,p.animationValues?g.opacity=p===this?C.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:g.opacity=p===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const R in xa){if(C[R]===void 0)continue;const{correct:O,applyTo:_,isCSSVariable:j}=xa[R],N=g.transform==="none"?C[R]:O(C[R],p);if(_){const b=_.length;for(let I=0;I<b;I++)g[_[I]]=N}else j?this.options.visualElement.renderState.vars[R]=N:g[R]=N}return this.options.layoutId&&(g.pointerEvents=p===this?Rl(f==null?void 0:f.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)==null?void 0:g.stop()}),this.root.nodes.forEach(Vg),this.root.sharedNodes.clear()}}}function O8(e){e.updateLayout()}function _8(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:l}=e.options,f=t.source!==e.layout.source;l==="size"?Xn(E=>{const S=f?t.measuredBox[E]:t.layoutBox[E],R=fn(S);S.min=i[E].min,S.max=S.min+R}):my(l,t.layoutBox,i)&&Xn(E=>{const S=f?t.measuredBox[E]:t.layoutBox[E],R=fn(i[E]);S.max=S.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+R)});const g=bs();Yo(g,i,t.layoutBox);const m=bs();f?Yo(m,e.applyTransform(a,!0),t.measuredBox):Yo(m,i,t.layoutBox);const p=!fy(g);let C=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:S,layout:R}=E;if(S&&R){const O=kt();Xo(O,t.layoutBox,S.layoutBox);const _=kt();Xo(_,i,R.layoutBox),hy(O,_)||(C=!0),E.options.layoutRoot&&(e.relativeTarget=_,e.relativeTargetOrigin=O,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:m,layoutDelta:g,hasLayoutChanged:p,hasRelativeLayoutChanged:C})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function k8(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function P8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function L8(e){e.clearSnapshot()}function Vg(e){e.clearMeasurements()}function B8(e){e.isLayoutDirty=!1}function j8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function F8(e){e.resolveTargetDelta()}function U8(e){e.calcProjection()}function V8(e){e.resetSkewAndRotation()}function z8(e){e.removeLeadSnapshot()}function Hg(e,t,n){e.translate=vt(t.translate,0,n),e.scale=vt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Wg(e,t,n,i){e.min=vt(t.min,n.min,i),e.max=vt(t.max,n.max,i)}function H8(e,t,n,i){Wg(e.x,t.x,n.x,i),Wg(e.y,t.y,n.y,i)}function W8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const G8={duration:.45,ease:[.4,0,.1,1]},Gg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Yg=Gg("applewebkit/")&&!Gg("chrome/")?Math.round:qn;function Xg(e){e.min=Yg(e.min),e.max=Yg(e.max)}function Y8(e){Xg(e.x),Xg(e.y)}function my(e,t,n){return e==="position"||e==="preserve-aspect"&&!Q4(Fg(t),Fg(n),.2)}function X8(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Q8=py({attachResizeListener:(e,t)=>wa(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hu={current:void 0},xy=py({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Hu.current){const e=new Q8({});e.mount(window),e.setOptions({layoutScroll:!0}),Hu.current=e}return Hu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),K8={pan:{Feature:d8},drag:{Feature:u8,ProjectionNode:xy,MeasureLayout:cy}};function Qg(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=i[a];l&&At.postRender(()=>l(t,Da(t)))}class Z8 extends Ni{mount(){const{current:t}=this.node;t&&(this.unmount=SA(t,(n,i)=>(Qg(this.node,i,"Start"),a=>Qg(this.node,a,"End"))))}unmount(){}}class $8 extends Ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Na(wa(this.node.current,"focus",()=>this.onFocus()),wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Kg(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=i[a];l&&At.postRender(()=>l(t,Da(t)))}class q8 extends Ni{mount(){const{current:t}=this.node;t&&(this.unmount=bA(t,(n,i)=>(Kg(this.node,i,"Start"),(a,{success:l})=>Kg(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cf=new WeakMap,Wu=new WeakMap,J8=e=>{const t=cf.get(e.target);t&&t(e)},eT=e=>{e.forEach(J8)};function tT({root:e,...t}){const n=e||document;Wu.has(n)||Wu.set(n,{});const i=Wu.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(eT,{root:e,...t})),i[a]}function nT(e,t,n){const i=tT(t);return cf.set(e,n),i.observe(e),()=>{cf.delete(e),i.unobserve(e)}}const rT={some:0,all:1};class iT extends Ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:l}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:rT[a]},g=m=>{const{isIntersecting:p}=m;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:C,onViewportLeave:E}=this.node.getProps(),S=p?C:E;S&&S(m)};return nT(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(sT(t,n))&&this.startObserver()}unmount(){}}function sT({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const oT={inView:{Feature:iT},tap:{Feature:q8},focus:{Feature:$8},hover:{Feature:Z8}},aT={layout:{ProjectionNode:xy,MeasureLayout:cy}},uf={current:null},yy={current:!1};function lT(){if(yy.current=!0,!!vh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uf.current=e.matches;e.addListener(t),t()}else uf.current=!1}const cT=new WeakMap;function uT(e,t,n){for(const i in t){const a=t[i],l=n[i];if(ln(a))e.addValue(i,a);else if(ln(l))e.addValue(i,Ws(a,{owner:e}));else if(l!==a)if(e.hasValue(i)){const f=e.getValue(i);f.liveStyle===!0?f.jump(a):f.hasAnimated||f.set(a)}else{const f=e.getStaticValue(i);e.addValue(i,Ws(f!==void 0?f:a,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Zg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dT{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:l,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=An.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,At.render(this.render,!1,!0))};const{latestValues:m,renderState:p}=f;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=g,this.blockInitialAnimation=!!l,this.isControllingVariants=Lc(n),this.isVariantNode=F2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const S in E){const R=E[S];m[S]!==void 0&&ln(R)&&R.set(m[S],!1)}}mount(t){this.current=t,cT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),yy.current||lT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Si(this.notifyUpdate),Si(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=so.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",g=>{this.latestValues[t]=g,this.props.onUpdate&&At.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let f;window.MotionCheckAppearSync&&(f=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),l(),f&&f(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Gs){const n=Gs[t];if(!n)continue;const{isEnabled:i,Feature:a}=n;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Zg.length;i++){const a=Zg[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,f=t[l];f&&(this.propEventSubscriptions[a]=this.on(a,f))}this.prevMotionValues=uT(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Ws(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Xx(i)||Kx(i))?i=parseFloat(i):!MA(i)&&Ai.test(n)&&(i=M2(t,n)),this.setBaseTarget(t,ln(i)?i.get():i)),ln(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var l;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const f=qh(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);f&&(i=f[t])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ln(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new bh),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class wy extends dT{constructor(){super(...arguments),this.KeyframeResolver=yA}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Cy(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const l in n)e.style.setProperty(l,n[l])}function fT(e){return window.getComputedStyle(e)}class hT extends wy{constructor(){super(...arguments),this.type="html",this.renderInstance=Cy}readValueFromInstance(t,n){var i;if(so.has(n))return(i=this.projection)!=null&&i.isProjecting?Zd(n):BS(t,n);{const a=fT(t),l=(Mh(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return sy(t,n)}build(t,n,i){Kh(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Jh(t,n,i)}}const Ey=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gT(e,t,n,i){Cy(e,t,void 0,i);for(const a in t.attrs)e.setAttribute(Ey.has(a)?a:Qh(a),t.attrs[a])}class pT extends wy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(so.has(n)){const i=R2(n);return i&&i.default||0}return n=Ey.has(n)?n:Qh(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return K2(t,n,i)}build(t,n,i){G2(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,a){gT(t,n,i,a)}mount(t){this.isSVGTag=X2(t.tagName),super.mount(t)}}const mT=(e,t)=>$h(e)?new pT(t):new hT(t,{allowProjection:e!==D.Fragment}),xT=g4({...U4,...oT,...K8,...aT},mT),lc=FA(xT);function yT({post:e,userid:t,isAdmin:n,onClose:i,onSuccess:a,showMessage:l}){var b;const[f,g]=D.useState(e.title||""),[m,p]=D.useState(e.content||""),[C,E]=D.useState([]),[S,R]=D.useState([]),[O,_]=D.useState(!1),j=I=>{const P=Array.from(I.target.files);E(P);const F=P.map(W=>new Promise(B=>{const H=new FileReader;H.onloadend=()=>B(H.result),H.readAsDataURL(W)}));Promise.all(F).then(R)},N=async I=>{if(I.preventDefault(),!m.trim()){l("กรุณากรอกเนื้อหาข่าวสาร","error");return}_(!0);try{const P=new FormData;P.append("postId",e.id),P.append("title",f),P.append("content",m),P.append("userid",t),C.forEach(B=>{P.append("images",B)}),console.log("Sending edit request for post:",e.id);const F=await fetch("/api/edit-post",{method:"PUT",body:P}),W=await F.json();if(console.log("Edit response:",W),F.ok&&W.status)l("แก้ไขโพสต์สำเร็จ! ✏️","success"),a(),i();else throw new Error(W.message||"Failed to update post")}catch(P){console.error("Edit post error:",P),l(`เกิดข้อผิดพลาดขณะแก้ไขโพสต์: ${P.message}`,"error")}finally{_(!1)}};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:y.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)"},children:[y.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1e293b",fontSize:"20px",fontWeight:"600"},children:"แก้ไขโพสต์"}),y.jsxs("form",{onSubmit:N,children:[y.jsx("div",{style:{marginBottom:"16px"},children:y.jsx("input",{type:"text",placeholder:"หัวข้อข่าว (ไม่บังคับ)",value:f,onChange:I=>g(I.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",background:"#fafafa"},onFocus:I=>I.target.style.borderColor="#3b82f6",onBlur:I=>I.target.style.borderColor="#f1f5f9"})}),y.jsx("div",{style:{marginBottom:"20px"},children:y.jsx("textarea",{placeholder:"เขียนข่าวสาร...",value:m,onChange:I=>p(I.target.value),required:!0,rows:"4",style:{width:"100%",padding:"16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",outline:"none",resize:"vertical",minHeight:"100px",fontFamily:"inherit",lineHeight:"1.6",background:"#fafafa",transition:"all 0.2s ease"},onFocus:I=>I.target.style.borderColor="#3b82f6",onBlur:I=>I.target.style.borderColor="#f1f5f9"})}),((b=e.images)==null?void 0:b.length)>0&&y.jsxs("div",{style:{marginBottom:"16px"},children:[y.jsx("p",{style:{marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"รูปภาพปัจจุบัน:"}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"8px",marginBottom:"12px"},children:e.images.map((I,P)=>y.jsx("img",{src:I,alt:`current-${P}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}},P))})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:j,style:{display:"none"},id:"editImageUpload"}),y.jsx("label",{htmlFor:"editImageUpload",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:I=>{I.target.style.background="#f1f5f9",I.target.style.borderColor="#cbd5e1"},onMouseOut:I=>{I.target.style.background="#f8fafc",I.target.style.borderColor="#e2e8f0"},children:"📎 เพิ่มรูปใหม่"})]}),S.length>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"20px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:S.map((I,P)=>y.jsxs("div",{style:{position:"relative"},children:[y.jsx("img",{src:I,alt:`preview-${P}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),y.jsx("button",{type:"button",onClick:()=>{const F=C.filter((B,H)=>H!==P),W=S.filter((B,H)=>H!==P);E(F),R(W)},style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",background:"rgba(0,0,0,0.7)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"✕"})]},P))}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[y.jsx("button",{type:"button",onClick:i,style:{padding:"12px 20px",background:"transparent",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#64748b",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:I=>{I.target.style.borderColor="#cbd5e1",I.target.style.color="#475569"},onMouseOut:I=>{I.target.style.borderColor="#e2e8f0",I.target.style.color="#64748b"},children:"ยกเลิก"}),y.jsx("button",{type:"submit",disabled:!m.trim()||O,style:{padding:"12px 24px",background:!m.trim()||O?"#e2e8f0":"#3b82f6",border:"none",borderRadius:"10px",color:!m.trim()||O?"#94a3b8":"white",fontWeight:"600",cursor:!m.trim()||O?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"100px"},onMouseOver:I=>{!m.trim()||O||(I.target.style.background="#2563eb")},onMouseOut:I=>{!m.trim()||O||(I.target.style.background="#3b82f6")},children:O?"กำลังแก้ไข...":"บันทึก"})]})]})]})})}function wT({title:e,setTitle:t,content:n,setContent:i,imageFiles:a,setImageFiles:l,imageBase64List:f,setImageBase64List:g,isExpanded:m,setIsExpanded:p,isSubmitting:C,setIsSubmitting:E,userid:S,fetchPosts:R,showMessage:O}){const[_,j]=D.useState(!1),[N,b]=D.useState(null),[I,P]=D.useState("back"),[F,W]=D.useState(!1),B=D.useRef(null),H=D.useRef(null),G=V=>{const se=Array.from(V.target.files);l(se);const oe=se.map(J=>new Promise(he=>{const le=new FileReader;le.onloadend=()=>he(le.result),le.readAsDataURL(J)}));Promise.all(oe).then(g)},q=async(V="back")=>{try{j(!0),P(V),N&&N.getTracks().forEach(J=>J.stop());const se={video:V==="back"?{facingMode:{ideal:"environment"}}:{facingMode:"user"}};console.log(`🎥 เปิดกล้อง${V==="back"?"หลัง":"หน้า"}...`);const oe=await navigator.mediaDevices.getUserMedia(se);b(oe),setTimeout(()=>{B.current&&(B.current.srcObject=oe,B.current.play().catch(J=>{console.error("Error playing video:",J)}))},100)}catch(se){console.error("Error accessing camera:",se),j(!1),se.name==="NotAllowedError"?O("กรุณาอนุญาตให้เข้าถึงกล้องในเบราว์เซอร์","error"):se.name==="NotFoundError"?O("ไม่พบกล้องในอุปกรณ์นี้","error"):se.name==="NotSupportedError"?O("เบราว์เซอร์นี้ไม่รองรับการใช้งานกล้อง","error"):O("ไม่สามารถเปิดกล้องได้ กรุณาลองใหม่อีกครั้ง","error")}},ge=()=>{q(I==="back"?"front":"back")},ue=()=>{N&&(N.getTracks().forEach(V=>V.stop()),b(null)),j(!1)},Ee=()=>{if(B.current&&H.current){W(!0);const V=B.current,se=H.current,oe=se.getContext("2d");if(V.readyState!==4){O("กรุณารอสักครู่ให้กล้องเตรียมพร้อม","error"),W(!1);return}se.width=V.videoWidth||640,se.height=V.videoHeight||480,I==="front"?(oe.scale(-1,1),oe.drawImage(V,-se.width,0,se.width,se.height)):oe.drawImage(V,0,0,se.width,se.height),se.toBlob(J=>{if(J){const he=new File([J],`photo_${Date.now()}.jpg`,{type:"image/jpeg"}),le=[...a,he];l(le);const De=new FileReader;De.onloadend=()=>{g(Oe=>[...Oe,De.result])},De.readAsDataURL(he),ue(),O("ถ่ายรูปสำเร็จ! 📸","success")}else O("เกิดข้อผิดพลาดในการถ่ายรูป","error");W(!1)},"image/jpeg",.8)}else O("กล้องยังไม่พร้อม กรุณาลองใหม่อีกครั้ง","error"),W(!1)},Ne=async V=>{if(V.preventDefault(),!n.trim()){O("กรุณากรอกเนื้อหาข่าวสาร","error");return}if(!S){O("ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่","error");return}E(!0);try{const se=new FormData;se.append("title",e||""),se.append("content",n),se.append("userid",S),a.forEach(le=>{se.append("images",le)}),console.log("📤 Sending post data:",{title:e||"",content:n.substring(0,50)+"...",userid:S,filesCount:a.length});const oe=await fetch("/api/post",{method:"POST",body:se}),J=await oe.text();console.log("📥 Raw response:",J);let he;try{he=JSON.parse(J)}catch(le){throw console.error("❌ Failed to parse response:",le),new Error("Invalid response from server")}if(oe.ok&&he.status)console.log("✅ Post created successfully"),t(""),i(""),l([]),g([]),p(!1),await R(),O("โพสต์ข่าวสารสำเร็จ! 🎉","success");else throw console.error("❌ Server error:",he),new Error(he.message||"Failed to create post")}catch(se){console.error("💥 Submit error:",se),O(`เกิดข้อผิดพลาดขณะโพสต์: ${se.message}`,"error")}finally{E(!1)}};return y.jsx("section",{className:"new-post-section",children:y.jsx(sc,{children:m?y.jsxs(lc.form,{onSubmit:Ne,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9",marginBottom:"24px"},children:[y.jsx("div",{style:{marginBottom:"16px"},children:y.jsx("input",{type:"text",placeholder:"หัวข้อข่าว (ไม่บังคับ)",value:e,onChange:V=>t(V.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",background:"#fafafa"},onFocus:V=>V.target.style.borderColor="#3b82f6",onBlur:V=>V.target.style.borderColor="#f1f5f9"})}),y.jsx("div",{style:{marginBottom:"20px"},children:y.jsx("textarea",{placeholder:"เขียนข่าวสาร...",value:n,onChange:V=>i(V.target.value),required:!0,rows:"4",style:{width:"100%",padding:"16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",outline:"none",resize:"vertical",minHeight:"100px",fontFamily:"inherit",lineHeight:"1.6",background:"#fafafa",transition:"all 0.2s ease"},onFocus:V=>V.target.style.borderColor="#3b82f6",onBlur:V=>V.target.style.borderColor="#f1f5f9"})}),y.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[y.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:G,style:{display:"none"},id:"imageUpload"}),y.jsx("label",{htmlFor:"imageUpload",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:V=>{V.target.style.background="#f1f5f9",V.target.style.borderColor="#cbd5e1"},onMouseOut:V=>{V.target.style.background="#f8fafc",V.target.style.borderColor="#e2e8f0"},children:"📎 เลือกรูป"}),y.jsx("button",{type:"button",onClick:()=>q("back"),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:V=>{V.target.style.background="#f1f5f9",V.target.style.borderColor="#cbd5e1"},onMouseOut:V=>{V.target.style.background="#f8fafc",V.target.style.borderColor="#e2e8f0"},children:"📷 ถ่ายรูป"})]}),_&&y.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.92)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:[y.jsxs("div",{style:{position:"absolute",top:"24px",left:"50%",transform:"translateX(-50%)",color:"white",fontSize:"16px",fontWeight:"500",opacity:"0.9"},children:["กล้อง",I==="back"?"หลัง":"หน้า"]}),N?y.jsxs(y.Fragment,{children:[y.jsx("video",{ref:B,autoPlay:!0,playsInline:!0,muted:!0,style:{maxWidth:"90vw",maxHeight:"65vh",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",transform:I==="front"?"scaleX(-1)":"none"}}),y.jsxs("div",{style:{marginTop:"32px",display:"flex",gap:"16px",alignItems:"center"},children:[y.jsx("button",{type:"button",onClick:ge,style:{width:"48px",height:"48px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseOver:V=>V.target.style.backgroundColor="rgba(255,255,255,0.3)",onMouseOut:V=>V.target.style.backgroundColor="rgba(255,255,255,0.2)",children:"🔄"}),y.jsx("button",{type:"button",onClick:Ee,disabled:F,style:{width:"72px",height:"72px",backgroundColor:F?"rgba(255,255,255,0.3)":"white",border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",color:F?"rgba(0,0,0,0.5)":"#000",cursor:F?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"all 0.2s ease"},children:F?"⏳":"📸"}),y.jsx("button",{type:"button",onClick:ue,style:{width:"48px",height:"48px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseOver:V=>V.target.style.backgroundColor="rgba(255,255,255,0.3)",onMouseOut:V=>V.target.style.backgroundColor="rgba(255,255,255,0.2)",children:"✕"})]})]}):y.jsxs("div",{style:{color:"white",fontSize:"16px",textAlign:"center",background:"rgba(255,255,255,0.1)",padding:"32px",borderRadius:"16px",backdropFilter:"blur(10px)"},children:[y.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:"�"}),y.jsx("div",{style:{marginBottom:"8px"},children:"กำลังเปิดกล้อง..."}),y.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"อนุญาตการเข้าถึงกล้องในเบราว์เซอร์"})]}),y.jsx("canvas",{ref:H,style:{display:"none"}})]}),f.length>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"20px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:f.map((V,se)=>y.jsxs("div",{style:{position:"relative"},children:[y.jsx("img",{src:V,alt:`preview-${se}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),y.jsx("button",{type:"button",onClick:()=>{const oe=a.filter((he,le)=>le!==se),J=f.filter((he,le)=>le!==se);l(oe),g(J)},style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",background:"rgba(0,0,0,0.7)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"✕"})]},se))}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[y.jsx("button",{type:"button",onClick:()=>{p(!1),t(""),i(""),l([]),g([]),P("back"),ue()},style:{padding:"12px 20px",background:"transparent",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#64748b",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:V=>{V.target.style.borderColor="#cbd5e1",V.target.style.color="#475569"},onMouseOut:V=>{V.target.style.borderColor="#e2e8f0",V.target.style.color="#64748b"},children:"ยกเลิก"}),y.jsx("button",{type:"submit",disabled:!n.trim()||C,style:{padding:"12px 24px",background:!n.trim()||C?"#e2e8f0":"#3b82f6",border:"none",borderRadius:"10px",color:!n.trim()||C?"#94a3b8":"white",fontWeight:"600",cursor:!n.trim()||C?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"100px"},onMouseOver:V=>{!n.trim()||C||(V.target.style.background="#2563eb")},onMouseOut:V=>{!n.trim()||C||(V.target.style.background="#3b82f6")},children:C?"กำลังโพสต์...":"โพสต์"})]})]}):y.jsx("button",{onClick:()=>p(!0),style:{width:"100%",padding:"16px",background:"white",border:"2px solid #f1f5f9",borderRadius:"16px",color:"#64748b",fontSize:"16px",fontWeight:"500",cursor:"pointer",marginBottom:"24px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},onMouseOver:V=>{V.target.style.borderColor="#e2e8f0",V.target.style.background="#fafafa"},onMouseOut:V=>{V.target.style.borderColor="#f1f5f9",V.target.style.background="white"},children:"✍️ เขียนข่าวสาร..."})})})}function CT(){const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(!1),[f,g]=D.useState(""),[m,p]=D.useState(""),[C,E]=D.useState([]),[S,R]=D.useState([]),[O,_]=D.useState([]),[j,N]=D.useState(!1),[b,I]=D.useState(!1),[P,F]=D.useState(null),[W,B]=D.useState(!1),[H,G]=D.useState(""),[q,ge]=D.useState(!1),[ue,Ee]=D.useState(""),[Ne,V]=D.useState("success"),[se,oe]=D.useState(null),[J,he]=D.useState(new Set),le=Qr(),De=(K,Pe="success")=>{Ee(K),V(Pe),ge(!0)},Oe=()=>{ge(!1)};D.useEffect(()=>{const K=localStorage.getItem("token");if(console.log("Token from localStorage:",K,"Type:",typeof K),!K||K==="null"||K==="undefined"){console.log("No valid token found, redirecting to login"),le("/login");return}const Pe=typeof K=="string"?K:JSON.stringify(K);console.log("Using token:",Pe.substring(0,30)+"..."),fetch(`/api/user/${Pe}`).then(Fe=>Fe.json()).then(Fe=>{console.log("API Response:",Fe),Fe.status&&Fe.data?(t(Fe.data.realname),i(Fe.data.userid),l(Fe.data.admin),Fe.data.profileImage?G(`data:image/jpeg;base64,${Fe.data.profileImage}`):Fe.data.avatar&&G(Fe.data.avatar)):(localStorage.removeItem("token"),le("/login"))}).catch(()=>{localStorage.removeItem("token"),le("/login")}),ct()},[]);const ct=async()=>{try{const Pe=await(await fetch("/api/post")).json();console.log("Posts API response:",Pe),Pe.status&&Pe.data?(console.log("Setting posts:",Pe.data),Pe.data.forEach((Fe,_e)=>{var Ve;console.log(`Post ${_e}:`,{id:Fe.id,likes:Fe.likes,likesBy:Fe.likesBy,title:((Ve=Fe.title)==null?void 0:Ve.substring(0,20))+"..."})}),_(Pe.data)):(console.log("No posts data received"),_([]))}catch(K){console.error("Error fetching posts:",K),_([])}},Ze=async K=>{if(window.confirm("คุณต้องการลบโพสต์นี้ใช่หรือไม่?"))try{const Pe=localStorage.getItem("token");(await fetch(`/api/post/${K}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pe}`}})).ok?(await ct(),De("ลบโพสต์สำเร็จแล้ว! 🗑️","success")):De("ลบโพสต์ไม่สำเร็จ","error")}catch{De("เกิดข้อผิดพลาดขณะลบโพสต์","error")}},Ht=async K=>{var Pe,Fe;if(J.has(K)){console.log("Already processing like for post:",K);return}try{he(je=>new Set([...je,K])),console.log("Sending like request for post:",K),console.log("Current userid:",n,"Type:",typeof n);const _e=await fetch("/api/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:K,userid:n})}),Ve=await _e.json();if(console.log("Like response:",Ve),_e.ok&&Ve.status)console.log("Before update - Post likes:",(Pe=O.find(je=>je.id===K))==null?void 0:Pe.likes),console.log("Before update - Post likesBy:",(Fe=O.find(je=>je.id===K))==null?void 0:Fe.likesBy),console.log("API Response:",Ve.data),_(je=>{var me;const ze=je.map(tn=>tn.id===K?{...tn,likes:Ve.data.likes,likesBy:Ve.data.likesBy||[]}:tn),It=ze.find(tn=>tn.id===K);return console.log("After update - Post data:",{id:It==null?void 0:It.id,likes:It==null?void 0:It.likes,likesBy:It==null?void 0:It.likesBy,userInArray:(me=It==null?void 0:It.likesBy)==null?void 0:me.some(tn=>String(tn)===String(n))}),ze}),console.log("Updated to - likes:",Ve.data.likes,"likesBy:",Ve.data.likesBy);else throw new Error(Ve.message||"Failed to toggle like")}catch(_e){console.error("Like post error:",_e),De(`เกิดข้อผิดพลาด: ${_e.message}`,"error")}finally{he(_e=>{const Ve=new Set(_e);return Ve.delete(K),Ve})}},fe=K=>{oe(K)},Re=()=>{oe(null)},st=()=>{ct()},Ot=D.useCallback(K=>{if(!K.likesBy||!n)return!1;const Pe=K.likesBy.some(Fe=>String(Fe)===String(n));return console.log(`isUserLiked check for post ${K.id}:`,{userid:n,likes:K.likes,likesBy:K.likesBy,hasUserInArray:Pe,result:Pe}),Pe},[n]),ve=K=>{F(K),I(!0)},Se=()=>{I(!1),F(null)};function Ye(K){const Pe=/(https?:\/\/[^\s]+)/g;return K.split(Pe).map((_e,Ve)=>Pe.test(_e)?y.jsx("a",{href:_e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:_e},Ve):_e)}return y.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",padding:"20px"},children:y.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[y.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"24px",marginBottom:"24px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9"},children:[y.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"3px solid #e2e8f0"},children:H?y.jsx("img",{src:H,alt:"avatar",style:{width:"100%",height:"100%",objectFit:"cover"},onError:K=>{K.target.style.display="none"}}):y.jsx("div",{style:{fontSize:"32px",color:"#94a3b8"},children:"👤"})}),y.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:e||"ผู้ใช้"}),y.jsx("div",{style:{fontSize:"14px",color:"#64748b",background:a?"#fef3c7":"#f1f5f9",padding:"4px 12px",borderRadius:"20px",display:"inline-block",fontWeight:"500"},children:a?"👑 ผู้ดูแลระบบ":"✨ สมาชิก"})]}),y.jsx("div",{style:{width:"100%",maxWidth:4500,margin:"0 auto"},children:y.jsx(wT,{title:f,setTitle:g,content:m,setContent:p,imageFiles:C,setImageFiles:E,imageBase64List:S,setImageBase64List:R,isExpanded:j,setIsExpanded:N,isSubmitting:W,setIsSubmitting:B,userid:n,fetchPosts:ct,showMessage:De})}),y.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[y.jsxs("section",{style:{marginTop:"8px"},children:[y.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"📰 ข่าวสารล่าสุด"}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:O.length===0?y.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"48px 20px",background:"white",borderRadius:"16px",border:"2px dashed #e5e7eb"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📝"}),y.jsx("div",{style:{fontSize:"16px",fontWeight:"500"},children:"ยังไม่มีข่าวสาร"}),y.jsx("div",{style:{fontSize:"14px",marginTop:"8px"},children:"เป็นคนแรกที่แชร์ข่าวสารกันเลย!"})]}):y.jsx(sc,{children:O.map(K=>{var Pe,Fe;return y.jsxs(lc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9",position:"relative"},children:[y.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",fontSize:"12px",color:"#6b7280",background:"#f8fafc",padding:"4px 8px",borderRadius:"6px",border:"1px solid #e2e8f0",fontWeight:"500"},children:new Date(K.date).toLocaleDateString("th-TH")}),K.title&&y.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",marginBottom:"12px",lineHeight:"1.4",marginRight:"80px"},children:K.title}),y.jsx("p",{style:{fontSize:"16px",color:"#374151",lineHeight:"1.6",marginBottom:((Pe=K.images)==null?void 0:Pe.length)>0?"16px":"20px",whiteSpace:"pre-wrap"},children:Ye(K.content)}),((Fe=K.images)==null?void 0:Fe.length)>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:K.images.length===1?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"20px"},children:K.images.map((_e,Ve)=>y.jsx("img",{src:_e,alt:`โพสต์ ${Ve+1}`,style:{width:"100%",height:K.images.length===1?"auto":"200px",objectFit:"cover",borderRadius:"12px",cursor:"pointer",transition:"transform 0.2s ease",border:"1px solid #e2e8f0"},onClick:()=>ve(_e),onMouseOver:je=>je.target.style.transform="scale(1.02)",onMouseOut:je=>je.target.style.transform="scale(1)"},Ve))}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:"1px solid #f1f5f9"},children:[y.jsx("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:y.jsx("span",{style:{background:"#f3f4f6",padding:"4px 8px",borderRadius:"6px",fontWeight:"500"},children:K.postedBy})}),y.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y.jsxs("button",{onClick:()=>Ht(K.id),disabled:J.has(K.id),style:{padding:"8px 12px",background:J.has(K.id)?"#f3f4f6":Ot(K)?"#fef3f2":"#f8fafc",border:`1px solid ${J.has(K.id)?"#d1d5db":Ot(K)?"#fecaca":"#e2e8f0"}`,borderRadius:"8px",color:J.has(K.id)?"#9ca3af":Ot(K)?"#dc2626":"#64748b",cursor:J.has(K.id)?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",opacity:J.has(K.id)?.7:1},onMouseOver:_e=>{J.has(K.id)||(Ot(K)?(_e.target.style.background="#fee2e2",_e.target.style.borderColor="#fca5a5"):(_e.target.style.background="#f1f5f9",_e.target.style.borderColor="#cbd5e1"))},onMouseOut:_e=>{J.has(K.id)||(Ot(K)?(_e.target.style.background="#fef3f2",_e.target.style.borderColor="#fecaca"):(_e.target.style.background="#f8fafc",_e.target.style.borderColor="#e2e8f0"))},title:J.has(K.id)?"กำลังประมวลผล...":Ot(K)?"ยกเลิกไลค์":"กดไลค์",children:[J.has(K.id)?"⏳":Ot(K)?"❤️":"🤍",y.jsx("span",{children:K.likes||0})]}),(a||String(K.userid)===String(n))&&y.jsx("button",{onClick:()=>fe(K),style:{padding:"8px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"8px",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:_e=>{_e.target.style.background="#dbeafe",_e.target.style.borderColor="#93c5fd"},onMouseOut:_e=>{_e.target.style.background="#eff6ff",_e.target.style.borderColor="#bfdbfe"},title:"แก้ไขโพสต์",children:"✏️"}),(a||String(K.userid)===String(n))&&y.jsx("button",{onClick:()=>Ze(K.id),style:{padding:"8px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:_e=>{_e.target.style.background="#fee2e2",_e.target.style.borderColor="#fca5a5"},onMouseOut:_e=>{_e.target.style.background="#fef2f2",_e.target.style.borderColor="#fecaca"},title:"ลบโพสต์",children:"🗑️"})]})]})]},K.id)})})})]}),b&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:Se,children:y.jsx("img",{src:P,alt:"expanded",style:{maxWidth:"90vw",maxHeight:"90vh",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},onClick:K=>K.stopPropagation()})})]}),q&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:y.jsxs("div",{style:{backgroundColor:"white",padding:"32px",borderRadius:"20px",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",textAlign:"center",maxWidth:"400px",margin:"20px",border:`3px solid ${Ne==="success"?"#10b981":"#ef4444"}`},children:[y.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:Ne==="success"?"✅":"❌"}),y.jsx("h3",{style:{margin:"0 0 12px 0",color:Ne==="success"?"#10b981":"#ef4444",fontSize:"1.25rem",fontWeight:"600"},children:Ne==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),y.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"1rem",lineHeight:"1.5"},children:ue}),y.jsx("button",{onClick:Oe,style:{backgroundColor:Ne==="success"?"#10b981":"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"10px",fontSize:"16px",fontWeight:"600",cursor:"pointer",minWidth:"100px",transition:"all 0.2s ease"},onMouseOver:K=>K.target.style.opacity="0.9",onMouseOut:K=>K.target.style.opacity="1",children:"ตกลง"})]})}),se&&y.jsx(yT,{post:se,userid:n,isAdmin:a,onClose:Re,onSuccess:st,showMessage:De})]})})}const ET="/assets/logo-0b13794e.png";function vT(){const[e,t]=D.useState("login"),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(!1),[C,E]=D.useState(""),[S,R]=D.useState(!1),[O,_]=D.useState(""),[j,N]=D.useState(""),[b,I]=D.useState(""),[P,F]=D.useState(""),[W,B]=D.useState(""),[H,G]=D.useState(""),[q,ge]=D.useState(""),ue="";console.log("🔍 Environment:","production"),console.log("🔍 API URL:",ue);const Ee=Qr();D.useEffect(()=>{R(!0)},[]);const Ne=async se=>{var oe,J;se.preventDefault(),g(""),p(!0),E("กำลังเข้าสู่ระบบ...");try{const he=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}),le=await he.json();if(console.log("Login response data:",le),he.ok){E("เข้าสู่ระบบสำเร็จ! กำลังนำคุณไปยังหน้าหลัก...");const De=le.token||((oe=le.data)==null?void 0:oe.token),Oe=(J=le.data)==null?void 0:J.user;console.log("⚡ Fast login - Token:",De?"OK":"Missing"),console.log("⚡ Fast login - User info:",Oe?"OK":"Missing"),De?(localStorage.setItem("token",De),console.log("✅ Token saved")):console.error("❌ No token received"),Oe?(localStorage.setItem("userInfo",JSON.stringify(Oe)),console.log("✅ User info saved immediately:",Oe)):console.error("❌ No user info received"),Ee("/")}else g(le.error||le.message||"เข้าสู่ระบบไม่สำเร็จ"),E("")}catch{g("เกิดข้อผิดพลาดในการเชื่อมต่อ"),E("")}finally{p(!1)}},V=async se=>{if(se.preventDefault(),G(""),!O||!P||!W||!j||!b||!q){G("กรุณากรอกข้อมูลให้ครบ");return}if(P!==W){G("รหัสผ่านไม่ตรงกัน");return}try{const oe=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:O,realname:j,userid:b,password:P,blood:q})}),J=await oe.json();oe.ok?(alert("สมัครสมาชิกสำเร็จ"),t("login")):G(J.error||J.message||"สมัครสมาชิกไม่สำเร็จ")}catch{G("เกิดข้อผิดพลาด")}};return y.jsx("div",{className:"login-bg",children:y.jsxs("div",{className:`container ${S?"fade-in":""}`,children:[y.jsx("div",{className:"logo-container",children:y.jsx("img",{src:ET,alt:"logo",className:"logo"})}),y.jsxs("div",{className:"tabs",children:[y.jsx("button",{className:e==="login"?"active":"",onClick:()=>t("login"),children:"Login"}),y.jsx("button",{className:e==="register"?"active":"",onClick:()=>t("register"),children:"Register"})]}),e==="login"&&y.jsxs("form",{className:"form active",onSubmit:Ne,children:[y.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้ หรือ รหัสประจำตัวประชาชน",value:n,onChange:se=>i(se.target.value),required:!0,disabled:m}),y.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:a,onChange:se=>l(se.target.value),required:!0,disabled:m}),f&&y.jsx("div",{className:"error-message",children:f}),C&&y.jsx("div",{className:"success-message",children:C}),y.jsx("button",{type:"submit",disabled:m,className:"btn",children:m?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]}),e==="register"&&y.jsxs("form",{className:"form active",onSubmit:V,children:[y.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้",value:O,onChange:se=>_(se.target.value),required:!0}),y.jsx("input",{type:"text",placeholder:"ชื่อ-นามสกุล",value:j,onChange:se=>N(se.target.value),required:!0}),y.jsx("input",{type:"text",placeholder:"รหัสประจำตัวประชาชน",value:b,onChange:se=>I(se.target.value),required:!0}),y.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:P,onChange:se=>F(se.target.value),required:!0}),y.jsx("input",{type:"password",placeholder:"ยืนยันรหัสผ่าน",value:W,onChange:se=>B(se.target.value),required:!0}),y.jsxs("select",{value:q,onChange:se=>ge(se.target.value),required:!0,className:"register-blood-select",children:[y.jsx("option",{value:"",children:"เลือกกรุ๊ปเลือด"}),y.jsx("option",{value:"A",children:"A"}),y.jsx("option",{value:"B",children:"B"}),y.jsx("option",{value:"O",children:"O"}),y.jsx("option",{value:"AB",children:"AB"})]}),H&&y.jsx("div",{className:"error-message",children:H}),y.jsx("button",{type:"submit",className:"btn",children:"สมัครสมาชิก"})]}),e==="login"&&y.jsxs("div",{className:"login-footer",children:["ยังไม่มีบัญชี? ",y.jsx("span",{className:"login-link",onClick:()=>t("register"),children:"สมัครสมาชิก"})]})]})})}function ST(){const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(""),[C,E]=D.useState(""),[S,R]=D.useState(!1),O=Qr();D.useEffect(()=>{R(!0)},[]);const _=async j=>{j.preventDefault(),E("");try{const N=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,realname:n,userid:a,password:f,blood:m})}),b=await N.json();N.ok?(alert("สมัครสมาชิกสำเร็จ"),O("/login")):E(b.error||b.message||"สมัครสมาชิกไม่สำเร็จ")}catch{E("เกิดข้อผิดพลาด")}};return y.jsxs("div",{className:`register-container ${S?"fade-in":""}`,children:[y.jsx("h2",{className:"register-title",children:"สมัครสมาชิก"}),y.jsxs("form",{onSubmit:_,className:"register-form",children:[y.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้",value:e,onChange:j=>t(j.target.value),required:!0,className:"register-input"}),y.jsx("input",{type:"text",placeholder:"ชื่อ-นามสกุล",value:n,onChange:j=>i(j.target.value),required:!0,className:"register-input"}),y.jsx("input",{type:"text",placeholder:"รหัสประจำตัวประชาชน",value:a,onChange:j=>l(j.target.value),required:!0,className:"register-input"}),y.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:f,onChange:j=>g(j.target.value),required:!0,className:"register-input"}),y.jsxs("select",{value:m,onChange:j=>p(j.target.value),required:!0,className:"register-select",children:[y.jsx("option",{value:"",children:"เลือกกรุ๊ปเลือด"}),y.jsx("option",{value:"A",children:"A"}),y.jsx("option",{value:"B",children:"B"}),y.jsx("option",{value:"O",children:"O"}),y.jsx("option",{value:"AB",children:"AB"})]}),C&&y.jsx("div",{className:"register-error",children:C}),y.jsx("button",{type:"submit",className:"register-button",children:"สมัครสมาชิก"})]}),y.jsxs("div",{className:"register-footer",children:["มีบัญชีอยู่แล้ว? ",y.jsx(wh,{to:"/login",children:"เข้าสู่ระบบ"})]})]})}const AT=()=>{const[e,t]=D.useState([]);D.useEffect(()=>{fetch("/api/users").then(a=>a.json()).then(a=>t(a)).catch(a=>console.error(a))},[]);const n=a=>a?typeof a=="string"?`data:image/png;base64,${a}`:a.data?`data:image/png;base64,${btoa(new Uint8Array(a.data).reduce((f,g)=>f+String.fromCharCode(g),""))}`:"":"",i=async(a,l)=>{await fetch("/api/user/setAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:a,admin:l})}),t(e.map(f=>f.userid===a?{...f,admin:l}:f)),console.log(l?`User ${a} is now Admin`:`User ${a} is no longer Admin`)};return y.jsx("div",{className:"userlist-bg",children:y.jsxs("div",{className:"userlist-container",children:[y.jsx("h1",{className:"userlist-title",children:"รายชื่อผู้ใช้ระบบ"}),y.jsxs("table",{className:"userlist-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"ID"}),y.jsx("th",{children:"Username"}),y.jsx("th",{children:"Real Name"}),y.jsx("th",{children:"UserID"}),y.jsx("th",{children:"Blood"}),y.jsx("th",{children:"Gun Number"}),y.jsx("th",{children:"Point"}),y.jsx("th",{children:"Major"}),y.jsx("th",{children:"Profile Image"}),y.jsx("th",{children:"Admin"})]})}),y.jsx("tbody",{children:e.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"10",className:"userlist-loading",children:"ไม่พบข้อมูลผู้ใช้"})}):e.map(a=>y.jsxs("tr",{children:[y.jsx("td",{children:a.id}),y.jsx("td",{children:a.username}),y.jsx("td",{children:a.realname}),y.jsx("td",{children:a.userid}),y.jsx("td",{children:a.blood}),y.jsx("td",{children:a.gunNumber}),y.jsx("td",{children:a.point}),y.jsx("td",{children:a.major}),y.jsx("td",{children:a.profileImage&&a.profileImage.data?y.jsx("img",{src:n(a.profileImage),alt:"profile",className:"userlist-avatar"}):y.jsx("div",{className:"userlist-no-avatar",children:"No Image"})}),y.jsxs("td",{children:[y.jsx("input",{type:"checkbox",checked:!!a.admin,onChange:l=>i(a.userid,l.target.checked),className:"userlist-checkbox"})," ",a.admin?"YES":"NO"]})]},a.id))})]})]})})},Li=({children:e})=>localStorage.getItem("token")?e:y.jsx(qE,{to:"/login",replace:!0});function TT(){var I;const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(0),[f,g]=D.useState([]),[m,p]=D.useState(""),[C,E]=D.useState(""),[S,R]=D.useState(!0),[O,_]=D.useState(""),j=Qr(),N=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];D.useEffect(()=>{const P=localStorage.getItem("token");if(!P){R(!1);return}fetch("/api/user/me",{headers:{Authorization:`Bearer ${P}`}}).then(F=>F.json()).then(F=>{if(!F.data||!F.data.userid){R(!1);return}p(F.data.userid),t(F.data.realname||""),E(F.data.major||""),i(F.data.profileImage?`data:image/jpeg;base64,${F.data.profileImage}`:"");const W=F.data.adjustments||[];g(W),l(F.data.point||0),_(!!F.data.admin),R(!1)}).catch(()=>R(!1))},[]);function b(P){if(!P)return"";const F=new Date(P);return isNaN(F)?P:F.toLocaleDateString("th-TH",{year:"numeric",month:"2-digit",day:"2-digit"})}return S?y.jsx("div",{className:"behavior-point-container",children:y.jsx("div",{className:"loading",children:"Loading..."})}):y.jsx("div",{className:"behavior-point-bg",children:y.jsxs("div",{className:"behavior-point-container",children:[y.jsx("h1",{className:"behavior-point-title",children:"คะแนนความประพฤติ"}),y.jsxs("div",{className:"behavior-card",children:[y.jsx("h2",{children:"ข้อมูลผู้ใช้"}),y.jsxs("div",{className:"profile-section",children:[n?y.jsx("img",{src:n,alt:"Profile",className:"profile-img"}):y.jsx("div",{className:"profile-img no-img",children:"No Image"}),y.jsxs("div",{className:"profile-info",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"ชื่อ:"})," ",e]}),y.jsxs("p",{children:[y.jsx("strong",{children:"รหัส:"})," ",m]}),C&&y.jsxs("p",{children:[y.jsx("strong",{children:"สาขา:"})," ",((I=N.find(P=>P.value===C))==null?void 0:I.label)||C]}),y.jsxs("p",{children:[y.jsx("strong",{children:"คะแนนพฤติกรรม:"})," ",y.jsx("span",{className:"point",children:a})]}),O&&y.jsx("p",{className:"admin-badge",children:"สถานะ: Admin"})]})]}),O&&y.jsx("button",{className:"deduct-point-btn",onClick:()=>j("/DeductPoint"),children:"ไปหน้าหักคะแนน (DeductPoint)"}),y.jsx("h3",{children:"ประวัติการปรับคะแนน"}),y.jsxs("div",{style:{fontWeight:600,display:"flex",padding:"4px 0",borderBottom:"1px solid #e0e0e0",marginBottom:4},children:[y.jsx("span",{style:{flex:1},children:"วันที่"}),y.jsx("span",{style:{width:60,textAlign:"center"},children:"คะแนน"}),y.jsx("span",{style:{flex:2},children:"เหตุผล"}),y.jsx("span",{style:{flex:1},children:"โดย"})]}),y.jsxs("ul",{className:"adjustment-list",children:[f.length===0&&y.jsx("li",{className:"no-history",children:"ไม่มีประวัติการปรับคะแนน"}),f.map((P,F)=>y.jsxs("li",{className:P.change>0?"plus":P.change<0?"minus":"",style:{display:"flex",alignItems:"center"},children:[y.jsx("span",{className:"adj-date",style:{flex:1},children:b(P.date)}),y.jsxs("span",{className:"adj-change",style:{width:60,textAlign:"center"},children:[P.change>0?"+":"",P.change]}),y.jsxs("span",{className:"adj-reason",style:{flex:2},children:["(",P.reason,")"]}),y.jsxs("span",{className:"adj-operator",style:{flex:1},children:["โดย: ",P.operator]})]},F))]})]})]})})}function IT(){const[e,t]=D.useState(""),[n,i]=D.useState(-1),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(""),C=async E=>{E.preventDefault();const R=await(await fetch("/api/behavior/deduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:e,change:n,reason:a,operator:f})})).json();p(R.message||(R.status?"สำเร็จ":"เกิดข้อผิดพลาด"))};return y.jsx("div",{className:"deduct-point-bg",children:y.jsxs("div",{className:"deduct-point-container",children:[y.jsx("h1",{className:"deduct-point-title",children:"ระบบตัดคะแนนความประพฤติ"}),y.jsxs("div",{className:"deduct-point-card",children:[y.jsx("h2",{children:"ตัดคะแนน"}),y.jsxs("form",{onSubmit:C,children:[y.jsx("div",{children:y.jsxs("label",{children:["รหัสนักเรียน:",y.jsx("input",{value:e,onChange:E=>t(E.target.value),required:!0})]})}),y.jsx("div",{children:y.jsxs("label",{children:["คะแนนที่ตัด:",y.jsx("input",{type:"number",value:Math.abs(n),onChange:E=>i(-Math.abs(Number(E.target.value))),min:"1",required:!0})]})}),y.jsx("div",{children:y.jsxs("label",{children:["เหตุผล:",y.jsx("input",{value:a,onChange:E=>l(E.target.value),required:!0})]})}),y.jsx("div",{children:y.jsxs("label",{children:["ผู้ตัดคะแนน:",y.jsx("input",{value:f,onChange:E=>g(E.target.value),required:!0})]})}),y.jsx("button",{type:"submit",children:"ตัดคะแนน"})]}),m&&y.jsx("div",{className:"message",children:m})]})]})})}const $g=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];function bT(){const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(""),[C,E]=D.useState(null),[S,R]=D.useState(""),[O,_]=D.useState(""),[j,N]=D.useState(""),[b,I]=D.useState(""),[P,F]=D.useState(""),[W,B]=D.useState([{key:"",value:1}]),[H,G]=D.useState(""),[q,ge]=D.useState(""),[ue,Ee]=D.useState(""),[Ne,V]=D.useState(""),[se,oe]=D.useState(!1),[J,he]=D.useState(""),[le,De]=D.useState("success"),Oe=Qr();D.useEffect(()=>{const ve=localStorage.getItem("token");fetch("/api/user/me",{headers:{Authorization:`Bearer ${ve}`}}).then(Se=>Se.json()).then(Se=>{if(Se.status){t(Se.data.realname||""),i(Se.data.userid||""),l(Se.data.blood||""),g(Se.data.gunNumber||"");let Ye=Se.data.major||"";Ye.startsWith("สาขาวิชา")&&(Ye=Ye.replace("สาขาวิชา","").trim());const K=$g.find(Pe=>Pe.label===Ye||Pe.value===Ye);if(p(K?K.value:""),_(Se.data.club1||""),N(Se.data.club2||""),I(Se.data.club3||""),F(Se.data.year||""),G(Se.data.battalion||""),ge(Se.data.company||""),Ee(Se.data.platoon||""),V(Se.data.squad||""),Se.data.profileImage&&R(`data:image/jpeg;base64,${Se.data.profileImage}`),Se.data.other)try{const Pe=typeof Se.data.other=="string"?JSON.parse(Se.data.other):Se.data.other;Array.isArray(Pe)&&B(Pe)}catch{}}}).catch(Se=>{console.error("Error fetching user data:",Se)})},[]);const ct=ve=>{const Se=ve.target.files[0];Se&&(E(Se),R(URL.createObjectURL(Se)))},Ze=(ve,Se,Ye)=>{B(K=>{const Pe=[...K];return Pe[ve][Se]=Ye,Pe})},Ht=()=>{B(ve=>[...ve,{key:"",value:1}])},fe=ve=>{B(Se=>Se.filter((Ye,K)=>K!==ve))},Re=(ve,Se="success")=>{he(ve),De(Se),oe(!0)},st=()=>{oe(!1),le==="success"&&Oe("/")},Ot=ve=>{ve.preventDefault();const Se=localStorage.getItem("token"),Ye=new FormData;Ye.append("realname",e),Ye.append("userid",n),Ye.append("blood",a),Ye.append("gunNumber",f),Ye.append("major",m),Ye.append("club1",O),Ye.append("club2",j),Ye.append("club3",b),Ye.append("year",P),Ye.append("other",JSON.stringify(W)),Ye.append("battalion",H),Ye.append("company",q),Ye.append("platoon",ue),Ye.append("squad",Ne),C&&Ye.append("profileImage",C),fetch("/api/user/update",{method:"POST",headers:{Authorization:`Bearer ${Se}`},body:Ye}).then(K=>K.json()).then(K=>{K.success?Re("บันทึกข้อมูลเรียบร้อยแล้ว! 🎉","success"):Re("ไม่สามารถบันทึกข้อมูลได้ กรุณาลองใหม่อีกครั้ง","error")}).catch(K=>{console.error("Error:",K),Re("เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง","error")})};return y.jsxs("div",{className:"edit-profile-minimal",children:[y.jsxs("form",{className:"edit-profile-form",onSubmit:Ot,children:[y.jsx("h2",{className:"edit-profile-title",children:"แก้ไขข้อมูลส่วนตัว"}),y.jsxs("div",{className:"section-container",children:[y.jsx("h3",{className:"section-title",children:"รูปโปรไฟล์"}),y.jsxs("div",{className:"profile-img-block",children:[S&&y.jsx("img",{src:S,alt:"Preview",className:"profile-img"}),y.jsx("input",{type:"file",accept:"image/*",onChange:ct})]})]}),y.jsxs("div",{className:"section-container",children:[y.jsx("h3",{className:"section-title",children:"ข้อมูลพื้นฐาน"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"ชื่อ-นามสกุล"}),y.jsx("input",{type:"text",placeholder:"กรอกชื่อ-นามสกุล",value:e,onChange:ve=>t(ve.target.value),required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"รหัสประจำตัว"}),y.jsx("input",{type:"text",placeholder:"กรอกรหัสประจำตัว",value:n,onChange:ve=>i(ve.target.value),required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"กรุ๊ปเลือด"}),y.jsx("input",{type:"text",placeholder:"กรอกกรุ๊ปเลือด เช่น A, B, AB, O",value:a,onChange:ve=>l(ve.target.value),required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"เลขปืน (ไม่บังคับ)"}),y.jsx("input",{type:"text",placeholder:"กรอกเลขปืน",value:f,onChange:ve=>g(ve.target.value)})]})]}),y.jsxs("div",{className:"section-container",children:[y.jsx("h3",{className:"section-title",children:"ข้อมูลการศึกษา"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"สาขาวิชา"}),y.jsxs("select",{value:m,onChange:ve=>p(ve.target.value),required:!0,children:[y.jsx("option",{value:"",children:"-- เลือกสาขาวิชา --"}),$g.map(ve=>y.jsx("option",{value:ve.value,children:ve.label},ve.value))]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"ชั้นปี"}),y.jsxs("select",{value:P,onChange:ve=>F(ve.target.value),required:!0,children:[y.jsx("option",{value:"",children:"-- เลือกชั้นปี --"}),y.jsx("option",{value:"1",children:"ชั้นปี 1"}),y.jsx("option",{value:"2",children:"ชั้นปี 2"}),y.jsx("option",{value:"3",children:"ชั้นปี 3"}),y.jsx("option",{value:"4",children:"ชั้นปี 4"}),y.jsx("option",{value:"5",children:"ชั้นปี 5"})]})]})]}),y.jsxs("div",{className:"section-container",children:[y.jsx("h3",{className:"section-title",children:"ข้อมูลสังกัด (ไม่บังคับ)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"กองพัน"}),y.jsxs("select",{value:H,onChange:ve=>G(ve.target.value),children:[y.jsx("option",{value:"",children:"-- เลือกกองพัน --"}),y.jsx("option",{value:"1",children:"กองพัน 1"}),y.jsx("option",{value:"2",children:"กองพัน 2"}),y.jsx("option",{value:"3",children:"กองพัน 3"}),y.jsx("option",{value:"4",children:"กองพัน 4"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"กองร้อย"}),y.jsxs("select",{value:q,onChange:ve=>ge(ve.target.value),children:[y.jsx("option",{value:"",children:"-- เลือกกองร้อย --"}),y.jsx("option",{value:"1",children:"กองร้อย 1"}),y.jsx("option",{value:"2",children:"กองร้อย 2"}),y.jsx("option",{value:"3",children:"กองร้อย 3"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"หมู่"}),y.jsxs("select",{value:ue,onChange:ve=>Ee(ve.target.value),children:[y.jsx("option",{value:"",children:"-- เลือกหมู่ --"}),y.jsx("option",{value:"1",children:"หมู่ 1"}),y.jsx("option",{value:"2",children:"หมู่ 2"}),y.jsx("option",{value:"3",children:"หมู่ 3"}),y.jsx("option",{value:"4",children:"หมู่ 4"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"หมวด"}),y.jsxs("select",{value:Ne,onChange:ve=>V(ve.target.value),children:[y.jsx("option",{value:"",children:"-- เลือกหมวด --"}),y.jsx("option",{value:"1",children:"หมวด 1"}),y.jsx("option",{value:"2",children:"หมวด 2"}),y.jsx("option",{value:"3",children:"หมวด 3"})]})]})]}),y.jsxs("div",{className:"section-container",children:[y.jsx("h3",{className:"section-title",children:"ข้อมูลชมรม (ไม่บังคับ)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"ชมรมที่ 1"}),y.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 1",value:O,onChange:ve=>_(ve.target.value)})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"ชมรมที่ 2"}),y.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 2",value:j,onChange:ve=>N(ve.target.value)})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{className:"form-label",children:"ชมรมที่ 3"}),y.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 3",value:b,onChange:ve=>I(ve.target.value)})]})]}),y.jsxs("div",{className:"sale-container",children:[y.jsx("h3",{className:"section-title",children:"รายการจำหน่าย (ไม่บังคับ)"}),y.jsx("p",{className:"sale-description",children:"เพิ่มรายการที่ต้องการจำหน่าย เช่น อุปกรณ์การเรียน เครื่องแบบ หรืออื่นๆ"}),W.map((ve,Se)=>y.jsxs("div",{className:"sale-input-row",children:[y.jsx("input",{placeholder:"ชื่อรายการ",value:ve.key,onChange:Ye=>Ze(Se,"key",Ye.target.value),style:{flex:2,minWidth:0}}),y.jsx("button",{type:"button",onClick:()=>fe(Se),style:{padding:"0 10px",height:36,background:"#e57373",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"-"})]},Se)),y.jsx("button",{type:"button",onClick:Ht,style:{width:"100%",marginTop:4,background:"#1976d2",color:"#fff",border:"none",borderRadius:6,padding:"10px 0",fontSize:"1rem",fontWeight:500,cursor:"pointer"},children:"+ เพิ่มรายการจำหน่าย"})]}),y.jsx("button",{type:"submit",className:"save-button",children:"บันทึกข้อมูล"})]}),se&&y.jsx("div",{className:"success-popup-backdrop",children:y.jsxs("div",{className:"success-popup",children:[y.jsx("div",{className:"success-icon",children:le==="success"?"✅":"❌"}),y.jsx("h3",{className:"success-title",children:le==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),y.jsx("p",{className:"success-message",children:J}),y.jsx("button",{onClick:st,className:"success-close-btn",children:"ตกลง"})]})})]})}var Ys={},NT=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},vy={},jn={};let t0;const RT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];jn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};jn.getSymbolTotalCodewords=function(t){return RT[t]};jn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};jn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');t0=t};jn.isKanjiModeEnabled=function(){return typeof t0<"u"};jn.toSJIS=function(t){return t0(t)};var Bc={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},e.from=function(i,a){if(e.isValid(i))return i;try{return t(i)}catch{return a}}})(Bc);function Sy(){this.buffer=[],this.length=0}Sy.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var MT=Sy;function Oa(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Oa.prototype.set=function(e,t,n,i){const a=e*this.size+t;this.data[a]=n,i&&(this.reservedBit[a]=!0)};Oa.prototype.get=function(e,t){return this.data[e*this.size+t]};Oa.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Oa.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var DT=Oa,Ay={};(function(e){const t=jn.getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,l=t(i),f=l===145?26:Math.ceil((l-13)/(2*a-2))*2,g=[l-7];for(let m=1;m<a-1;m++)g[m]=g[m-1]-f;return g.push(6),g.reverse()},e.getPositions=function(i){const a=[],l=e.getRowColCoords(i),f=l.length;for(let g=0;g<f;g++)for(let m=0;m<f;m++)g===0&&m===0||g===0&&m===f-1||g===f-1&&m===0||a.push([l[g],l[m]]);return a}})(Ay);var Ty={};const OT=jn.getSymbolSize,qg=7;Ty.getPositions=function(t){const n=OT(t);return[[0,0],[n-qg,0],[0,n-qg]]};var Iy={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const l=a.size;let f=0,g=0,m=0,p=null,C=null;for(let E=0;E<l;E++){g=m=0,p=C=null;for(let S=0;S<l;S++){let R=a.get(E,S);R===p?g++:(g>=5&&(f+=t.N1+(g-5)),p=R,g=1),R=a.get(S,E),R===C?m++:(m>=5&&(f+=t.N1+(m-5)),C=R,m=1)}g>=5&&(f+=t.N1+(g-5)),m>=5&&(f+=t.N1+(m-5))}return f},e.getPenaltyN2=function(a){const l=a.size;let f=0;for(let g=0;g<l-1;g++)for(let m=0;m<l-1;m++){const p=a.get(g,m)+a.get(g,m+1)+a.get(g+1,m)+a.get(g+1,m+1);(p===4||p===0)&&f++}return f*t.N2},e.getPenaltyN3=function(a){const l=a.size;let f=0,g=0,m=0;for(let p=0;p<l;p++){g=m=0;for(let C=0;C<l;C++)g=g<<1&2047|a.get(p,C),C>=10&&(g===1488||g===93)&&f++,m=m<<1&2047|a.get(C,p),C>=10&&(m===1488||m===93)&&f++}return f*t.N3},e.getPenaltyN4=function(a){let l=0;const f=a.data.length;for(let m=0;m<f;m++)l+=a.data[m];return Math.abs(Math.ceil(l*100/f/5)-10)*t.N4};function n(i,a,l){switch(i){case e.Patterns.PATTERN000:return(a+l)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return l%3===0;case e.Patterns.PATTERN011:return(a+l)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2===0;case e.Patterns.PATTERN101:return a*l%2+a*l%3===0;case e.Patterns.PATTERN110:return(a*l%2+a*l%3)%2===0;case e.Patterns.PATTERN111:return(a*l%3+(a+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(a,l){const f=l.size;for(let g=0;g<f;g++)for(let m=0;m<f;m++)l.isReserved(m,g)||l.xor(m,g,n(a,m,g))},e.getBestMask=function(a,l){const f=Object.keys(e.Patterns).length;let g=0,m=1/0;for(let p=0;p<f;p++){l(p),e.applyMask(p,a);const C=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(p,a),C<m&&(m=C,g=p)}return g}})(Iy);var jc={};const di=Bc,dl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],fl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];jc.getBlocksCount=function(t,n){switch(n){case di.L:return dl[(t-1)*4+0];case di.M:return dl[(t-1)*4+1];case di.Q:return dl[(t-1)*4+2];case di.H:return dl[(t-1)*4+3];default:return}};jc.getTotalCodewordsCount=function(t,n){switch(n){case di.L:return fl[(t-1)*4+0];case di.M:return fl[(t-1)*4+1];case di.Q:return fl[(t-1)*4+2];case di.H:return fl[(t-1)*4+3];default:return}};var by={},Fc={};const Qo=new Uint8Array(512),cc=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Qo[n]=t,cc[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Qo[n]=Qo[n-255]})();Fc.log=function(t){if(t<1)throw new Error("log("+t+")");return cc[t]};Fc.exp=function(t){return Qo[t]};Fc.mul=function(t,n){return t===0||n===0?0:Qo[cc[t]+cc[n]]};(function(e){const t=Fc;e.mul=function(i,a){const l=new Uint8Array(i.length+a.length-1);for(let f=0;f<i.length;f++)for(let g=0;g<a.length;g++)l[f+g]^=t.mul(i[f],a[g]);return l},e.mod=function(i,a){let l=new Uint8Array(i);for(;l.length-a.length>=0;){const f=l[0];for(let m=0;m<a.length;m++)l[m]^=t.mul(a[m],f);let g=0;for(;g<l.length&&l[g]===0;)g++;l=l.slice(g)}return l},e.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let l=0;l<i;l++)a=e.mul(a,new Uint8Array([1,t.exp(l)]));return a}})(by);const Ny=by;function n0(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n0.prototype.initialize=function(t){this.degree=t,this.genPoly=Ny.generateECPolynomial(this.degree)};n0.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const i=Ny.mod(n,this.genPoly),a=this.degree-i.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(i,a),l}return i};var _T=n0,Ry={},Ri={},r0={};r0.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Dr={};const My="[0-9]+",kT="[A-Z $%*+\\-./:]+";let Ca="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ca=Ca.replace(/u/g,"\\u");const PT="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ca+`)(?:.|[\r
]))+`;Dr.KANJI=new RegExp(Ca,"g");Dr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Dr.BYTE=new RegExp(PT,"g");Dr.NUMERIC=new RegExp(My,"g");Dr.ALPHANUMERIC=new RegExp(kT,"g");const LT=new RegExp("^"+Ca+"$"),BT=new RegExp("^"+My+"$"),jT=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Dr.testKanji=function(t){return LT.test(t)};Dr.testNumeric=function(t){return BT.test(t)};Dr.testAlphanumeric=function(t){return jT.test(t)};(function(e){const t=r0,n=Dr;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},e.getBestModeForData=function(l){return n.testNumeric(l)?e.NUMERIC:n.testAlphanumeric(l)?e.ALPHANUMERIC:n.testKanji(l)?e.KANJI:e.BYTE},e.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},e.isValid=function(l){return l&&l.bit&&l.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(l,f){if(e.isValid(l))return l;try{return i(l)}catch{return f}}})(Ri);(function(e){const t=jn,n=jc,i=Bc,a=Ri,l=r0,f=7973,g=t.getBCHDigit(f);function m(S,R,O){for(let _=1;_<=40;_++)if(R<=e.getCapacity(_,O,S))return _}function p(S,R){return a.getCharCountIndicator(S,R)+4}function C(S,R){let O=0;return S.forEach(function(_){const j=p(_.mode,R);O+=j+_.getBitsLength()}),O}function E(S,R){for(let O=1;O<=40;O++)if(C(S,O)<=e.getCapacity(O,R,a.MIXED))return O}e.from=function(R,O){return l.isValid(R)?parseInt(R,10):O},e.getCapacity=function(R,O,_){if(!l.isValid(R))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=a.BYTE);const j=t.getSymbolTotalCodewords(R),N=n.getTotalCodewordsCount(R,O),b=(j-N)*8;if(_===a.MIXED)return b;const I=b-p(_,R);switch(_){case a.NUMERIC:return Math.floor(I/10*3);case a.ALPHANUMERIC:return Math.floor(I/11*2);case a.KANJI:return Math.floor(I/13);case a.BYTE:default:return Math.floor(I/8)}},e.getBestVersionForData=function(R,O){let _;const j=i.from(O,i.M);if(Array.isArray(R)){if(R.length>1)return E(R,j);if(R.length===0)return 1;_=R[0]}else _=R;return m(_.mode,_.getLength(),j)},e.getEncodedBits=function(R){if(!l.isValid(R)||R<7)throw new Error("Invalid QR Code version");let O=R<<12;for(;t.getBCHDigit(O)-g>=0;)O^=f<<t.getBCHDigit(O)-g;return R<<12|O}})(Ry);var Dy={};const df=jn,Oy=1335,FT=21522,Jg=df.getBCHDigit(Oy);Dy.getEncodedBits=function(t,n){const i=t.bit<<3|n;let a=i<<10;for(;df.getBCHDigit(a)-Jg>=0;)a^=Oy<<df.getBCHDigit(a)-Jg;return(i<<10|a)^FT};var _y={};const UT=Ri;function Xs(e){this.mode=UT.NUMERIC,this.data=e.toString()}Xs.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Xs.prototype.getLength=function(){return this.data.length};Xs.prototype.getBitsLength=function(){return Xs.getBitsLength(this.data.length)};Xs.prototype.write=function(t){let n,i,a;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),a=parseInt(i,10),t.put(a,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),a=parseInt(i,10),t.put(a,l*3+1))};var VT=Xs;const zT=Ri,Gu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Qs(e){this.mode=zT.ALPHANUMERIC,this.data=e}Qs.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Qs.prototype.getLength=function(){return this.data.length};Qs.prototype.getBitsLength=function(){return Qs.getBitsLength(this.data.length)};Qs.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let i=Gu.indexOf(this.data[n])*45;i+=Gu.indexOf(this.data[n+1]),t.put(i,11)}this.data.length%2&&t.put(Gu.indexOf(this.data[n]),6)};var HT=Qs;const WT=Ri;function Ks(e){this.mode=WT.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Ks.getBitsLength=function(t){return t*8};Ks.prototype.getLength=function(){return this.data.length};Ks.prototype.getBitsLength=function(){return Ks.getBitsLength(this.data.length)};Ks.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var GT=Ks;const YT=Ri,XT=jn;function Zs(e){this.mode=YT.KANJI,this.data=e}Zs.getBitsLength=function(t){return t*13};Zs.prototype.getLength=function(){return this.data.length};Zs.prototype.getBitsLength=function(){return Zs.getBitsLength(this.data.length)};Zs.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=XT.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var QT=Zs,ky={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,i,a){var l={},f={};f[i]=0;var g=t.PriorityQueue.make();g.push(i,0);for(var m,p,C,E,S,R,O,_,j;!g.empty();){m=g.pop(),p=m.value,E=m.cost,S=n[p]||{};for(C in S)S.hasOwnProperty(C)&&(R=S[C],O=E+R,_=f[C],j=typeof f[C]>"u",(j||_>O)&&(f[C]=O,g.push(C,O),l[C]=p))}if(typeof a<"u"&&typeof f[a]>"u"){var N=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(N)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var a=[],l=i;l;)a.push(l),n[l],l=n[l];return a.reverse(),a},find_path:function(n,i,a){var l=t.single_source_shortest_paths(n,i,a);return t.extract_shortest_path_from_predecessor_list(l,a)},PriorityQueue:{make:function(n){var i=t.PriorityQueue,a={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);return a.queue=[],a.sorter=n.sorter||i.default_sorter,a},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var a={value:n,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(ky);var KT=ky.exports;(function(e){const t=Ri,n=VT,i=HT,a=GT,l=QT,f=Dr,g=jn,m=KT;function p(N){return unescape(encodeURIComponent(N)).length}function C(N,b,I){const P=[];let F;for(;(F=N.exec(I))!==null;)P.push({data:F[0],index:F.index,mode:b,length:F[0].length});return P}function E(N){const b=C(f.NUMERIC,t.NUMERIC,N),I=C(f.ALPHANUMERIC,t.ALPHANUMERIC,N);let P,F;return g.isKanjiModeEnabled()?(P=C(f.BYTE,t.BYTE,N),F=C(f.KANJI,t.KANJI,N)):(P=C(f.BYTE_KANJI,t.BYTE,N),F=[]),b.concat(I,P,F).sort(function(B,H){return B.index-H.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function S(N,b){switch(b){case t.NUMERIC:return n.getBitsLength(N);case t.ALPHANUMERIC:return i.getBitsLength(N);case t.KANJI:return l.getBitsLength(N);case t.BYTE:return a.getBitsLength(N)}}function R(N){return N.reduce(function(b,I){const P=b.length-1>=0?b[b.length-1]:null;return P&&P.mode===I.mode?(b[b.length-1].data+=I.data,b):(b.push(I),b)},[])}function O(N){const b=[];for(let I=0;I<N.length;I++){const P=N[I];switch(P.mode){case t.NUMERIC:b.push([P,{data:P.data,mode:t.ALPHANUMERIC,length:P.length},{data:P.data,mode:t.BYTE,length:P.length}]);break;case t.ALPHANUMERIC:b.push([P,{data:P.data,mode:t.BYTE,length:P.length}]);break;case t.KANJI:b.push([P,{data:P.data,mode:t.BYTE,length:p(P.data)}]);break;case t.BYTE:b.push([{data:P.data,mode:t.BYTE,length:p(P.data)}])}}return b}function _(N,b){const I={},P={start:{}};let F=["start"];for(let W=0;W<N.length;W++){const B=N[W],H=[];for(let G=0;G<B.length;G++){const q=B[G],ge=""+W+G;H.push(ge),I[ge]={node:q,lastCount:0},P[ge]={};for(let ue=0;ue<F.length;ue++){const Ee=F[ue];I[Ee]&&I[Ee].node.mode===q.mode?(P[Ee][ge]=S(I[Ee].lastCount+q.length,q.mode)-S(I[Ee].lastCount,q.mode),I[Ee].lastCount+=q.length):(I[Ee]&&(I[Ee].lastCount=q.length),P[Ee][ge]=S(q.length,q.mode)+4+t.getCharCountIndicator(q.mode,b))}}F=H}for(let W=0;W<F.length;W++)P[F[W]].end=0;return{map:P,table:I}}function j(N,b){let I;const P=t.getBestModeForData(N);if(I=t.from(b,P),I!==t.BYTE&&I.bit<P.bit)throw new Error('"'+N+'" cannot be encoded with mode '+t.toString(I)+`.
 Suggested mode is: `+t.toString(P));switch(I===t.KANJI&&!g.isKanjiModeEnabled()&&(I=t.BYTE),I){case t.NUMERIC:return new n(N);case t.ALPHANUMERIC:return new i(N);case t.KANJI:return new l(N);case t.BYTE:return new a(N)}}e.fromArray=function(b){return b.reduce(function(I,P){return typeof P=="string"?I.push(j(P,null)):P.data&&I.push(j(P.data,P.mode)),I},[])},e.fromString=function(b,I){const P=E(b,g.isKanjiModeEnabled()),F=O(P),W=_(F,I),B=m.find_path(W.map,"start","end"),H=[];for(let G=1;G<B.length-1;G++)H.push(W.table[B[G]].node);return e.fromArray(R(H))},e.rawSplit=function(b){return e.fromArray(E(b,g.isKanjiModeEnabled()))}})(_y);const Uc=jn,Yu=Bc,ZT=MT,$T=DT,qT=Ay,JT=Ty,ff=Iy,hf=jc,eI=_T,uc=Ry,tI=Dy,nI=Ri,Xu=_y;function rI(e,t){const n=e.size,i=JT.getPositions(t);for(let a=0;a<i.length;a++){const l=i[a][0],f=i[a][1];for(let g=-1;g<=7;g++)if(!(l+g<=-1||n<=l+g))for(let m=-1;m<=7;m++)f+m<=-1||n<=f+m||(g>=0&&g<=6&&(m===0||m===6)||m>=0&&m<=6&&(g===0||g===6)||g>=2&&g<=4&&m>=2&&m<=4?e.set(l+g,f+m,!0,!0):e.set(l+g,f+m,!1,!0))}}function iI(e){const t=e.size;for(let n=8;n<t-8;n++){const i=n%2===0;e.set(n,6,i,!0),e.set(6,n,i,!0)}}function sI(e,t){const n=qT.getPositions(t);for(let i=0;i<n.length;i++){const a=n[i][0],l=n[i][1];for(let f=-2;f<=2;f++)for(let g=-2;g<=2;g++)f===-2||f===2||g===-2||g===2||f===0&&g===0?e.set(a+f,l+g,!0,!0):e.set(a+f,l+g,!1,!0)}}function oI(e,t){const n=e.size,i=uc.getEncodedBits(t);let a,l,f;for(let g=0;g<18;g++)a=Math.floor(g/3),l=g%3+n-8-3,f=(i>>g&1)===1,e.set(a,l,f,!0),e.set(l,a,f,!0)}function Qu(e,t,n){const i=e.size,a=tI.getEncodedBits(t,n);let l,f;for(l=0;l<15;l++)f=(a>>l&1)===1,l<6?e.set(l,8,f,!0):l<8?e.set(l+1,8,f,!0):e.set(i-15+l,8,f,!0),l<8?e.set(8,i-l-1,f,!0):l<9?e.set(8,15-l-1+1,f,!0):e.set(8,15-l-1,f,!0);e.set(i-8,8,1,!0)}function aI(e,t){const n=e.size;let i=-1,a=n-1,l=7,f=0;for(let g=n-1;g>0;g-=2)for(g===6&&g--;;){for(let m=0;m<2;m++)if(!e.isReserved(a,g-m)){let p=!1;f<t.length&&(p=(t[f]>>>l&1)===1),e.set(a,g-m,p),l--,l===-1&&(f++,l=7)}if(a+=i,a<0||n<=a){a-=i,i=-i;break}}}function lI(e,t,n){const i=new ZT;n.forEach(function(m){i.put(m.mode.bit,4),i.put(m.getLength(),nI.getCharCountIndicator(m.mode,e)),m.write(i)});const a=Uc.getSymbolTotalCodewords(e),l=hf.getTotalCodewordsCount(e,t),f=(a-l)*8;for(i.getLengthInBits()+4<=f&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const g=(f-i.getLengthInBits())/8;for(let m=0;m<g;m++)i.put(m%2?17:236,8);return cI(i,e,t)}function cI(e,t,n){const i=Uc.getSymbolTotalCodewords(t),a=hf.getTotalCodewordsCount(t,n),l=i-a,f=hf.getBlocksCount(t,n),g=i%f,m=f-g,p=Math.floor(i/f),C=Math.floor(l/f),E=C+1,S=p-C,R=new eI(S);let O=0;const _=new Array(f),j=new Array(f);let N=0;const b=new Uint8Array(e.buffer);for(let B=0;B<f;B++){const H=B<m?C:E;_[B]=b.slice(O,O+H),j[B]=R.encode(_[B]),O+=H,N=Math.max(N,H)}const I=new Uint8Array(i);let P=0,F,W;for(F=0;F<N;F++)for(W=0;W<f;W++)F<_[W].length&&(I[P++]=_[W][F]);for(F=0;F<S;F++)for(W=0;W<f;W++)I[P++]=j[W][F];return I}function uI(e,t,n,i){let a;if(Array.isArray(e))a=Xu.fromArray(e);else if(typeof e=="string"){let p=t;if(!p){const C=Xu.rawSplit(e);p=uc.getBestVersionForData(C,n)}a=Xu.fromString(e,p||40)}else throw new Error("Invalid data");const l=uc.getBestVersionForData(a,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=l;else if(t<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const f=lI(t,n,a),g=Uc.getSymbolSize(t),m=new $T(g);return rI(m,t),iI(m),sI(m,t),Qu(m,n,0),t>=7&&oI(m,t),aI(m,f),isNaN(i)&&(i=ff.getBestMask(m,Qu.bind(null,m,n))),ff.applyMask(i,m),Qu(m,n,i),{modules:m,version:t,errorCorrectionLevel:n,maskPattern:i,segments:a}}vy.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let i=Yu.M,a,l;return typeof n<"u"&&(i=Yu.from(n.errorCorrectionLevel,Yu.M),a=uc.from(n.version),l=ff.from(n.maskPattern),n.toSJISFunc&&Uc.setToSJISFunction(n.toSJISFunc)),uI(t,a,i,l)};var Py={},i0={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:l,scale:l?4:f,margin:a,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},e.getImageWidth=function(i,a){const l=e.getScale(i,a);return Math.floor((i+a.margin*2)*l)},e.qrToImageData=function(i,a,l){const f=a.modules.size,g=a.modules.data,m=e.getScale(f,l),p=Math.floor((f+l.margin*2)*m),C=l.margin*m,E=[l.color.light,l.color.dark];for(let S=0;S<p;S++)for(let R=0;R<p;R++){let O=(S*p+R)*4,_=l.color.light;if(S>=C&&R>=C&&S<p-C&&R<p-C){const j=Math.floor((S-C)/m),N=Math.floor((R-C)/m);_=E[g[j*f+N]?1:0]}i[O++]=_.r,i[O++]=_.g,i[O++]=_.b,i[O]=_.a}}})(i0);(function(e){const t=i0;function n(a,l,f){a.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(l,f,g){let m=g,p=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(p=i()),m=t.getOptions(m);const C=t.getImageWidth(l.modules.size,m),E=p.getContext("2d"),S=E.createImageData(C,C);return t.qrToImageData(S.data,l,m),n(E,p,C),E.putImageData(S,0,0),p},e.renderToDataURL=function(l,f,g){let m=g;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={});const p=e.render(l,f,m),C=m.type||"image/png",E=m.rendererOpts||{};return p.toDataURL(C,E.quality)}})(Py);var Ly={};const dI=i0;function ep(e,t){const n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function Ku(e,t,n){let i=e+t;return typeof n<"u"&&(i+=" "+n),i}function fI(e,t,n){let i="",a=0,l=!1,f=0;for(let g=0;g<e.length;g++){const m=Math.floor(g%t),p=Math.floor(g/t);!m&&!l&&(l=!0),e[g]?(f++,g>0&&m>0&&e[g-1]||(i+=l?Ku("M",m+n,.5+p+n):Ku("m",a,0),a=0,l=!1),m+1<t&&e[g+1]||(i+=Ku("h",f),f=0)):a++}return i}Ly.render=function(t,n,i){const a=dI.getOptions(n),l=t.modules.size,f=t.modules.data,g=l+a.margin*2,m=a.color.light.a?"<path "+ep(a.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",p="<path "+ep(a.color.dark,"stroke")+' d="'+fI(f,l,a.margin)+'"/>',C='viewBox="0 0 '+g+" "+g+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+C+' shape-rendering="crispEdges">'+m+p+`</svg>
`;return typeof i=="function"&&i(null,S),S};const hI=NT,gf=vy,By=Py,gI=Ly;function s0(e,t,n,i,a){const l=[].slice.call(arguments,1),f=l.length,g=typeof l[f-1]=="function";if(!g&&!hI())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(a=n,n=t,t=i=void 0):f===3&&(t.getContext&&typeof a>"u"?(a=i,i=void 0):(a=i,i=n,n=t,t=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(n=t,t=i=void 0):f===2&&!t.getContext&&(i=n,n=t,t=void 0),new Promise(function(m,p){try{const C=gf.create(n,i);m(e(C,t,i))}catch(C){p(C)}})}try{const m=gf.create(n,i);a(null,e(m,t,i))}catch(m){a(m)}}Ys.create=gf.create;Ys.toCanvas=s0.bind(null,By.render);Ys.toDataURL=s0.bind(null,By.renderToDataURL);Ys.toString=s0.bind(null,function(e,t,n){return gI.render(e,n)});function pI(){const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(""),[C,E]=D.useState(""),[S,R]=D.useState(!1),[O,_]=D.useState(""),[j,N]=D.useState(""),[b,I]=D.useState(""),[P,F]=D.useState([]),[W,B]=D.useState(""),[H,G]=D.useState(""),[q,ge]=D.useState(""),[ue,Ee]=D.useState(""),[Ne,V]=D.useState(""),[se,oe]=D.useState(""),[J,he]=D.useState(""),le="",De=Qr(),Oe=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];D.useEffect(()=>{const fe=localStorage.getItem("token");fe?(console.log("API URL:",le),fetch("/api/user/me",{headers:{Authorization:`Bearer ${fe}`}}).then(Re=>Re.json()).then(Re=>{t(Re.data.realname),i(Re.data.userid),l(Re.data.blood),g(Re.data.gunNumber||"N/A"),p(Re.data.major||"-"),E(Re.data.point??"-"),R(Re.data.admin??!1),F(Re.data.adjustments||[]),B(Re.data.club1||""),G(Re.data.club2||""),ge(Re.data.club3||""),Ee(Re.data.battalion||""),V(Re.data.company||""),oe(Re.data.platoon||""),he(Re.data.squad||""),Re.data.profileImage&&_(`data:image/jpeg;base64,${Re.data.profileImage}`),ct(Re.data.userid),Re.data.gunNumber&&Ze(Re.data.gunNumber)})):De("/login")},[De]);const ct=async fe=>{try{const Re=await Ys.toDataURL(fe,{width:60});N(Re)}catch(Re){console.error("Error generating QR Code:",Re)}},Ze=async fe=>{try{const Re=await Ys.toDataURL(fe,{width:60});I(Re)}catch(Re){console.error("Error generating Gun QR Code:",Re)}},Ht=()=>{De("/edit-profile")};return y.jsx("div",{className:"view-profile-bg",children:y.jsxs("div",{className:"view-profile-container",children:[y.jsxs("div",{className:"view-profile-header",children:[y.jsx("div",{className:"view-profile-avatar",children:O?y.jsx("img",{src:O,alt:"Profile",className:"view-profile-avatar-img"}):e?e[0]:""}),y.jsxs("div",{children:[y.jsx("div",{className:"view-profile-name",children:e}),y.jsx("div",{className:"view-profile-major",children:m}),y.jsx("button",{onClick:Ht,className:"btn",type:"button",children:"Edit profile"})]})]}),y.jsxs("div",{className:"view-profile-main-row",children:[y.jsxs("div",{className:"view-profile-card",children:[y.jsx("div",{className:"view-profile-card-title",children:"User details"}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"รหัสประจำตัว: "}),n]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"หมู่โลหิต: "}),a]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"หมายเลขปืน: "}),f]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"สาขา: "}),(()=>{const fe=Oe.find(Re=>Re.value===m||Re.label===m);return fe?fe.label:m&&!m.startsWith("สาขาวิชา")?`สาขาวิชา${m}`:m})()]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"คะแนนพฤติกรรม: "}),C]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"สิทธิ์ผู้ดูแล: "}),S?"ผู้ดูแลระบบ":"ทั่วไป"]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"ชมรม: "}),y.jsxs("ul",{className:"view-profile-clubs-list",children:[W&&y.jsx("li",{children:W}),H&&y.jsx("li",{children:H}),q&&y.jsx("li",{children:q}),!W&&!H&&!q&&y.jsx("li",{className:"view-profile-no-club",children:"-"})]})]}),y.jsxs("div",{className:"view-profile-row",children:[y.jsx("span",{children:"สังกัด: "}),ue||Ne||J||se?y.jsxs("span",{children:[ue&&`กองพัน ${ue}`,ue&&Ne&&" ",Ne&&`กองร้อย ${Ne}`,(ue||Ne)&&J&&" ",J&&`หมวด ${J}`,(ue||Ne||J)&&se&&" ",se&&`หมู่ ${se}`]}):y.jsx("span",{children:"-"})]}),y.jsx("div",{className:"view-profile-card-subtitle",children:"ประวัติการปรับคะแนน"}),y.jsxs("div",{className:"view-profile-history",children:[P.length===0&&y.jsx("div",{className:"view-profile-no-data",children:"ไม่มีข้อมูล"}),P.map(fe=>y.jsxs("div",{className:"view-profile-history-item",children:[y.jsxs("div",{children:["วันที่: ",new Date(fe.date).toLocaleDateString()]}),y.jsxs("div",{children:["เปลี่ยนแปลง: ",y.jsxs("b",{children:[fe.change>0?"+":"",fe.change]})," (",fe.reason,")"]}),y.jsxs("div",{children:["โดย: ",fe.operator]})]},fe.id))]})]}),y.jsxs("div",{className:"view-profile-card view-profile-qr-only",children:[y.jsx("div",{className:"view-profile-card-title",children:"QR Code"}),j&&y.jsx("img",{src:j,alt:"QR Code",className:"view-profile-qr-img"}),y.jsx("div",{className:"view-profile-card-title view-profile-qr-title",children:"Gun QR Code"}),b&&y.jsx("img",{src:b,alt:"Gun QR Code",className:"view-profile-qr-img"})]})]})]})})}var we;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var tp=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),np;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(np||(np={}));function mI(e){return Object.values(we).includes(e)}var Yr;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Yr||(Yr={}));var or=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Yr.SCAN_TYPE_CAMERA,Yr.SCAN_TYPE_FILE],e}(),jy=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!tp.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,tp.get(t))},e}(),rp=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),pf;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(pf||(pf={}));var Fy=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:pf.UNKWOWN_ERROR}},e}(),Uy=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function vr(e){return typeof e>"u"||e===null}function xI(e,t,n){return e>n?n:e<t?t:e}var Ms=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),rt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),ip=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Vy=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),f=Object.keys(t),g=0,m=f;g<m.length;g++){var p=m[g];if(l.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),mf={exports:{}};(function(e,t){(function(n,i){i(t)})(yo,function(n){function i(A){return A==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var s in r)r.hasOwnProperty(s)&&(A[s]=r[s])};function l(A,r){a(A,r);function s(){this.constructor=A}A.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(A,r){var s=Object.setPrototypeOf;s?s(A,r):A.__proto__=r}function g(A,r){r===void 0&&(r=A.constructor);var s=Error.captureStackTrace;s&&s(A,r)}var m=function(A){l(r,A);function r(s){var o=this.constructor,c=A.call(this,s)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),f(c,o.prototype),g(c),c}return r}(Error);class p extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}p.kind="Exception";class C extends p{}C.kind="ArgumentException";class E extends p{}E.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,c){const u=this.binarizer.getLuminanceSource().crop(r,s,o,c);return new S(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends p{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class O{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class _{static arraycopy(r,s,o,c,u){for(;u--;)o[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class j extends p{}j.kind="IndexOutOfBoundsException";class N extends j{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}N.kind="ArrayIndexOutOfBoundsException";class b{static fill(r,s){for(let o=0,c=r.length;o<c;o++)r[o]=s}static fillWithin(r,s,o,c){b.rangeCheck(r.length,s,o);for(let u=s;u<o;u++)r[u]=c}static rangeCheck(r,s,o){if(s>o)throw new E("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new N(s);if(o>r)throw new N(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,c=r.length;o<c;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const c=o-s,u=new Int32Array(c);return _.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,o){o===void 0&&(o=b.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=o(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class I{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=P.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=P.makeArray(r);_.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return s;u=o[c]}const h=c*32+I.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=~o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return s;u=~o[c]}const h=c*32+I.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new E;if(s===r)return;s--;const o=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=o;d<=c;d++){const h=d>o?0:r&31,w=(2<<(d<c?31:s&31))-(1<<h);u[d]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new E;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const x=h>c?0:r&31,v=(2<<(h<u?31:s&31))-(1<<x)&4294967295;if((d[h]&v)!==(o?v:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new E("Sizes don't match");const s=this.bits;for(let o=0,c=s.length;o<c;o++)s[o]^=r.bits[o]}toBytes(r,s,o,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[o+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,c=this.bits;for(let u=0;u<o;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==o*32){const u=o*32-this.size;let d=r[0]>>>u;for(let h=1;h<o;h++){const x=r[h];d|=x<<32-u,r[h-1]=d,d=x>>>u}r[o-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof P))return!1;const s=r;return this.size===s.size&&b.equals(this.bits,s.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new P(this.size,this.bits.slice())}}var F;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var W=F;class B extends p{static getFormatInstance(){return new B}}B.kind="FormatException";var H;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(H||(H={}));class G{constructor(r,s,o,...c){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,G.VALUE_IDENTIFIER_TO_ECI.set(r,this),G.NAME_TO_ECI.set(o,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const x=u[d];G.VALUES_TO_ECI.set(x,this)}for(const d of c)G.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new B("incorect value");const s=G.VALUES_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}static getCharacterSetECIByName(r){const s=G.NAME_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}equals(r){if(!(r instanceof G))return!1;const s=r;return this.getName()===s.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(H.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(H.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(H.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(H.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(H.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(H.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(H.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(H.Big5,28,"Big5"),G.GB18030=new G(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(H.EUC_KR,30,"EUC_KR","EUC-KR");class q extends p{}q.kind="UnsupportedOperationException";class ge{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!ge.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof G?r:G.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(ge.isDecodeFallbackSupported(o)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(o.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new q(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(G.UTF8)||r.equals(G.ISO8859_1)||r.equals(G.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<o.length;u++)c.push(o[u].charCodeAt(0));return new Uint8Array(c)}}class ue{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return ge.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(W.CHARACTER_SET)!==void 0)return s.get(W.CHARACTER_SET).toString();const o=r.length;let c=!0,u=!0,d=!0,h=0,x=0,w=0,v=0,T=0,M=0,L=0,U=0,z=0,X=0,$=0;const ce=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let de=0;de<o&&(c||u||d);de++){const re=r[de]&255;d&&(h>0?re&128?h--:d=!1:re&128&&(re&64?(h++,re&32?(h++,re&16?(h++,re&8?d=!1:v++):w++):x++):d=!1)),c&&(re>127&&re<160?c=!1:re>159&&(re<192||re===215||re===247)&&$++),u&&(T>0?re<64||re===127||re>252?u=!1:T--:re===128||re===160||re>239?u=!1:re>160&&re<224?(M++,U=0,L++,L>z&&(z=L)):re>127?(T++,L=0,U++,U>X&&(X=U)):(L=0,U=0))}return d&&h>0&&(d=!1),u&&T>0&&(u=!1),d&&(ce||x+w+v>0)?ue.UTF8:u&&(ue.ASSUME_SHIFT_JIS||z>=3||X>=3)?ue.SHIFT_JIS:c&&u?z===2&&M===2||$*10>=o?ue.SHIFT_JIS:ue.ISO88591:c?ue.ISO88591:u?ue.SHIFT_JIS:d?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function c(d,h,x,w,v,T){if(d==="%%")return"%";if(s[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let M=v?parseInt(v.substr(1)):void 0,L;switch(T){case"s":L=s[o];break;case"c":L=s[o][0];break;case"f":L=parseFloat(s[o]).toFixed(d);break;case"p":L=parseFloat(s[o]).toPrecision(d);break;case"e":L=parseFloat(s[o]).toExponential(d);break;case"x":L=parseInt(s[o]).toString(M||16);break;case"d":L=parseFloat(parseInt(s[o],M||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(M);let U=parseInt(x),z=x&&x[0]+""=="0"?"0":" ";for(;L.length<U;)L=h!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return ge.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}ue.SHIFT_JIS=G.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=G.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=G.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class Ee{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let c=s;s<s+o;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ne{constructor(r,s,o,c){if(this.width=r,this.height=s,this.rowSize=o,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new E("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,c=new Ne(o,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<o;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,o){if(r===null)throw new E("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,x=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new E("row lengths do not match");d=u,x++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+o.length)===o)w+=o.length,c[u]=!1,u++;else throw new E("illegal character encountered: "+r.substring(w));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new E("row lengths do not match");x++}const v=new Ne(h,x);for(let T=0;T<u;T++)c[T]&&v.set(Math.floor(T%h),Math.floor(T/h));return v}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new E("input matrix dimensions do not match");const s=new P(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*o,x=r.getRow(u,s).getBitArray();for(let w=0;w<o;w++)c[h+w]^=x[w]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,c){if(s<0||r<0)throw new E("Left and top must be nonnegative");if(c<1||o<1)throw new E("Height and width must be at least 1");const u=r+o,d=s+c;if(d>this.height||u>this.width)throw new E("The region must fit inside the matrix");const h=this.rowSize,x=this.bits;for(let w=s;w<d;w++){const v=w*h;for(let T=r;T<u;T++)x[v+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new P(this.width):s.clear();const o=this.rowSize,c=this.bits,u=r*o;for(let d=0;d<o;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){_.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new P(r),c=new P(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)o=this.getRow(u,o),c=this.getRow(s-1-u,c),o.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,c=this.bits;let u=r,d=s,h=-1,x=-1;for(let w=0;w<s;w++)for(let v=0;v<o;v++){const T=c[w*o+v];if(T!==0){if(w<d&&(d=w),w>x&&(x=w),v*32<u){let M=0;for(;!(T<<31-M&4294967295);)M++;v*32+M<u&&(u=v*32+M)}if(v*32+31>h){let M=31;for(;!(T>>>M);)M--;v*32+M>h&&(h=v*32+M)}}}return h<u||x<d?null:Int32Array.from([u,d,h-u+1,x-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const c=o/r;let u=o%r*32;const d=s[o];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/r);let u=Math.floor(o%r)*32;const d=s[o];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ne))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&b.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+b.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let c=new Ee;for(let u=0,d=this.height;u<d;u++){for(let h=0,x=this.width;h<x;h++)c.append(this.get(h,u)?r:s);c.append(o)}return c.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends p{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class se extends O{constructor(r){super(r),this.luminances=se.EMPTY,this.buckets=new Int32Array(se.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),c=o.getWidth();s==null||s.getSize()<c?s=new P(c):s.clear(),this.initArrays(c);const u=o.getRow(r,this.luminances),d=this.buckets;for(let x=0;x<c;x++)d[(u[x]&255)>>se.LUMINANCE_SHIFT]++;const h=se.estimateBlackPoint(d);if(c<3)for(let x=0;x<c;x++)(u[x]&255)<h&&s.set(x);else{let x=u[0]&255,w=u[1]&255;for(let v=1;v<c-1;v++){const T=u[v+1]&255;(w*4-x-T)/2<h&&s.set(v),x=w,w=T}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),c=new Ne(s,o);this.initArrays(s);const u=this.buckets;for(let x=1;x<5;x++){const w=Math.floor(o*x/5),v=r.getRow(w,this.luminances),T=Math.floor(s*4/5);for(let M=Math.floor(s/5);M<T;M++){const L=v[M]&255;u[L>>se.LUMINANCE_SHIFT]++}}const d=se.estimateBlackPoint(u),h=r.getMatrix();for(let x=0;x<o;x++){const w=x*s;for(let v=0;v<s;v++)(h[w+v]&255)<d&&c.set(v,x)}return c}createBinarizer(r){return new se(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<se.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,c=0,u=0;for(let v=0;v<s;v++)r[v]>u&&(c=v,u=r[v]),r[v]>o&&(o=r[v]);let d=0,h=0;for(let v=0;v<s;v++){const T=v-c,M=r[v]*T*T;M>h&&(d=v,h=M)}if(c>d){const v=c;c=d,d=v}if(d-c<=s/16)throw new V;let x=d-1,w=-1;for(let v=d-1;v>c;v--){const T=v-c,M=T*T*(d-v)*(o-r[v]);M>w&&(x=v,w=M)}return x<<se.LUMINANCE_SHIFT}}se.LUMINANCE_BITS=5,se.LUMINANCE_SHIFT=8-se.LUMINANCE_BITS,se.LUMINANCE_BUCKETS=1<<se.LUMINANCE_BITS,se.EMPTY=Uint8ClampedArray.from([0]);class oe extends se{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=oe.MINIMUM_DIMENSION&&o>=oe.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>oe.BLOCK_SIZE_POWER;s&oe.BLOCK_SIZE_MASK&&u++;let d=o>>oe.BLOCK_SIZE_POWER;o&oe.BLOCK_SIZE_MASK&&d++;const h=oe.calculateBlackPoints(c,u,d,s,o),x=new Ne(s,o);oe.calculateThresholdForBlock(c,u,d,s,o,h,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new oe(r)}static calculateThresholdForBlock(r,s,o,c,u,d,h){const x=u-oe.BLOCK_SIZE,w=c-oe.BLOCK_SIZE;for(let v=0;v<o;v++){let T=v<<oe.BLOCK_SIZE_POWER;T>x&&(T=x);const M=oe.cap(v,2,o-3);for(let L=0;L<s;L++){let U=L<<oe.BLOCK_SIZE_POWER;U>w&&(U=w);const z=oe.cap(L,2,s-3);let X=0;for(let ce=-2;ce<=2;ce++){const de=d[M+ce];X+=de[z-2]+de[z-1]+de[z]+de[z+1]+de[z+2]}const $=X/25;oe.thresholdBlock(r,U,T,$,c,h)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,c,u,d){for(let h=0,x=o*u+s;h<oe.BLOCK_SIZE;h++,x+=u)for(let w=0;w<oe.BLOCK_SIZE;w++)(r[x+w]&255)<=c&&d.set(s+w,o+h)}static calculateBlackPoints(r,s,o,c,u){const d=u-oe.BLOCK_SIZE,h=c-oe.BLOCK_SIZE,x=new Array(o);for(let w=0;w<o;w++){x[w]=new Int32Array(s);let v=w<<oe.BLOCK_SIZE_POWER;v>d&&(v=d);for(let T=0;T<s;T++){let M=T<<oe.BLOCK_SIZE_POWER;M>h&&(M=h);let L=0,U=255,z=0;for(let $=0,ce=v*c+M;$<oe.BLOCK_SIZE;$++,ce+=c){for(let de=0;de<oe.BLOCK_SIZE;de++){const re=r[ce+de]&255;L+=re,re<U&&(U=re),re>z&&(z=re)}if(z-U>oe.MIN_DYNAMIC_RANGE)for($++,ce+=c;$<oe.BLOCK_SIZE;$++,ce+=c)for(let de=0;de<oe.BLOCK_SIZE;de++)L+=r[ce+de]&255}let X=L>>oe.BLOCK_SIZE_POWER*2;if(z-U<=oe.MIN_DYNAMIC_RANGE&&(X=U/2,w>0&&T>0)){const $=(x[w-1][T]+2*x[w][T-1]+x[w-1][T-1])/4;U<$&&(X=$)}x[w][T]=X}}return x}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class J{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,c){throw new q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new q("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new Ee;for(let o=0;o<this.height;o++){const c=this.getRow(o,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class he extends J{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let c=0;c<s;c++)o[c]=255-(r[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,c){return new he(this.delegate.crop(r,s,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new he(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new he(this.delegate.rotateCounterClockwise45())}}class le extends J{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=le.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return le.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const c=new Uint8ClampedArray(s*o);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let x;if(r[u+3]===0)x=255;else{const v=r[u],T=r[u+1],M=r[u+2];x=306*v+601*T+117*M+512>>10}c[d]=x}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth(),c=r*o;return s===null?s=this.buffer.slice(c,c+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(c,c+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,c){return super.crop(r,s,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),c=r*le.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),x=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=x,o.translate(h/2,x/2),o.rotate(c),o.drawImage(this.canvas,u/-2,d/-2),this.buffer=le.makeBufferFromCanvasImageData(s),this}invert(){return new he(this)}}le.DEGREE_TO_RADIANS=Math.PI/180;class De{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Oe=(globalThis||yo||self||window||void 0)&&(globalThis||yo||self||window||void 0).__awaiter||function(A,r,s,o){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(v){try{w(o.next(v))}catch(T){d(T)}}function x(v){try{w(o.throw(v))}catch(T){d(T)}}function w(v){v.done?u(v.value):c(v.value).then(h,x)}w((o=o.apply(A,r||[])).next())})};class ct{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const u=o.deviceId||o.id,d=o.label||`Video device ${s.length+1}`,h=o.groupId,x={deviceId:u,label:d,kind:c,groupId:h};s.push(x)}return s})}getVideoInputDevices(){return Oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new De(s.deviceId,s.label))})}findDeviceById(r){return Oe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Oe(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return Oe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return Oe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return Oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return Oe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(r,s,o){return Oe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,o)})}decodeFromStream(r,s,o){return Oe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Oe(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new C(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,s);return o.src=r,c}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const x=s&&h instanceof V,v=(h instanceof R||h instanceof B)&&o;if(x||v)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof R||c instanceof B,d=c instanceof V;(u||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new le(s),c=new oe(o);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=c+"px",s.width=o,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ze{constructor(r,s,o=s==null?0:8*s.length,c,u,d=_.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=_.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);_.arraycopy(s,0,o,0,s.length),_.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ht;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ht||(Ht={}));var fe=Ht,Re;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var st=Re;class Ot{constructor(r,s,o,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ve{exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Se{constructor(r,s){if(s.length===0)throw new E;this.field=r;const o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),_.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let d=0,h=s.length;d!==h;d++){const x=s[d];o=ve.addOrSubtract(o,x)}return o}o=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)o=ve.addOrSubtract(u.multiply(r,o),s[d]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const d=s;s=o,o=d}let c=new Int32Array(o.length);const u=o.length-s.length;_.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=ve.addOrSubtract(s[d-u],o[d]);return new Se(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1),h=this.field;for(let x=0;x<o;x++){const w=s[x];for(let v=0;v<u;v++)d[x+v]=ve.addOrSubtract(d[x+v],h.multiply(w,c[v]))}return new Se(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=o.multiply(u[d],r);return new Se(o,c)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return this.field.getZero();const o=this.coefficients,c=o.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(o[h],s);return new Se(d,u)}divide(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new E("Divide by 0");const s=this.field;let o=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),x=s.multiply(c.getCoefficient(c.getDegree()),d),w=r.multiplyByMonomial(h,x),v=s.buildMonomial(h,x);o=o.addOrSubtract(v),c=c.addOrSubtract(w)}return[o,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const c=this.field.log(o);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Ye extends p{}Ye.kind="ArithmeticException";class K extends ve{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new Se(this,Int32Array.from([0])),this.one=new Se(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new Se(this,o)}inverse(r){if(r===0)throw new Ye;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}K.AZTEC_DATA_12=new K(4201,4096,1),K.AZTEC_DATA_10=new K(1033,1024,1),K.AZTEC_DATA_6=new K(67,64,1),K.AZTEC_PARAM=new K(19,16,1),K.QR_CODE_FIELD_256=new K(285,256,0),K.DATA_MATRIX_FIELD_256=new K(301,256,1),K.AZTEC_DATA_8=K.DATA_MATRIX_FIELD_256,K.MAXICODE_FIELD_64=K.AZTEC_DATA_6;class Pe extends p{}Pe.kind="ReedSolomonException";class Fe extends p{}Fe.kind="IllegalStateException";class _e{constructor(r){this.field=r}decode(r,s){const o=this.field,c=new Se(o,r),u=new Int32Array(s);let d=!0;for(let L=0;L<s;L++){const U=c.evaluateAt(o.exp(L+o.getGeneratorBase()));u[u.length-1-L]=U,U!==0&&(d=!1)}if(d)return;const h=new Se(o,u),x=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),w=x[0],v=x[1],T=this.findErrorLocations(w),M=this.findErrorMagnitudes(v,T);for(let L=0;L<T.length;L++){const U=r.length-1-o.log(T[L]);if(U<0)throw new Pe("Bad error location");r[U]=K.addOrSubtract(r[U],M[L])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const L=r;r=s,s=L}const c=this.field;let u=r,d=s,h=c.getZero(),x=c.getOne();for(;d.getDegree()>=(o/2|0);){let L=u,U=h;if(u=d,h=x,u.isZero())throw new Pe("r_{i-1} was zero");d=L;let z=c.getZero();const X=u.getCoefficient(u.getDegree()),$=c.inverse(X);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ce=d.getDegree()-u.getDegree(),de=c.multiply(d.getCoefficient(d.getDegree()),$);z=z.addOrSubtract(c.buildMonomial(ce,de)),d=d.addOrSubtract(u.multiplyByMonomial(ce,de))}if(x=z.multiply(h).addOrSubtract(U),d.getDegree()>=u.getDegree())throw new Fe("Division algorithm failed to reduce polynomial?")}const w=x.getCoefficient(0);if(w===0)throw new Pe("sigmaTilde(0) was zero");const v=c.inverse(w),T=x.multiplyScalar(v),M=d.multiplyScalar(v);return[T,M]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(o[c]=u.inverse(d),c++);if(c!==s)throw new Pe("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,c=new Int32Array(o),u=this.field;for(let d=0;d<o;d++){const h=u.inverse(s[d]);let x=1;for(let w=0;w<o;w++)if(d!==w){const v=u.multiply(s[w],h),T=v&1?v&-2:v|1;x=u.multiply(x,T)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(x)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var Ve;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(Ve||(Ve={}));class je{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),c=this.correctBits(o),u=je.convertBoolArrayToByteArray(c),d=je.getEncodedData(c),h=new Ot(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=Ve.UPPER,c=Ve.UPPER,u="",d=0;for(;d<s;)if(c===Ve.BINARY){if(s-d<5)break;let h=je.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=je.readCode(r,d,11)+31,d+=11}for(let x=0;x<h;x++){if(s-d<8){d=s;break}const w=je.readCode(r,d,8);u+=ue.castAsNonUtf8Char(w),d+=8}c=o}else{let h=c===Ve.DIGIT?4:5;if(s-d<h)break;let x=je.readCode(r,d,h);d+=h;let w=je.getCharacter(c,x);w.startsWith("CTRL_")?(o=c,c=je.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=c)):(u+=w,c=o)}return u}static getTable(r){switch(r){case"L":return Ve.LOWER;case"P":return Ve.PUNCT;case"M":return Ve.MIXED;case"D":return Ve.DIGIT;case"B":return Ve.BINARY;case"U":default:return Ve.UPPER}}static getCharacter(r,s){switch(r){case Ve.UPPER:return je.UPPER_TABLE[s];case Ve.LOWER:return je.LOWER_TABLE[s];case Ve.MIXED:return je.MIXED_TABLE[s];case Ve.PUNCT:return je.PUNCT_TABLE[s];case Ve.DIGIT:return je.DIGIT_TABLE[s];default:throw new Fe("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=K.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=K.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=K.AZTEC_DATA_10):(o=12,s=K.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/o;if(u<c)throw new B;let d=r.length%o,h=new Int32Array(u);for(let M=0;M<u;M++,d+=o)h[M]=je.readCode(r,d,o);try{new _e(s).decode(h,u-c)}catch(M){throw new B(M)}let x=(1<<o)-1,w=0;for(let M=0;M<c;M++){let L=h[M];if(L===0||L===x)throw new B;(L===1||L===x-1)&&w++}let v=new Array(c*o-w),T=0;for(let M=0;M<c;M++){let L=h[M];if(L===1||L===x-1)v.fill(L>1,T,T+o-1),T+=o-1;else for(let U=o-1;U>=0;--U)v[T++]=(L&1<<U)!==0}return v}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(s?11:14)+o*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(o,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*I.truncDivision(I.truncDivision(c,2)-1,15),x=c/2,w=I.truncDivision(h,2);for(let v=0;v<x;v++){let T=v+I.truncDivision(v,15);u[x-v-1]=w-T-1,u[x+v]=w+T+1}}for(let h=0,x=0;h<o;h++){let w=(o-h)*4+(s?9:12),v=h*2,T=c-1-v;for(let M=0;M<w;M++){let L=M*2;for(let U=0;U<2;U++)d[x+L+U]=r.get(u[v+U],u[v+M]),d[x+2*w+L+U]=r.get(u[v+M],u[T-U]),d[x+4*w+L+U]=r.get(u[T-U],u[T-M]),d[x+6*w+L+U]=r.get(u[T-M],u[v+U])}x+=w*8}return d}static readCode(r,s,o){let c=0;for(let u=s;u<s+o;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let o=r.length-s;return o>=8?je.readCode(r,s,8):je.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=je.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ze{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,c){const u=r-o,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let o=0,c=r.length;o!==c;o++){const u=r[o];s+=u}return s}}class It{static floatToIntBits(r){return r}}It.MAX_VALUE=Number.MAX_SAFE_INTEGER;class me{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof me){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*It.floatToIntBits(this.x)+It.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(o>=s&&o>=c?(d=r[0],u=r[1],h=r[2]):c>=o&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const x=u;u=h,h=x}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return ze.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const c=s.x,u=s.y;return(o.x-c)*(r.y-u)-(o.y-u)*(r.x-c)}}class tn{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ns extends tn{constructor(r,s,o,c,u){super(r,s),this.compact=o,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(r,s,o,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=mn.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,x=!1,w=!1,v=!1,T=!1;const M=this.width,L=this.height;for(;d;){d=!1;let U=!0;for(;(U||!x)&&s<M;)U=this.containsBlackPoint(o,c,s,!1),U?(s++,d=!0,x=!0):x||s++;if(s>=M){u=!0;break}let z=!0;for(;(z||!w)&&c<L;)z=this.containsBlackPoint(r,s,c,!0),z?(c++,d=!0,w=!0):w||c++;if(c>=L){u=!0;break}let X=!0;for(;(X||!v)&&r>=0;)X=this.containsBlackPoint(o,c,r,!1),X?(r--,d=!0,v=!0):v||r--;if(r<0){u=!0;break}let $=!0;for(;($||!T)&&o>=0;)$=this.containsBlackPoint(r,s,o,!0),$?(o--,d=!0,T=!0):T||o--;if(o<0){u=!0;break}d&&(h=!0)}if(!u&&h){const U=s-r;let z=null;for(let de=1;z===null&&de<U;de++)z=this.getBlackPointOnSegment(r,c-de,r+de,c);if(z==null)throw new V;let X=null;for(let de=1;X===null&&de<U;de++)X=this.getBlackPointOnSegment(r,o+de,r+de,o);if(X==null)throw new V;let $=null;for(let de=1;$===null&&de<U;de++)$=this.getBlackPointOnSegment(s,o+de,s-de,o);if($==null)throw new V;let ce=null;for(let de=1;ce===null&&de<U;de++)ce=this.getBlackPointOnSegment(s,c-de,s-de,c);if(ce==null)throw new V;return this.centerEdges(ce,z,$,X)}else throw new V}getBlackPointOnSegment(r,s,o,c){const u=ze.round(ze.distance(r,s,o,c)),d=(o-r)/u,h=(c-s)/u,x=this.image;for(let w=0;w<u;w++){const v=ze.round(r+w*d),T=ze.round(s+w*h);if(x.get(v,T))return new me(v,T)}return null}centerEdges(r,s,o,c){const u=r.getX(),d=r.getY(),h=s.getX(),x=s.getY(),w=o.getX(),v=o.getY(),T=c.getX(),M=c.getY(),L=mn.CORR;return u<this.width/2?[new me(T-L,M+L),new me(h+L,x+L),new me(w-L,v-L),new me(u+L,d-L)]:[new me(T+L,M+L),new me(h+L,x-L),new me(w-L,v+L),new me(u-L,d-L)]}containsBlackPoint(r,s,o,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,o))return!0}else for(let d=r;d<=s;d++)if(u.get(o,d))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class Kr{static checkAndNudgePoints(r,s){const o=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),x=Math.floor(s[d+1]);if(h<-1||h>o||x<-1||x>c)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),x===-1?(s[d+1]=0,u=!0):x===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),x=Math.floor(s[d+1]);if(h<-1||h>o||x<-1||x>c)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),x===-1?(s[d+1]=0,u=!0):x===c&&(s[d+1]=c-1,u=!0)}}}class wt{constructor(r,s,o,c,u,d,h,x,w){this.a11=r,this.a21=s,this.a31=o,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=x,this.a33=w}static quadrilateralToQuadrilateral(r,s,o,c,u,d,h,x,w,v,T,M,L,U,z,X){const $=wt.quadrilateralToSquare(r,s,o,c,u,d,h,x);return wt.squareToQuadrilateral(w,v,T,M,L,U,z,X).times($)}transformPoints(r){const s=r.length,o=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,x=this.a23,w=this.a31,v=this.a32,T=this.a33;for(let M=0;M<s;M+=2){const L=r[M],U=r[M+1],z=u*L+x*U+T;r[M]=(o*L+d*U+w)/z,r[M+1]=(c*L+h*U+v)/z}}transformPointsWithValues(r,s){const o=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,x=this.a23,w=this.a31,v=this.a32,T=this.a33,M=r.length;for(let L=0;L<M;L++){const U=r[L],z=s[L],X=u*U+x*z+T;r[L]=(o*U+d*z+w)/X,s[L]=(c*U+h*z+v)/X}}static squareToQuadrilateral(r,s,o,c,u,d,h,x){const w=r-o+u-h,v=s-c+d-x;if(w===0&&v===0)return new wt(o-r,u-o,r,c-s,d-c,s,0,0,1);{const T=o-u,M=h-u,L=c-d,U=x-d,z=T*U-M*L,X=(w*U-M*v)/z,$=(T*v-w*L)/z;return new wt(o-r+X*o,h-r+$*h,r,c-s+X*c,x-s+$*x,s,X,$,1)}}static quadrilateralToSquare(r,s,o,c,u,d,h,x){return wt.squareToQuadrilateral(r,s,o,c,u,d,h,x).buildAdjoint()}buildAdjoint(){return new wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new wt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ie extends Kr{sampleGrid(r,s,o,c,u,d,h,x,w,v,T,M,L,U,z,X,$,ce,de){const re=wt.quadrilateralToQuadrilateral(c,u,d,h,x,w,v,T,M,L,U,z,X,$,ce,de);return this.sampleGridWithTransform(r,s,o,re)}sampleGridWithTransform(r,s,o,c){if(s<=0||o<=0)throw new V;const u=new Ne(s,o),d=new Float32Array(2*s);for(let h=0;h<o;h++){const x=d.length,w=h+.5;for(let v=0;v<x;v+=2)d[v]=v/2+.5,d[v+1]=w;c.transformPoints(d),Kr.checkAndNudgePoints(r,d);try{for(let v=0;v<x;v+=2)r.get(Math.floor(d[v]),Math.floor(d[v+1]))&&u.set(v/2,h)}catch{throw new V}}return u}}class xe{static setGridSampler(r){xe.gridSampler=r}static getInstance(){return xe.gridSampler}}xe.gridSampler=new ie;class Ae{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class $e{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new ns(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new V;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let c=0;for(let d=0;d<4;d++){let h=o[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let o=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(I.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new V}getCorrectedParameterData(r,s){let o,c;s?(o=7,c=2):(o=10,c=4);let u=o-c,d=new Int32Array(o);for(let x=o-1;x>=0;--x)d[x]=r&15,r>>=4;try{new _e(K.AZTEC_PARAM).decode(d,u)}catch{throw new V}let h=0;for(let x=0;x<c;x++)h=(h<<4)+d[x];return h}getBullsEyeCorners(r){let s=r,o=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(s,d,1,-1),M=this.getFirstDifferent(o,d,1,1),L=this.getFirstDifferent(c,d,-1,1),U=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(U,T)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(T,M,L,U))break}s=T,o=M,c=L,u=U,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let h=new me(s.getX()+.5,s.getY()-.5),x=new me(o.getX()+.5,o.getY()+.5),w=new me(c.getX()-.5,c.getY()+.5),v=new me(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,x,w,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,c;try{let h=new mn(this.image).detect();r=h[0],s=h[1],o=h[2],c=h[3]}catch{let x=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new Ae(x+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ae(x+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ae(x-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ae(x-7,w-7),!1,-1,-1).toResultPoint()}let u=ze.round((r.getX()+c.getX()+s.getX()+o.getX())/4),d=ze.round((r.getY()+c.getY()+s.getY()+o.getY())/4);try{let h=new mn(this.image,15,u,d).detect();r=h[0],s=h[1],o=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Ae(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ae(u+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ae(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ae(u-7,d-7),!1,-1,-1).toResultPoint()}return u=ze.round((r.getX()+c.getX()+s.getX()+o.getX())/4),d=ze.round((r.getY()+c.getY()+s.getY()+o.getY())/4),new Ae(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,c,u){let d=xe.getInstance(),h=this.getDimension(),x=h/2-this.nbCenterLayers,w=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,x,x,w,x,w,w,x,w,s.getX(),s.getY(),o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,o){let c=0,u=this.distanceResultPoint(r,s),d=u/o,h=r.getX(),x=r.getY(),w=d*(s.getX()-r.getX())/u,v=d*(s.getY()-r.getY())/u;for(let T=0;T<o;T++)this.image.get(ze.round(h+T*w),ze.round(x+T*v))&&(c|=1<<o-T-1);return c}isWhiteOrBlackRectangle(r,s,o,c){let u=3;r=new Ae(r.getX()-u,r.getY()+u),s=new Ae(s.getX()-u,s.getY()-u),o=new Ae(o.getX()+u,o.getY()-u),c=new Ae(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,o),h!==d)?!1:(h=this.getColor(o,c),h===d)}getColor(r,s){let o=this.distancePoint(r,s),c=(s.getX()-r.getX())/o,u=(s.getY()-r.getY())/o,d=0,h=r.getX(),x=r.getY(),w=this.image.get(r.getX(),r.getY()),v=Math.ceil(o);for(let M=0;M<v;M++)h+=c,x+=u,this.image.get(ze.round(h),ze.round(x))!==w&&d++;let T=d/o;return T>.1&&T<.9?0:T<=.1===w?1:-1}getFirstDifferent(r,s,o,c){let u=r.getX()+o,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o,d+=c;for(u-=o,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o;for(u-=o;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Ae(u,d)}expandSquare(r,s,o){let c=o/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,x=(r[0].getY()+r[2].getY())/2,w=new me(h+c*u,x+c*d),v=new me(h-c*u,x-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,x=(r[1].getY()+r[3].getY())/2;let T=new me(h+c*u,x+c*d),M=new me(h-c*u,x-c*d);return[w,T,v,M]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ze.round(r.getX()),o=ze.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ze.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class Y{decode(r,s=null){let o=null,c=new $e(r.getBlackMatrix()),u=null,d=null;try{let v=c.detectMirror(!1);u=v.getPoints(),this.reportFoundResultPoints(s,u),d=new je().decode(v)}catch(v){o=v}if(d==null)try{let v=c.detectMirror(!0);u=v.getPoints(),this.reportFoundResultPoints(s,u),d=new je().decode(v)}catch(v){throw o??v}let h=new Ze(d.getText(),d.getRawBytes(),d.getNumBits(),u,fe.AZTEC,_.currentTimeMillis()),x=d.getByteSegments();x!=null&&h.putMetadata(st.BYTE_SEGMENTS,x);let w=d.getECLevel();return w!=null&&h.putMetadata(st.ERROR_CORRECTION_LEVEL,w),h}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(W.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((c,u,d)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class ne extends ct{constructor(r=500){super(new Y,r)}}class pe{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(W.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let x=270;h!==null&&h.get(st.ORIENTATION)===!0&&(x=x+h.get(st.ORIENTATION)%360),d.putMetadata(st.ORIENTATION,x);const w=d.getResultPoints();if(w!==null){const v=u.getHeight();for(let T=0;T<w.length;T++)w[T]=new me(v-w[T].getY()-1,w[T].getX())}return d}else throw new V}}reset(){}doDecode(r,s){const o=r.getWidth(),c=r.getHeight();let u=new P(o);const d=s&&s.get(W.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let x;d?x=c:x=15;const w=Math.trunc(c/2);for(let v=0;v<x;v++){const T=Math.trunc((v+1)/2),M=(v&1)===0,L=w+h*(M?T:-T);if(L<0||L>=c)break;try{u=r.getBlackRow(L,u)}catch{continue}for(let U=0;U<2;U++){if(U===1&&(u.reverse(),s&&s.get(W.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;s.forEach((X,$)=>z.set($,X)),z.delete(W.NEED_RESULT_POINT_CALLBACK),s=z}try{const z=this.decodeRow(L,u,s);if(U===1){z.putMetadata(st.ORIENTATION,180);const X=z.getResultPoints();X!==null&&(X[0]=new me(o-X[0].getX()-1,X[0].getY()),X[1]=new me(o-X[1].getX()-1,X[1].getY()))}return z}catch{}}}throw new V}static recordPattern(r,s,o){const c=o.length;for(let w=0;w<c;w++)o[w]=0;const u=r.getSize();if(s>=u)throw new V;let d=!r.get(s),h=0,x=s;for(;x<u;){if(r.get(x)!==d)o[h]++;else{if(++h===c)break;o[h]=1,d=!d}x++}if(!(h===c||h===c-1&&x===u))throw new V}static recordPatternInReverse(r,s,o){let c=o.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new V;pe.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const c=r.length;let u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;o*=h;let x=0;for(let w=0;w<c;w++){const v=r[w],T=s[w]*h,M=v>T?v-T:T-v;if(M>o)return Number.POSITIVE_INFINITY;x+=M}return x/u}}class ee extends pe{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=o,h=!1;const x=6;for(let w=o;w<s;w++)if(r.get(w)!==h)u[c]++;else{if(c===x-1){let v=ee.MAX_AVG_VARIANCE,T=-1;for(let M=ee.CODE_START_A;M<=ee.CODE_START_C;M++){const L=pe.patternMatchVariance(u,ee.CODE_PATTERNS[M],ee.MAX_INDIVIDUAL_VARIANCE);L<v&&(v=L,T=M)}if(T>=0&&r.isRange(Math.max(0,d-(w-d)/2),d,!1))return Int32Array.from([d,w,T]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new V}static decodeCode(r,s,o){pe.recordPattern(r,o,s);let c=ee.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ee.CODE_PATTERNS.length;d++){const h=ee.CODE_PATTERNS[d],x=this.patternMatchVariance(s,h,ee.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,u=d)}if(u>=0)return u;throw new V}decodeRow(r,s,o){const c=o&&o.get(W.ASSUME_GS1)===!0,u=ee.findStartPattern(s),d=u[2];let h=0;const x=new Uint8Array(20);x[h++]=d;let w;switch(d){case ee.CODE_START_A:w=ee.CODE_CODE_A;break;case ee.CODE_START_B:w=ee.CODE_CODE_B;break;case ee.CODE_START_C:w=ee.CODE_CODE_C;break;default:throw new B}let v=!1,T=!1,M="",L=u[0],U=u[1];const z=Int32Array.from([0,0,0,0,0,0]);let X=0,$=0,ce=d,de=0,re=!0,Qe=!1,Ue=!1;for(;!v;){const ds=T;switch(T=!1,X=$,$=ee.decodeCode(s,z,U),x[h++]=$,$!==ee.CODE_STOP&&(re=!0),$!==ee.CODE_STOP&&(de++,ce+=de*$),L=U,U+=z.reduce((vw,Sw)=>vw+Sw,0),$){case ee.CODE_START_A:case ee.CODE_START_B:case ee.CODE_START_C:throw new B}switch(w){case ee.CODE_CODE_A:if($<64)Ue===Qe?M+=String.fromCharCode(" ".charCodeAt(0)+$):M+=String.fromCharCode(" ".charCodeAt(0)+$+128),Ue=!1;else if($<96)Ue===Qe?M+=String.fromCharCode($-64):M+=String.fromCharCode($+64),Ue=!1;else switch($!==ee.CODE_STOP&&(re=!1),$){case ee.CODE_FNC_1:c&&(M.length===0?M+="]C1":M+=String.fromCharCode(29));break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_A:!Qe&&Ue?(Qe=!0,Ue=!1):Qe&&Ue?(Qe=!1,Ue=!1):Ue=!0;break;case ee.CODE_SHIFT:T=!0,w=ee.CODE_CODE_B;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:v=!0;break}break;case ee.CODE_CODE_B:if($<96)Ue===Qe?M+=String.fromCharCode(" ".charCodeAt(0)+$):M+=String.fromCharCode(" ".charCodeAt(0)+$+128),Ue=!1;else switch($!==ee.CODE_STOP&&(re=!1),$){case ee.CODE_FNC_1:c&&(M.length===0?M+="]C1":M+=String.fromCharCode(29));break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_B:!Qe&&Ue?(Qe=!0,Ue=!1):Qe&&Ue?(Qe=!1,Ue=!1):Ue=!0;break;case ee.CODE_SHIFT:T=!0,w=ee.CODE_CODE_A;break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:v=!0;break}break;case ee.CODE_CODE_C:if($<100)$<10&&(M+="0"),M+=$;else switch($!==ee.CODE_STOP&&(re=!1),$){case ee.CODE_FNC_1:c&&(M.length===0?M+="]C1":M+=String.fromCharCode(29));break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_STOP:v=!0;break}break}ds&&(w=w===ee.CODE_CODE_A?ee.CODE_CODE_B:ee.CODE_CODE_A)}const Cn=U-L;if(U=s.getNextUnset(U),!s.isRange(U,Math.min(s.getSize(),U+(U-L)/2),!1))throw new V;if(ce-=de*X,ce%103!==X)throw new R;const tr=M.length;if(tr===0)throw new V;tr>0&&re&&(w===ee.CODE_CODE_C?M=M.substring(0,tr-2):M=M.substring(0,tr-1));const En=(u[1]+u[0])/2,lt=L+Cn/2,Zt=x.length,Nn=new Uint8Array(Zt);for(let ds=0;ds<Zt;ds++)Nn[ds]=x[ds];const us=[new me(En,r),new me(lt,r)];return new Ze(M,Nn,0,us,fe.CODE_128,new Date().getTime())}}ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ee.MAX_AVG_VARIANCE=.25,ee.MAX_INDIVIDUAL_VARIANCE=.7,ee.CODE_SHIFT=98,ee.CODE_CODE_C=99,ee.CODE_CODE_B=100,ee.CODE_CODE_A=101,ee.CODE_FNC_1=102,ee.CODE_FNC_2=97,ee.CODE_FNC_3=96,ee.CODE_FNC_4_A=101,ee.CODE_FNC_4_B=100,ee.CODE_START_A=103,ee.CODE_START_B=104,ee.CODE_START_C=105,ee.CODE_STOP=106;class Te extends pe{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Te.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),x,w;do{Te.recordPattern(s,d,c);let z=Te.toNarrowWidePattern(c);if(z<0)throw new V;x=Te.patternToChar(z),this.decodeRowResult+=x,w=d;for(let X of c)d+=X;d=s.getNextSet(d)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let z of c)v+=z;let T=d-w-v;if(d!==h&&T*2<v)throw new V;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,X=0;for(let $=0;$<z;$++)X+=Te.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(z)!==Te.ALPHABET_STRING.charAt(X%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new V;let M;this.extendedMode?M=Te.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let L=(u[1]+u[0])/2,U=w+v/2;return new Ze(M,null,0,[new me(L,r),new me(U,r)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,x=s.length;for(let w=c;w<o;w++)if(r.get(w)!==h)s[u]++;else{if(u===x-1){if(this.toNarrowWidePattern(s)===Te.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((w-d)/2)),d,!1))return[d,w];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new V}static toNarrowWidePattern(r){let s=r.length,o=0,c;do{let u=2147483647;for(let x of r)x<u&&x>o&&(u=x);o=u,c=0;let d=0,h=0;for(let x=0;x<s;x++){let w=r[x];w>o&&(h|=1<<s-1-x,c++,d+=w)}if(c===3){for(let x=0;x<s&&c>0;x++){let w=r[x];if(w>o&&(c--,w*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Te.CHARACTER_ENCODINGS.length;s++)if(Te.CHARACTER_ENCODINGS[s]===r)return Te.ALPHABET_STRING.charAt(s);if(r===Te.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(r){let s=r.length,o="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new B;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new B;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new B;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new B;break}o+=h,c++}else o+=u}return o}}Te.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Te.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Te.ASTERISK_ENCODING=148;class Ie extends pe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new Ee;Ie.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),x=null;o!=null&&(x=o.get(W.ALLOWED_LENGTHS)),x==null&&(x=Ie.DEFAULT_ALLOWED_LENGTHS);let w=h.length,v=!1,T=0;for(let U of x){if(w===U){v=!0;break}U>T&&(T=U)}if(!v&&w>T&&(v=!0),!v)throw new B;const M=[new me(c[1],r),new me(u[0],r)];return new Ze(h,null,0,M,fe.ITF,new Date().getTime())}static decodeMiddle(r,s,o,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<o;){pe.recordPattern(r,s,u);for(let w=0;w<5;w++){let v=2*w;d[w]=u[v],h[w]=u[v+1]}let x=Ie.decodeDigit(d);c.append(x.toString()),x=this.decodeDigit(h),c.append(x.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=Ie.skipWhiteSpace(r),o=Ie.findGuardPattern(r,s,Ie.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let c=s-1;o>0&&c>=0&&!r.get(c);c--)o--;if(o!==0)throw new V}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new V;return o}decodeEnd(r){r.reverse();try{let s=Ie.skipWhiteSpace(r),o;try{o=Ie.findGuardPattern(r,s,Ie.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(o=Ie.findGuardPattern(r,s,Ie.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let c=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-c,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let c=o.length,u=new Int32Array(c),d=r.getSize(),h=!1,x=0,w=s;u.fill(0);for(let v=s;v<d;v++)if(r.get(v)!==h)u[x]++;else{if(x===c-1){if(pe.patternMatchVariance(u,o,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return[w,v];w+=u[0]+u[1],_.arraycopy(u,2,u,0,x-1),u[x-1]=0,u[x]=0,x--}else x++;u[x]=1,h=!h}throw new V}static decodeDigit(r){let s=Ie.MAX_AVG_VARIANCE,o=-1,c=Ie.PATTERNS.length;for(let u=0;u<c;u++){let d=Ie.PATTERNS[u],h=pe.patternMatchVariance(r,d,Ie.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=u):h===s&&(o=-1)}if(o>=0)return o%10;throw new V}}Ie.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ie.MAX_AVG_VARIANCE=.38,Ie.MAX_INDIVIDUAL_VARIANCE=.5,Ie.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ie.START_PATTERN=Int32Array.from([1,1,1,1]),Ie.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class He extends pe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=He.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=o[0];c=o[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return o}static checkChecksum(r){return He.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return He.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new B;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new B;o+=u}return(1e3-o)%10}static decodeEnd(r,s){return He.findGuardPattern(r,s,!1,He.START_END_PATTERN,new Int32Array(He.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,c){return this.findGuardPattern(r,s,o,c,new Int32Array(c.length))}static findGuardPattern(r,s,o,c,u){let d=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let h=0,x=s,w=c.length,v=o;for(let T=s;T<d;T++)if(r.get(T)!==v)u[h]++;else{if(h===w-1){if(pe.patternMatchVariance(u,c,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return Int32Array.from([x,T]);x+=u[0]+u[1];let M=u.slice(2,u.length-1);for(let L=0;L<h-1;L++)u[L]=M[L];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,v=!v}throw new V}static decodeDigit(r,s,o,c){this.recordPattern(r,o,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let x=0;x<h;x++){let w=c[x],v=pe.patternMatchVariance(s,w,He.MAX_INDIVIDUAL_VARIANCE);v<u&&(u=v,d=x)}if(d>=0)return d;throw new V}}He.MAX_AVG_VARIANCE=.48,He.MAX_INDIVIDUAL_VARIANCE=.7,He.START_END_PATTERN=Int32Array.from([1,1,1]),He.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),He.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),He.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Fn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),d=c.toString(),h=Fn.parseExtensionString(d),x=[new me((o[0]+o[1])/2,r),new me(u,r)],w=new Ze(d,null,0,x,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<5&&d<u;w++){let v=He.decodeDigit(r,c,d,He.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let T of c)d+=T;v>=10&&(h|=1<<4-w),w!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==5)throw new V;let x=this.determineCheckDigit(h);if(Fn.extensionChecksum(o.toString())!==x)throw new V;return d}static extensionChecksum(r){let s=r.length,o=0;for(let c=s-2;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);o*=3;for(let c=s-1;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new V}static parseExtensionString(r){if(r.length!==5)return null;let s=Fn.parseExtension5String(r);return s==null?null:new Map([[st.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),c=(o/100).toString(),u=o%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class oo{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),d=c.toString(),h=oo.parseExtensionString(d),x=[new me((o[0]+o[1])/2,r),new me(u,r)],w=new Ze(d,null,0,x,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<2&&d<u;x++){let w=He.decodeDigit(r,c,d,He.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let v of c)d+=v;w>=10&&(h|=1<<1-x),x!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==2)throw new V;if(parseInt(o.toString())%4!==h)throw new V;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[st.ISSUE_NUMBER,parseInt(r)]])}}class _a{static decodeRow(r,s,o){let c=He.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Fn().decodeRow(r,s,c)}catch{return new oo().decodeRow(r,s,c)}}}_a.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends He{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=qe.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[s.length-c-1];qe.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let c=qe.findStartGuardPattern(s),u=o==null?null:o.get(W.NEED_RESULT_POINT_CALLBACK);if(u!=null){const re=new me((c[0]+c[1])/2,r);u.foundPossibleResultPoint(re)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,x=d.resultString;if(u!=null){const re=new me(h,r);u.foundPossibleResultPoint(re)}let w=this.decodeEnd(s,h);if(u!=null){const re=new me((w[0]+w[1])/2,r);u.foundPossibleResultPoint(re)}let v=w[1],T=v+(v-w[0]);if(T>=s.getSize()||!s.isRange(v,T,!1))throw new V;let M=x.toString();if(M.length<8)throw new B;if(!qe.checkChecksum(M))throw new R;let L=(c[1]+c[0])/2,U=(w[1]+w[0])/2,z=this.getBarcodeFormat(),X=[new me(L,r),new me(U,r)],$=new Ze(M,null,0,X,z,new Date().getTime()),ce=0;try{let re=_a.decodeRow(r,s,w[1]);$.putMetadata(st.UPC_EAN_EXTENSION,re.getText()),$.putAllMetadata(re.getResultMetadata()),$.addResultPoints(re.getResultPoints()),ce=re.getText().length}catch{}let de=o==null?null:o.get(W.ALLOWED_EAN_EXTENSIONS);if(de!=null){let re=!1;for(let Qe in de)if(ce.toString()===Qe){re=!0;break}if(!re)throw new V}return $}decodeEnd(r,s){return qe.findGuardPattern(r,s,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return qe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return qe.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new B;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new B;o+=u}return(1e3-o)%10}}class hr extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<6&&d<u;w++){let v=qe.decodeDigit(r,c,d,qe.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let T of c)d+=T;v>=10&&(h|=1<<5-w)}o=hr.determineFirstDigit(o,h),d=qe.findGuardPattern(r,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&d<u;w++){let v=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v);for(let T of c)d+=T}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode("0".charCodeAt(0)+o)+r,r;throw new V}}hr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ao extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let x=0;x<4&&d<u;x++){let w=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w);for(let v of c)d+=v}d=qe.findGuardPattern(r,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&d<u;x++){let w=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w);for(let v of c)d+=v}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_8}}class Un extends qe{constructor(){super(...arguments),this.ean13Reader=new hr}getBarcodeFormat(){return fe.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new Ze(s.substring(1),null,null,r.getResultPoints(),fe.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new V}reset(){this.ean13Reader.reset()}}class Bt extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let w=0;w<6&&d<u;w++){const v=Bt.decodeDigit(r,c,d,Bt.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let T of c)d+=T;v>=10&&(h|=1<<5-w)}let x=Bt.determineNumSysAndCheckDigit(o,h);return{rowOffset:d,resultString:x}}decodeEnd(r,s){return Bt.findGuardPatternWithoutCounters(r,s,!0,Bt.MIDDLE_END_PATTERN)}checkChecksum(r){return qe.checkChecksum(Bt.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let u=String.fromCharCode("0".charCodeAt(0)+o),d=String.fromCharCode("0".charCodeAt(0)+c);return u+r+d}throw V.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new Ee;o.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(c),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(c);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}Bt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class lo extends pe{constructor(r){super();let s=r==null?null:r.get(W.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new hr),o.push(new Un),o.push(new ao),o.push(new Bt)):(s.indexOf(fe.EAN_13)>-1&&o.push(new hr),s.indexOf(fe.UPC_A)>-1&&o.push(new Un),s.indexOf(fe.EAN_8)>-1&&o.push(new ao),s.indexOf(fe.UPC_E)>-1&&o.push(new Bt)),this.readers=o}decodeRow(r,s,o){for(let c of this.readers)try{const u=c.decodeRow(r,s,o),d=u.getBarcodeFormat()===fe.EAN_13&&u.getText().charAt(0)==="0",h=o==null?null:o.get(W.POSSIBLE_FORMATS),x=h==null||h.includes(fe.UPC_A);if(d&&x){const w=u.getRawBytes(),v=new Ze(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),fe.UPC_A);return v.putAllMetadata(u.getResultMetadata()),v}return u}catch{}throw new V}reset(){for(let r of this.readers)r.reset()}}class jt extends pe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(pe.patternMatchVariance(r,s[o],jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return o;throw new V}static count(r){return ze.sum(new Int32Array(r))}static increment(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],o=u);r[o]++}static decrement(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],o=u);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],c=s/o;if(c>=jt.MIN_FINDER_PATTERN_RATIO&&c<=jt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}jt.MAX_AVG_VARIANCE=.2,jt.MAX_INDIVIDUAL_VARIANCE=.45,jt.MIN_FINDER_PATTERN_RATIO=9.5/12,jt.MAX_FINDER_PATTERN_RATIO=12.5/14;class rs{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof rs))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ka{constructor(r,s,o,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new me(o,u)),this.resultPoints.push(new me(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof ka))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class gr{constructor(){}static getRSSvalue(r,s,o){let c=0;for(let x of r)c+=x;let u=0,d=0,h=r.length;for(let x=0;x<h-1;x++){let w;for(w=1,d|=1<<x;w<r[x];w++,d&=~(1<<x)){let v=gr.combins(c-w-1,h-x-2);if(o&&d===0&&c-w-(h-x-1)>=h-x-1&&(v-=gr.combins(c-w-(h-x),h-x-2)),h-x-1>1){let T=0;for(let M=c-w-(h-x-2);M>s;M--)T+=gr.combins(c-w-M-1,h-x-3);v-=T*(h-1-x)}else c-w>s&&v--;u+=v}c-=w}return u}static combins(r,s){let o,c;r-s>s?(c=s,o=r-s):(c=r-s,o=s);let u=1,d=1;for(let h=r;h>o;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class Qy{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,c=new P(o),u=0,h=r[0].getRightChar().getValue();for(let x=11;x>=0;--x)h&1<<x&&c.set(u),u++;for(let x=1;x<r.length;++x){let w=r[x],v=w.getLeftChar().getValue();for(let T=11;T>=0;--T)v&1<<T&&c.set(u),u++;if(w.getRightChar()!=null){let T=w.getRightChar().getValue();for(let M=11;M>=0;--M)T&1<<M&&c.set(u),u++}}return c}}class Mi{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Vc{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class xn extends Vc{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===xn.FNC1}}xn.FNC1="$";class Di extends Vc{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Vn extends Vc{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new B;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Vn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Vn.FNC1}isAnyFNC1(){return this.firstDigit===Vn.FNC1||this.secondDigit===Vn.FNC1}}Vn.FNC1=10;class ye{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new V;let s=r.substring(0,2);for(let u of ye.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(2,u[2],r):ye.processFixedAI(2,u[1],r);if(r.length<3)throw new V;let o=r.substring(0,3);for(let u of ye.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(3,u[2],r):ye.processFixedAI(3,u[1],r);for(let u of ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(4,u[2],r):ye.processFixedAI(4,u[1],r);if(r.length<4)throw new V;let c=r.substring(0,4);for(let u of ye.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===ye.VARIABLE_LENGTH?ye.processVariableAI(4,u[2],r):ye.processFixedAI(4,u[1],r);throw new V}static processFixedAI(r,s,o){if(o.length<r)throw new V;let c=o.substring(0,r);if(o.length<r+s)throw new V;let u=o.substring(r,r+s),d=o.substring(r+s),h="("+c+")"+u,x=ye.parseFieldsInGeneralPurpose(d);return x==null?h:h+x}static processVariableAI(r,s,o){let c=o.substring(0,r),u;o.length<r+s?u=o.length:u=r+s;let d=o.substring(r,u),h=o.substring(u),x="("+c+")"+d,w=ye.parseFieldsInGeneralPurpose(h);return w==null?x:x+w}}ye.VARIABLE_LENGTH=[],ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ye.VARIABLE_LENGTH,20],["22",ye.VARIABLE_LENGTH,29],["30",ye.VARIABLE_LENGTH,8],["37",ye.VARIABLE_LENGTH,8],["90",ye.VARIABLE_LENGTH,30],["91",ye.VARIABLE_LENGTH,30],["92",ye.VARIABLE_LENGTH,30],["93",ye.VARIABLE_LENGTH,30],["94",ye.VARIABLE_LENGTH,30],["95",ye.VARIABLE_LENGTH,30],["96",ye.VARIABLE_LENGTH,30],["97",ye.VARIABLE_LENGTH,3],["98",ye.VARIABLE_LENGTH,30],["99",ye.VARIABLE_LENGTH,30]],ye.THREE_DIGIT_DATA_LENGTH=[["240",ye.VARIABLE_LENGTH,30],["241",ye.VARIABLE_LENGTH,30],["242",ye.VARIABLE_LENGTH,6],["250",ye.VARIABLE_LENGTH,30],["251",ye.VARIABLE_LENGTH,30],["253",ye.VARIABLE_LENGTH,17],["254",ye.VARIABLE_LENGTH,20],["400",ye.VARIABLE_LENGTH,30],["401",ye.VARIABLE_LENGTH,30],["402",17],["403",ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ye.VARIABLE_LENGTH,20],["421",ye.VARIABLE_LENGTH,15],["422",3],["423",ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ye.VARIABLE_LENGTH,15],["391",ye.VARIABLE_LENGTH,18],["392",ye.VARIABLE_LENGTH,15],["393",ye.VARIABLE_LENGTH,18],["703",ye.VARIABLE_LENGTH,30]],ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ye.VARIABLE_LENGTH,20],["8003",ye.VARIABLE_LENGTH,30],["8004",ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ye.VARIABLE_LENGTH,30],["8008",ye.VARIABLE_LENGTH,12],["8018",18],["8020",ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ye.VARIABLE_LENGTH,70],["8200",ye.VARIABLE_LENGTH,70]];class is{constructor(r){this.buffer=new Ee,this.information=r}decodeAllCodes(r,s){let o=s,c=null;do{let u=this.decodeGeneralPurposeField(o,c),d=ye.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Vn(this.information.getSize(),Vn.FNC1,Vn.FNC1):new Vn(this.information.getSize(),u-1,Vn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,c=(s-8)%11;return new Vn(r+7,o,c)}extractNumericValueFromBitArray(r,s){return is.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let c=0;for(let u=0;u<o;++u)r.get(s+u)&&(c|=1<<o-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Di(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Di(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Di(this.current.getPosition(),this.buffer.toString()):s=new Di(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Mi(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Di(this.current.getPosition(),this.buffer.toString());return new Mi(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Di(this.current.getPosition(),this.buffer.toString());return new Mi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Di(this.current.getPosition(),this.buffer.toString());return new Mi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mi(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new xn(r+5,xn.FNC1);if(s>=5&&s<15)return new xn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new xn(r+7,""+(o+1));if(o>=90&&o<116)return new xn(r+7,""+(o+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new B}return new xn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new xn(r+5,xn.FNC1);if(s>=5&&s<15)return new xn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new xn(r+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Fe("Decoding invalid alphanumeric value: "+o)}return new xn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class zc{constructor(r){this.information=r,this.generalDecoder=new is(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class yn extends zc{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}yn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-"0".charCodeAt(0);o+=c&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}yn.GTIN_SIZE=40;class ss extends yn{constructor(r){super(r)}parseInformation(){let r=new Ee;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ss.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,ss.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,ss.HEADER_SIZE+44)}}ss.HEADER_SIZE=1+1+2;class Pa extends zc{constructor(r){super(r)}parseInformation(){let r=new Ee;return this.getGeneralDecoder().decodeAllCodes(r,Pa.HEADER_SIZE)}}Pa.HEADER_SIZE=2+1+2;class La extends yn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class pr extends La{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=pr.HEADER_SIZE+La.GTIN_SIZE+pr.WEIGHT_SIZE)throw new V;let r=new Ee;return this.encodeCompressedGtin(r,pr.HEADER_SIZE),this.encodeCompressedWeight(r,pr.HEADER_SIZE+La.GTIN_SIZE,pr.WEIGHT_SIZE),r.toString()}}pr.HEADER_SIZE=4+1,pr.WEIGHT_SIZE=15;class Ky extends pr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Zy extends pr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class mr extends yn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<mr.HEADER_SIZE+yn.GTIN_SIZE)throw new V;let r=new Ee;this.encodeCompressedGtin(r,mr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(mr.HEADER_SIZE+yn.GTIN_SIZE,mr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(mr.HEADER_SIZE+yn.GTIN_SIZE+mr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}mr.HEADER_SIZE=5+1+2,mr.LAST_DIGIT_SIZE=2;class un extends yn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+yn.GTIN_SIZE)throw new V;let r=new Ee;this.encodeCompressedGtin(r,un.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+yn.GTIN_SIZE,un.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+yn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+yn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}un.HEADER_SIZE=5+1+2,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class mt extends La{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE+mt.DATE_SIZE)throw new V;let r=new Ee;return this.encodeCompressedGtin(r,mt.HEADER_SIZE),this.encodeCompressedWeight(r,mt.HEADER_SIZE+mt.GTIN_SIZE,mt.WEIGHT_SIZE),this.encodeCompressedDate(r,mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,mt.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=o%32;o/=32;let u=o%12+1;o/=12;let d=o;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}mt.HEADER_SIZE=7+1,mt.WEIGHT_SIZE=20,mt.DATE_SIZE=16;function l0(A){try{if(A.get(1))return new ss(A);if(!A.get(2))return new Pa(A);switch(is.extractNumericValueFromBitArray(A,1,4)){case 4:return new Ky(A);case 5:return new Zy(A)}switch(is.extractNumericValueFromBitArray(A,1,5)){case 12:return new mr(A);case 13:return new un(A)}switch(is.extractNumericValueFromBitArray(A,1,7)){case 56:return new mt(A,"310","11");case 57:return new mt(A,"320","11");case 58:return new mt(A,"310","13");case 59:return new mt(A,"320","13");case 60:return new mt(A,"310","15");case 61:return new mt(A,"320","15");case 62:return new mt(A,"310","17");case 63:return new mt(A,"320","17")}}catch(r){throw console.log(r),new Fe("unknown decoder: "+A)}}class Zr{constructor(r,s,o,c){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Zr?Zr.equalsOrNull(r.leftchar,s.leftchar)&&Zr.equalsOrNull(r.rightchar,s.rightchar)&&Zr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Zr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Hc{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Hc?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class te extends jt{constructor(r){super(...arguments),this.pairs=new Array(te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return te.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,te.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new V}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,o+1)}catch(d){this.verbose&&console.log(d)}}throw new V}static isValidSequence(r){for(let s of te.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,c=!1,u=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),o++}u||c||te.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Hc(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let c of o.getPairs())for(let u of r)if(Zr.equals(c,u))break}}static isPartialRow(r,s){for(let o of s){let c=!0;for(let u of r){let d=!1;for(let h of o.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Qy.buildBitArray(r),c=l0(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new Ze(c,null,null,h,fe.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let x=this.pairs.get(h);c+=x.getLeftChar().getChecksumPortion(),u++;let w=x.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,o,c),u==null?h=te.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let x=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new V;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(v){w=null,this.verbose&&console.log(v)}return new Zr(x,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;o>=0?d=o:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let x=!1;for(;d<u&&(x=!r.get(d),!!x);)d++;let w=0,v=d;for(let T=d;T<u;T++)if(r.get(T)!=x)c[w]++;else{if(w==3){if(h&&te.reverseCounters(c),te.isFinderPattern(c)){this.startEnd[0]=v,this.startEnd[1]=T;return}h&&te.reverseCounters(c),v+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,x=!x}throw new V}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let c=r[o];r[o]=r[s-o-1],r[s-o-1]=c}}parseFoundFinderPattern(r,s,o){let c,u,d;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();_.arraycopy(h,0,h,1,h.length-1),h[0]=c;let x;try{x=this.parseFinderValue(h,te.FINDER_PATTERNS)}catch{return null}return new ka(x,[u,d],u,d,s)}decodeDataCharacter(r,s,o,c){let u=this.getDataCharacterCounters();for(let lt=0;lt<u.length;lt++)u[lt]=0;if(c)te.recordPatternInReverse(r,s.getStartEnd()[0],u);else{te.recordPattern(r,s.getStartEnd()[1],u);for(let lt=0,Zt=u.length-1;lt<Zt;lt++,Zt--){let Nn=u[lt];u[lt]=u[Zt],u[Zt]=Nn}}let d=17,h=ze.sum(new Int32Array(u))/d,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-x)/x>.3)throw new V;let w=this.getOddCounts(),v=this.getEvenCounts(),T=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let lt=0;lt<u.length;lt++){let Zt=1*u[lt]/h,Nn=Zt+.5;if(Nn<1){if(Zt<.3)throw new V;Nn=1}else if(Nn>8){if(Zt>8.7)throw new V;Nn=8}let us=lt/2;lt&1?(v[us]=Nn,M[us]=Zt-Nn):(w[us]=Nn,T[us]=Zt-Nn)}this.adjustOddEvenCounts(d);let L=4*s.getValue()+(o?0:2)+(c?0:1)-1,U=0,z=0;for(let lt=w.length-1;lt>=0;lt--){if(te.isNotA1left(s,o,c)){let Zt=te.WEIGHTS[L][2*lt];z+=w[lt]*Zt}U+=w[lt]}let X=0;for(let lt=v.length-1;lt>=0;lt--)if(te.isNotA1left(s,o,c)){let Zt=te.WEIGHTS[L][2*lt+1];X+=v[lt]*Zt}let $=z+X;if(U&1||U>13||U<4)throw new V;let ce=(13-U)/2,de=te.SYMBOL_WIDEST[ce],re=9-de,Qe=gr.getRSSvalue(w,de,!0),Ue=gr.getRSSvalue(v,re,!1),Cn=te.EVEN_TOTAL_SUBSET[ce],tr=te.GSUM[ce],En=Qe*Cn+Ue+tr;return new rs(En,$)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=ze.sum(new Int32Array(this.getOddCounts())),o=ze.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;o>13?h=!0:o<4&&(d=!0);let x=s+o-r,w=(s&1)==1,v=(o&1)==0;if(x==1)if(w){if(v)throw new V;u=!0}else{if(!v)throw new V;h=!0}else if(x==-1)if(w){if(v)throw new V;c=!0}else{if(!v)throw new V;d=!0}else if(x==0){if(w){if(!v)throw new V;s<o?(c=!0,h=!0):(u=!0,d=!0)}else if(v)throw new V}else throw new V;if(c){if(u)throw new V;te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new V;te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}te.SYMBOL_WIDEST=[7,5,4,3,1],te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],te.GSUM=[0,348,1388,2948,3988],te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],te.FINDER_PAT_A=0,te.FINDER_PAT_B=1,te.FINDER_PAT_C=2,te.FINDER_PAT_D=3,te.FINDER_PAT_E=4,te.FINDER_PAT_F=5,te.FINDER_PATTERN_SEQUENCES=[[te.FINDER_PAT_A,te.FINDER_PAT_A],[te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B],[te.FINDER_PAT_A,te.FINDER_PAT_C,te.FINDER_PAT_B,te.FINDER_PAT_D],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_C],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_D,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_D],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_E],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F]],te.MAX_PAIRS=11;class $y extends rs{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bt extends jt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const c=this.decodePair(s,!1,r,o);bt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,o);bt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&bt.checkChecksum(d,h))return bt.constructResult(d,h)}throw new V}static addOrTally(r,s){if(s==null)return;let o=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),c=new String(o).toString(),u=new Ee;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let d=0;for(let w=0;w<13;w++){let v=u.charAt(w).charCodeAt(0)-"0".charCodeAt(0);d+=w&1?v:3*v}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new Ze(u.toString(),null,0,[h[0],h[1],x[0],x[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(r,s,o,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,o,s,u),h=c==null?null:c.get(W.NEED_RESULT_POINT_CALLBACK);if(h!=null){let v=(u[0]+u[1])/2;s&&(v=r.getSize()-1-v),h.foundPossibleResultPoint(new me(v,o))}let x=this.decodeDataCharacter(r,d,!0),w=this.decodeDataCharacter(r,d,!1);return new $y(1597*x.getValue()+w.getValue(),x.getChecksumPortion()+4*w.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,o){let c=this.getDataCharacterCounters();for(let X=0;X<c.length;X++)c[X]=0;if(o)pe.recordPatternInReverse(r,s.getStartEnd()[0],c);else{pe.recordPattern(r,s.getStartEnd()[1]+1,c);for(let X=0,$=c.length-1;X<$;X++,$--){let ce=c[X];c[X]=c[$],c[$]=ce}}let u=o?16:15,d=ze.sum(new Int32Array(c))/u,h=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let X=0;X<c.length;X++){let $=c[X]/d,ce=Math.floor($+.5);ce<1?ce=1:ce>8&&(ce=8);let de=Math.floor(X/2);X&1?(x[de]=ce,v[de]=$-ce):(h[de]=ce,w[de]=$-ce)}this.adjustOddEvenCounts(o,u);let T=0,M=0;for(let X=h.length-1;X>=0;X--)M*=9,M+=h[X],T+=h[X];let L=0,U=0;for(let X=x.length-1;X>=0;X--)L*=9,L+=x[X],U+=x[X];let z=M+3*L;if(o){if(T&1||T>12||T<4)throw new V;let X=(12-T)/2,$=bt.OUTSIDE_ODD_WIDEST[X],ce=9-$,de=gr.getRSSvalue(h,$,!1),re=gr.getRSSvalue(x,ce,!0),Qe=bt.OUTSIDE_EVEN_TOTAL_SUBSET[X],Ue=bt.OUTSIDE_GSUM[X];return new rs(de*Qe+re+Ue,z)}else{if(U&1||U>10||U<4)throw new V;let X=(10-U)/2,$=bt.INSIDE_ODD_WIDEST[X],ce=9-$,de=gr.getRSSvalue(h,$,!0),re=gr.getRSSvalue(x,ce,!1),Qe=bt.INSIDE_ODD_TOTAL_SUBSET[X],Ue=bt.INSIDE_GSUM[X];return new rs(re*Qe+de+Ue,z)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,x=d;for(let w=d;w<c;w++)if(r.get(w)!==u)o[h]++;else{if(h===3){if(jt.isFinderPattern(o))return[x,w];x+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,u=!u}throw new V}parseFoundFinderPattern(r,s,o,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,x=this.getDecodeFinderCounters(),w=new Int32Array(x.length);_.arraycopy(x,0,w,1,x.length-1),w[0]=h;const v=this.parseFinderValue(w,bt.FINDER_PATTERNS);let T=d,M=c[1];return o&&(T=r.getSize()-1-T,M=r.getSize()-1-M),new ka(v,[d,c[1]],T,M,s)}adjustOddEvenCounts(r,s){let o=ze.sum(new Int32Array(this.getOddCounts())),c=ze.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,x=!1;r?(o>12?d=!0:o<4&&(u=!0),c>12?x=!0:c<4&&(h=!0)):(o>11?d=!0:o<5&&(u=!0),c>10?x=!0:c<4&&(h=!0));let w=o+c-s,v=(o&1)===(r?1:0),T=(c&1)===1;if(w===1)if(v){if(T)throw new V;d=!0}else{if(!T)throw new V;x=!0}else if(w===-1)if(v){if(T)throw new V;u=!0}else{if(!T)throw new V;h=!0}else if(w===0){if(v){if(!T)throw new V;o<c?(u=!0,x=!0):(d=!0,h=!0)}else if(T)throw new V}else throw new V;if(u){if(d)throw new V;jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(x)throw new V;jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bt.OUTSIDE_GSUM=[0,161,961,2015,2715],bt.INSIDE_GSUM=[0,336,1036,1516],bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bt.INSIDE_ODD_WIDEST=[2,4,6,8],bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class os extends pe{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(W.POSSIBLE_FORMATS):null,c=r&&r.get(W.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(fe.EAN_13)||o.includes(fe.UPC_A)||o.includes(fe.EAN_8)||o.includes(fe.UPC_E))&&this.readers.push(new lo(r)),o.includes(fe.CODE_39)&&this.readers.push(new Te(c)),o.includes(fe.CODE_128)&&this.readers.push(new ee),o.includes(fe.ITF)&&this.readers.push(new Ie),o.includes(fe.RSS_14)&&this.readers.push(new bt),o.includes(fe.RSS_EXPANDED)&&this.readers.push(new te(this.verbose))):(this.readers.push(new lo(r)),this.readers.push(new Te),this.readers.push(new lo(r)),this.readers.push(new ee),this.readers.push(new Ie),this.readers.push(new bt),this.readers.push(new te(this.verbose)))}decodeRow(r,s,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,o)}catch{}throw new V}reset(){this.readers.forEach(r=>r.reset())}}class qy extends ct{constructor(r=500,s){super(new os(s),r,s)}}class nt{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ke{constructor(r,s,o,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const x=d.getECCodewords(),w=d.getECBlocks();for(let v of w)h+=v.getCount()*(v.getDataCodewords()+x);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new B;for(let o of Ke.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ke(1,10,10,8,8,new nt(5,new tt(1,3))),new Ke(2,12,12,10,10,new nt(7,new tt(1,5))),new Ke(3,14,14,12,12,new nt(10,new tt(1,8))),new Ke(4,16,16,14,14,new nt(12,new tt(1,12))),new Ke(5,18,18,16,16,new nt(14,new tt(1,18))),new Ke(6,20,20,18,18,new nt(18,new tt(1,22))),new Ke(7,22,22,20,20,new nt(20,new tt(1,30))),new Ke(8,24,24,22,22,new nt(24,new tt(1,36))),new Ke(9,26,26,24,24,new nt(28,new tt(1,44))),new Ke(10,32,32,14,14,new nt(36,new tt(1,62))),new Ke(11,36,36,16,16,new nt(42,new tt(1,86))),new Ke(12,40,40,18,18,new nt(48,new tt(1,114))),new Ke(13,44,44,20,20,new nt(56,new tt(1,144))),new Ke(14,48,48,22,22,new nt(68,new tt(1,174))),new Ke(15,52,52,24,24,new nt(42,new tt(2,102))),new Ke(16,64,64,14,14,new nt(56,new tt(2,140))),new Ke(17,72,72,16,16,new nt(36,new tt(4,92))),new Ke(18,80,80,18,18,new nt(48,new tt(4,114))),new Ke(19,88,88,20,20,new nt(56,new tt(4,144))),new Ke(20,96,96,22,22,new nt(68,new tt(4,174))),new Ke(21,104,104,24,24,new nt(56,new tt(6,136))),new Ke(22,120,120,18,18,new nt(68,new tt(6,175))),new Ke(23,132,132,20,20,new nt(62,new tt(8,163))),new Ke(24,144,144,22,22,new nt(62,new tt(8,156),new tt(2,155))),new Ke(25,8,18,6,16,new nt(7,new tt(1,5))),new Ke(26,8,32,6,14,new nt(11,new tt(1,10))),new Ke(27,12,26,10,24,new nt(14,new tt(1,16))),new Ke(28,12,36,10,16,new nt(18,new tt(1,22))),new Ke(29,16,36,14,16,new nt(24,new tt(1,32))),new Ke(30,16,48,14,22,new nt(28,new tt(1,49)))]}}Ke.VERSIONS=Ke.buildVersions();class Wc{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new B;this.version=Wc.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return Ke.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,x=!1,w=!1,v=!1;do if(o===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,o-=2,c+=2,h=!0;else if(o===u-2&&c===0&&d&3&&!x)r[s++]=this.readCorner2(u,d)&255,o-=2,c+=2,x=!0;else if(o===u+4&&c===2&&!(d&7)&&!w)r[s++]=this.readCorner3(u,d)&255,o-=2,c+=2,w=!0;else if(o===u-2&&c===0&&(d&7)===4&&!v)r[s++]=this.readCorner4(u,d)&255,o-=2,c+=2,v=!0;else{do o<u&&c>=0&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,d)&255),o-=2,c+=2;while(o>=0&&c<d);o+=1,c+=3;do o>=0&&c<d&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,d)&255),o+=2,c-=2;while(o<u&&c>=0);o+=3,c+=1}while(o<u||c<d);if(s!==this.version.getTotalCodewords())throw new B;return r}readModule(r,s,o,c){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,c){let u=0;return this.readModule(r-2,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s,o,c)&&(u|=1),u<<=1,this.readModule(r,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r,s,o,c)&&(u|=1),u}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=o/u|0,x=d*c,w=h*u,v=new Ne(w,x);for(let T=0;T<d;++T){const M=T*c;for(let L=0;L<h;++L){const U=L*u;for(let z=0;z<c;++z){const X=T*(c+2)+1+z,$=M+z;for(let ce=0;ce<u;++ce){const de=L*(u+2)+1+ce;if(r.get(de,X)){const re=U+ce;v.set(re,$)}}}}}return v}}class Gc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let c=0;const u=o.getECBlocks();for(let z of u)c+=z.getCount();const d=new Array(c);let h=0;for(let z of u)for(let X=0;X<z.getCount();X++){const $=z.getDataCodewords(),ce=o.getECCodewords()+$;d[h++]=new Gc($,new Uint8Array(ce))}const w=d[0].codewords.length-o.getECCodewords(),v=w-1;let T=0;for(let z=0;z<v;z++)for(let X=0;X<h;X++)d[X].codewords[z]=r[T++];const M=s.getVersionNumber()===24,L=M?8:h;for(let z=0;z<L;z++)d[z].codewords[w-1]=r[T++];const U=d[0].codewords.length;for(let z=w;z<U;z++)for(let X=0;X<h;X++){const $=M?(X+8)%h:X,ce=M&&$>7?z-1:z;d[$].codewords[ce]=r[T++]}if(T!==r.length)throw new E;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Yc{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new E(""+r);let s=0,o=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(o>0){const d=8-o,h=r<d?r:d,x=d-h,w=255>>8-h<<x;s=(u[c]&w)>>x,r-=h,o+=h,o===8&&(o=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,o+=r}}return this.bitOffset=o,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ft;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));class $r{static decode(r){const s=new Yc(r),o=new Ee,c=new Ee,u=new Array;let d=Ft.ASCII_ENCODE;do if(d===Ft.ASCII_ENCODE)d=this.decodeAsciiSegment(s,o,c);else{switch(d){case Ft.C40_ENCODE:this.decodeC40Segment(s,o);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new B}d=Ft.ASCII_ENCODE}while(d!==Ft.PAD_ENCODE&&s.available()>0);return c.length()>0&&o.append(c.toString()),new Ot(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,o){let c=!1;do{let u=r.readBits(8);if(u===0)throw new B;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Ft.ASCII_ENCODE;if(u===129)return Ft.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new B;break}}while(r.available()>0);return Ft.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const x=c[h];switch(u){case 0:if(x<3)u=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[x];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new B;break;case 1:o?(s.append(String.fromCharCode(x+128)),o=!1):s.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[x];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(x){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new B}u=0;break;case 3:o?(s.append(String.fromCharCode(x+224)),o=!1):s.append(String.fromCharCode(x+96)),u=0;break;default:throw new B}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const x=c[h];switch(u){case 0:if(x<3)u=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[x];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new B;break;case 1:o?(s.append(String.fromCharCode(x+128)),o=!1):s.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[x];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(x){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new B}u=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[x];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w),u=0}else throw new B;break;default:throw new B}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),o);for(let u=0;u<3;u++){const d=o[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new B;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let c=(r<<8)+s-1,u=Math.floor(c/1600);o[0]=u,c-=u*1600,u=Math.floor(c/40),o[1]=u,o[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new B;const h=new Uint8Array(d);for(let x=0;x<d;x++){if(r.available()<8)throw new B;h[x]=this.unrandomize255State(r.readBits(8),c++)}o.push(h);try{s.append(ge.decode(h,ue.ISO88591))}catch(x){throw new Fe("Platform does not support required encoding: "+x.message)}}static unrandomize255State(r,s){const o=149*s%255+1,c=r-o;return c>=0?c:c+256}}$r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$r.TEXT_SHIFT2_SET_CHARS=$r.C40_SHIFT2_SET_CHARS,$r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Jy{constructor(){this.rsDecoder=new _e(K.DATA_MATRIX_FIELD_256)}decode(r){const s=new Wc(r),o=s.getVersion(),c=s.readCodewords(),u=Gc.getDataBlocks(c,o);let d=0;for(let w of u)d+=w.getNumDataCodewords();const h=new Uint8Array(d),x=u.length;for(let w=0;w<x;w++){const v=u[w],T=v.getCodewords(),M=v.getNumDataCodewords();this.correctErrors(T,M);for(let L=0;L<M;L++)h[L*x+w]=T[L]}return $r.decode(h)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class _t{constructor(r){this.image=r,this.rectangleDetector=new mn(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new V;s=this.shiftToModuleCenter(s);const o=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(x&1)===1&&(x+=1),4*h<7*x&&4*x<7*h&&(h=x=Math.max(h,x));let w=_t.sampleGrid(this.image,o,c,u,d,h,x);return new tn(w,[o,c,u,d])}static shiftPoint(r,s,o){let c=(s.getX()-r.getX())/(o+1),u=(s.getY()-r.getY())/(o+1);return new me(r.getX()+c,r.getY()+u)}static moveAway(r,s,o){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<o?u-=1:u+=1,new me(c,u)}detectSolid1(r){let s=r[0],o=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,o),h=this.transitionsBetween(o,c),x=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),v=d,T=[u,s,o,c];return v>h&&(v=h,T[0]=s,T[1]=o,T[2]=c,T[3]=u),v>x&&(v=x,T[0]=o,T[1]=c,T[2]=u,T[3]=s),v>w&&(T[0]=c,T[1]=u,T[2]=s,T[3]=o),T}detectSolid2(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=_t.shiftPoint(o,c,(d+1)*4),x=_t.shiftPoint(c,o,(d+1)*4),w=this.transitionsBetween(h,s),v=this.transitionsBetween(x,u);return w<v?(r[0]=s,r[1]=o,r[2]=c,r[3]=u):(r[0]=o,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(o,u),x=_t.shiftPoint(s,o,(h+1)*4),w=_t.shiftPoint(c,o,(d+1)*4);d=this.transitionsBetween(x,u),h=this.transitionsBetween(w,u);let v=new me(u.getX()+(c.getX()-o.getX())/(d+1),u.getY()+(c.getY()-o.getY())/(d+1)),T=new me(u.getX()+(s.getX()-o.getX())/(h+1),u.getY()+(s.getY()-o.getY())/(h+1));if(!this.isValid(v))return this.isValid(T)?T:null;if(!this.isValid(T))return v;let M=this.transitionsBetween(x,v)+this.transitionsBetween(w,v),L=this.transitionsBetween(x,T)+this.transitionsBetween(w,T);return M>L?v:T}shiftToModuleCenter(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,x=_t.shiftPoint(s,o,h*4),w=_t.shiftPoint(c,o,d*4);d=this.transitionsBetween(x,u)+1,h=this.transitionsBetween(w,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let v=(s.getX()+o.getX()+c.getX()+u.getX())/4,T=(s.getY()+o.getY()+c.getY()+u.getY())/4;s=_t.moveAway(s,v,T),o=_t.moveAway(o,v,T),c=_t.moveAway(c,v,T),u=_t.moveAway(u,v,T);let M,L;return x=_t.shiftPoint(s,o,h*4),x=_t.shiftPoint(x,u,d*4),M=_t.shiftPoint(o,s,h*4),M=_t.shiftPoint(M,c,d*4),w=_t.shiftPoint(c,u,h*4),w=_t.shiftPoint(w,o,d*4),L=_t.shiftPoint(u,c,h*4),L=_t.shiftPoint(L,s,d*4),[x,M,w,L]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,c,u,d,h){return xe.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-o);if(h){let z=o;o=c,c=z,z=u,u=d,d=z}let x=Math.abs(u-o),w=Math.abs(d-c),v=-x/2,T=c<d?1:-1,M=o<u?1:-1,L=0,U=this.image.get(h?c:o,h?o:c);for(let z=o,X=c;z!==u;z+=M){let $=this.image.get(h?X:z,h?z:X);if($!==U&&(L++,U=$),v+=w,v>0){if(X===d)break;X+=T,v-=x}}return L}}class qr{constructor(){this.decoder=new Jy}decode(r,s=null){let o,c;if(s!=null&&s.has(W.PURE_BARCODE)){const w=qr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(w),c=qr.NO_POINTS}else{const w=new _t(r.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=o.getRawBytes(),d=new Ze(o.getText(),u,8*u.length,c,fe.DATA_MATRIX,_.currentTimeMillis()),h=o.getByteSegments();h!=null&&d.putMetadata(st.BYTE_SEGMENTS,h);const x=o.getECLevel();return x!=null&&d.putMetadata(st.ERROR_CORRECTION_LEVEL,x),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new V;const c=this.moduleSize(s,r);let u=s[1];const d=o[1];let h=s[0];const w=(o[0]-h+1)/c,v=(d-u+1)/c;if(w<=0||v<=0)throw new V;const T=c/2;u+=T,h+=T;const M=new Ne(w,v);for(let L=0;L<v;L++){const U=u+L*c;for(let z=0;z<w;z++)r.get(h+z*c,U)&&M.set(z,L)}return M}static moduleSize(r,s){const o=s.getWidth();let c=r[0];const u=r[1];for(;c<o&&s.get(c,u);)c++;if(c===o)throw new V;const d=c-r[0];if(d===0)throw new V;return d}}qr.NO_POINTS=[];class ew extends ct{constructor(r=500){super(new qr,r)}}var as;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(as||(as={}));class ut{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,ut.FOR_BITS.set(o,this),ut.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return ut.L;case"M":return ut.M;case"Q":return ut.Q;case"H":return ut.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof ut))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=ut.FOR_BITS.size)throw new E;return ut.FOR_BITS.get(r)}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.L=new ut(as.L,"L",1),ut.M=new ut(as.M,"M",0),ut.Q=new ut(as.Q,"Q",3),ut.H=new ut(as.H,"H",2);class nn{constructor(r){this.errorCorrectionLevel=ut.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return I.bitCount(r^s)}static decodeFormatInformation(r,s){const o=nn.doDecodeFormatInformation(r,s);return o!==null?o:nn.doDecodeFormatInformation(r^nn.FORMAT_INFO_MASK_QR,s^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,c=0;for(const u of nn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new nn(u[1]);let h=nn.numBitsDiffering(r,d);h<o&&(c=u[1],o=h),r!==s&&(h=nn.numBitsDiffering(s,d),h<o&&(c=u[1],o=h))}return o<=3?new nn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof nn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Q{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let c=0;const u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new B;try{return this.getVersionForNumber((r-17)/4)}catch{throw new B}}static getVersionForNumber(r){if(r<1||r>40)throw new E;return be.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<be.VERSION_DECODE_INFO.length;c++){const u=be.VERSION_DECODE_INFO[c];if(u===r)return be.getVersionForNumber(c+7);const d=nn.numBitsDiffering(r,u);d<s&&(o=c+7,s=d)}return s<=3?be.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ne(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<o;d++)c===0&&(d===0||d===o-1)||c===o-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}be.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),be.VERSIONS=[new be(1,new Int32Array(0),new Q(7,new k(1,19)),new Q(10,new k(1,16)),new Q(13,new k(1,13)),new Q(17,new k(1,9))),new be(2,Int32Array.from([6,18]),new Q(10,new k(1,34)),new Q(16,new k(1,28)),new Q(22,new k(1,22)),new Q(28,new k(1,16))),new be(3,Int32Array.from([6,22]),new Q(15,new k(1,55)),new Q(26,new k(1,44)),new Q(18,new k(2,17)),new Q(22,new k(2,13))),new be(4,Int32Array.from([6,26]),new Q(20,new k(1,80)),new Q(18,new k(2,32)),new Q(26,new k(2,24)),new Q(16,new k(4,9))),new be(5,Int32Array.from([6,30]),new Q(26,new k(1,108)),new Q(24,new k(2,43)),new Q(18,new k(2,15),new k(2,16)),new Q(22,new k(2,11),new k(2,12))),new be(6,Int32Array.from([6,34]),new Q(18,new k(2,68)),new Q(16,new k(4,27)),new Q(24,new k(4,19)),new Q(28,new k(4,15))),new be(7,Int32Array.from([6,22,38]),new Q(20,new k(2,78)),new Q(18,new k(4,31)),new Q(18,new k(2,14),new k(4,15)),new Q(26,new k(4,13),new k(1,14))),new be(8,Int32Array.from([6,24,42]),new Q(24,new k(2,97)),new Q(22,new k(2,38),new k(2,39)),new Q(22,new k(4,18),new k(2,19)),new Q(26,new k(4,14),new k(2,15))),new be(9,Int32Array.from([6,26,46]),new Q(30,new k(2,116)),new Q(22,new k(3,36),new k(2,37)),new Q(20,new k(4,16),new k(4,17)),new Q(24,new k(4,12),new k(4,13))),new be(10,Int32Array.from([6,28,50]),new Q(18,new k(2,68),new k(2,69)),new Q(26,new k(4,43),new k(1,44)),new Q(24,new k(6,19),new k(2,20)),new Q(28,new k(6,15),new k(2,16))),new be(11,Int32Array.from([6,30,54]),new Q(20,new k(4,81)),new Q(30,new k(1,50),new k(4,51)),new Q(28,new k(4,22),new k(4,23)),new Q(24,new k(3,12),new k(8,13))),new be(12,Int32Array.from([6,32,58]),new Q(24,new k(2,92),new k(2,93)),new Q(22,new k(6,36),new k(2,37)),new Q(26,new k(4,20),new k(6,21)),new Q(28,new k(7,14),new k(4,15))),new be(13,Int32Array.from([6,34,62]),new Q(26,new k(4,107)),new Q(22,new k(8,37),new k(1,38)),new Q(24,new k(8,20),new k(4,21)),new Q(22,new k(12,11),new k(4,12))),new be(14,Int32Array.from([6,26,46,66]),new Q(30,new k(3,115),new k(1,116)),new Q(24,new k(4,40),new k(5,41)),new Q(20,new k(11,16),new k(5,17)),new Q(24,new k(11,12),new k(5,13))),new be(15,Int32Array.from([6,26,48,70]),new Q(22,new k(5,87),new k(1,88)),new Q(24,new k(5,41),new k(5,42)),new Q(30,new k(5,24),new k(7,25)),new Q(24,new k(11,12),new k(7,13))),new be(16,Int32Array.from([6,26,50,74]),new Q(24,new k(5,98),new k(1,99)),new Q(28,new k(7,45),new k(3,46)),new Q(24,new k(15,19),new k(2,20)),new Q(30,new k(3,15),new k(13,16))),new be(17,Int32Array.from([6,30,54,78]),new Q(28,new k(1,107),new k(5,108)),new Q(28,new k(10,46),new k(1,47)),new Q(28,new k(1,22),new k(15,23)),new Q(28,new k(2,14),new k(17,15))),new be(18,Int32Array.from([6,30,56,82]),new Q(30,new k(5,120),new k(1,121)),new Q(26,new k(9,43),new k(4,44)),new Q(28,new k(17,22),new k(1,23)),new Q(28,new k(2,14),new k(19,15))),new be(19,Int32Array.from([6,30,58,86]),new Q(28,new k(3,113),new k(4,114)),new Q(26,new k(3,44),new k(11,45)),new Q(26,new k(17,21),new k(4,22)),new Q(26,new k(9,13),new k(16,14))),new be(20,Int32Array.from([6,34,62,90]),new Q(28,new k(3,107),new k(5,108)),new Q(26,new k(3,41),new k(13,42)),new Q(30,new k(15,24),new k(5,25)),new Q(28,new k(15,15),new k(10,16))),new be(21,Int32Array.from([6,28,50,72,94]),new Q(28,new k(4,116),new k(4,117)),new Q(26,new k(17,42)),new Q(28,new k(17,22),new k(6,23)),new Q(30,new k(19,16),new k(6,17))),new be(22,Int32Array.from([6,26,50,74,98]),new Q(28,new k(2,111),new k(7,112)),new Q(28,new k(17,46)),new Q(30,new k(7,24),new k(16,25)),new Q(24,new k(34,13))),new be(23,Int32Array.from([6,30,54,78,102]),new Q(30,new k(4,121),new k(5,122)),new Q(28,new k(4,47),new k(14,48)),new Q(30,new k(11,24),new k(14,25)),new Q(30,new k(16,15),new k(14,16))),new be(24,Int32Array.from([6,28,54,80,106]),new Q(30,new k(6,117),new k(4,118)),new Q(28,new k(6,45),new k(14,46)),new Q(30,new k(11,24),new k(16,25)),new Q(30,new k(30,16),new k(2,17))),new be(25,Int32Array.from([6,32,58,84,110]),new Q(26,new k(8,106),new k(4,107)),new Q(28,new k(8,47),new k(13,48)),new Q(30,new k(7,24),new k(22,25)),new Q(30,new k(22,15),new k(13,16))),new be(26,Int32Array.from([6,30,58,86,114]),new Q(28,new k(10,114),new k(2,115)),new Q(28,new k(19,46),new k(4,47)),new Q(28,new k(28,22),new k(6,23)),new Q(30,new k(33,16),new k(4,17))),new be(27,Int32Array.from([6,34,62,90,118]),new Q(30,new k(8,122),new k(4,123)),new Q(28,new k(22,45),new k(3,46)),new Q(30,new k(8,23),new k(26,24)),new Q(30,new k(12,15),new k(28,16))),new be(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new k(3,117),new k(10,118)),new Q(28,new k(3,45),new k(23,46)),new Q(30,new k(4,24),new k(31,25)),new Q(30,new k(11,15),new k(31,16))),new be(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new k(7,116),new k(7,117)),new Q(28,new k(21,45),new k(7,46)),new Q(30,new k(1,23),new k(37,24)),new Q(30,new k(19,15),new k(26,16))),new be(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new k(5,115),new k(10,116)),new Q(28,new k(19,47),new k(10,48)),new Q(30,new k(15,24),new k(25,25)),new Q(30,new k(23,15),new k(25,16))),new be(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new k(13,115),new k(3,116)),new Q(28,new k(2,46),new k(29,47)),new Q(30,new k(42,24),new k(1,25)),new Q(30,new k(23,15),new k(28,16))),new be(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new k(17,115)),new Q(28,new k(10,46),new k(23,47)),new Q(30,new k(10,24),new k(35,25)),new Q(30,new k(19,15),new k(35,16))),new be(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new k(17,115),new k(1,116)),new Q(28,new k(14,46),new k(21,47)),new Q(30,new k(29,24),new k(19,25)),new Q(30,new k(11,15),new k(46,16))),new be(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new k(13,115),new k(6,116)),new Q(28,new k(14,46),new k(23,47)),new Q(30,new k(44,24),new k(7,25)),new Q(30,new k(59,16),new k(1,17))),new be(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new k(12,121),new k(7,122)),new Q(28,new k(12,47),new k(26,48)),new Q(30,new k(39,24),new k(14,25)),new Q(30,new k(22,15),new k(41,16))),new be(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new k(6,121),new k(14,122)),new Q(28,new k(6,47),new k(34,48)),new Q(30,new k(46,24),new k(10,25)),new Q(30,new k(2,15),new k(64,16))),new be(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new k(17,122),new k(4,123)),new Q(28,new k(29,46),new k(14,47)),new Q(30,new k(49,24),new k(10,25)),new Q(30,new k(24,15),new k(46,16))),new be(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new k(4,122),new k(18,123)),new Q(28,new k(13,46),new k(32,47)),new Q(30,new k(48,24),new k(14,25)),new Q(30,new k(42,15),new k(32,16))),new be(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new k(20,117),new k(4,118)),new Q(28,new k(40,47),new k(7,48)),new Q(30,new k(43,24),new k(22,25)),new Q(30,new k(10,15),new k(67,16))),new be(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new k(19,118),new k(6,119)),new Q(28,new k(18,47),new k(31,48)),new Q(30,new k(34,24),new k(34,25)),new Q(30,new k(20,15),new k(61,16)))];var Wt;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class zn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let c=0;c<s;c++)this.isMasked(o,c)&&r.flip(c,o)}}zn.values=new Map([[Wt.DATA_MASK_000,new zn(Wt.DATA_MASK_000,(A,r)=>(A+r&1)===0)],[Wt.DATA_MASK_001,new zn(Wt.DATA_MASK_001,(A,r)=>(A&1)===0)],[Wt.DATA_MASK_010,new zn(Wt.DATA_MASK_010,(A,r)=>r%3===0)],[Wt.DATA_MASK_011,new zn(Wt.DATA_MASK_011,(A,r)=>(A+r)%3===0)],[Wt.DATA_MASK_100,new zn(Wt.DATA_MASK_100,(A,r)=>(Math.floor(A/2)+Math.floor(r/3)&1)===0)],[Wt.DATA_MASK_101,new zn(Wt.DATA_MASK_101,(A,r)=>A*r%6===0)],[Wt.DATA_MASK_110,new zn(Wt.DATA_MASK_110,(A,r)=>A*r%6<3)],[Wt.DATA_MASK_111,new zn(Wt.DATA_MASK_111,(A,r)=>(A+r+A*r%3&1)===0)]]);class tw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new B;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let o=0;const c=s-7;for(let u=s-1;u>=c;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=nn.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return be.getVersionForNumber(s);let o=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)o=this.copyBit(h,d,o);let u=be.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)o=this.copyBit(d,h,o);if(u=be.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new B}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=zn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let x=0,w=0,v=0;for(let T=c-1;T>0;T-=2){T===6&&T--;for(let M=0;M<c;M++){const L=d?c-1-M:M;for(let U=0;U<2;U++)u.get(T-U,L)||(v++,w<<=1,this.bitMatrix.get(T-U,L)&&(w|=1),v===8&&(h[x++]=w,v=0,w=0))}d=!d}if(x!==s.getTotalCodewords())throw new B;return h}remask(){if(this.parsedFormatInfo===null)return;const r=zn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class Xc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new E;const c=s.getECBlocksForLevel(o);let u=0;const d=c.getECBlocks();for(const U of d)u+=U.getCount();const h=new Array(u);let x=0;for(const U of d)for(let z=0;z<U.getCount();z++){const X=U.getDataCodewords(),$=c.getECCodewordsPerBlock()+X;h[x++]=new Xc(X,new Uint8Array($))}const w=h[0].codewords.length;let v=h.length-1;for(;v>=0&&h[v].codewords.length!==w;)v--;v++;const T=w-c.getECCodewordsPerBlock();let M=0;for(let U=0;U<T;U++)for(let z=0;z<x;z++)h[z].codewords[U]=r[M++];for(let U=v;U<x;U++)h[U].codewords[T]=r[M++];const L=h[0].codewords.length;for(let U=T;U<L;U++)for(let z=0;z<x;z++){const X=z<v?U:U+1;h[z].codewords[X]=r[M++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Hn;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(Hn||(Hn={}));class Me{constructor(r,s,o,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=c,Me.FOR_BITS.set(c,this),Me.FOR_VALUE.set(r,this)}static forBits(r){const s=Me.FOR_BITS.get(r);if(s===void 0)throw new E;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Me))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Me.FOR_BITS=new Map,Me.FOR_VALUE=new Map,Me.TERMINATOR=new Me(Hn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Me.NUMERIC=new Me(Hn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Me.ALPHANUMERIC=new Me(Hn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Me.STRUCTURED_APPEND=new Me(Hn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Me.BYTE=new Me(Hn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Me.ECI=new Me(Hn.ECI,"ECI",Int32Array.from([0,0,0]),7),Me.KANJI=new Me(Hn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Me.FNC1_FIRST_POSITION=new Me(Hn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Me.FNC1_SECOND_POSITION=new Me(Hn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Me.HANZI=new Me(Hn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ct{static decode(r,s,o,c){const u=new Yc(r);let d=new Ee;const h=new Array;let x=-1,w=-1;try{let v=null,T=!1,M;do{if(u.available()<4)M=Me.TERMINATOR;else{const L=u.readBits(4);M=Me.forBits(L)}switch(M){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:T=!0;break;case Me.STRUCTURED_APPEND:if(u.available()<16)throw new B;x=u.readBits(8),w=u.readBits(8);break;case Me.ECI:const L=Ct.parseECIValue(u);if(v=G.getCharacterSetECIByValue(L),v===null)throw new B;break;case Me.HANZI:const U=u.readBits(4),z=u.readBits(M.getCharacterCountBits(s));U===Ct.GB2312_SUBSET&&Ct.decodeHanziSegment(u,d,z);break;default:const X=u.readBits(M.getCharacterCountBits(s));switch(M){case Me.NUMERIC:Ct.decodeNumericSegment(u,d,X);break;case Me.ALPHANUMERIC:Ct.decodeAlphanumericSegment(u,d,X,T);break;case Me.BYTE:Ct.decodeByteSegment(u,d,X,v,h,c);break;case Me.KANJI:Ct.decodeKanjiSegment(u,d,X);break;default:throw new B}break}}while(M!==Me.TERMINATOR)}catch{throw new B}return new Ot(r,d.toString(),h.length===0?null:h,o===null?null:o.toString(),x,w)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new B;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,o--}try{s.append(ge.decode(c,ue.GB2312))}catch(d){throw new B(d)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new B;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,o--}try{s.append(ge.decode(c,ue.SHIFT_JIS))}catch(d){throw new B(d)}}static decodeByteSegment(r,s,o,c,u,d){if(8*o>r.available())throw new B;const h=new Uint8Array(o);for(let w=0;w<o;w++)h[w]=r.readBits(8);let x;c===null?x=ue.guessEncoding(h,d):x=c.getName();try{s.append(ge.decode(h,x))}catch(w){throw new B(w)}u.push(h)}static toAlphaNumericChar(r){if(r>=Ct.ALPHANUMERIC_CHARS.length)throw new B;return Ct.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,c){const u=s.length();for(;o>1;){if(r.available()<11)throw new B;const d=r.readBits(11);s.append(Ct.toAlphaNumericChar(Math.floor(d/45))),s.append(Ct.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(r.available()<6)throw new B;s.append(Ct.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,String.fromCharCode(29)))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new B;const c=r.readBits(10);if(c>=1e3)throw new B;s.append(Ct.toAlphaNumericChar(Math.floor(c/100))),s.append(Ct.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(Ct.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(r.available()<7)throw new B;const c=r.readBits(7);if(c>=100)throw new B;s.append(Ct.toAlphaNumericChar(Math.floor(c/10))),s.append(Ct.toAlphaNumericChar(c%10))}else if(o===1){if(r.available()<4)throw new B;const c=r.readBits(4);if(c>=10)throw new B;s.append(Ct.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new B}}Ct.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ct.GB2312_SUBSET=1;class c0{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class nw{constructor(){this.rsDecoder=new _e(K.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ne.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new tw(r);let c=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){c=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new c0(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const o=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=Xc.getDataBlocks(u,o,c);let h=0;for(const v of d)h+=v.getNumDataCodewords();const x=new Uint8Array(h);let w=0;for(const v of d){const T=v.getCodewords(),M=v.getNumDataCodewords();this.correctErrors(T,M);for(let L=0;L<M;L++)x[w++]=T[L]}return Ct.decode(x,o,c,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class Qc extends me{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+o)/2;return new Qc(c,u,d)}}class Ba{constructor(r,s,o,c,u,d,h){this.image=r,this.startX=s,this.startY=o,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,c=r+o,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let x=0;x<s;x++){const w=u+(x&1?-Math.floor((x+1)/2):Math.floor((x+1)/2));d[0]=0,d[1]=0,d[2]=0;let v=r;for(;v<c&&!h.get(v,w);)v++;let T=0;for(;v<c;){if(h.get(v,w))if(T===1)d[1]++;else if(T===2){if(this.foundPatternCross(d)){const M=this.handlePossibleCenter(d,w,v);if(M!==null)return M}d[0]=d[2],d[1]=1,d[2]=0,T=1}else d[++T]++;else T===1&&T++,d[T]++;v++}if(this.foundPatternCross(d)){const M=this.handlePossibleCenter(d,w,c);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=o)return!1;return!0}crossCheckVertical(r,s,o,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let x=r;for(;x>=0&&u.get(s,x)&&h[1]<=o;)h[1]++,x--;if(x<0||h[1]>o)return NaN;for(;x>=0&&!u.get(s,x)&&h[0]<=o;)h[0]++,x--;if(h[0]>o)return NaN;for(x=r+1;x<d&&u.get(s,x)&&h[1]<=o;)h[1]++,x++;if(x===d||h[1]>o)return NaN;for(;x<d&&!u.get(s,x)&&h[2]<=o;)h[2]++,x++;if(h[2]>o)return NaN;const w=h[0]+h[1]+h[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(h)?Ba.centerFromEnd(h,x):NaN}handlePossibleCenter(r,s,o){const c=r[0]+r[1]+r[2],u=Ba.centerFromEnd(r,o),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(h,d,u))return w.combineEstimate(d,u,h);const x=new Qc(u,d,h);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Kc extends me{constructor(r,s,o,c){super(r,s),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+o)/c;return new Kc(u,d,h,c)}}class rw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Gt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(W.TRY_HARDER)!==void 0,o=r!=null&&r.get(W.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*Gt.MAX_MODULES));(h<Gt.MIN_SKIP||s)&&(h=Gt.MIN_SKIP);let x=!1;const w=new Int32Array(5);for(let T=h-1;T<u&&!x;T+=h){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let M=0;for(let L=0;L<d;L++)if(c.get(L,T))(M&1)===1&&M++,w[M]++;else if(M&1)w[M]++;else if(M===4)if(Gt.foundPatternCross(w)){if(this.handlePossibleCenter(w,T,L,o)===!0)if(h=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>w[2]&&(T+=z-w[2]-h,L=d-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,M=3;continue}M=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,M=3;else w[++M]++;Gt.foundPatternCross(w)&&this.handlePossibleCenter(w,T,d,o)===!0&&(h=w[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return me.orderBestPatterns(v),new rw(v)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const o=s/7,c=o/2;return Math.abs(o-r[0])<c&&Math.abs(o-r[1])<c&&Math.abs(3*o-r[2])<3*c&&Math.abs(o-r[3])<c&&Math.abs(o-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=o;)u[1]++,d++;if(r<d||s<d||u[1]>o)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=o;)u[0]++,d++;if(u[0]>o)return!1;const x=h.getHeight(),w=h.getWidth();for(d=1;r+d<x&&s+d<w&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=x||s+d>=w)return!1;for(;r+d<x&&s+d<w&&!h.get(s+d,r+d)&&u[3]<o;)u[3]++,d++;if(r+d>=x||s+d>=w||u[3]>=o)return!1;for(;r+d<x&&s+d<w&&h.get(s+d,r+d)&&u[4]<o;)u[4]++,d++;if(u[4]>=o)return!1;const v=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(v-c)<2*c&&Gt.foundPatternCross(u)}crossCheckVertical(r,s,o,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let x=r;for(;x>=0&&u.get(s,x);)h[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(s,x)&&h[1]<=o;)h[1]++,x--;if(x<0||h[1]>o)return NaN;for(;x>=0&&u.get(s,x)&&h[0]<=o;)h[0]++,x--;if(h[0]>o)return NaN;for(x=r+1;x<d&&u.get(s,x);)h[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(s,x)&&h[3]<o;)h[3]++,x++;if(x===d||h[3]>=o)return NaN;for(;x<d&&u.get(s,x)&&h[4]<o;)h[4]++,x++;if(h[4]>=o)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=2*c?NaN:Gt.foundPatternCross(h)?Gt.centerFromEnd(h,x):NaN}crossCheckHorizontal(r,s,o,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let x=r;for(;x>=0&&u.get(x,s);)h[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(x,s)&&h[1]<=o;)h[1]++,x--;if(x<0||h[1]>o)return NaN;for(;x>=0&&u.get(x,s)&&h[0]<=o;)h[0]++,x--;if(h[0]>o)return NaN;for(x=r+1;x<d&&u.get(x,s);)h[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(x,s)&&h[3]<o;)h[3]++,x++;if(x===d||h[3]>=o)return NaN;for(;x<d&&u.get(x,s)&&h[4]<o;)h[4]++,x++;if(h[4]>=o)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=c?NaN:Gt.foundPatternCross(h)?Gt.centerFromEnd(h,x):NaN}handlePossibleCenter(r,s,o,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Gt.centerFromEnd(r,o),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const x=u/7;let w=!1;const v=this.possibleCenters;for(let T=0,M=v.length;T<M;T++){const L=v[T];if(L.aboutEquals(x,h,d)){v[T]=L.combineEstimate(h,d,x),w=!0;break}}if(!w){const T=new Kc(d,h,x);v.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Gt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Gt.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/o;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new V;const s=this.possibleCenters;let o;if(r>3){let c=0,u=0;for(const x of this.possibleCenters){const w=x.getEstimatedModuleSize();c+=w,u+=w*w}o=c/r;let d=Math.sqrt(u/r-o*o);s.sort((x,w)=>{const v=Math.abs(w.getEstimatedModuleSize()-o),T=Math.abs(x.getEstimatedModuleSize()-o);return v<T?-1:v>T?1:0});const h=Math.max(.2*o,d);for(let x=0;x<s.length&&s.length>3;x++){const w=s[x];Math.abs(w.getEstimatedModuleSize()-o)>h&&(s.splice(x,1),x--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();o=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-o),x=Math.abs(u.getEstimatedModuleSize()-o);return h<x?1:h>x?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Gt.CENTER_QUORUM=2,Gt.MIN_SKIP=3,Gt.MAX_MODULES=57;class co{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(W.NEED_RESULT_POINT_CALLBACK);const o=new Gt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,o,c);if(u<1)throw new V("No pattern found in proccess finder.");const d=co.computeDimension(s,o,c,u),h=be.getProvisionalVersionForDimension(d),x=h.getDimensionForVersion()-7;let w=null;if(h.getAlignmentPatternCenters().length>0){const L=o.getX()-s.getX()+c.getX(),U=o.getY()-s.getY()+c.getY(),z=1-3/x,X=Math.floor(s.getX()+z*(L-s.getX())),$=Math.floor(s.getY()+z*(U-s.getY()));for(let ce=4;ce<=16;ce<<=1)try{w=this.findAlignmentInRegion(u,X,$,ce);break}catch(de){if(!(de instanceof V))throw de}}const v=co.createTransform(s,o,c,w,d),T=co.sampleGrid(this.image,v,d);let M;return w===null?M=[c,s,o]:M=[c,s,o,w],new tn(T,M)}static createTransform(r,s,o,c,u){const d=u-3.5;let h,x,w,v;return c!==null?(h=c.getX(),x=c.getY(),w=d-3,v=w):(h=s.getX()-r.getX()+o.getX(),x=s.getY()-r.getY()+o.getY(),w=d,v=d),wt.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,w,v,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,x,o.getX(),o.getY())}static sampleGrid(r,s,o){return xe.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,c){const u=ze.round(me.distance(r,s)/c),d=ze.round(me.distance(r,o)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new V("Dimensions could be not found.")}return h}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,o,c),d=1,h=r-(o-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let x=Math.floor(s-(c-s)*d);return d=1,x<0?(d=s/(s-x),x=0):x>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,x),u-1}sizeOfBlackWhiteBlackRun(r,s,o,c){const u=Math.abs(c-s)>Math.abs(o-r);if(u){let L=r;r=s,s=L,L=o,o=c,c=L}const d=Math.abs(o-r),h=Math.abs(c-s);let x=-d/2;const w=r<o?1:-1,v=s<c?1:-1;let T=0;const M=o+w;for(let L=r,U=s;L!==M;L+=w){const z=u?U:L,X=u?L:U;if(T===1===this.image.get(z,X)){if(T===2)return ze.distance(L,U,r,s);T++}if(x+=h,x>0){if(U===c)break;U+=v,x-=d}}return T===2?ze.distance(o+w,c,r,s):NaN}findAlignmentInRegion(r,s,o,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new V("Alignment top exceeds estimated module size.");const x=Math.max(0,o-u),w=Math.min(this.image.getHeight()-1,o+u);if(w-x<r*3)throw new V("Alignment bottom exceeds estimated module size.");return new Ba(this.image,d,x,h-d,w-x,r,this.resultPointCallback).find()}}class Jr{constructor(){this.decoder=new nw}getDecoder(){return this.decoder}decode(r,s){let o,c;if(s!=null&&s.get(W.PURE_BARCODE)!==void 0){const x=Jr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(x,s),c=Jr.NO_POINTS}else{const x=new co(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(x.getBits(),s),c=x.getPoints()}o.getOther()instanceof c0&&o.getOther().applyMirroredCorrection(c);const u=new Ze(o.getText(),o.getRawBytes(),void 0,c,fe.QR_CODE,void 0),d=o.getByteSegments();d!==null&&u.putMetadata(st.BYTE_SEGMENTS,d);const h=o.getECLevel();return h!==null&&u.putMetadata(st.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(u.putMetadata(st.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(st.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new V;const c=this.moduleSize(s,r);let u=s[1],d=o[1],h=s[0],x=o[0];if(h>=x||u>=d)throw new V;if(d-u!==x-h&&(x=h+(d-u),x>=r.getWidth()))throw new V;const w=Math.round((x-h+1)/c),v=Math.round((d-u+1)/c);if(w<=0||v<=0)throw new V;if(v!==w)throw new V;const T=Math.floor(c/2);u+=T,h+=T;const M=h+Math.floor((w-1)*c)-x;if(M>0){if(M>T)throw new V;h-=M}const L=u+Math.floor((v-1)*c)-d;if(L>0){if(L>T)throw new V;u-=L}const U=new Ne(w,v);for(let z=0;z<v;z++){const X=u+Math.floor(z*c);for(let $=0;$<w;$++)r.get(h+Math.floor($*c),X)&&U.set($,z)}return U}static moduleSize(r,s){const o=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,x=0;for(;u<c&&d<o;){if(h!==s.get(u,d)){if(++x===5)break;h=!h}u++,d++}if(u===c||d===o)throw new V;return(u-r[0])/7}}Jr.NO_POINTS=new Array;class Le{PDF417Common(){}static getBitCountSum(r){return ze.sum(r)}static toIntArray(r){if(r==null||!r.length)return Le.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const c of r)s[o++]=c;return s}static getCodeword(r){const s=b.binarySearch(Le.SYMBOL_TABLE,r&262143);return s<0?-1:(Le.CODEWORD_TABLE[s]-1)%Le.NUMBER_OF_CODEWORDS}}Le.NUMBER_OF_CODEWORDS=929,Le.MAX_CODEWORDS_IN_BARCODE=Le.NUMBER_OF_CODEWORDS-1,Le.MIN_ROWS_IN_BARCODE=3,Le.MAX_ROWS_IN_BARCODE=90,Le.MODULES_IN_CODEWORD=17,Le.MODULES_IN_STOP_PATTERN=18,Le.BARS_IN_MODULE=8,Le.EMPTY_INT_ARRAY=new Int32Array([]),Le.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Le.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class iw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(r,s,o){let c=r.getBlackMatrix(),u=We.detect(o,c);return u.length||(c=c.clone(),c.rotate180(),u=We.detect(o,c)),new iw(c,u)}static detect(r,s){const o=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=We.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const x of o)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=We.ROW_STEP;continue}if(d=!0,o.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return o}static findVertices(r,s,o){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return We.copyToResult(d,We.findRowsWithPattern(r,c,u,s,o,We.START_PATTERN),We.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),We.copyToResult(d,We.findRowsWithPattern(r,c,u,s,o,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,o){for(let c=0;c<o.length;c++)r[o[c]]=s[c]}static findRowsWithPattern(r,s,o,c,u,d){const h=new Array(4);let x=!1;const w=new Int32Array(d.length);for(;c<s;c+=We.ROW_STEP){let T=We.findGuardPattern(r,u,c,o,!1,d,w);if(T!=null){for(;c>0;){const M=We.findGuardPattern(r,u,--c,o,!1,d,w);if(M!=null)T=M;else{c++;break}}h[0]=new me(T[0],c),h[1]=new me(T[1],c),x=!0;break}}let v=c+1;if(x){let T=0,M=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;v<s;v++){const L=We.findGuardPattern(r,M[0],v,o,!1,d,w);if(L!=null&&Math.abs(M[0]-L[0])<We.MAX_PATTERN_DRIFT&&Math.abs(M[1]-L[1])<We.MAX_PATTERN_DRIFT)M=L,T=0;else{if(T>We.SKIPPED_ROW_COUNT_MAX)break;T++}}v-=T+1,h[2]=new me(M[0],v),h[3]=new me(M[1],v)}return v-c<We.BARCODE_MIN_HEIGHT&&b.fill(h,null),h}static findGuardPattern(r,s,o,c,u,d,h){b.fillWithin(h,0,h.length,0);let x=s,w=0;for(;r.get(x,o)&&x>0&&w++<We.MAX_PIXEL_DRIFT;)x--;let v=x,T=0,M=d.length;for(let L=u;v<c;v++)if(r.get(v,o)!==L)h[T]++;else{if(T===M-1){if(We.patternMatchVariance(h,d,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([x,v]);x+=h[0]+h[1],_.arraycopy(h,2,h,0,T-1),h[T-1]=0,h[T]=0,T--}else T++;h[T]=1,L=!L}return T===M-1&&We.patternMatchVariance(h,d,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([x,v-1]):null}static patternMatchVariance(r,s,o){let c=r.length,u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return 1/0;let h=u/d;o*=h;let x=0;for(let w=0;w<c;w++){let v=r[w],T=s[w]*h,M=v>T?v-T:T-v;if(M>o)return 1/0;x+=M}return x/u}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class Qt{constructor(r,s){if(s.length===0)throw new E;this.field=r;let o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),_.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let d=s;s=o,o=d}let c=new Int32Array(o.length),u=o.length-s.length;_.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=this.field.add(s[d-u],o[d]);return new Qt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Qt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Qt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1);for(let h=0;h<o;h++){let x=s[h];for(let w=0;w<u;w++)d[h+w]=this.field.add(d[h+w],this.field.multiply(x,c[w]))}return new Qt(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new Qt(this.field,s)}multiplyScalar(r){if(r===0)return new Qt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.multiply(this.coefficients[c],r);return new Qt(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return new Qt(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+r);for(let u=0;u<o;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Qt(this.field,c)}toString(){let r=new Ee;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class sw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}inverse(r){if(r===0)throw new Ye;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Zc extends sw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let c=0;c<r;c++)this.expTable[c]=o,o=o*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Qt(this,new Int32Array([0])),this.one=new Qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new Qt(this,o)}}Zc.PDF417_GF=new Zc(Le.NUMBER_OF_CODEWORDS,3);class u0{constructor(){this.field=Zc.PDF417_GF}decode(r,s,o){let c=new Qt(this.field,r),u=new Int32Array(s),d=!1;for(let U=s;U>0;U--){let z=c.evaluateAt(this.field.exp(U));u[s-U]=z,z!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(o!=null)for(const U of o){let z=this.field.exp(r.length-1-U),X=new Qt(this.field,new Int32Array([this.field.subtract(0,z),1]));h=h.multiply(X)}let x=new Qt(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),v=w[0],T=w[1],M=this.findErrorLocations(v),L=this.findErrorMagnitudes(T,v,M);for(let U=0;U<M.length;U++){let z=r.length-1-this.field.log(M[U]);if(z<0)throw R.getChecksumInstance();r[z]=this.field.subtract(r[z],L[U])}return M.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let M=r;r=s,s=M}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let M=c,L=d;if(c=u,d=h,c.isZero())throw R.getChecksumInstance();u=M;let U=this.field.getZero(),z=c.getCoefficient(c.getDegree()),X=this.field.inverse(z);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let $=u.getDegree()-c.getDegree(),ce=this.field.multiply(u.getCoefficient(u.getDegree()),X);U=U.add(this.field.buildMonomial($,ce)),u=u.subtract(c.multiplyByMonomial($,ce))}h=U.multiply(d).subtract(L).negative()}let x=h.getCoefficient(0);if(x===0)throw R.getChecksumInstance();let w=this.field.inverse(x),v=h.multiply(w),T=u.multiply(w);return[v,T]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(o[c]=this.field.inverse(u),c++);if(c!==s)throw R.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let d=new Qt(this.field,u),h=o.length,x=new Int32Array(h);for(let w=0;w<h;w++){let v=this.field.inverse(o[w]),T=this.field.subtract(0,r.evaluateAt(v)),M=this.field.inverse(d.evaluateAt(v));x[w]=this.field.multiply(T,M)}return x}}class Oi{constructor(r,s,o,c,u){r instanceof Oi?this.constructor_2(r):this.constructor_1(r,s,o,c,u)}constructor_1(r,s,o,c,u){const d=s==null||o==null,h=c==null||u==null;if(d&&h)throw new V;d?(s=new me(0,c.getY()),o=new me(0,u.getY())):h&&(c=new me(r.getWidth()-1,s.getY()),u=new me(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Oi(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let x=o?this.topLeft:this.topRight,w=Math.trunc(x.getY()-r);w<0&&(w=0);let v=new me(x.getX(),w);o?c=v:d=v}if(s>0){let x=o?this.bottomLeft:this.bottomRight,w=Math.trunc(x.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let v=new me(x.getX(),w);o?u=v:h=v}return new Oi(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ow{constructor(r,s,o,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class uo{constructor(){this.buffer=""}static form(r,s){let o=-1;function c(d,h,x,w,v,T){if(d==="%%")return"%";if(s[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let M=v?parseInt(v.substr(1)):void 0,L;switch(T){case"s":L=s[o];break;case"c":L=s[o][0];break;case"f":L=parseFloat(s[o]).toFixed(d);break;case"p":L=parseFloat(s[o]).toPrecision(d);break;case"e":L=parseFloat(s[o]).toExponential(d);break;case"x":L=parseInt(s[o]).toString(M||16);break;case"d":L=parseFloat(parseInt(s[o],M||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(M);let U=parseInt(x),z=x&&x[0]+""=="0"?"0":" ";for(;L.length<U;)L=h!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=uo.form(r,s)}toString(){return this.buffer}}class fo{constructor(r){this.boundingBox=new Oi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<fo.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(r)-o;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+o,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new uo;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}fo.MAX_NEARBY_DISTANCE=5;class ho{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,c]of this.values.entries()){const u={getKey:()=>o,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return Le.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class d0 extends fo{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=-1,w=1,v=0;for(let T=d;T<h;T++){if(s[T]==null)continue;let M=s[T],L=M.getRowNumber()-x;if(L===0)v++;else if(L===1)w=Math.max(w,v),v=1,x=M.getRowNumber();else if(L<0||M.getRowNumber()>=r.getRowCount()||L>T)s[T]=null;else{let U;w>2?U=(w-2)*L:U=L;let z=U>=T;for(let X=1;X<=U&&!z;X++)z=s[T-X]!=null;z?s[T]=null:(x=M.getRowNumber(),v=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),x=-1;for(let w=u;w<d;w++){if(h[w]==null)continue;let v=h[w];v.setRowNumberAsRowIndicatorColumn();let T=v.getRowNumber()-x;T===0||(T===1?x=v.getRowNumber():v.getRowNumber()>=r.getRowCount()?h[w]=null:x=v.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new ho,o=new ho,c=new ho,u=new ho;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let x=h.getValue()%30,w=h.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(x*3+1);break;case 1:u.setValue(x/3),c.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<Le.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>Le.MAX_ROWS_IN_BARCODE)return null;let d=new ow(s.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let c=r[o];if(r[o]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class go{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Le.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=go.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=go.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let c=o[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=o[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=o[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let x of h)if(go.adjustRowNumber(c,x))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new uo;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[o];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class po{constructor(r,s,o,c){this.rowNumber=po.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==po.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}po.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let r=0;r<Le.SYMBOL_TABLE.length;r++){let s=Le.SYMBOL_TABLE[r],o=s&1;for(let c=0;c<Le.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===o;)u+=1,s>>=1;o=s&1,wn.RATIOS_TABLE[r]||(wn.RATIOS_TABLE[r]=new Array(Le.BARS_IN_MODULE)),wn.RATIOS_TABLE[r][Le.BARS_IN_MODULE-c-1]=Math.fround(u/Le.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=wn.getDecodedCodewordValue(wn.sampleBitCounts(r));return s!==-1?s:wn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ze.sum(r),o=new Int32Array(Le.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Le.MODULES_IN_CODEWORD;d++){let h=s/(2*Le.MODULES_IN_CODEWORD)+d*s/Le.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),o[c]++}return o}static getDecodedCodewordValue(r){let s=wn.getBitValue(r);return Le.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let c=0;c<r[o];c++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ze.sum(r),o=new Array(Le.BARS_IN_MODULE);if(s>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(r[d]/s);let c=It.MAX_VALUE,u=-1;this.bSymbolTableReady||wn.initialize();for(let d=0;d<wn.RATIOS_TABLE.length;d++){let h=0,x=wn.RATIOS_TABLE[d];for(let w=0;w<Le.BARS_IN_MODULE;w++){let v=Math.fround(x[w]-o[w]);if(h+=Math.fround(v*v),h>=c)break}h<c&&(c=h,u=Le.SYMBOL_TABLE[d])}return u}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(Le.SYMBOL_TABLE.length).map(A=>new Array(Le.BARS_IN_MODULE));class f0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class h0{static parseLong(r,s=void 0){return parseInt(r,s)}}class g0 extends p{}g0.kind="NullPointerException";class aw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new g0;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new j;if(o===0)return;for(let c=0;c<o;c++)this.write(r[s+c])}flush(){}close(){}}class lw extends p{}class cw extends aw{constructor(r=32){if(super(),this.count=0,r<0)throw new E("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new lw;o=I.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new j;this.ensureCapacity(this.count+o),_.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ot;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ot||(ot={}));function p0(){if(typeof window<"u")return window.BigInt||null;if(typeof yo<"u")return yo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ja;function ei(A){if(typeof ja>"u"&&(ja=p0()),ja===null)throw new Error("BigInt is not supported!");return ja(A)}function uw(){let A=[];A[0]=ei(1);let r=ei(900);A[1]=r;for(let s=2;s<16;s++)A[s]=A[s-1]*r;return A}class Z{static decode(r,s){let o=new Ee(""),c=G.ISO8859_1;o.enableDecoding(c);let u=1,d=r[u++],h=new f0;for(;u<r[0];){switch(d){case Z.TEXT_COMPACTION_MODE_LATCH:u=Z.textCompaction(r,u,o);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:u=Z.byteCompaction(d,r,c,u,o);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:u=Z.numericCompaction(r,u,o);break;case Z.ECI_CHARSET:G.getCharacterSetECIByValue(r[u++]);break;case Z.ECI_GENERAL_PURPOSE:u+=2;break;case Z.ECI_USER_DEFINED:u++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Z.decodeMacroBlock(r,u,h);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new B;default:u--,u=Z.textCompaction(r,u,o);break}if(u<r.length)d=r[u++];else throw B.getFormatInstance()}if(o.length()===0)throw B.getFormatInstance();let x=new Ot(null,o.toString(),null,s);return x.setOther(h),x}static decodeMacroBlock(r,s,o){if(s+Z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw B.getFormatInstance();let c=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<Z.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];o.setSegmentIndex(I.parseInt(Z.decodeBase900toBase10(c,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ee;s=Z.textCompaction(r,s,u),o.setFileId(u.toString());let d=-1;for(r[s]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Ee;s=Z.textCompaction(r,s+1,h),o.setFileName(h.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new Ee;s=Z.textCompaction(r,s+1,x),o.setSender(x.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new Ee;s=Z.textCompaction(r,s+1,w),o.setAddressee(w.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new Ee;s=Z.numericCompaction(r,s+1,v),o.setSegmentCount(I.parseInt(v.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new Ee;s=Z.numericCompaction(r,s+1,T),o.setTimestamp(h0.parseLong(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new Ee;s=Z.numericCompaction(r,s+1,M),o.setChecksum(I.parseInt(M.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new Ee;s=Z.numericCompaction(r,s+1,L),o.setFileSize(h0.parseLong(L.toString()));break;default:throw B.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(d!==-1){let h=s-d;o.isLastSegment()&&h--,o.setOptionalData(b.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,o){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let x=r[s++];if(x<Z.TEXT_COMPACTION_MODE_LATCH)c[d]=x/30,c[d+1]=x%30,d+=2;else switch(x){case Z.TEXT_COMPACTION_MODE_LATCH:c[d++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=r[s++],u[d]=x,d++;break}}return Z.decodeTextCompaction(c,u,d,o),s}static decodeTextCompaction(r,s,o,c){let u=ot.ALPHA,d=ot.ALPHA,h=0;for(;h<o;){let x=r[h],w="";switch(u){case ot.ALPHA:if(x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case Z.LL:u=ot.LOWER;break;case Z.ML:u=ot.MIXED;break;case Z.PS:d=u,u=ot.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.LOWER:if(x<26)w=String.fromCharCode(97+x);else switch(x){case 26:w=" ";break;case Z.AS:d=u,u=ot.ALPHA_SHIFT;break;case Z.ML:u=ot.MIXED;break;case Z.PS:d=u,u=ot.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.MIXED:if(x<Z.PL)w=Z.MIXED_CHARS[x];else switch(x){case Z.PL:u=ot.PUNCT;break;case 26:w=" ";break;case Z.LL:u=ot.LOWER;break;case Z.AL:u=ot.ALPHA;break;case Z.PS:d=u,u=ot.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT:if(x<Z.PAL)w=Z.PUNCT_CHARS[x];else switch(x){case Z.PAL:u=ot.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.ALPHA_SHIFT:if(u=d,x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT_SHIFT:if(u=d,x<Z.PAL)w=Z.PUNCT_CHARS[x];else switch(x){case Z.PAL:u=ot.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break}w!==""&&c.append(w),h++}}static byteCompaction(r,s,o,c,u){let d=new cw,h=0,x=0,w=!1;switch(r){case Z.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),T=s[c++];for(;c<s[0]&&!w;)switch(v[h++]=T,x=900*x+T,T=s[c++],T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(h%5===0&&h>0){for(let M=0;M<6;++M)d.write(Number(ei(x)>>ei(8*(5-M))));x=0,h=0}break}c===s[0]&&T<Z.TEXT_COMPACTION_MODE_LATCH&&(v[h++]=T);for(let M=0;M<h;M++)d.write(v[M]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let M=s[c++];if(M<Z.TEXT_COMPACTION_MODE_LATCH)h++,x=900*x+M;else switch(M){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(h%5===0&&h>0){for(let L=0;L<6;++L)d.write(Number(ei(x)>>ei(8*(5-L))));x=0,h=0}}break}return u.append(ge.decode(d.toByteArray(),o)),c}static numericCompaction(r,s,o){let c=0,u=!1,d=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<Z.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%Z.MAX_NUMERIC_CODEWORDS===0||h===Z.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(o.append(Z.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let o=ei(0);for(let u=0;u<s;u++)o+=Z.EXP900[s-u-1]*ei(r[u]);let c=o.toString();if(c.charAt(0)!=="1")throw new B;return c.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=p0()?uw():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ge{constructor(){}static decode(r,s,o,c,u,d,h){let x=new Oi(r,s,o,c,u),w=null,v=null,T;for(let U=!0;;U=!1){if(s!=null&&(w=Ge.getRowIndicatorColumn(r,x,s,!0,d,h)),c!=null&&(v=Ge.getRowIndicatorColumn(r,x,c,!1,d,h)),T=Ge.merge(w,v),T==null)throw V.getNotFoundInstance();let z=T.getBoundingBox();if(U&&z!=null&&(z.getMinY()<x.getMinY()||z.getMaxY()>x.getMaxY()))x=z;else break}T.setBoundingBox(x);let M=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,w),T.setDetectionResultColumn(M,v);let L=w!=null;for(let U=1;U<=M;U++){let z=L?U:M-U;if(T.getDetectionResultColumn(z)!==void 0)continue;let X;z===0||z===M?X=new d0(x,z===0):X=new fo(x),T.setDetectionResultColumn(z,X);let $=-1,ce=$;for(let de=x.getMinY();de<=x.getMaxY();de++){if($=Ge.getStartColumn(T,z,de,L),$<0||$>x.getMaxX()){if(ce===-1)continue;$=ce}let re=Ge.detectCodeword(r,x.getMinX(),x.getMaxX(),L,$,de,d,h);re!=null&&(X.setCodeword(de,re),ce=$,d=Math.min(d,re.getWidth()),h=Math.max(h,re.getWidth()))}}return Ge.createDecoderResult(T)}static merge(r,s){if(r==null&&s==null)return null;let o=Ge.getBarcodeMetadata(r,s);if(o==null)return null;let c=Oi.merge(Ge.adjustBoundingBox(r),Ge.adjustBoundingBox(s));return new go(o,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=Ge.getMax(s),c=0;for(let h of s)if(c+=o-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=o-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,c,u,d){let h=new d0(s,c);for(let x=0;x<2;x++){let w=x===0?1:-1,v=Math.trunc(Math.trunc(o.getX()));for(let T=Math.trunc(Math.trunc(o.getY()));T<=s.getMaxY()&&T>=s.getMinY();T+=w){let M=Ge.detectCodeword(r,0,r.getWidth(),c,v,T,u,d);M!=null&&(h.setCodeword(T,M),c?v=M.getStartX():v=M.getEndX())}}return h}static adjustCodewordCount(r,s){let o=s[0][1],c=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ge.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Le.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();o.setValue(u)}else c[0]!==u&&o.setValue(u)}static createDecoderResult(r){let s=Ge.createBarcodeMatrix(r);Ge.adjustCodewordCount(r,s);let o=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let x=0;x<r.getBarcodeRowCount();x++)for(let w=0;w<r.getBarcodeColumnCount();w++){let v=s[x][w+1].getValue(),T=x*r.getBarcodeColumnCount()+w;v.length===0?o.push(T):v.length===1?c[T]=v[0]:(d.push(T),u.push(v))}let h=new Array(u.length);for(let x=0;x<h.length;x++)h[x]=u[x];return Ge.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Le.toIntArray(o),Le.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,o,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let x=0;x<d.length;x++)s[c[x]]=u[x][d[x]];try{return Ge.decodeCodewords(s,r,o)}catch(x){if(!(x instanceof R))throw x}if(d.length===0)throw R.getChecksumInstance();for(let x=0;x<d.length;x++)if(d[x]<u[x].length-1){d[x]++;break}else if(d[x]=0,x===d.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new ho;let o=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][o].setValue(u.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,c){let u=c?1:-1,d=null;if(Ge.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(o)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(o),d!=null)return c?d.getStartX():d.getEndX();if(Ge.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(o)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;Ge.isValidBarcodeColumn(r,s-u);){s-=u;for(let x of r.getDetectionResultColumn(s).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+u*h*(x.getEndX()-x.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,c,u,d,h,x){u=Ge.adjustCodewordStartColumn(r,s,o,c,u,d);let w=Ge.getModuleBitCount(r,s,o,c,u,d);if(w==null)return null;let v,T=ze.sum(w);if(c)v=u+T;else{for(let U=0;U<w.length/2;U++){let z=w[U];w[U]=w[w.length-1-U],w[w.length-1-U]=z}v=u,u=v-T}if(!Ge.checkCodewordSkew(T,h,x))return null;let M=wn.getDecodedValue(w),L=Le.getCodeword(M);return L===-1?null:new po(u,v,Ge.getCodewordBucketNumber(M),L)}static getModuleBitCount(r,s,o,c,u,d){let h=u,x=new Int32Array(8),w=0,v=c?1:-1,T=c;for(;(c?h<o:h>=s)&&w<x.length;)r.get(h,d)===T?(x[w]++,h+=v):(w++,T=!T);return w===x.length||h===(c?o:s)&&w===x.length-1?x:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,c,u,d){let h=u,x=c?-1:1;for(let w=0;w<2;w++){for(;(c?h>=s:h<o)&&c===r.get(h,d);){if(Math.abs(u-h)>Ge.CODEWORD_SKEW_SIZE)return u;h+=x}x=-x,c=!c}return h}static checkCodewordSkew(r,s,o){return s-Ge.CODEWORD_SKEW_SIZE<=r&&r<=o+Ge.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw B.getFormatInstance();let c=1<<s+1,u=Ge.correctErrors(r,o,c);Ge.verifyCodewordCount(r,c);let d=Z.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(o.length),d}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+Ge.MAX_ERRORS||o<0||o>Ge.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return Ge.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw B.getFormatInstance();let o=r[0];if(o>r.length)throw B.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw B.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,c=s.length-1;for(;!((r&1)!==o&&(o=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ge.getCodewordBucketNumber(Ge.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new uo;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let c=0;c<r[o].length;c++){let u=r[o][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Ge.CODEWORD_SKEW_SIZE=2,Ge.MAX_ERRORS=3,Ge.MAX_EC_CODEWORDS=512,Ge.errorCorrection=new u0;class Kt{decode(r,s=null){let o=Kt.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw V.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return Kt.decode(r,s,!0)}catch(o){throw o instanceof B||o instanceof R?V.getNotFoundInstance():o}}static decode(r,s,o){const c=new Array,u=We.detectMultiple(r,s,o);for(const d of u.getPoints()){const h=Ge.decode(u.getBits(),d[4],d[5],d[6],d[7],Kt.getMinCodewordWidth(d),Kt.getMaxCodewordWidth(d)),x=new Ze(h.getText(),h.getRawBytes(),void 0,d,fe.PDF_417);x.putMetadata(st.ERROR_CORRECTION_LEVEL,h.getECLevel());const w=h.getOther();w!=null&&x.putMetadata(st.PDF417_EXTRA_METADATA,w),c.push(x)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?I.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(r[0],r[4]),Kt.getMaxWidth(r[6],r[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(r[1],r[5]),Kt.getMaxWidth(r[7],r[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Kt.getMinWidth(r[0],r[4]),Kt.getMinWidth(r[6],r[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(r[1],r[5]),Kt.getMinWidth(r[7],r[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))}reset(){}}class Fa extends p{}Fa.kind="ReaderException";class m0{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(W.TRY_HARDER)===!0,o=i(r)?null:r.get(W.POSSIBLE_FORMATS),c=new Array;if(!i(o)){const u=o.some(d=>d===fe.UPC_A||d===fe.UPC_E||d===fe.EAN_13||d===fe.EAN_8||d===fe.CODABAR||d===fe.CODE_39||d===fe.CODE_93||d===fe.CODE_128||d===fe.ITF||d===fe.RSS_14||d===fe.RSS_EXPANDED);u&&!s&&c.push(new os(r,this.verbose)),o.includes(fe.QR_CODE)&&c.push(new Jr),o.includes(fe.DATA_MATRIX)&&c.push(new qr),o.includes(fe.AZTEC)&&c.push(new Y),o.includes(fe.PDF_417)&&c.push(new Kt),u&&s&&c.push(new os(r,this.verbose))}c.length===0&&(s||c.push(new os(r,this.verbose)),c.push(new Jr),c.push(new qr),c.push(new Y),c.push(new Kt),s&&c.push(new os(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Fa("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof Fa)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class dw extends ct{constructor(r=null,s=500){const o=new m0;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class fw extends ct{constructor(r=500){super(new Kt,r)}}class hw extends ct{constructor(r=500){super(new Jr,r)}}var $c;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})($c||($c={}));var Ut=$c;class qc{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Se(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=o.multiply(new Se(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),o=d}}return s[r]}encode(r,s){if(s===0)throw new E("No error correction bytes");const o=r.length-s;if(o<=0)throw new E("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(o);_.arraycopy(r,0,u,0,o);let d=new Se(this.field,u);d=d.multiplyByMonomial(s,1);const x=d.divide(c)[1].getCoefficients(),w=s-x.length;for(let v=0;v<w;v++)r[o+v]=0;_.arraycopy(x,0,r,o+w,x.length)}}class Nt{constructor(){}static applyMaskPenaltyRule1(r){return Nt.applyMaskPenaltyRule1Internal(r,!0)+Nt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=o[d];for(let x=0;x<c-1;x++){const w=h[x];w===h[x+1]&&w===o[d+1][x]&&w===o[d+1][x+1]&&s++}}return Nt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const x=o[d];h+6<c&&x[h]===1&&x[h+1]===0&&x[h+2]===1&&x[h+3]===1&&x[h+4]===1&&x[h+5]===0&&x[h+6]===1&&(Nt.isWhiteHorizontal(x,h-4,h)||Nt.isWhiteHorizontal(x,h+7,h+11))&&s++,d+6<u&&o[d][h]===1&&o[d+1][h]===0&&o[d+2][h]===1&&o[d+3][h]===1&&o[d+4][h]===1&&o[d+5][h]===0&&o[d+6][h]===1&&(Nt.isWhiteVertical(o,h,d-4,d)||Nt.isWhiteVertical(o,h,d+7,d+11))&&s++}return s*Nt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let c=s;c<o;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,o,c){o=Math.max(o,0),c=Math.min(c,r.length);for(let u=o;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let x=0;x<u;x++){const w=o[x];for(let v=0;v<c;v++)w[v]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*Nt.N4}static getDataMaskBit(r,s,o){let c,u;switch(r){case 0:c=o+s&1;break;case 1:c=o&1;break;case 2:c=s%3;break;case 3:c=(o+s)%3;break;case 4:c=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:u=o*s,c=(u&1)+u%3;break;case 6:u=o*s,c=(u&1)+u%3&1;break;case 7:u=o*s,c=u%3+(o+s&1)&1;break;default:throw new E("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let x=0,w=-1;for(let v=0;v<u;v++){const T=s?d[h][v]:d[v][h];T===w?x++:(x>=5&&(o+=Nt.N1+(x-5)),x=1,w=T)}x>=5&&(o+=Nt.N1+(x-5))}return o}}Nt.N1=3,Nt.N2=3,Nt.N3=40,Nt.N4=10;class Ua{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let c=0;c!==s;c++)o[c]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)b.fill(s,r)}equals(r){if(!(r instanceof Ua))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,c=this.height;o<c;++o){const u=this.bytes[o],d=s.bytes[o];for(let h=0,x=this.width;h<x;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new Ee;for(let s=0,o=this.height;s<o;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class _i{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Ee;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<_i.NUM_MASK_PATTERNS}}_i.NUM_MASK_PATTERNS=8;class at extends p{}at.kind="WriterException";class ke{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,c,u){ke.clearMatrix(u),ke.embedBasicPatterns(o,u),ke.embedTypeInfo(s,c,u),ke.maybeEmbedVersionInfo(o,u),ke.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){ke.embedPositionDetectionPatternsAndSeparators(s),ke.embedDarkDotAtLeftBottomCorner(s),ke.maybeEmbedPositionAdjustmentPatterns(r,s),ke.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const c=new P;ke.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),x=ke.TYPE_INFO_COORDINATES[u],w=x[0],v=x[1];if(o.setBoolean(w,v,h),u<8){const T=o.getWidth()-u-1,M=8;o.setBoolean(T,M,h)}else{const M=o.getHeight()-7+(u-8);o.setBoolean(8,M,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new P;ke.makeVersionInfoBits(r,o);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=o.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,o){let c=0,u=-1,d=o.getWidth()-1,h=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<o.getHeight();){for(let x=0;x<2;++x){const w=d-x;if(!ke.isEmpty(o.get(w,h)))continue;let v;c<r.getSize()?(v=r.get(c),++c):v=!1,s!==255&&Nt.getDataMaskBit(s,w,h)&&(v=!v),o.setBoolean(w,h,v)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new at("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-I.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new E("0 polynomial");const o=ke.findMSBSet(s);for(r<<=o-1;ke.findMSBSet(r)>=o;)r^=s<<ke.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!_i.isValidMaskPattern(s))throw new at("Invalid mask pattern");const c=r.getBits()<<3|s;o.appendBits(c,5);const u=ke.calculateBCHCode(c,ke.TYPE_INFO_POLY);o.appendBits(u,10);const d=new P;if(d.appendBits(ke.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new at("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=ke.calculateBCHCode(r.getVersionNumber(),ke.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new at("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;ke.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),ke.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new at;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let c=0;c<8;++c){if(!ke.isEmpty(o.get(r+c,s)))throw new at;o.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let c=0;c<7;++c){if(!ke.isEmpty(o.get(r,s+c)))throw new at;o.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let c=0;c<5;++c){const u=ke.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)o.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,o){for(let c=0;c<7;++c){const u=ke.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)o.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=ke.POSITION_DETECTION_PATTERN[0].length;ke.embedPositionDetectionPattern(0,0,r),ke.embedPositionDetectionPattern(r.getWidth()-s,0,r),ke.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;ke.embedHorizontalSeparationPattern(0,o-1,r),ke.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),ke.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const c=7;ke.embedVerticalSeparationPattern(c,0,r),ke.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),ke.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,c=ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let x=0;x!==d;x++){const w=c[x];w>=0&&ke.isEmpty(s.get(w,h))&&ke.embedPositionAdjustmentPattern(w-2,h-2,s)}}}}ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ke.VERSION_INFO_POLY=7973,ke.TYPE_INFO_POLY=1335,ke.TYPE_INFO_MASK_PATTERN=21522;class gw{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ft{constructor(){}static calculateMaskPenalty(r){return Nt.applyMaskPenaltyRule1(r)+Nt.applyMaskPenaltyRule2(r)+Nt.applyMaskPenaltyRule3(r)+Nt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let c=ft.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(Ut.CHARACTER_SET)!==void 0;u&&(c=o.get(Ut.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new P;if(d===Me.BYTE&&(u||ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const de=G.getCharacterSetECIByName(c);de!==void 0&&this.appendECI(de,h)}this.appendModeInfo(d,h);const x=new P;this.appendBytes(r,d,x,c);let w;if(o!==null&&o.get(Ut.QR_VERSION)!==void 0){const de=Number.parseInt(o.get(Ut.QR_VERSION).toString(),10);w=be.getVersionForNumber(de);const re=this.calculateBitsNeeded(d,h,x,w);if(!this.willFit(re,w,s))throw new at("Data too big for requested version")}else w=this.recommendVersion(s,d,h,x);const v=new P;v.appendBitArray(h);const T=d===Me.BYTE?x.getSizeInBytes():r.length;this.appendLengthInfo(T,w,d,v),v.appendBitArray(x);const M=w.getECBlocksForLevel(s),L=w.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(L,v);const U=this.interleaveWithECBytes(v,w.getTotalCodewords(),L,M.getNumBlocks()),z=new _i;z.setECLevel(s),z.setMode(d),z.setVersion(w);const X=w.getDimensionForVersion(),$=new Ua(X,X),ce=this.chooseMaskPattern(U,s,w,$);return z.setMaskPattern(ce),ke.buildMatrix(U,s,w,ce,$),z.setMatrix($),z}static recommendVersion(r,s,o,c){const u=this.calculateBitsNeeded(s,o,c,be.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,o,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,o,c){return s.getSize()+r.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(r){return r<ft.ALPHANUMERIC_TABLE.length?ft.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(G.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Me.KANJI;let o=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(ft.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return Me.BYTE}return c?Me.ALPHANUMERIC:o?Me.NUMERIC:Me.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=ge.encode(r,G.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,o,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<_i.NUM_MASK_PATTERNS;h++){ke.buildMatrix(r,s,o,h,c);let x=this.calculateMaskPenalty(c);x<u&&(u=x,d=h)}return d}static chooseVersion(r,s){for(let o=1;o<=40;o++){const c=be.getVersionForNumber(o);if(ft.willFit(r,c,s))return c}throw new at("Data too big")}static willFit(r,s,o){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(o).getTotalECCodewords(),h=c-d,x=(r+7)/8;return h>=x}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new at("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let d=0;d<4&&s.getSize()<o;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==o)throw new at("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,c,u,d){if(c>=o)throw new at("Block ID too large");const h=r%o,x=o-h,w=Math.floor(r/o),v=w+1,T=Math.floor(s/o),M=T+1,L=w-T,U=v-M;if(L!==U)throw new at("EC bytes mismatch");if(o!==x+h)throw new at("RS blocks mismatch");if(r!==(T+L)*x+(M+U)*h)throw new at("Total bytes mismatch");c<x?(u[0]=T,d[0]=L):(u[0]=M,d[0]=U)}static interleaveWithECBytes(r,s,o,c){if(r.getSizeInBytes()!==o)throw new at("Number of bits and data bytes does not match");let u=0,d=0,h=0;const x=new Array;for(let v=0;v<c;++v){const T=new Int32Array(1),M=new Int32Array(1);ft.getNumDataBytesAndNumECBytesForBlockID(s,o,c,v,T,M);const L=T[0],U=new Uint8Array(L);r.toBytes(8*u,U,0,L);const z=ft.generateECBytes(U,M[0]);x.push(new gw(U,z)),d=Math.max(d,L),h=Math.max(h,z.length),u+=T[0]}if(o!==u)throw new at("Data bytes does not match offset");const w=new P;for(let v=0;v<d;++v)for(const T of x){const M=T.getDataBytes();v<M.length&&w.appendBits(M[v],8)}for(let v=0;v<h;++v)for(const T of x){const M=T.getErrorCorrectionBytes();v<M.length&&w.appendBits(M[v],8)}if(s!==w.getSizeInBytes())throw new at("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const o=r.length,c=new Int32Array(o+s);for(let d=0;d<o;d++)c[d]=r[d]&255;new qc(K.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[o+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,c){const u=o.getCharacterCountBits(s);if(r>=1<<u)throw new at(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,o,c){switch(s){case Me.NUMERIC:ft.appendNumericBytes(r,o);break;case Me.ALPHANUMERIC:ft.appendAlphanumericBytes(r,o);break;case Me.BYTE:ft.append8BitBytes(r,o,c);break;case Me.KANJI:ft.appendKanjiBytes(r,o);break;default:throw new at("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ft.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=ft.getDigit(r.charAt(c));if(c+2<o){const d=ft.getDigit(r.charAt(c+1)),h=ft.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<o){const d=ft.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=ft.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new at;if(c+1<o){const d=ft.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new at;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,o){let c;try{c=ge.encode(r,o)}catch(u){throw new at(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let o;try{o=ge.encode(r,G.SJIS)}catch(u){throw new at(u)}const c=o.length;for(let u=0;u<c;u+=2){const d=o[u]&255,h=o[u+1]&255,x=d<<8&4294967295|h;let w=-1;if(x>=33088&&x<=40956?w=x-33088:x>=57408&&x<=60351&&(w=x-49472),w===-1)throw new at("Invalid byte sequence");const v=(w>>8)*192+(w&255);s.appendBits(v,13)}}static appendECI(r,s){s.appendBits(Me.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ft.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class ki{write(r,s,o,c=null){if(r.length===0)throw new E("Found empty contents");if(s<0||o<0)throw new E("Requested dimensions are too small: "+s+"x"+o);let u=ut.L,d=ki.QUIET_ZONE_SIZE;c!==null&&(c.get(Ut.ERROR_CORRECTION)!==void 0&&(u=ut.fromString(c.get(Ut.ERROR_CORRECTION).toString())),c.get(Ut.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Ut.MARGIN).toString(),10)));const h=ft.encode(r,u,c);return this.renderResult(h,s,o,d)}writeToDom(r,s,o,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,o,c,u);r&&r.appendChild(d)}renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new Fe;const d=u.getWidth(),h=u.getHeight(),x=d+c*2,w=h+c*2,v=Math.max(s,x),T=Math.max(o,w),M=Math.min(Math.floor(v/x),Math.floor(T/w)),L=Math.floor((v-d*M)/2),U=Math.floor((T-h*M)/2),z=this.createSVGElement(v,T);for(let X=0,$=U;X<h;X++,$+=M)for(let ce=0,de=L;ce<d;ce++,de+=M)if(u.get(ce,X)===1){const re=this.createSvgRectElement(de,$,M,M);z.appendChild(re)}return z}createSVGElement(r,s){const o=document.createElementNS(ki.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,c){const u=document.createElementNS(ki.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}ki.QUIET_ZONE_SIZE=4,ki.SVG_NS="http://www.w3.org/2000/svg";class ls{encode(r,s,o,c,u){if(r.length===0)throw new E("Found empty contents");if(s!==fe.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(o<0||c<0)throw new E(`Requested dimensions are too small: ${o}x${c}`);let d=ut.L,h=ls.QUIET_ZONE_SIZE;u!==null&&(u.get(Ut.ERROR_CORRECTION)!==void 0&&(d=ut.fromString(u.get(Ut.ERROR_CORRECTION).toString())),u.get(Ut.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Ut.MARGIN).toString(),10)));const x=ft.encode(r,d,u);return ls.renderResult(x,o,c,h)}static renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new Fe;const d=u.getWidth(),h=u.getHeight(),x=d+c*2,w=h+c*2,v=Math.max(s,x),T=Math.max(o,w),M=Math.min(Math.floor(v/x),Math.floor(T/w)),L=Math.floor((v-d*M)/2),U=Math.floor((T-h*M)/2),z=new Ne(v,T);for(let X=0,$=U;X<h;X++,$+=M)for(let ce=0,de=L;ce<d;ce++,de+=M)u.get(ce,X)===1&&z.setRegion(de,$,M,M);return z}}ls.QUIET_ZONE_SIZE=4;class pw{encode(r,s,o,c,u){let d;switch(s){case fe.QR_CODE:d=new ls;break;default:throw new E("No encoder available for format "+s)}return d.encode(r,s,o,c,u)}}class xr extends J{constructor(r,s,o,c,u,d,h,x){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=c,this.top=u,c+d>s||u+h>o)throw new E("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return _.arraycopy(this.yuvData,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return _.arraycopy(this.yuvData,u,c,0,o),c;for(let d=0;d<s;d++){const h=d*r;_.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new xr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,c,!1)}renderThumbnail(){const r=this.getWidth()/xr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/xr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let x=0;x<r;x++){const w=c[u+x*xr.THUMBNAIL_SCALE_FACTOR]&255;o[h+x]=4278190080|w*65793}u+=this.dataWidth*xr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/xr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/xr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,x=u+r-1;h<d;h++,x--){const w=o[h];o[h]=o[x],o[x]=w}}}invert(){return new he(this)}}xr.THUMBNAIL_SCALE_FACTOR=2;class Jc extends J{constructor(r,s,o,c,u,d,h){if(super(s,o),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const x=s*o,w=new Uint8ClampedArray(x);for(let v=0;v<x;v++){const T=r[v],M=T>>16&255,L=T>>7&510,U=T&255;w[v]=(M+L+U)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return _.arraycopy(this.luminances,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return _.arraycopy(this.luminances,u,c,0,o),c;for(let d=0;d<s;d++){const h=d*r;_.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new Jc(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new he(this)}}class x0 extends G{static forName(r){return this.getCharacterSetECIByName(r)}}class eu{}eu.ISO_8859_1=G.ISO8859_1;class y0{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class w0{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class mw{constructor(r){this.previous=r}getPrevious(){return this.previous}}class cs extends mw{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new cs(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new cs(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+I.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class tu extends cs{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new tu(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function xw(A,r,s){return new tu(A,r,s)}function mo(A,r,s){return new cs(A,r,s)}const yw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ti=0,Va=1,Wn=2,C0=3,yr=4,ww=new cs(null,0,0),nu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Cw(A){for(let r of A)b.fill(r,-1);return A[ti][yr]=0,A[Va][yr]=0,A[Va][ti]=28,A[C0][yr]=0,A[Wn][yr]=0,A[Wn][ti]=15,A}const E0=Cw(b.createInt32Array(6,6));class wr{constructor(r,s,o,c){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,c=this.token;if(r!==this.mode){let d=nu[this.mode][r];c=mo(c,d&65535,d>>16),o+=d>>16}let u=r===Wn?4:5;return c=mo(c,s,u),new wr(c,r,0,o+u)}shiftAndAppend(r,s){let o=this.token,c=this.mode===Wn?4:5;return o=mo(o,E0[this.mode][r],c),o=mo(o,s,5),new wr(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,c=this.bitCount;if(this.mode===yr||this.mode===Wn){let h=nu[o][ti];s=mo(s,h&65535,h>>16),c+=h>>16,o=ti}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new wr(s,o,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2047+31&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=xw(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new wr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(nu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=wr.calculateBinaryShiftCost(r)-wr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let o=new P;for(const c of s)c.appendTo(o,r);return o}toString(){return ue.format("%s bits=%d bytes=%d",yw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}wr.INITIAL_STATE=new wr(ww,ti,0,0);function Ew(A){const r=ue.getCharCode(" "),s=ue.getCharCode("."),o=ue.getCharCode(",");A[ti][r]=1;const c=ue.getCharCode("Z"),u=ue.getCharCode("A");for(let M=u;M<=c;M++)A[ti][M]=M-u+2;A[Va][r]=1;const d=ue.getCharCode("z"),h=ue.getCharCode("a");for(let M=h;M<=d;M++)A[Va][M]=M-h+2;A[Wn][r]=1;const x=ue.getCharCode("9"),w=ue.getCharCode("0");for(let M=w;M<=x;M++)A[Wn][M]=M-w+2;A[Wn][o]=12,A[Wn][s]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<v.length;M++)A[C0][ue.getCharCode(v[M])]=M;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<T.length;M++)ue.getCharCode(T[M])>0&&(A[yr][ue.getCharCode(T[M])]=M);return A}const ru=Ew(b.createInt32Array(5,256));class xo{constructor(r){this.text=r}encode(){const r=ue.getCharCode(" "),s=ue.getCharCode(`
`);let o=w0.singletonList(wr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ue.getCharCode("\r"):d=h===s?2:0;break;case ue.getCharCode("."):d=h===r?3:0;break;case ue.getCharCode(","):d=h===r?4:0;break;case ue.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(o=xo.updateStateListForPair(o,u,d),u++):o=this.updateStateListForChar(o,u)}return w0.min(o,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let c of r)this.updateStateForChar(c,s,o);return xo.simplifyStates(o)}updateStateForChar(r,s,o){let c=this.text[s]&255,u=ru[r.getMode()][c]>0,d=null;for(let h=0;h<=yr;h++){let x=ru[h][c];if(x>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===Wn){const w=d.latchAndAppend(h,x);o.push(w)}if(!u&&E0[r.getMode()][h]>=0){const w=d.shiftAndAppend(h,x);o.push(w)}}}if(r.getBinaryShiftByteCount()>0||ru[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(r,s,o){const c=[];for(let u of r)this.updateStateForPair(u,s,o,c);return this.simplifyStates(c)}static updateStateForPair(r,s,o,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(yr,o)),r.getMode()!==yr&&c.push(u.shiftAndAppend(yr,o)),o===3||o===4){let d=u.latchAndAppend(Wn,16-o).latchAndAppend(Wn,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const o of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(o)}return s}}class Je{constructor(){}static encodeBytes(r){return Je.encode(r,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let c=new xo(r).encode(),u=I.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,x,w,v,T;if(o!==Je.DEFAULT_AZTEC_LAYERS){if(h=o<0,x=Math.abs(o),x>(h?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new E(ue.format("Illegal value %s for layers",o));w=Je.totalBitsInLayer(x,h),v=Je.WORD_SIZE[x];let re=w-w%v;if(T=Je.stuffBits(c,v),T.getSize()+u>re)throw new E("Data to large for user specified layer");if(h&&T.getSize()>v*64)throw new E("Data to large for user specified layer")}else{v=0,T=null;for(let re=0;;re++){if(re>Je.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(h=re<=3,x=h?re+1:re,w=Je.totalBitsInLayer(x,h),d>w)continue;(T==null||v!==Je.WORD_SIZE[x])&&(v=Je.WORD_SIZE[x],T=Je.stuffBits(c,v));let Qe=w-w%v;if(!(h&&T.getSize()>v*64)&&T.getSize()+u<=Qe)break}}let M=Je.generateCheckWords(T,w,v),L=T.getSize()/v,U=Je.generateModeMessage(h,x,L),z=(h?11:14)+x*4,X=new Int32Array(z),$;if(h){$=z;for(let re=0;re<X.length;re++)X[re]=re}else{$=z+1+2*I.truncDivision(I.truncDivision(z,2)-1,15);let re=I.truncDivision(z,2),Qe=I.truncDivision($,2);for(let Ue=0;Ue<re;Ue++){let Cn=Ue+I.truncDivision(Ue,15);X[re-Ue-1]=Qe-Cn-1,X[re+Ue]=Qe+Cn+1}}let ce=new Ne($);for(let re=0,Qe=0;re<x;re++){let Ue=(x-re)*4+(h?9:12);for(let Cn=0;Cn<Ue;Cn++){let tr=Cn*2;for(let En=0;En<2;En++)M.get(Qe+tr+En)&&ce.set(X[re*2+En],X[re*2+Cn]),M.get(Qe+Ue*2+tr+En)&&ce.set(X[re*2+Cn],X[z-1-re*2-En]),M.get(Qe+Ue*4+tr+En)&&ce.set(X[z-1-re*2-En],X[z-1-re*2-Cn]),M.get(Qe+Ue*6+tr+En)&&ce.set(X[z-1-re*2-Cn],X[re*2+En])}Qe+=Ue*8}if(Je.drawModeMessage(ce,h,$,U),h)Je.drawBullsEye(ce,I.truncDivision($,2),5);else{Je.drawBullsEye(ce,I.truncDivision($,2),7);for(let re=0,Qe=0;re<I.truncDivision(z,2)-1;re+=15,Qe+=16)for(let Ue=I.truncDivision($,2)&1;Ue<$;Ue+=2)ce.set(I.truncDivision($,2)-Qe,Ue),ce.set(I.truncDivision($,2)+Qe,Ue),ce.set(Ue,I.truncDivision($,2)-Qe),ce.set(Ue,I.truncDivision($,2)+Qe)}let de=new y0;return de.setCompact(h),de.setSize($),de.setLayers(x),de.setCodeWords(L),de.setMatrix(ce),de}static drawBullsEye(r,s,o){for(let c=0;c<o;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let c=new P;return r?(c.appendBits(s-1,2),c.appendBits(o-1,6),c=Je.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(o-1,11),c=Je.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,o,c){let u=I.truncDivision(o,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+I.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,o){let c=r.getSize()/o,u=new qc(Je.getGF(o)),d=I.truncDivision(s,o),h=Je.bitsToWords(r,o,d);u.encode(h,d-c);let x=s%o,w=new P;w.appendBits(0,x);for(const v of Array.from(h))w.appendBits(v,o);return w}static bitsToWords(r,s,o){let c=new Int32Array(o),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let x=0;x<s;x++)h|=r.get(u*s+x)?1<<s-x-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return K.AZTEC_PARAM;case 6:return K.AZTEC_DATA_6;case 8:return K.AZTEC_DATA_8;case 10:return K.AZTEC_DATA_10;case 12:return K.AZTEC_DATA_12;default:throw new E("Unsupported word size "+r)}}static stuffBits(r,s){let o=new P,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let x=0;x<s;x++)(d+x>=c||r.get(d+x))&&(h|=1<<s-1-x);(h&u)===u?(o.appendBits(h&u,s),d--):h&u?o.appendBits(h,s):(o.appendBits(h|1,s),d--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class za{encode(r,s,o,c){return this.encodeWithHints(r,s,o,c,null)}encodeWithHints(r,s,o,c,u){let d=eu.ISO_8859_1,h=Je.DEFAULT_EC_PERCENT,x=Je.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ut.CHARACTER_SET)&&(d=x0.forName(u.get(Ut.CHARACTER_SET).toString())),u.has(Ut.ERROR_CORRECTION)&&(h=I.parseInt(u.get(Ut.ERROR_CORRECTION).toString())),u.has(Ut.AZTEC_LAYERS)&&(x=I.parseInt(u.get(Ut.AZTEC_LAYERS).toString()))),za.encodeLayers(r,s,o,c,d,h,x)}static encodeLayers(r,s,o,c,u,d,h){if(s!==fe.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let x=Je.encode(ue.getBytes(r,u),d,h);return za.renderResult(x,o,c)}static renderResult(r,s,o){let c=r.getMatrix();if(c==null)throw new Fe;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),x=Math.max(o,d),w=Math.min(h/u,x/d),v=(h-u*w)/2,T=(x-d*w)/2,M=new Ne(h,x);for(let L=0,U=T;L<d;L++,U+=w)for(let z=0,X=v;z<u;z++,X+=w)c.get(z,L)&&M.setRegion(X,U,w,w);return M}}n.AbstractExpandedDecoder=zc,n.ArgumentException=C,n.ArithmeticException=Ye,n.AztecCode=y0,n.AztecCodeReader=Y,n.AztecCodeWriter=za,n.AztecDecoder=je,n.AztecDetector=$e,n.AztecDetectorResult=ns,n.AztecEncoder=Je,n.AztecHighLevelEncoder=xo,n.AztecPoint=Ae,n.BarcodeFormat=fe,n.Binarizer=O,n.BinaryBitmap=S,n.BitArray=P,n.BitMatrix=Ne,n.BitSource=Yc,n.BrowserAztecCodeReader=ne,n.BrowserBarcodeReader=qy,n.BrowserCodeReader=ct,n.BrowserDatamatrixCodeReader=ew,n.BrowserMultiFormatReader=dw,n.BrowserPDF417Reader=fw,n.BrowserQRCodeReader=hw,n.BrowserQRCodeSvgWriter=ki,n.CharacterSetECI=G,n.ChecksumException=R,n.Code128Reader=ee,n.Code39Reader=Te,n.DataMatrixDecodedBitStreamParser=$r,n.DataMatrixReader=qr,n.DecodeHintType=W,n.DecoderResult=Ot,n.DefaultGridSampler=ie,n.DetectorResult=tn,n.EAN13Reader=hr,n.EncodeHintType=Ut,n.Exception=p,n.FormatException=B,n.GenericGF=K,n.GenericGFPoly=Se,n.GlobalHistogramBinarizer=se,n.GridSampler=Kr,n.GridSamplerInstance=xe,n.HTMLCanvasElementLuminanceSource=le,n.HybridBinarizer=oe,n.ITFReader=Ie,n.IllegalArgumentException=E,n.IllegalStateException=Fe,n.InvertedLuminanceSource=he,n.LuminanceSource=J,n.MathUtils=ze,n.MultiFormatOneDReader=os,n.MultiFormatReader=m0,n.MultiFormatWriter=pw,n.NotFoundException=V,n.OneDReader=pe,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=u0,n.PDF417Reader=Kt,n.PDF417ResultMetadata=f0,n.PerspectiveTransform=wt,n.PlanarYUVLuminanceSource=xr,n.QRCodeByteMatrix=Ua,n.QRCodeDataMask=zn,n.QRCodeDecodedBitStreamParser=Ct,n.QRCodeDecoderErrorCorrectionLevel=ut,n.QRCodeDecoderFormatInformation=nn,n.QRCodeEncoder=ft,n.QRCodeEncoderQRCode=_i,n.QRCodeMaskUtil=Nt,n.QRCodeMatrixUtil=ke,n.QRCodeMode=Me,n.QRCodeReader=Jr,n.QRCodeVersion=be,n.QRCodeWriter=ls,n.RGBLuminanceSource=Jc,n.RSS14Reader=bt,n.RSSExpandedReader=te,n.ReaderException=Fa,n.ReedSolomonDecoder=_e,n.ReedSolomonEncoder=qc,n.ReedSolomonException=Pe,n.Result=Ze,n.ResultMetadataType=st,n.ResultPoint=me,n.StringUtils=ue,n.UnsupportedOperationException=q,n.VideoInputDevice=De,n.WhiteRectangleDetector=mn,n.WriterException=at,n.ZXingArrays=b,n.ZXingCharset=x0,n.ZXingInteger=I,n.ZXingStandardCharsets=eu,n.ZXingStringBuilder=Ee,n.ZXingStringEncoding=ge,n.ZXingSystem=_,n.createAbstractExpandedDecoder=l0,Object.defineProperty(n,"__esModule",{value:!0})})})(mf,mf.exports);var gt=mf.exports;const yI=yp(gt),wI=Aw({__proto__:null,default:yI},[gt]);var sp=function(){function e(t,n,i){if(this.formatMap=new Map([[we.QR_CODE,gt.BarcodeFormat.QR_CODE],[we.AZTEC,gt.BarcodeFormat.AZTEC],[we.CODABAR,gt.BarcodeFormat.CODABAR],[we.CODE_39,gt.BarcodeFormat.CODE_39],[we.CODE_93,gt.BarcodeFormat.CODE_93],[we.CODE_128,gt.BarcodeFormat.CODE_128],[we.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,gt.BarcodeFormat.MAXICODE],[we.ITF,gt.BarcodeFormat.ITF],[we.EAN_13,gt.BarcodeFormat.EAN_13],[we.EAN_8,gt.BarcodeFormat.EAN_8],[we.PDF_417,gt.BarcodeFormat.PDF_417],[we.RSS_14,gt.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,gt.BarcodeFormat.UPC_A],[we.UPC_E,gt.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!wI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),l=new Map;l.set(gt.DecodeHintType.POSSIBLE_FORMATS,a),l.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(l){a(l)}})},e.prototype.decode=function(t){var n=new gt.MultiFormatReader(this.verbose,this.hints),i=new gt.HTMLCanvasElementLuminanceSource(t),a=new gt.BinaryBitmap(new gt.HybridBinarizer(i)),l=n.decode(a);return{text:l.text,format:jy.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),CI=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},EI=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},op=function(){function e(t,n,i){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return CI(this,void 0,void 0,function(){var n,i;return EI(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:jy.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,l=t;a<l.length;a++){var f=l[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),ap=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},lp=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},vI=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&op.isSupported()?(this.primaryDecoder=new op(t,i,a),this.secondaryDecoder=new sp(t,i,a)):this.primaryDecoder=new sp(t,i,a)}return e.prototype.decodeAsync=function(t){return ap(this,void 0,void 0,function(){var n;return lp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return ap(this,void 0,void 0,function(){var n,i;return lp(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),o0=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),dc=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},fc=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},zy=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),SI=function(e){o0(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(zy),AI=function(e){o0(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(SI),TI=function(e){o0(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(zy),II=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new AI(this.track)},e.prototype.torchFeature=function(){return new TI(this.track)},e}(),bI=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return dc(this,void 0,void 0,function(){var l,f;return fc(this,function(g){switch(g.label){case 0:return l=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return dc(this,void 0,void 0,function(){return fc(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),l=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new II(this.getFirstTrackOrFail())},e}(),NI=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return dc(this,void 0,void 0,function(){return fc(this,function(a){return[2,bI.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return dc(this,void 0,void 0,function(){var n,i;return fc(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),cp=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},up=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},RI=function(){function e(){}return e.failIfNotSupported=function(){return cp(this,void 0,void 0,function(){return up(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return cp(this,void 0,void 0,function(){return up(this,function(n){return[2,NI.create(t)]})})},e}(),MI=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},DI=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},OI=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ms.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ms.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return MI(this,void 0,void 0,function(){var t,n,i,a,l,f,g;return DI(this,function(m){switch(m.label){case 0:return t=function(p){for(var C=p.getVideoTracks(),E=0,S=C;E<S.length;E++){var R=S[E];R.enabled=!1,R.stop(),p.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),a=[],l=0,f=i;l<f.length;l++)g=f[l],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(l){for(var f=[],g=0,m=l;g<m.length;g++){var p=m[g];p.kind==="video"&&f.push({id:p.id,label:p.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),Rt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Rt||(Rt={}));var _I=function(){function e(){this.state=Rt.NOT_STARTED,this.onGoingTransactionNewState=Rt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Rt.UNKNOWN:throw"Transition from unknown is not allowed";case Rt.NOT_STARTED:this.failIfNewStateIs(t,[Rt.PAUSED]);break;case Rt.SCANNING:break;case Rt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var l=a[i];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),kI=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Rt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Rt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Rt.PAUSED},e}(),PI=function(){function e(){}return e.create=function(){return new kI(new _I)},e}(),LI=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rn=function(e){LI(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(or),BI=function(){function e(t,n){this.logger=n,this.fps=Rn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Rn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Vy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!vr(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),dp=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Uy(this.verbose),this.qrcode=new vI(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=PI.create()}return e.prototype.start=function(t,n,i,a){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=BI.create(n,this.logger);this.clearElement();var m=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Rn.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var E=this,S=this.stateManagerProxy.startTransition(Rt.SCANNING);return new Promise(function(R,O){var _=p?g.videoConstraints:E.createVideoConstraints(t);if(!_){S.cancel(),O("videoConstraints should be defined");return}var j={};(!p||g.aspectRatio)&&(j.aspectRatio=g.aspectRatio);var N={onRenderSurfaceReady:function(b,I){E.setupUi(b,I,g),E.isScanning=!0,E.foreverScan(g,i,f)}};RI.failIfNotSupported().then(function(b){b.create(_).then(function(I){return I.render(l.element,j,N).then(function(P){E.renderedCamera=P,S.execute(),R(null)}).catch(function(P){S.cancel(),O(P)})}).catch(function(I){S.cancel(),O(Ms.errorGettingUserMedia(I))})}).catch(function(b){S.cancel(),O(Ms.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rt.PAUSED),this.showPausedState(),(vr(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Rt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Rt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var l=document.getElementById(Rn.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(vr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,m=f.height,p=document.getElementById(i.elementId),C=p.clientWidth?p.clientWidth:Rn.DEFAULT_WIDTH,E=Math.max(p.clientHeight?p.clientHeight:m,Rn.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(g,m,C,E);if(n){var R=i.createCanvasElement(C,E,"qr-canvas-visible");R.style.display="inline-block",p.appendChild(R);var O=R.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=C,O.canvas.height=E,O.drawImage(f,0,0,g,m,S.x,S.y,S.width,S.height)}var _=Rn.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(f.width,S.width),N=Math.max(f.height,S.height),b=j+2*_,I=N+2*_,P=i.createCanvasElement(b,I);p.appendChild(P);var F=P.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=b,F.canvas.height=I,F.drawImage(f,0,0,g,m,_,_,j,N);try{i.qrcode.decodeRobustlyAsync(P).then(function(W){a(rp.createFromQrcodeResult(W))}).catch(l)}catch(W){l("QR code parse error, error = ".concat(W))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return OI.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Vy.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,l=t.formatsToSupport;a<l.length;a++){var f=l[a];mI(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(vr(t))return!0;if(!vr(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(vr(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return vr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(t,n,l),g=function(p){if(p<Rn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Rn.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};g(f.width),g(f.height),f.width=m(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=vr(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:t,height:n},m=f?this.getShadedRegionBounds(t,n,l):g,p=this.createCanvasElement(m.width,m.height),C={willReadFrequently:!0},E=p.getContext("2d",C);E.canvas.width=m.width,E.canvas.height=m.height,this.element.append(p),f&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=E,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ms.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,rp.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var l=Ms.codeParseError(a);return n(l,Fy.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,p=this.qrRegion.height*g,C=this.qrRegion.x*f,E=this.qrRegion.y*g;this.context.drawImage(l,C,E,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(R){!R&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){S()})):S()}).catch(function(R){a.logger.logError("Error happend while scanning context",R),S()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},l="exact",f=function(O){if(O in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var m=Object.keys(t)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=t.facingMode;if(typeof p=="string"){if(f(p))return{facingMode:p}}else if(typeof p=="object")if(l in p){if(f(p["".concat(l)]))return{facingMode:{exact:p["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var C=typeof p;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(l in E)return{deviceId:{exact:E["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof E;throw"Invalid type of 'deviceId' = ".concat(S)}}}var R=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var l=(i-t)/2,f=(a-n)/2;return{x:l,y:f,width:t,height:n}}else{var g=t,m=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(m)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Rn.BORDER_SHADER_MATCH_COLOR:Rn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,l=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=vr(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Rn.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(l,p,m,-m,null,0,!0),this.insertShaderBorders(l,p,m,-m,null,0,!1),this.insertShaderBorders(l,p,m,null,-m,0,!0),this.insertShaderBorders(l,p,m,null,-m,0,!1),this.insertShaderBorders(l,m,p+m,-m,null,-m,!0),this.insertShaderBorders(l,m,p+m,null,-m,-m,!0),this.insertShaderBorders(l,m,p+m,-m,null,-m,!1),this.insertShaderBorders(l,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,i,a,l,f,g){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Rn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),a!==null&&(m.style.top="".concat(a,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),g?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),t.appendChild(m)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),a0="data:image/svg+xml;base64,",jI=a0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",FI=a0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",fp=a0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",UI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",hp=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),VI=function(){function e(){this.data=hp.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=hp.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),zI=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ip.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=ip.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),HI=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=fp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=UI,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=fp,this.infoIcon.style.opacity="0.6")},e}(),WI=function(){function e(){var t=this;this.infoDiv=new zI,this.infoIcon=new HI(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),GI=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},YI=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},gp=function(){function e(){}return e.hasPermissions=function(){return GI(this,void 0,void 0,function(){var t,n,i,a;return YI(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),ri=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===Yr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Yr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return or.DEFAULT_SUPPORTED_SCAN_TYPE;var n=or.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var l=a[i];if(!or.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}(),On=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Lr=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(On.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),Hy=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{p(i.next(C))}catch(E){f(E)}}function m(C){try{p(i.throw(C))}catch(E){f(E)}}function p(C){C.done?l(C.value):a(C.value).then(g,m)}p((i=i.apply(e,t||[])).next())})},Wy=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(p){return function(C){return m([p,C])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(C){p=[6,C],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},pp=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Hy(this,void 0,void 0,function(){var t,n;return Wy(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?rt.torchOffButton():rt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?rt.torchOnFailedMessage():rt.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),XI=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Lr.createElement("button",On.TORCH_BUTTON_ID),this.torchController=new pp(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=rt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return Hy(i,void 0,void 0,function(){return Wy(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(On.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(On.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(On.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(On.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new pp(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=rt.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var l=new e(n,a);return l.render(t,i),l},e}(),QI=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=Lr.createElement("button",On.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=Lr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var m=g.target;if(!(m.files&&m.files.length===0)){var p=m.files,C=p[0],E=C.name;l.setImageNameToButton(E),i(C)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var m=g.dataTransfer;if(m){var p=m.files;if(!p||p.length===0)return;for(var C=!1,E=0;E<p.length;++E){var S=p.item(E);if(S){var R=/image.*/;if(S.type.match(R)){C=!0;var O=S.name;l.setImageNameToButton(O),i(S),f.innerText=rt.dragAndDropMessage();break}}}C||(f.innerText=rt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=rt.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,l=t.substring(a-8,a);t="".concat(i,"....").concat(l)}var f=rt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=rt.fileSelectionChooseImage()+" - "+rt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),KI=function(){function e(t){this.selectElement=Lr.createElement("select",On.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=rt.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,f=0,g=this.cameras;f<g.length;f++){var m=g[f],p=m.id,C=m.label==null?p:m.label;(!C||C==="")&&(C=[rt.anonymousCameraPrefix(),l++].join(" "));var E=document.createElement("option");E.value=p,E.innerText=C,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),ZI=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Lr.createElement("input",On.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Mn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Mn||(Mn={}));function $I(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function qI(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var JI=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ri(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Uy(this.verbose),this.persistedDataManager=new VI,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(t)t(l,f);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(rt.lastMatch(l),Mn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new dp(this.getScanRegionId(),qI(this.config,this.verbose))},e.prototype.pause=function(t){(vr(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=or.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!or.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=or.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=or.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:or.SCAN_DEFAULT_FPS,rememberLastUsedCamera:or.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:or.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ri.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new WI;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(rt.cameraPermissionRequesting());var l=function(){i||a.createPermissionButton(t,n)};dp.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage(rt.noCameraFound(),Mn.STATUS_WARNING),l())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),a.setHeaderMessage(f,Mn.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=Lr.createElement("button",this.getCameraPermissionButtonId());a.innerText=rt.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(ri.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){gp.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=ri.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=ri.isFileScanType(this.currentScanType),i=this,a=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";ri.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(rt.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,Mn.STATUS_WARNING),i.qrCodeErrorCallback(f,Fy.createFrom(f))}))};this.fileSelectionUi=QI.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=ZI.create(a,!1),f=function(_){var j=_.zoomFeature();if(j.isSupported()){l.setOnCameraZoomValueChangeCallback(function(b){j.apply(b)});var N=1;n.config.defaultZoomValueIfSupported&&(N=n.config.defaultZoomValueIfSupported),N=xI(N,j.min(),j.max()),l.setValues(j.min(),j.max(),N,j.step()),l.show()}},g=KI.create(a,t),m=document.createElement("span"),p=Lr.createElement("button",On.CAMERA_START_BUTTON_ID);p.innerText=rt.scanButtonStartScanningText(),m.appendChild(p);var C=Lr.createElement("button",On.CAMERA_STOP_BUTTON_ID);C.innerText=rt.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,m.appendChild(C);var E,S=function(_){if(!_.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(_.torchFeature()):E=XI.create(m,_.torchFeature(),{display:"none",marginLeft:"5px"},function(j){i.setHeaderMessage(j,Mn.STATUS_WARNING)}),E.show()};a.appendChild(m);var R=function(_){_||(p.style.display="none"),p.innerText=rt.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,_&&(p.style.display="inline-block")};if(p.addEventListener("click",function(_){p.innerText=rt.scanButtonScanningStarting(),g.disable(),p.disabled=!0,p.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var j=g.getValue();i.persistedDataManager.setLastUsedCameraId(j),i.html5Qrcode.start(j,$I(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(N){C.disabled=!1,C.style.display="inline-block",R(!1);var b=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&S(b),n.config.showZoomSliderIfSupported===!0&&f(b)}).catch(function(N){i.showHideScanTypeSwapLink(!0),g.enable(),R(!0),i.setHeaderMessage(N,Mn.STATUS_WARNING)})}),g.hasSingleItem()&&p.click(),C.addEventListener("click",function(_){if(!i.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,i.html5Qrcode.stop().then(function(j){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),p.disabled=!1,C.style.display="none",p.style.display="inline-block",E&&(E.reset(),E.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(j){C.disabled=!1,i.setHeaderMessage(j,Mn.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var O=i.persistedDataManager.getLastUsedCameraId();g.hasValue(O)?(g.setValue(O),p.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=rt.textIfCameraScanSelected(),i=rt.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=Lr.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=ri.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ri.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=Yr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=Yr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(f),a.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){gp.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Mn.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Mn.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Mn.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Mn.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=jI,this.cameraScanImage.alt=rt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=FI,this.fileScanImage.alt=rt.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return On.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return On.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function eb(){var mn,Kr,wt;const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState([]),[m,p]=D.useState([]),[C,E]=D.useState({}),[S,R]=D.useState(""),[O,_]=D.useState(""),[j,N]=D.useState(!1),[b,I]=D.useState([]),[P,F]=D.useState(""),[W,B]=D.useState(""),[H,G]=D.useState(!1),[q,ge]=D.useState([]),[ue,Ee]=D.useState(new Date().toISOString().split("T")[0]);D.useState(!1);const[Ne,V]=D.useState(!1),[se,oe]=D.useState(!1),[J,he]=D.useState(0),[le,De]=D.useState(window.innerWidth<=768),[Oe,ct]=D.useState(window.innerWidth>window.innerHeight);D.useEffect(()=>{const ie=()=>{De(window.innerWidth<=768),ct(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},[]),D.useEffect(()=>{Re(),st()},[]);const Ze=async(ie,xe,Ae=3)=>{V(!0),oe(!1);for(let $e=1;$e<=Ae;$e++)try{const Y=await fetch(ie,{...xe,timeout:1e4});if(!Y.ok)throw new Error(`HTTP ${Y.status}: ${Y.statusText}`);const ne=await Y.json();return V(!1),he(0),{success:!0,data:ne}}catch(Y){if(console.error(`API call attempt ${$e}:`,Y),$e===Ae)return V(!1),oe(!0),he($e),{success:!1,error:Y.message,isNetworkError:Y.name==="TypeError"||Y.message.includes("fetch")};await new Promise(ne=>setTimeout(ne,Math.pow(2,$e)*1e3))}},Ht=async(ie,xe,Ae,$e)=>{var ne;const Y=await Ze("/api/gun-borrowing-record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userQRCode:ie,gunQRCode:xe,realname:Ae,action:$e})});return Y.success?(console.log(`Auto-saved ${$e} record:`,Y.data),st(),l(`✅ ${$e==="borrow"?"เบิก":"คืน"}อาวุธและบันทึกข้อมูลสำเร็จ`),!0):(console.error("Auto-save failed:",Y.error),(ne=Y.data)!=null&&ne.conflictType?fe(Y.data):l(`❌ ไม่สามารถบันทึกข้อมูลได้: ${Y.error}`),!1)},fe=ie=>{switch(ie.conflictType){case"duplicate_borrow":l("⚠️ เบิกปืนนี้ไปแล้ววันนี้");break;case"user_has_other_gun":l(`⚠️ คุณเบิกปืน ${ie.existingRecord.gunQRCode} ไว้แล้ว`);break;case"gun_borrowed_by_other":l(`⚠️ ปืนนี้ถูก ${ie.existingRecord.realname} เบิกไว้แล้ว`);break;default:l("⚠️ ข้อมูลซ้ำซ้อน")}},Re=async()=>{try{const xe=await(await fetch("/api/public-gun")).json();I(xe)}catch{B("ไม่สามารถโหลดข้อมูลปืนสาธารณะ")}},st=async()=>{try{const xe=await(await fetch(`/api/gun-borrowing-record?date=${ue}`)).json();xe.success&&ge(xe.data)}catch(ie){console.error("Failed to fetch records:",ie)}},Ot=async ie=>{try{const Ae=await(await fetch(`/api/gun-borrowing-record?date=${ie}`)).json();Ae.success&&(ge(Ae.data),Ee(ie))}catch(xe){console.error("Failed to load records:",xe)}},ve=async ie=>{if(window.confirm(`ต้องการลบข้อมูลนี้หรือไม่?

⚠️ การลบจะไม่สามารถกู้คืนได้`))try{(await(await fetch("/api/gun-borrowing-record",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({recordId:ie})})).json()).success?(l("✅ ลบข้อมูลสำเร็จ"),Ot(ue)):l("❌ ลบข้อมูลไม่สำเร็จ")}catch(xe){console.error("Failed to delete record:",xe),l("❌ เกิดข้อผิดพลาดในการลบข้อมูล")}},Se=async()=>{const ie=`ต้องการลบข้อมูลทั้งหมดในวันที่ ${ue} หรือไม่?

จำนวนข้อมูลที่จะถูกลบ: ${q.all.length} รายการ

⚠️ การลบจะไม่สามารถกู้คืนได้`;if(window.confirm(ie))try{const Ae=await(await fetch("/api/gun-borrowing-record",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:ue})})).json();Ae.success?(l(`✅ ลบข้อมูลทั้งหมดในวันที่ ${ue} สำเร็จ (${Ae.deletedCount||0} รายการ)`),Ot(ue)):l("❌ ลบข้อมูลไม่สำเร็จ")}catch(xe){console.error("Failed to delete all records:",xe),l("❌ เกิดข้อผิดพลาดในการลบข้อมูล")}},Ye=async ie=>{if(ie.preventDefault(),!!P)try{(await fetch("/api/public-gun",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gunQRCode:P})})).ok?(F(""),B("เพิ่มปืนสำเร็จ"),Re()):B("เพิ่มปืนไม่สำเร็จ")}catch{B("เกิดข้อผิดพลาด")}},K=async ie=>{if(window.confirm(`ลบปืน ${ie} ?`))try{(await fetch("/api/public-gun",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({gunQRCode:ie})})).ok?(B("ลบปืนสำเร็จ"),Re()):B("ลบปืนไม่สำเร็จ")}catch{B("เกิดข้อผิดพลาด")}},Pe=()=>{const ie=new Set;return f.filter(xe=>{const Ae=`${xe.userQRCode}_${xe.gunQRCode}`;return ie.has(Ae)?!1:(ie.add(Ae),!0)})},Fe=()=>{const ie=new Set;return m.filter(xe=>{const Ae=`${xe.userQRCode}_${xe.gunQRCode}`;return ie.has(Ae)?!1:(ie.add(Ae),!0)})},_e=()=>{const ie=new Set(m.map(Ae=>`${Ae.userQRCode}_${Ae.gunQRCode}`)),xe=new Set;return f.filter(Ae=>{const $e=`${Ae.userQRCode}_${Ae.gunQRCode}`;return ie.has($e)||xe.has($e)?!1:(xe.add($e),!0)})},Ve=ie=>{if(ie.preventDefault(),S&&O){t(S),i(O),l("กรอกข้อมูล QR Code สำเร็จ");const xe=S,Ae=O;if(xe&&Ae){const $e=`${xe}_${Ae}`;E(Y=>{const ne=(Y[$e]||0)+1;return ne===2&&ze(xe,Ae),{...Y,[$e]:ne}})}R(""),_("")}else l("กรุณากรอกข้อมูลให้ครบ")},je=(ie,xe)=>{xe&&!e?(t(ie),l("User QR Code Scanned")):!xe&&!n&&(i(ie),l("Gun QR Code Scanned"));const Ae=xe?ie:e,$e=xe?n:ie;if(Ae&&$e){const Y=`${Ae}_${$e}`;E(ne=>{const pe=(ne[Y]||0)+1;return pe===2&&ze(Ae,$e),{...ne,[Y]:pe}})}},ze=async(ie,xe)=>{try{const $e=await(await fetch(`/api/get-user-details?userQRCode=${ie}`)).json();if($e.success){const{realname:Y}=$e;if(await Ht(ie,xe,Y,"return")){const pe=new Date().toLocaleString();p(ee=>ee.some(Te=>Te.userQRCode===ie&&Te.gunQRCode===xe)?ee:[...ee,{userQRCode:ie,gunQRCode:xe,realname:Y,time:pe}])}else l("🔄 บันทึกการคืนไม่สำเร็จ กรุณาลองใหม่")}else l("Error: Unable to fetch user details")}catch(Ae){console.error("Fetch user details error:",Ae),l("Error: Failed to fetch user data")}},It=async ie=>{const xe=ie?"user-qr-reader":"gun-qr-reader";if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){l("เบราว์เซอร์ไม่รองรับการใช้กล้อง");return}try{await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}catch(Y){console.error("Camera permission error:",Y),l("ไม่สามารถเข้าถึงกล้องได้ กรุณาอนุญาตการใช้กล้อง");return}const Ae={fps:le?5:10,qrbox:le?{width:Math.min(300,window.innerWidth-40),height:Math.min(300,window.innerWidth-40)}:{width:250,height:250},aspectRatio:1,supportedScanTypes:[Yr.SCAN_TYPE_CAMERA],videoConstraints:{facingMode:"environment",width:le?{ideal:640}:{ideal:1280},height:le?{ideal:480}:{ideal:720}}},$e=new JI(xe,Ae);$e.render(Y=>{navigator.vibrate&&le&&navigator.vibrate(200),je(Y,ie),$e.clear().catch(console.error)},Y=>{console.log("Scan failed:",Y),Y.includes("NotAllowedError")?l("ไม่ได้รับอนุญาตให้ใช้กล้อง"):Y.includes("NotFoundError")?l("ไม่พบกล้อง"):Y.includes("NotReadableError")&&l("กล้องถูกใช้งานโดยแอปอื่น")})},me=async()=>{try{const xe=await(await fetch("/api/check-gun-borrowing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userQRCode:e,gunQRCode:n})})).json();if(xe.success){const Ae=xe.realname;if(await Ht(e,n,Ae,"borrow")){const Y={realname:Ae,userQRCode:e,gunQRCode:n,time:new Date().toLocaleString()};g(ne=>ne.some(ee=>ee.userQRCode===Y.userQRCode&&ee.gunQRCode===Y.gunQRCode)?ne:[...ne,Y])}else l("🔄 บันทึกข้อมูลไม่สำเร็จ กรุณาลองใหม่")}else l("QR Codes do not match")}catch(ie){console.error("Submit error:",ie),l("❌ เกิดข้อผิดพลาด: "+ie.message)}};D.useEffect(()=>{e&&n&&me()},[e,n]);const tn=()=>{t(""),i(""),l("")},ns=()=>{const ie=_e(),xe=window.open("","","width=800,height=600");xe.document.write(`
            <html>
            <head>
                <title>Gun Borrowing Report</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 24px; }
                    table { border-collapse: collapse; width: 100%; margin-bottom: 24px; }
                    th, td { border: 1px solid #888; padding: 8px; text-align: left; }
                    th { background: #f0f0f0; }
                </style>
            </head>
            <body>
                <div><b>จำนวนการเบิก:</b> ${Pe().length}</div>
                <div><b>จำนวนการคืน:</b> ${Fe().length}</div>
                <h3 style="margin-top:24px;">รายชื่อที่ยังไม่ได้คืน</h3>
                <table>
                    <thead>
                        <tr>
                            <th>User Name</th>
                            <th>Gun QR Code</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${ie.length===0?'<tr><td colspan="3" style="text-align:center;">-</td></tr>':ie.map(Ae=>`
                                <tr>
                                    <td>${Ae.realname}</td>
                                    <td>${Ae.gunQRCode}</td>
                                    <td>${Ae.time}</td>
                                </tr>
                            `).join("")}
                    </tbody>
                </table>
            </body>
            </html>
        `),xe.document.close(),xe.print()};return y.jsxs("div",{className:"gun-borrowing-bg",children:[y.jsxs("div",{className:"gun-borrowing-container",children:[y.jsx("h1",{className:"gun-borrowing-title",children:"ระบบยืม-คืนปืน"}),y.jsxs("div",{className:"gun-borrowing-card",children:[y.jsxs("div",{className:"qr-section",children:[y.jsx("label",{className:"qr-label",children:"User QR Code"}),y.jsx("div",{id:"user-qr-reader",className:"qr-reader"}),y.jsx("button",{onClick:()=>It(!0),className:"qr-scan-btn user",disabled:Ne,children:Ne?"🔄 กำลังเปิดกล้อง...":"📷 สแกน User QR Code"}),y.jsxs("div",{className:"qr-help-text",children:["💡 ",le?"หมุนโทรศัพท์เป็นแนวตั้ง เพื่อสแกนที่ดีที่สุด":"หากใช้ Android: อนุญาตการใช้กล้อง และใช้ HTTPS หรือ localhost เท่านั้น"]}),y.jsxs("div",{className:"qr-result",children:[y.jsx("b",{children:"Scanned:"})," ",e?y.jsxs("span",{className:"qr-result-value",children:["✅ ",e]}):y.jsx("span",{className:"qr-result-none",children:"None"})]})]}),y.jsxs("div",{className:"qr-section",children:[y.jsx("label",{className:"qr-label",children:"Gun QR Code"}),y.jsx("div",{id:"gun-qr-reader",className:"qr-reader"}),y.jsx("button",{onClick:()=>It(!1),className:"qr-scan-btn gun",disabled:Ne,children:Ne?"🔄 กำลังเปิดกล้อง...":"🔫 สแกน Gun QR Code"}),y.jsxs("div",{className:"qr-help-text gun-help",children:["💡 ",le?"ถ้าสแกนไม่ได้ ให้กดปุ่มด้านล่างเพื่อกรอกด้วยตนเอง":"หากไม่สามารถใช้กล้องได้ ให้ใช้ฟอร์มกรอกข้อมูลด้านล่าง"]}),y.jsxs("div",{className:"qr-result",children:[y.jsx("b",{children:"Scanned:"})," ",n?y.jsxs("span",{className:"qr-result-value",children:["✅ ",n]}):y.jsx("span",{className:"qr-result-none",children:"None"})]})]}),y.jsx("button",{onClick:tn,className:"btn-reset",children:"🔄 เริ่มสแกนใหม่"}),y.jsx("button",{type:"button",className:"gun-borrowing-print-btn btn-toggle-form",onClick:()=>N(ie=>!ie),children:j?"❌ ปิดฟอร์มกรอกข้อมูล":"⌨️ กรอกข้อมูลด้วยตนเอง"}),j&&y.jsxs("form",{onSubmit:Ve,className:"manual-form",children:[y.jsx("div",{className:"manual-form-title",children:"⌨️ กรอกข้อมูล QR Code ด้วยตนเอง"}),y.jsx("input",{type:"text",placeholder:"รหัสผู้ใช้ (User ID)",value:S,onChange:ie=>R(ie.target.value),className:"manual-input"}),y.jsx("input",{type:"text",placeholder:"หมายเลขปืน (Gun Number)",value:O,onChange:ie=>_(ie.target.value),className:"manual-input"}),y.jsx("button",{type:"submit",className:"gun-borrowing-print-btn manual-submit",disabled:Ne,children:Ne?"🔄 กำลังประมวลผล...":"✅ ยืนยันข้อมูล"})]}),a&&y.jsx("div",{className:`gun-borrowing-status ${a.includes("Successful")||a.includes("✅")?"success":"error"}`,children:a}),Ne&&y.jsx("div",{className:"loading-message",children:y.jsx("div",{className:"loading-text",children:"🔄 กำลังประมวลผล..."})}),se&&y.jsxs("div",{className:"network-error",children:[y.jsx("div",{className:"network-error-title",children:"❌ ไม่สามารถเชื่อมต่อได้"}),y.jsxs("div",{className:"network-error-text",children:["ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต (ลองใหม่ ",J," ครั้ง)"]}),y.jsx("button",{onClick:()=>{oe(!1),st()},className:"retry-btn",children:"ลองใหม่"})]})]}),y.jsxs("div",{className:"public-gun-section",children:[y.jsx("h2",{className:"public-gun-title",children:"ปืนสาธารณะ (Public Gun)"}),y.jsx("button",{type:"button",className:"gun-borrowing-print-btn",style:{width:"100%",marginBottom:H?0:16},onClick:()=>G(ie=>!ie),children:H?"ปิดฟอร์มเพิ่มปืน":"เพิ่มปืนสาธารณะ"}),H&&y.jsxs("form",{onSubmit:Ye,className:"public-gun-form",children:[y.jsx("input",{type:"text",placeholder:"Gun QR Code",value:P,onChange:ie=>F(ie.target.value),className:"public-gun-input"}),y.jsx("button",{type:"submit",className:"gun-borrowing-print-btn public-gun-add-btn",children:"เพิ่ม"})]}),W&&y.jsx("div",{className:"public-gun-status",children:W}),y.jsx("div",{style:{maxHeight:120,overflowY:"auto"},children:y.jsxs("table",{style:{width:"100%",fontSize:"1rem"},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{style:{width:"70%"},children:"Gun QR Code"}),y.jsx("th",{style:{width:"30%"},children:"ลบ"})]})}),y.jsx("tbody",{children:b.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:2,style:{color:"#888",textAlign:"center"},children:"ไม่มีข้อมูล"})}):b.map(ie=>y.jsxs("tr",{children:[y.jsx("td",{children:ie.gunQRCode}),y.jsx("td",{children:y.jsx("button",{type:"button",style:{background:"#e53935",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",cursor:"pointer"},onClick:()=>K(ie.gunQRCode),children:"ลบ"})})]},ie.gunQRCode))})]})})]}),y.jsxs("div",{className:"gun-borrowing-print-row",style:{display:"flex",justifyContent:"center",gap:"16px",maxWidth:1200,margin:"0 auto 16px auto"},children:[y.jsx("button",{className:"gun-borrowing-print-btn",onClick:ns,children:"📄 พิมพ์รายงาน"}),y.jsx("div",{style:{background:"#e8f5e8",padding:"8px 16px",borderRadius:20,fontSize:"0.9rem",color:"#2e7d32"},children:"✅ บันทึกอัตโนมัติ"})]}),y.jsxs("div",{style:{background:q.all&&q.all.length>0?"#e8f5e8":"#f0f4f8",borderRadius:10,padding:16,margin:"16px auto",maxWidth:1200,border:q.all&&q.all.length>0?"2px solid #4caf50":"2px solid #e0e0e0"},children:[y.jsxs("h3",{style:{color:"#2e7d32",marginBottom:12},children:["📊 ข้อมูลที่บันทึกแล้วในวันที่ ",ue]}),y.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:12},children:[y.jsxs("div",{style:{color:"#1976d2"},children:[y.jsx("strong",{children:"เบิกทั้งหมด:"})," ",((mn=q.summary)==null?void 0:mn.totalBorrowed)||0," คน"]}),y.jsxs("div",{style:{color:"#388e3c"},children:[y.jsx("strong",{children:"คืนแล้ว:"})," ",((Kr=q.summary)==null?void 0:Kr.totalReturned)||0," คน"]}),y.jsxs("div",{style:{color:"#f57c00"},children:[y.jsx("strong",{children:"ยังไม่คืน:"})," ",((wt=q.summary)==null?void 0:wt.notReturned)||0," คน"]})]}),y.jsxs("div",{style:{marginTop:16},children:[y.jsx("h4",{style:{color:"#1976d2",marginBottom:8},children:"รายละเอียดจาก Database:"}),y.jsx("div",{style:{maxHeight:200,overflowY:"auto",background:"white",borderRadius:6,padding:8},children:!q.all||q.all.length===0?y.jsx("div",{style:{textAlign:"center",color:"#666",padding:16},children:"ไม่มีข้อมูลในวันนี้"}):y.jsxs("table",{style:{width:"100%",fontSize:"0.9rem"},children:[y.jsx("thead",{children:y.jsxs("tr",{style:{background:"#f5f5f5"},children:[y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ชื่อ"}),y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ปืน"}),y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"เวลาเบิก"}),y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"เวลาคืน"}),y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"สถานะ"}),y.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ลบ"})]})}),y.jsx("tbody",{children:q.all.map((ie,xe)=>y.jsxs("tr",{children:[y.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ie.realname}),y.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ie.gunQRCode}),y.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:new Date(ie.borrowTime).toLocaleString("th-TH")}),y.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ie.returnTime?new Date(ie.returnTime).toLocaleString("th-TH"):"-"}),y.jsx("td",{style:{padding:8,border:"1px solid #ddd",color:ie.status==="returned"?"#388e3c":"#f57c00",fontWeight:"bold"},children:ie.status==="borrowed"?"🔴 ยังไม่คืน":"✅ คืนแล้ว"}),y.jsx("td",{style:{padding:8,border:"1px solid #ddd",textAlign:"center"},children:y.jsx("button",{onClick:()=>ve(ie.id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:"0.8rem"},children:"🗑️ ลบ"})})]},xe))})]})})]}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginTop:8},children:["💡 ข้อมูลนี้ดึงมาจาก Database",q.all&&q.all.length>0?` (มี ${q.all.length} รายการ)`:" (ยังไม่มีข้อมูลบันทึก)"]})]}),y.jsxs("div",{style:{background:"#f0f4f8",borderRadius:10,padding:16,margin:"16px auto",maxWidth:1200,textAlign:"center"},children:[y.jsx("h3",{style:{color:"#1976d2",marginBottom:12},children:"📅 ดูข้อมูลจาก Database"}),y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:16},children:[y.jsx("label",{style:{fontWeight:"500"},children:"เลือกวันที่:"}),y.jsx("input",{type:"date",value:ue,onChange:ie=>Ot(ie.target.value),style:{padding:"8px 12px",borderRadius:6,border:"1px solid #d1d9e6",fontSize:"1rem"}})]}),q.all&&q.all.length>0&&y.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:16},children:[y.jsxs("button",{onClick:Se,style:{background:"#d32f2f",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:["🗑️ ลบข้อมูลทั้งวันที่ ",ue]}),y.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:8},children:"⚠️ การลบจะไม่สามารถกู้คืนได้"})]})]})]}),y.jsxs("div",{className:"gun-borrowing-list-row",children:[y.jsxs("div",{className:"gun-borrowing-list-card",children:[y.jsx("h2",{children:"รายการเบิกอาวุธ"}),y.jsxs("p",{children:["จำนวนการเบิก: ",y.jsx("b",{children:Pe().length})]}),Pe().length===0?y.jsx("p",{className:"text-center mt-4",children:"No borrow records available"}):y.jsx("div",{className:"table-wrapper",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"User Name"}),y.jsx("th",{children:"Gun QR Code"}),y.jsx("th",{children:"Time"})]})}),y.jsx("tbody",{children:Pe().map((ie,xe)=>y.jsxs("tr",{children:[y.jsx("td",{children:ie.realname}),y.jsx("td",{children:ie.gunQRCode}),y.jsx("td",{children:ie.time})]},xe))})]})})]}),y.jsxs("div",{className:"gun-borrowing-list-card",children:[y.jsx("h2",{children:"รายการส่งคืนอาวุธ"}),y.jsxs("p",{children:["จำนวนการส่งคืน: ",y.jsx("b",{children:Fe().length})]}),Fe().length===0?y.jsx("p",{className:"text-center mt-4",children:"No users scanned both QR codes twice"}):y.jsx("div",{className:"table-wrapper",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"User Name"}),y.jsx("th",{children:"Gun QR Code"}),y.jsx("th",{children:"Time"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:Fe().map((ie,xe)=>y.jsxs("tr",{children:[y.jsx("td",{children:ie.realname}),y.jsx("td",{children:ie.gunQRCode}),y.jsx("td",{children:ie.time}),y.jsx("td",{className:"status-returned",children:"✅"})]},xe))})]})})]}),y.jsxs("div",{className:"gun-borrowing-list-card",children:[y.jsx("h2",{children:"รายชื่อที่ยังไม่ได้คืน"}),y.jsxs("p",{children:["จำนวน: ",y.jsx("b",{children:_e().length})]}),_e().length===0?y.jsx("p",{className:"text-center mt-4",children:"ไม่มีข้อมูล"}):y.jsx("div",{className:"table-wrapper",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"User Name"}),y.jsx("th",{children:"Gun QR Code"}),y.jsx("th",{children:"Time"})]})}),y.jsx("tbody",{children:_e().map((ie,xe)=>y.jsxs("tr",{children:[y.jsx("td",{children:ie.realname}),y.jsx("td",{children:ie.gunQRCode}),y.jsx("td",{children:ie.time})]},xe))})]})})]})]})]})}const tb="/assets/logo-9e493622.jpeg";var Gy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mp=fi.createContext&&fi.createContext(Gy),nb=["attr","size","title"];function rb(e,t){if(e==null)return{};var n=ib(e,t),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)i=l[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function ib(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hc.apply(this,arguments)}function xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xp(Object(n),!0).forEach(function(i){sb(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function sb(e,t,n){return t=ob(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ob(e){var t=ab(e,"string");return typeof t=="symbol"?t:t+""}function ab(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yy(e){return e&&e.map((t,n)=>fi.createElement(t.tag,gc({key:n},t.attr),Yy(t.child)))}function Xy(e){return t=>fi.createElement(lb,hc({attr:gc({},e.attr)},t),Yy(e.child))}function lb(e){var t=n=>{var{attr:i,size:a,title:l}=e,f=rb(e,nb),g=a||n.size||"1em",m;return n.className&&(m=n.className),e.className&&(m=(m?m+" ":"")+e.className),fi.createElement("svg",hc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,f,{className:m,style:gc(gc({color:e.color||n.color},n.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),l&&fi.createElement("title",null,l),e.children)};return mp!==void 0?fi.createElement(mp.Consumer,null,n=>t(n)):t(Gy)}function cb(e){return Xy({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09.016.016.032.016.032.032.144.112.288.224.448.336.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16.144-.111.304-.223.448-.335.016-.016.032-.016.032-.032 1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816.24-.24.528-.463.816-.639.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023.144-.32.336-.607.576-.847.24-.24.528-.431.848-.575.32-.144.672-.208 1.024-.208.368 0 .704.064 1.024.208.32.144.608.336.848.575.24.24.432.528.576.847.144.32.208.672.208 1.023 0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848 2.84 2.84 0 0 1-.848.575 2.715 2.715 0 0 1-2.064 0 2.84 2.84 0 0 1-.848-.575 2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406 4.883 4.883 0 0 0-1.088-1.135 5.207 5.207 0 0 0-1.04-.608 2.82 2.82 0 0 0 .464-.383 4.2 4.2 0 0 0 .624-.784 3.624 3.624 0 0 0 .528-1.934 3.71 3.71 0 0 0-.288-1.47 3.799 3.799 0 0 0-.816-1.199 3.845 3.845 0 0 0-1.2-.8 3.72 3.72 0 0 0-1.472-.287 3.72 3.72 0 0 0-1.472.288 3.631 3.631 0 0 0-1.2.815 3.84 3.84 0 0 0-.8 1.199 3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007.096.336.224.64.4.927.16.288.384.544.624.784.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"},child:[]}]})(e)}function ub(e){return Xy({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14 5H2V3h12v2zm0 4H2V7h12v2zM2 13h12v-2H2v2z"},child:[]}]})(e)}function db(){var G;const[e,t]=D.useState(""),[n,i]=D.useState(""),[a,l]=D.useState(""),[f,g]=D.useState(""),[m,p]=D.useState(""),[C,E]=D.useState(!1),[S,R]=D.useState(!1),O=Qr(),_=Mr(),j=D.useRef(null),N=D.useRef(null),b=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];D.useEffect(()=>{const q=localStorage.getItem("token");!q&&_.pathname!=="/login"&&_.pathname!=="/register"?O("/login"):q&&fetch(`/api/user/${q}`).then(ge=>ge.json()).then(ge=>{ge.data&&(t(ge.data.realname),i(ge.data.userid),l(ge.data.blood),g(ge.data.major),ge.data.profileImage?p(`data:image/jpeg;base64,${ge.data.profileImage}`):p(""))})},[O,_]);const I=()=>{E(q=>(q||R(!1),!q))},P=()=>{R(q=>(q||E(!1),!q))},F=()=>{localStorage.removeItem("token"),E(!1),O("/login")},W=()=>{O("/")},B=()=>{E(!1),O("/edit-profile")},H=()=>{E(!1),O("/view-profile")};return D.useEffect(()=>{function q(ge){j.current&&!j.current.contains(ge.target)&&N.current&&!N.current.contains(ge.target)&&(E(!1),R(!1))}return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[]),y.jsxs("nav",{className:"navbar bg-white text-black shadow-md border-b border-gray-300 flex items-center justify-between px-4 py-2",children:[y.jsx("div",{className:"flex items-center",children:y.jsxs("span",{className:"btn btn-ghost normal-case text-xl text-black flex items-center cursor-pointer",onClick:W,children:[y.jsx("img",{src:tb,alt:"Logo",className:"logo-img"}),y.jsx("span",{className:"ml-2",children:"CRMA"})]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs("div",{ref:N,className:"relative",children:[y.jsx("button",{className:"btn btn-ghost",onClick:P,children:y.jsx(ub,{size:28})}),y.jsx(sc,{children:S&&y.jsxs(lc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.18},className:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-md z-50 dropdown-content show",children:[y.jsx("p",{className:"block px-4 py-2 text-black cursor-pointer hover:bg-gray-200",onClick:()=>{R(!1),O("/gun-borrowing")},children:"เบิก / คืน อาวุธปืน"}),y.jsx("p",{className:"block px-4 py-2 text-black cursor-pointer hover:bg-gray-200",onClick:()=>{R(!1),O("/behavior-point")},children:"ตัดคะแนนความประพฤติ"}),y.jsx("p",{className:"block px-4 py-2 text-black cursor-pointer hover:bg-gray-200",onClick:()=>{R(!1),O("/summary")},children:"เช็คใบยอด"})]})})]}),y.jsxs("div",{ref:j,className:"relative",children:[y.jsx("button",{className:"btn btn-ghost",onClick:I,children:y.jsx(cb,{size:28})}),y.jsx(sc,{children:C&&y.jsxs(lc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.18},className:"dropdown-content show absolute right-0 mt-2 w-52 bg-white border border-gray-300 rounded shadow-md z-50 p-4",children:[m?y.jsx("img",{src:m,alt:"Profile",className:"dropdown-profile-img mb-2 rounded-full w-16 h-16 object-cover mx-auto"}):y.jsx("div",{className:"dropdown-profile-img mb-2 rounded-full w-16 h-16 bg-gray-300 mx-auto flex items-center justify-center text-gray-600",children:"No Image"}),y.jsxs("p",{children:[y.jsx("strong",{children:"ชื่อ:"})," ",e]}),y.jsxs("p",{children:[y.jsx("strong",{children:"User ID:"})," ",n]}),y.jsxs("p",{children:[y.jsx("strong",{children:"สาขา:"})," ",((G=b.find(q=>q.value===f))==null?void 0:G.label)||f]}),y.jsxs("div",{className:"mt-3 space-y-1",children:[y.jsx("p",{className:"btn btn-ghost text-left w-full edit-profile-item",onClick:B,children:"Edit Profile"}),y.jsx("p",{className:"btn btn-ghost text-left w-full view-profile-item",onClick:H,children:"View Profile"}),y.jsx("p",{className:"btn btn-ghost text-left w-full logout-item",onClick:F,children:"Logout"})]})]})})]})]})]})}function fb(){const[e,t]=D.useState([]),[n,i]=D.useState(!1),[a,l]=D.useState([]),[f,g]=D.useState(null),[m,p]=D.useState(""),[C,E]=D.useState([]),[S,R]=D.useState(""),[O,_]=D.useState(""),[j,N]=D.useState(""),[b,I]=D.useState(""),[P,F]=D.useState(""),[W,B]=D.useState(""),[H,G]=D.useState({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),[q,ge]=D.useState([{key:"",value:"",names:[""],counted:!0}]),[ue,Ee]=D.useState({}),[Ne,V]=D.useState({}),[se,oe]=D.useState(null),[J,he]=D.useState({}),[le,De]=D.useState(!1),[Oe,ct]=D.useState(null),[Ze,Ht]=D.useState(null),[fe,Re]=D.useState(!1),[st,Ot]=D.useState(""),[ve,Se]=D.useState("success"),Ye="",K=(Y,ne="success")=>{Ot(Y),Se(ne),Re(!0)},Pe=()=>{Re(!1)};D.useEffect(()=>{console.log("API URL:",Ye),fetch("/api/summary").then(Y=>Y.json()).then(Y=>{t(Y.data||[])})},[]),D.useEffect(()=>{if(console.log("User สังกัด:",{userBattalion:j,userCompany:b}),console.log("Summaries:",e),j&&b&&e.length>0){const Y=e.filter(ne=>(console.log("Comparing:",{summaryBattalion:ne.battalion,userBattalion:j,summaryCompany:ne.company,userCompany:b,match:Number(ne.battalion)===Number(j)&&Number(ne.company)===Number(b)}),Number(ne.battalion)===Number(j)&&Number(ne.company)===Number(b)));console.log("Filtered summaries:",Y),E(Y)}else E(e)},[j,b,e]),D.useEffect(()=>{const Y=localStorage.getItem("token");fetch("/api/user/me",{headers:{Authorization:`Bearer ${Y}`}}).then(ne=>ne.json()).then(ne=>{if(ne.data&&(R(ne.data.realname||""),_(ne.data.year||""),N(ne.data.battalion||""),I(ne.data.company||""),F(ne.data.platoon||""),B(ne.data.squad||"")),ne.data&&ne.data.other)try{const pe=typeof ne.data.other=="string"?JSON.parse(ne.data.other):ne.data.other;l(Array.isArray(pe)?pe.map(Te=>({...Te,value:Number(Te.value)||1})):[]);const ee={};(Array.isArray(pe)?pe:[]).forEach((Te,Ie)=>{ee[Ie]=!0}),g(ee)}catch{l([]),g({})}})},[]);const Fe=Y=>{g(Y)},_e=Y=>{p(Y.target.value)},Ve=async()=>{var hr,ao;if(!m){K("กรุณาเลือกใบยอดที่ต้องการลงยอด","error");return}if(f==null){K("กรุณาเลือกรายการจำหน่ายอย่างน้อย 1 รายการ","error");return}const Y=C.find(Un=>String(Un.id)===String(m));if(!Y){K("ไม่พบใบยอดที่เลือก กรุณาลองใหม่อีกครั้ง","error");return}let ne={};try{ne=Y.other?JSON.parse(Y.other):{}}catch{K("เกิดข้อผิดพลาดในการอ่านข้อมูลใบยอด","error");return}const pe={...ne},ee=S&&O?`${S}(${O})`:S||"";if(!ee){K("ไม่พบข้อมูลชื่อผู้ใช้ กรุณาตรวจสอบโปรไฟล์ของคุณ","error");return}let Te=!1;if(Object.values(ne).forEach(Un=>{Array.isArray(Un.names)&&Un.names.includes(ee)&&(Te=!0)}),Te){K("คุณได้ส่งยอดจำหน่ายในใบนี้ไปแล้ว","error");return}const Ie=a[f];if(!Ie||!Ie.key){K("ไม่พบรายการจำหน่ายที่เลือก กรุณาลองใหม่อีกครั้ง","error");return}const He=Number((hr=ne[Ie.key])==null?void 0:hr.count)||0,Fn=Number(Ie.value)||1,oo=Array.isArray((ao=ne[Ie.key])==null?void 0:ao.names)?ne[Ie.key].names:[],_a=ee?[ee]:[],qe=Array.from(new Set([...oo,..._a].filter(Boolean)));pe[Ie.key]={count:He+Fn,names:qe};try{const Un=await fetch(`/api/summary?id=${Y.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,other:pe})});if(Un.ok)K("ส่งยอดจำหน่ายสำเร็จ! 🎉","success"),p(""),g(null),fetch("/api/summary").then(Bt=>Bt.json()).then(Bt=>{if(t(Bt.data||[]),j&&b){const lo=(Bt.data||[]).filter(jt=>Number(jt.battalion)===Number(j)&&Number(jt.company)===Number(b));E(lo)}else E(Bt.data||[])}),i(!1);else{const Bt=await Un.json();K("เกิดข้อผิดพลาดในการส่งยอด: "+(Bt.message||"กรุณาลองใหม่อีกครั้ง"),"error")}}catch(Un){console.error("Error:",Un),K("เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ต","error")}},je=Y=>G({...H,[Y.target.name]:Y.target.value}),ze=Number(H.total)||0,It=q.reduce((Y,ne)=>ne.counted!==!1?Y+(Number(ne.value)||0):Y,0),me=ze-It,tn=["5","4","3","2","1"].reduce((Y,ne)=>(Y[ne]=Number(H[`total_year_${ne}`])||0,Y),{});Object.values(tn).reduce((Y,ne)=>Y+ne,0);const ns=Y=>{G({date:Y.date,time:Y.time,battalion:String(Y.battalion),company:String(Y.company),total:String(Y.total),note:Y.note||"",other:"",total_year_5:Y.total_year_5||"",total_year_4:Y.total_year_4||"",total_year_3:Y.total_year_3||"",total_year_2:Y.total_year_2||"",total_year_1:Y.total_year_1||""});try{const ne=JSON.parse(Y.other);ge(Object.entries(ne).map(([pe,ee])=>({key:pe,value:ee.count,names:ee.names&&Array.isArray(ee.names)?ee.names:[""],counted:ee.counted!==!1})))}catch{ge([{key:"",value:"",names:[""],counted:!0}])}oe(Y.id),window.scrollTo({top:0,behavior:"smooth"})},mn=async Y=>{window.confirm("ต้องการลบข้อมูลนี้ใช่หรือไม่?")&&(await fetch(`/api/summary?id=${Y}`,{method:"DELETE"}),t(ne=>ne.filter(pe=>pe.id!==Y)))},Kr=async Y=>{if(Y.preventDefault(),!H.date){K("กรุณาเลือกวันที่","error");return}if(!H.time){K("กรุณากรอกเวลา","error");return}if(!H.battalion){K("กรุณาเลือกกองพัน","error");return}if(!H.company){K("กรุณาเลือกกองร้อย","error");return}if(!H.total||Number(H.total)<=0){K("กรุณากรอกจำนวนคนทั้งหมดที่ถูกต้อง","error");return}if(!H.note){K("กรุณากรอกชื่อตัวแทนชั้น","error");return}const ne={};q.forEach(Ie=>{Ie.key&&(ne[Ie.key]={count:Ie.value,names:Ie.names.filter(He=>He),counted:Ie.counted!==!1})});const pe=se?"PUT":"POST",ee=se?`/api/summary?id=${se}`:"/api/summary",Te={...H,battalion:Number(H.battalion),company:Number(H.company),total:Number(H.total),other:ne,total_year_5:H.total_year_5,total_year_4:H.total_year_4,total_year_3:H.total_year_3,total_year_2:H.total_year_2,total_year_1:H.total_year_1};try{const He=await(await fetch(ee,{method:pe,headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)})).json();He.success?(se?(t(e.map(Fn=>Fn.id===se?He.data:Fn)),oe(null),K("แก้ไขข้อมูลสำเร็จ! ✅","success")):(t([He.data,...e]),K("บันทึกใบยอดสำเร็จ! 🎉","success")),G({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),ge([{key:"",value:"",names:[""],counted:!0}])):K("เกิดข้อผิดพลาด: "+(He.message||"ไม่สามารถบันทึกข้อมูลได้"),"error")}catch(Ie){console.error("Error:",Ie),K("เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาลองใหม่อีกครั้ง","error")}},wt={};e.forEach(Y=>{wt[Y.battalion]||(wt[Y.battalion]={}),wt[Y.battalion][Y.company]||(wt[Y.battalion][Y.company]=[]),wt[Y.battalion][Y.company].push(Y)});const ie=Y=>{Ee(ne=>({...ne,[Y]:!ne[Y]}))},xe=(Y,ne)=>{V(pe=>({...pe,[`${Y}-${ne}`]:!pe[`${Y}-${ne}`]}))},Ae=(Y,ne)=>{ct(Y),Ht(ne),De(!0)},$e=async(Y,ne,pe)=>{const ee=e.find(Ie=>Ie.id===Y);if(!ee)return;let Te={};try{Te=ee.other?JSON.parse(ee.other):{}}catch{}!Te[ne]||!Array.isArray(Te[ne].names)||(Te[ne].names=Te[ne].names.filter(Ie=>Ie!==pe),Te[ne].names.length===0&&delete Te[ne],await fetch(`/api/summary?id=${Y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ee,other:Te})}),t(Ie=>Ie.map(He=>He.id===Y?{...He,other:JSON.stringify(Te)}:He)),Object.keys(Te).length===0?De(!1):ct(Te))};return y.jsx("div",{className:"summary-bg",children:y.jsxs("div",{className:"summary-container",children:[y.jsx("h1",{className:"summary-title",children:"ระบบสรุปยอดจำหน่าย"}),y.jsxs("div",{className:"summary-card",children:[y.jsx("h4",{className:"summary-section-title",children:"สถานะการส่งยอดจำหน่ายของคุณ"}),j&&b?y.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"12px"},children:["📍 แสดงเฉพาะใบยอดของ กองพัน ",j," กองร้อย ",b]}):y.jsx("p",{style:{color:"#ff9800",fontSize:"0.9rem",marginBottom:"12px"},children:"⚠️ กรุณากรอกข้อมูลสังกัด (กองพัน/กองร้อย) เพื่อแสดงใบยอดที่เกี่ยวข้อง"}),y.jsx("div",{className:"table-wrapper",children:y.jsxs("table",{className:"summary-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"วันที่"}),y.jsx("th",{children:"เวลา"}),y.jsx("th",{children:"สถานะ"}),y.jsx("th",{children:"รายการที่ส่ง"})]})}),y.jsx("tbody",{children:C.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:4,style:{textAlign:"center",color:"#666",padding:"20px"},children:j&&b?`ไม่มีใบยอดสำหรับ กองพัน ${j} กองร้อย ${b}`:"ไม่มีข้อมูลใบยอด กรุณากรอกข้อมูลสังกัดด้านล่าง"})}):C.map(Y=>{let ne=!1,pe=[];try{const ee=Y.other?JSON.parse(Y.other):{},Te=S&&O?`${S}(${O})`:S||"";Object.entries(ee).forEach(([Ie,He])=>{Array.isArray(He.names)&&He.names.includes(Te)&&(ne=!0,pe.push(Ie))})}catch{}return y.jsxs("tr",{children:[y.jsx("td",{children:Y.date}),y.jsx("td",{children:Y.time}),y.jsx("td",{children:ne?y.jsx("span",{className:"status-sent",children:"ส่งจำหน่ายแล้ว"}):y.jsx("span",{className:"status-not-sent",children:"ยังไม่ได้ส่ง"})}),y.jsx("td",{children:pe.length>0?pe.map((ee,Te)=>y.jsxs("span",{children:[ee,Te<pe.length-1?", ":""]},ee)):"-"})]},Y.id)})})]})})]}),y.jsxs("div",{style:{marginBottom:32,border:"2px solid #007bff",borderRadius:8,padding:16,background:"#f8faff"},children:[y.jsx("h3",{style:{color:"#007bff"},children:"ส่งยอดจำหน่าย (สำหรับผู้ใช้ทั่วไป)"}),n?y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:8},children:[y.jsx("b",{children:"เลือกใบยอดที่ต้องการลงยอด:"}),y.jsxs("select",{value:m,onChange:_e,style:{marginLeft:8},children:[y.jsx("option",{value:"",children:"-- เลือกใบยอด --"}),C.map(Y=>y.jsxs("option",{value:Y.id,children:[Y.date," | ",Y.time]},Y.id))]})]}),y.jsxs("div",{style:{marginBottom:8},children:[y.jsx("b",{children:"รายการจำหน่ายของคุณ:"}),a.length===0&&y.jsx("div",{style:{color:"#888"},children:"ไม่มีรายการจำหน่าย"}),a.map((Y,ne)=>{let pe=!1;if(m){const ee=C.find(Te=>String(Te.id)===String(m));if(ee)try{const Te=ee.other?JSON.parse(ee.other):{},Ie=S&&O?`${S}(${O})`:S||"";Te[Y.key]&&Array.isArray(Te[Y.key].names)&&Te[Y.key].names.includes(Ie)&&(pe=!0)}catch{}}return y.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4,alignItems:"center"},children:[y.jsx("input",{type:"checkbox",checked:f===ne,onChange:()=>Fe(ne),style:{marginRight:4},disabled:pe}),y.jsxs("span",{style:{flex:2},children:[Y.key,pe&&y.jsx("span",{style:{color:"#1976d2",fontWeight:500,marginLeft:8},children:"(คุณส่งยอดนี้แล้ว)✅"})]}),y.jsxs("span",{style:{flex:1},children:["จำนวน ",Y.value]})]},ne)})]}),y.jsxs("div",{style:{display:"flex",gap:8},children:[y.jsx("button",{className:"btn btn-primary",style:{marginBottom:0},onClick:Ve,children:"ส่งยอดจำหน่าย"}),y.jsx("button",{type:"button",className:"btn",style:{marginBottom:0,background:"#eee",color:"#333"},onClick:()=>{p(""),g(null),i(!1)},children:"ยกเลิก"})]})]}):y.jsx("button",{className:"btn btn-primary",onClick:()=>i(!0),style:{marginBottom:0},children:"+ เพิ่มส่งยอดจำหน่าย"})]}),y.jsx("h2",{children:"สร้างใบยอด(สำหรับตัวแทนชั้น)"}),y.jsxs("form",{className:"summary-form",onSubmit:Kr,style:{marginBottom:32},children:[y.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[y.jsxs("select",{name:"battalion",value:H.battalion,onChange:je,required:!0,children:[y.jsx("option",{value:"",children:"เลือกกองพัน"}),y.jsx("option",{value:"1",children:"กองพัน 1"}),y.jsx("option",{value:"2",children:"กองพัน 2"}),y.jsx("option",{value:"3",children:"กองพัน 3"}),y.jsx("option",{value:"4",children:"กองพัน 4"})]}),y.jsxs("select",{name:"company",value:H.company,onChange:je,required:!0,children:[y.jsx("option",{value:"",children:"เลือกกองร้อย"}),y.jsx("option",{value:"1",children:"กองร้อย 1"}),y.jsx("option",{value:"2",children:"กองร้อย 2"}),y.jsx("option",{value:"3",children:"กองร้อย 3"})]})]}),y.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:y.jsxs("div",{style:{flex:1},children:[y.jsx("b",{children:"วันที่ :"}),y.jsxs("div",{style:{position:"relative",display:"inline-block",width:"100%"},children:[y.jsx("input",{name:"date",type:"date",value:H.date,onChange:je,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",background:"white",cursor:"pointer",colorScheme:"light"},onFocus:Y=>Y.target.showPicker&&Y.target.showPicker()}),!H.date&&y.jsx("div",{style:{position:"absolute",top:"50%",left:"12px",transform:"translateY(-50%)",color:"#999",pointerEvents:"none",fontSize:"14px"},children:"เลือกวันที่"})]})]})}),y.jsxs("div",{style:{flex:1},children:[y.jsx("b",{children:"เวลา :"}),y.jsx("input",{name:"time",type:"text",placeholder:"เช่น 0530, 0700, 0800, 1800, 2100",value:H.time,onChange:je,required:!0,style:{width:"100%"}})]}),y.jsxs("div",{style:{margin:"16px 0",padding:12,border:"1px solid #eee",borderRadius:8,background:"#f9f9f9"},children:[y.jsx("b",{children:"จำนวนคนทั้งหมด (แยกชั้นปี):"}),y.jsx("div",{className:"summary-year-row",children:["5","4","3","2","1"].map(Y=>y.jsxs("div",{className:"summary-year-col",children:[y.jsxs("label",{children:["ชั้น ",Y,":"]}),y.jsx("input",{type:"number",min:"0",value:H[`total_year_${Y}`]||"",onChange:ne=>G(pe=>({...pe,[`total_year_${Y}`]:ne.target.value})),placeholder:`ชั้น ${Y}`})]},Y))}),y.jsxs("div",{style:{marginTop:8},children:[y.jsx("b",{children:"รวมทั้งหมด:"})," ",["5","4","3","2","1"].reduce((Y,ne)=>Y+(Number(H[`total_year_${ne}`])||0),0)]})]}),y.jsx("input",{name:"total",type:"number",placeholder:"จำนวนคนทั้งหมด",value:H.total,onChange:je,required:!0,style:{marginBottom:8,width:"100%"}}),y.jsx("div",{style:{marginBottom:8},children:y.jsxs("div",{className:`remain ${me<0?"negative":"positive"}`,children:[y.jsx("b",{children:"ยอดที่เหลือ:"})," ",me]})}),y.jsx("input",{name:"note",placeholder:"ชื่อตัวแทนชั้น (ชั้นปี)",value:H.note,onChange:je,style:{marginBottom:8,width:"100%"}}),y.jsx("button",{type:"submit",children:se?"บันทึกการแก้ไข":"บันทึกยอด"}),se&&y.jsx("button",{type:"button",onClick:()=>{oe(null),G({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),ge([{key:"",value:"",names:[""],counted:!0}])},children:"ยกเลิก"})]}),y.jsx("h3",{children:"ผลลัพธ์ยอด (แยกตามกองพัน/กองร้อย)"}),Object.keys(wt).sort().map(Y=>y.jsxs("div",{style:{marginBottom:24},children:[y.jsxs("button",{type:"button",className:"summary-accordion-btn",onClick:()=>ie(Y),children:[ue[Y]?"▼":"►"," กองพัน ",Y]}),ue[Y]&&y.jsx("div",{children:Object.keys(wt[Y]).sort().map(ne=>y.jsxs("div",{style:{marginBottom:12,marginLeft:24},children:[y.jsxs("button",{type:"button",className:"summary-company-btn",onClick:()=>xe(Y,ne),children:[Ne[`${Y}-${ne}`]?"▼":"►"," กองร้อย ",ne]}),Ne[`${Y}-${ne}`]&&y.jsx("div",{className:"table-wrapper",children:y.jsxs("table",{className:"summary-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"วันที่"}),y.jsx("th",{children:"เวลา"}),y.jsx("th",{children:"ทั้งหมด"}),y.jsx("th",{children:"จำหน่าย"}),y.jsx("th",{children:"ยอดที่เหลือ"}),y.jsx("th",{children:"ตัวแทนชั้น"}),y.jsx("th",{children:"แก้ไข"})]})}),y.jsx("tbody",{children:wt[Y][ne].map(pe=>{let ee=Number(pe.total)||0,Te={};try{Te=JSON.parse(pe.other),ee-=Object.entries(Te).reduce((Ie,[He,Fn])=>J[pe.id]&&J[pe.id][He]?Ie:Ie+(Number(Fn.count)||0),0)}catch{}return y.jsxs("tr",{children:[y.jsx("td",{"data-label":"วันที่",children:pe.date}),y.jsx("td",{"data-label":"แถวกี่โมง",children:pe.time}),y.jsx("td",{"data-label":"ทั้งหมด",children:pe.total}),y.jsx("td",{"data-label":"จำหน่าย",className:"summary-sale-cell",children:Te&&Object.entries(Te).length>0?y.jsx("button",{type:"button",className:"summary-view-btn",onClick:()=>Ae(Te,pe.id),children:"ดูรายการจำหน่าย"}):y.jsx("span",{className:"summary-no-data",children:"-"})}),y.jsx("td",{"data-label":"ยอดที่เหลือ",children:y.jsx("span",{className:ee<0?"summary-remain-negative":"summary-remain-positive",children:ee})}),y.jsx("td",{"data-label":"ตัวแทนชั้น",children:pe.note}),y.jsxs("td",{"data-label":"แก้ไข",children:[y.jsx("button",{type:"button",className:"summary-edit-btn",onClick:()=>ns(pe),children:"แก้ไข"}),y.jsx("button",{type:"button",className:"summary-delete-btn",onClick:()=>mn(pe.id),title:"ลบ",children:"ลบ"})]})]},pe.id)})})]})})]},ne))})]},Y)),le&&y.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>De(!1),children:y.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:24,minWidth:260,maxWidth:350,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",position:"relative"},onClick:Y=>Y.stopPropagation(),children:[y.jsx("h4",{style:{marginTop:0},children:"รายการจำหน่าย"}),y.jsx("div",{children:Oe&&Object.keys(Oe).length>0?Object.entries(Oe).map(([Y,ne])=>y.jsxs("div",{style:{marginBottom:12},children:[y.jsxs("div",{style:{fontWeight:600,marginBottom:2},children:[Y," : ",ne.count]}),y.jsx("ul",{style:{paddingLeft:18,margin:0},children:Array.isArray(ne.names)&&ne.names.length>0?ne.names.map((pe,ee)=>y.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[y.jsx("span",{style:{flex:1},children:pe}),y.jsx("button",{style:{marginLeft:8,background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 10px",fontSize:"0.92em",cursor:"pointer"},onClick:()=>$e(Ze,Y,pe),children:"ลบ"})]},pe)):y.jsx("li",{style:{color:"#888"},children:"ไม่มีชื่อผู้ใช้"})})]},Y)):y.jsx("div",{style:{color:"#888"},children:"ไม่มีรายการ"})}),y.jsx("button",{style:{marginTop:16,background:"#1976d2",color:"#fff",border:"none",borderRadius:4,padding:"4px 16px",cursor:"pointer"},onClick:()=>De(!1),children:"ปิด"})]})}),fe&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:y.jsxs("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"15px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)",textAlign:"center",maxWidth:"400px",margin:"20px",border:`3px solid ${ve==="success"?"#4CAF50":"#f44336"}`},children:[y.jsx("div",{style:{fontSize:"3rem",marginBottom:"15px"},children:ve==="success"?"✅":"❌"}),y.jsx("h3",{style:{margin:"0 0 15px 0",color:ve==="success"?"#4CAF50":"#f44336",fontSize:"1.3rem"},children:ve==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),y.jsx("p",{style:{margin:"0 0 25px 0",color:"#666",fontSize:"1.1rem",lineHeight:"1.5"},children:st}),y.jsx("button",{onClick:Pe,style:{backgroundColor:ve==="success"?"#4CAF50":"#f44336",color:"white",border:"none",padding:"12px 30px",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"500",cursor:"pointer",minWidth:"100px",transition:"all 0.3s ease"},onMouseOver:Y=>Y.target.style.opacity="0.9",onMouseOut:Y=>Y.target.style.opacity="1",children:"ตกลง"})]})})]})})}function hb(){const e=Mr(),t=e.pathname==="/login"||e.pathname==="/register";return y.jsxs(y.Fragment,{children:[!t&&y.jsx(db,{}),y.jsxs(ev,{children:[y.jsx(Yn,{path:"/",element:y.jsx(Li,{children:y.jsx(CT,{})})}),y.jsx(Yn,{path:"/users",element:y.jsx(Li,{children:y.jsx(AT,{})})}),y.jsx(Yn,{path:"/login",element:y.jsx(vT,{})}),y.jsx(Yn,{path:"/register",element:y.jsx(ST,{})}),y.jsx(Yn,{path:"/behavior-point",element:y.jsx(TT,{})}),y.jsx(Yn,{path:"/DeductPoint",element:y.jsx(Li,{children:y.jsx(IT,{})})}),y.jsx(Yn,{path:"/edit-profile",element:y.jsx(Li,{children:y.jsx(bT,{})})}),y.jsx(Yn,{path:"/view-profile",element:y.jsx(Li,{children:y.jsx(pI,{})})}),y.jsx(Yn,{path:"/gun-borrowing",element:y.jsx(Li,{children:y.jsx(eb,{})})}),y.jsx(Yn,{path:"/summary",element:y.jsx(Li,{children:y.jsx(fb,{})})}),y.jsx(Yn,{path:"*",element:y.jsx("h1",{children:"404 Not Found"})})]})]})}const gb=()=>y.jsx(Tv,{children:y.jsx(hb,{})});Dx(document.getElementById("root")).render(y.jsx(fi.StrictMode,{children:y.jsx(gb,{})}));
