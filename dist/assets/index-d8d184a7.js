function Ow(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ip={exports:{}},Cc={},bp={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),Pw=Symbol.for("react.portal"),kw=Symbol.for("react.fragment"),Lw=Symbol.for("react.strict_mode"),Bw=Symbol.for("react.profiler"),jw=Symbol.for("react.provider"),Fw=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),zw=Symbol.for("react.memo"),Ww=Symbol.for("react.lazy"),R0=Symbol.iterator;function Hw(e){return e===null||typeof e!="object"?null:(e=R0&&e[R0]||e["@@iterator"],typeof e=="function"?e:null)}var Np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rp=Object.assign,Mp={};function io(e,t,n){this.props=e,this.context=t,this.refs=Mp,this.updater=n||Np}io.prototype.isReactComponent={};io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dp(){}Dp.prototype=io.prototype;function Af(e,t,n){this.props=e,this.context=t,this.refs=Mp,this.updater=n||Np}var Tf=Af.prototype=new Dp;Tf.constructor=Af;Rp(Tf,io.prototype);Tf.isPureReactComponent=!0;var M0=Array.isArray,_p=Object.prototype.hasOwnProperty,If={current:null},Op={key:!0,ref:!0,__self:!0,__source:!0};function Pp(e,t,n){var i,a={},l=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(l=""+t.key),t)_p.call(t,i)&&!Op.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var p=Array(g),m=0;m<g;m++)p[m]=arguments[m+2];a.children=p}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:ba,type:e,key:l,ref:f,props:a,_owner:If.current}}function Gw(e,t){return{$$typeof:ba,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bf(e){return typeof e=="object"&&e!==null&&e.$$typeof===ba}function Yw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var D0=/\/+/g;function du(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yw(""+e.key):t.toString(36)}function wl(e,t,n,i,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case ba:case Pw:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+du(f,0):i,M0(a)?(n="",e!=null&&(n=e.replace(D0,"$&/")+"/"),wl(a,t,n,"",function(m){return m})):a!=null&&(bf(a)&&(a=Gw(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(D0,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",M0(e))for(var g=0;g<e.length;g++){l=e[g];var p=i+du(l,g);f+=wl(l,t,n,p,a)}else if(p=Hw(e),typeof p=="function")for(e=p.call(e),g=0;!(l=e.next()).done;)l=l.value,p=i+du(l,g++),f+=wl(l,t,n,p,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Ka(e,t,n){if(e==null)return e;var i=[],a=0;return wl(e,i,"","",function(l){return t.call(n,l,a++)}),i}function Xw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gn={current:null},Cl={transition:null},Qw={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:If};function kp(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Ka,forEach:function(e,t,n){Ka(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ka(e,function(){t++}),t},toArray:function(e){return Ka(e,function(t){return t})||[]},only:function(e){if(!bf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=io;Qe.Fragment=kw;Qe.Profiler=Bw;Qe.PureComponent=Af;Qe.StrictMode=Lw;Qe.Suspense=Vw;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;Qe.act=kp;Qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Rp({},e.props),a=e.key,l=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,f=If.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(p in t)_p.call(t,p)&&!Op.hasOwnProperty(p)&&(i[p]=t[p]===void 0&&g!==void 0?g[p]:t[p])}var p=arguments.length-2;if(p===1)i.children=n;else if(1<p){g=Array(p);for(var m=0;m<p;m++)g[m]=arguments[m+2];i.children=g}return{$$typeof:ba,type:e.type,key:a,ref:l,props:i,_owner:f}};Qe.createContext=function(e){return e={$$typeof:Fw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jw,_context:e},e.Consumer=e};Qe.createElement=Pp;Qe.createFactory=function(e){var t=Pp.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:Uw,render:e}};Qe.isValidElement=bf;Qe.lazy=function(e){return{$$typeof:Ww,_payload:{_status:-1,_result:e},_init:Xw}};Qe.memo=function(e,t){return{$$typeof:zw,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=Cl.transition;Cl.transition={};try{e()}finally{Cl.transition=t}};Qe.unstable_act=kp;Qe.useCallback=function(e,t){return gn.current.useCallback(e,t)};Qe.useContext=function(e){return gn.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return gn.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return gn.current.useEffect(e,t)};Qe.useId=function(){return gn.current.useId()};Qe.useImperativeHandle=function(e,t,n){return gn.current.useImperativeHandle(e,t,n)};Qe.useInsertionEffect=function(e,t){return gn.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return gn.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return gn.current.useMemo(e,t)};Qe.useReducer=function(e,t,n){return gn.current.useReducer(e,t,n)};Qe.useRef=function(e){return gn.current.useRef(e)};Qe.useState=function(e){return gn.current.useState(e)};Qe.useSyncExternalStore=function(e,t,n){return gn.current.useSyncExternalStore(e,t,n)};Qe.useTransition=function(){return gn.current.useTransition()};Qe.version="18.3.1";bp.exports=Qe;var M=bp.exports;const xi=Tp(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=M,Zw=Symbol.for("react.element"),$w=Symbol.for("react.fragment"),qw=Object.prototype.hasOwnProperty,Jw=Kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eC={key:!0,ref:!0,__self:!0,__source:!0};function Lp(e,t,n){var i,a={},l=null,f=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)qw.call(t,i)&&!eC.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Zw,type:e,key:l,ref:f,props:a,_owner:Jw.current}}Cc.Fragment=$w;Cc.jsx=Lp;Cc.jsxs=Lp;Ip.exports=Cc;var x=Ip.exports,Bp={exports:{}},jn={},jp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,he){var ue=J.length;J.push(he);e:for(;0<ue;){var Le=ue-1>>>1,ve=J[Le];if(0<a(ve,he))J[Le]=he,J[ue]=ve,ue=Le;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ue=J.pop();if(ue!==he){J[0]=ue;e:for(var Le=0,ve=J.length,ct=ve>>>1;Le<ct;){var He=2*(Le+1)-1,Bt=J[He],fe=He+1,Ie=J[fe];if(0>a(Bt,ue))fe<ve&&0>a(Ie,Bt)?(J[Le]=Ie,J[fe]=ue,Le=fe):(J[Le]=Bt,J[He]=ue,Le=He);else if(fe<ve&&0>a(Ie,ue))J[Le]=Ie,J[fe]=ue,Le=fe;else break e}}return he}function a(J,he){var ue=J.sortIndex-he.sortIndex;return ue!==0?ue:J.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var p=[],m=[],C=1,E=null,A=3,R=!1,_=!1,P=!1,U=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(J){for(var he=n(m);he!==null;){if(he.callback===null)i(m);else if(he.startTime<=J)i(m),he.sortIndex=he.expirationTime,t(p,he);else break;he=n(m)}}function O(J){if(P=!1,S(J),!_)if(n(p)!==null)_=!0,$(V);else{var he=n(m);he!==null&&oe(O,he.startTime-J)}}function V(J,he){_=!1,P&&(P=!1,N(B),B=-1),R=!0;var ue=A;try{for(S(he),E=n(p);E!==null&&(!(E.expirationTime>he)||J&&!we());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,A=E.priorityLevel;var ve=Le(E.expirationTime<=he);he=e.unstable_now(),typeof ve=="function"?E.callback=ve:E===n(p)&&i(p),S(he)}else i(p);E=n(p)}if(E!==null)var ct=!0;else{var He=n(m);He!==null&&oe(O,He.startTime-he),ct=!1}return ct}finally{E=null,A=ue,R=!1}}var z=!1,F=null,B=-1,G=5,te=-1;function we(){return!(e.unstable_now()-te<G)}function de(){if(F!==null){var J=e.unstable_now();te=J;var he=!0;try{he=F(!0,J)}finally{he?Ee():(z=!1,F=null)}}else z=!1}var Ee;if(typeof b=="function")Ee=function(){b(de)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,j=Oe.port2;Oe.port1.onmessage=de,Ee=function(){j.postMessage(null)}}else Ee=function(){U(de,0)};function $(J){F=J,z||(z=!0,Ee())}function oe(J,he){B=U(function(){J(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){_||R||(_=!0,$(V))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(J){switch(A){case 1:case 2:case 3:var he=3;break;default:he=A}var ue=A;A=he;try{return J()}finally{A=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ue=A;A=J;try{return he()}finally{A=ue}},e.unstable_scheduleCallback=function(J,he,ue){var Le=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Le+ue:Le):ue=Le,J){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ue+ve,J={id:C++,callback:he,priorityLevel:J,startTime:ue,expirationTime:ve,sortIndex:-1},ue>Le?(J.sortIndex=ue,t(m,J),n(p)===null&&J===n(m)&&(P?(N(B),B=-1):P=!0,oe(O,ue-Le))):(J.sortIndex=ve,t(p,J),_||R||(_=!0,$(V))),J},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(J){var he=A;return function(){var ue=A;A=he;try{return J.apply(this,arguments)}finally{A=ue}}}})(Fp);jp.exports=Fp;var tC=jp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC=M,Bn=tC;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Up=new Set,ta={};function ls(e,t){Ws(e,t),Ws(e+"Capture",t)}function Ws(e,t){for(ta[e]=t,e=0;e<t.length;e++)Up.add(t[e])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rd=Object.prototype.hasOwnProperty,rC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_0={},O0={};function iC(e){return rd.call(O0,e)?!0:rd.call(_0,e)?!1:rC.test(e)?O0[e]=!0:(_0[e]=!0,!1)}function sC(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oC(e,t,n,i){if(t===null||typeof t>"u"||sC(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pn(e,t,n,i,a,l,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=f}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){en[e]=new pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];en[t]=new pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){en[e]=new pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){en[e]=new pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){en[e]=new pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){en[e]=new pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){en[e]=new pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){en[e]=new pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){en[e]=new pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nf=/[\-:]([a-z])/g;function Rf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nf,Rf);en[t]=new pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nf,Rf);en[t]=new pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nf,Rf);en[t]=new pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){en[e]=new pn(e,1,!1,e.toLowerCase(),null,!1,!1)});en.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){en[e]=new pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mf(e,t,n,i){var a=en.hasOwnProperty(t)?en[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oC(t,n,a,i)&&(n=null),i||a===null?iC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Kr=nC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Za=Symbol.for("react.element"),ws=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),Vp=Symbol.for("react.provider"),zp=Symbol.for("react.context"),_f=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),Of=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),Wp=Symbol.for("react.offscreen"),P0=Symbol.iterator;function Ao(e){return e===null||typeof e!="object"?null:(e=P0&&e[P0]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,fu;function ko(e){if(fu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);fu=t&&t[1]||""}return`
`+fu+e}var hu=!1;function gu(e,t){if(!e||hu)return"";hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=i.stack.split(`
`),f=a.length-1,g=l.length-1;1<=f&&0<=g&&a[f]!==l[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==l[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==l[g]){var p=`
`+a[f].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=f&&0<=g);break}}}finally{hu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ko(e):""}function aC(e){switch(e.tag){case 5:return ko(e.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 2:case 15:return e=gu(e.type,!1),e;case 11:return e=gu(e.type.render,!1),e;case 1:return e=gu(e.type,!0),e;default:return""}}function ad(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cs:return"Fragment";case ws:return"Portal";case id:return"Profiler";case Df:return"StrictMode";case sd:return"Suspense";case od:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zp:return(e.displayName||"Context")+".Consumer";case Vp:return(e._context.displayName||"Context")+".Provider";case _f:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Of:return t=e.displayName||null,t!==null?t:ad(e.type)||"Memo";case ci:t=e._payload,e=e._init;try{return ad(e(t))}catch{}}return null}function lC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(t);case 8:return t===Df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ii(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cC(e){var t=Hp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $a(e){e._valueTracker||(e._valueTracker=cC(e))}function Gp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Hp(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ld(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function k0(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Ii(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yp(e,t){t=t.checked,t!=null&&Mf(e,"checked",t,!1)}function cd(e,t){Yp(e,t);var n=Ii(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ud(e,t.type,n):t.hasOwnProperty("defaultValue")&&ud(e,t.type,Ii(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ud(e,t,n){(t!=="number"||Bl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Lo=Array.isArray;function Bs(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ii(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function dd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function B0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(Lo(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ii(n)}}function Xp(e,t){var n=Ii(t.value),i=Ii(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function j0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qa,Kp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function na(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uC=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(e){uC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uo[t]=Uo[e]})});function Zp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Uo.hasOwnProperty(e)&&Uo[e]?(""+t).trim():t+"px"}function $p(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=Zp(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var dC=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hd(e,t){if(t){if(dC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function gd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function Pf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var md=null,js=null,Fs=null;function F0(e){if(e=Ma(e)){if(typeof md!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Tc(t),md(e.stateNode,e.type,t))}}function qp(e){js?Fs?Fs.push(e):Fs=[e]:js=e}function Jp(){if(js){var e=js,t=Fs;if(Fs=js=null,F0(e),t)for(e=0;e<t.length;e++)F0(t[e])}}function em(e,t){return e(t)}function tm(){}var pu=!1;function nm(e,t,n){if(pu)return e(t,n);pu=!0;try{return em(e,t,n)}finally{pu=!1,(js!==null||Fs!==null)&&(tm(),Jp())}}function ra(e,t){var n=e.stateNode;if(n===null)return null;var i=Tc(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var xd=!1;if(Vr)try{var To={};Object.defineProperty(To,"passive",{get:function(){xd=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{xd=!1}function fC(e,t,n,i,a,l,f,g,p){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(C){this.onError(C)}}var Vo=!1,jl=null,Fl=!1,yd=null,hC={onError:function(e){Vo=!0,jl=e}};function gC(e,t,n,i,a,l,f,g,p){Vo=!1,jl=null,fC.apply(hC,arguments)}function pC(e,t,n,i,a,l,f,g,p){if(gC.apply(this,arguments),Vo){if(Vo){var m=jl;Vo=!1,jl=null}else throw Error(ae(198));Fl||(Fl=!0,yd=m)}}function cs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U0(e){if(cs(e)!==e)throw Error(ae(188))}function mC(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return U0(a),e;if(l===i)return U0(a),t;l=l.sibling}throw Error(ae(188))}if(n.return!==i.return)n=a,i=l;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=l;break}if(g===i){f=!0,i=a,n=l;break}g=g.sibling}if(!f){for(g=l.child;g;){if(g===n){f=!0,n=l,i=a;break}if(g===i){f=!0,i=l,n=a;break}g=g.sibling}if(!f)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function im(e){return e=mC(e),e!==null?sm(e):null}function sm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sm(e);if(t!==null)return t;e=e.sibling}return null}var om=Bn.unstable_scheduleCallback,V0=Bn.unstable_cancelCallback,xC=Bn.unstable_shouldYield,yC=Bn.unstable_requestPaint,Lt=Bn.unstable_now,wC=Bn.unstable_getCurrentPriorityLevel,kf=Bn.unstable_ImmediatePriority,am=Bn.unstable_UserBlockingPriority,Ul=Bn.unstable_NormalPriority,CC=Bn.unstable_LowPriority,lm=Bn.unstable_IdlePriority,Ec=null,Ir=null;function EC(e){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Ec,e,void 0,(e.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:AC,vC=Math.log,SC=Math.LN2;function AC(e){return e>>>=0,e===0?32:31-(vC(e)/SC|0)|0}var Ja=64,el=4194304;function Bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vl(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=Bo(g):(l&=f,l!==0&&(i=Bo(l)))}else f=n&~a,f!==0?i=Bo(f):l!==0&&(i=Bo(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-ur(t),a=1<<n,i|=e[n],t&=~a;return i}function TC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IC(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var f=31-ur(l),g=1<<f,p=a[f];p===-1?(!(g&n)||g&i)&&(a[f]=TC(g,t)):p<=t&&(e.expiredLanes|=g),l&=~g}}function wd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cm(){var e=Ja;return Ja<<=1,!(Ja&4194240)&&(Ja=64),e}function mu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Na(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ur(t),e[t]=n}function bC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ur(n),l=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~l}}function Lf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ur(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var st=0;function um(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dm,Bf,fm,hm,gm,Cd=!1,tl=[],yi=null,wi=null,Ci=null,ia=new Map,sa=new Map,di=[],NC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z0(e,t){switch(e){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(t.pointerId)}}function Io(e,t,n,i,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Ma(t),t!==null&&Bf(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function RC(e,t,n,i,a){switch(t){case"focusin":return yi=Io(yi,e,t,n,i,a),!0;case"dragenter":return wi=Io(wi,e,t,n,i,a),!0;case"mouseover":return Ci=Io(Ci,e,t,n,i,a),!0;case"pointerover":var l=a.pointerId;return ia.set(l,Io(ia.get(l)||null,e,t,n,i,a)),!0;case"gotpointercapture":return l=a.pointerId,sa.set(l,Io(sa.get(l)||null,e,t,n,i,a)),!0}return!1}function pm(e){var t=Xi(e.target);if(t!==null){var n=cs(t);if(n!==null){if(t=n.tag,t===13){if(t=rm(n),t!==null){e.blockedOn=t,gm(e.priority,function(){fm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function El(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ed(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);pd=i,n.target.dispatchEvent(i),pd=null}else return t=Ma(n),t!==null&&Bf(t),e.blockedOn=n,!1;t.shift()}return!0}function W0(e,t,n){El(e)&&n.delete(t)}function MC(){Cd=!1,yi!==null&&El(yi)&&(yi=null),wi!==null&&El(wi)&&(wi=null),Ci!==null&&El(Ci)&&(Ci=null),ia.forEach(W0),sa.forEach(W0)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,Cd||(Cd=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,MC)))}function oa(e){function t(a){return bo(a,e)}if(0<tl.length){bo(tl[0],e);for(var n=1;n<tl.length;n++){var i=tl[n];i.blockedOn===e&&(i.blockedOn=null)}}for(yi!==null&&bo(yi,e),wi!==null&&bo(wi,e),Ci!==null&&bo(Ci,e),ia.forEach(t),sa.forEach(t),n=0;n<di.length;n++)i=di[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)pm(n),n.blockedOn===null&&di.shift()}var Us=Kr.ReactCurrentBatchConfig,zl=!0;function DC(e,t,n,i){var a=st,l=Us.transition;Us.transition=null;try{st=1,jf(e,t,n,i)}finally{st=a,Us.transition=l}}function _C(e,t,n,i){var a=st,l=Us.transition;Us.transition=null;try{st=4,jf(e,t,n,i)}finally{st=a,Us.transition=l}}function jf(e,t,n,i){if(zl){var a=Ed(e,t,n,i);if(a===null)Iu(e,t,i,Wl,n),z0(e,i);else if(RC(a,e,t,n,i))i.stopPropagation();else if(z0(e,i),t&4&&-1<NC.indexOf(e)){for(;a!==null;){var l=Ma(a);if(l!==null&&dm(l),l=Ed(e,t,n,i),l===null&&Iu(e,t,i,Wl,n),l===a)break;a=l}a!==null&&i.stopPropagation()}else Iu(e,t,i,null,n)}}var Wl=null;function Ed(e,t,n,i){if(Wl=null,e=Pf(i),e=Xi(e),e!==null)if(t=cs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wl=e,null}function mm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wC()){case kf:return 1;case am:return 4;case Ul:case CC:return 16;case lm:return 536870912;default:return 16}default:return 16}}var gi=null,Ff=null,vl=null;function xm(){if(vl)return vl;var e,t=Ff,n=t.length,i,a="value"in gi?gi.value:gi.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[l-i];i++);return vl=a.slice(e,1<i?1-i:void 0)}function Sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nl(){return!0}function H0(){return!1}function Fn(e){function t(n,i,a,l,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?nl:H0,this.isPropagationStopped=H0,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),t}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uf=Fn(so),Ra=Tt({},so,{view:0,detail:0}),OC=Fn(Ra),xu,yu,No,vc=Tt({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==No&&(No&&e.type==="mousemove"?(xu=e.screenX-No.screenX,yu=e.screenY-No.screenY):yu=xu=0,No=e),xu)},movementY:function(e){return"movementY"in e?e.movementY:yu}}),G0=Fn(vc),PC=Tt({},vc,{dataTransfer:0}),kC=Fn(PC),LC=Tt({},Ra,{relatedTarget:0}),wu=Fn(LC),BC=Tt({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),jC=Fn(BC),FC=Tt({},so,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),UC=Fn(FC),VC=Tt({},so,{data:0}),Y0=Fn(VC),zC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HC[e])?!!t[e]:!1}function Vf(){return GC}var YC=Tt({},Ra,{key:function(e){if(e.key){var t=zC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XC=Fn(YC),QC=Tt({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=Fn(QC),KC=Tt({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),ZC=Fn(KC),$C=Tt({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),qC=Fn($C),JC=Tt({},vc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eE=Fn(JC),tE=[9,13,27,32],zf=Vr&&"CompositionEvent"in window,zo=null;Vr&&"documentMode"in document&&(zo=document.documentMode);var nE=Vr&&"TextEvent"in window&&!zo,ym=Vr&&(!zf||zo&&8<zo&&11>=zo),Q0=String.fromCharCode(32),K0=!1;function wm(e,t){switch(e){case"keyup":return tE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Es=!1;function rE(e,t){switch(e){case"compositionend":return Cm(t);case"keypress":return t.which!==32?null:(K0=!0,Q0);case"textInput":return e=t.data,e===Q0&&K0?null:e;default:return null}}function iE(e,t){if(Es)return e==="compositionend"||!zf&&wm(e,t)?(e=xm(),vl=Ff=gi=null,Es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ym&&t.locale!=="ko"?null:t.data;default:return null}}var sE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sE[e.type]:t==="textarea"}function Em(e,t,n,i){qp(i),t=Hl(t,"onChange"),0<t.length&&(n=new Uf("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wo=null,aa=null;function oE(e){_m(e,0)}function Sc(e){var t=As(e);if(Gp(t))return e}function aE(e,t){if(e==="change")return t}var vm=!1;if(Vr){var Cu;if(Vr){var Eu="oninput"in document;if(!Eu){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),Eu=typeof $0.oninput=="function"}Cu=Eu}else Cu=!1;vm=Cu&&(!document.documentMode||9<document.documentMode)}function q0(){Wo&&(Wo.detachEvent("onpropertychange",Sm),aa=Wo=null)}function Sm(e){if(e.propertyName==="value"&&Sc(aa)){var t=[];Em(t,aa,e,Pf(e)),nm(oE,t)}}function lE(e,t,n){e==="focusin"?(q0(),Wo=t,aa=n,Wo.attachEvent("onpropertychange",Sm)):e==="focusout"&&q0()}function cE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(aa)}function uE(e,t){if(e==="click")return Sc(t)}function dE(e,t){if(e==="input"||e==="change")return Sc(t)}function fE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:fE;function la(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!rd.call(t,a)||!fr(e[a],t[a]))return!1}return!0}function J0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function e1(e,t){var n=J0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J0(n)}}function Am(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Am(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tm(){for(var e=window,t=Bl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bl(e.document)}return t}function Wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hE(e){var t=Tm(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Am(n.ownerDocument.documentElement,n)){if(i!==null&&Wf(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!e.extend&&l>i&&(a=i,i=l,l=a),a=e1(n,l);var f=e1(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gE=Vr&&"documentMode"in document&&11>=document.documentMode,vs=null,vd=null,Ho=null,Sd=!1;function t1(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sd||vs==null||vs!==Bl(i)||(i=vs,"selectionStart"in i&&Wf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&la(Ho,i)||(Ho=i,i=Hl(vd,"onSelect"),0<i.length&&(t=new Uf("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vs)))}function rl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ss={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},vu={},Im={};Vr&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Ac(e){if(vu[e])return vu[e];if(!Ss[e])return e;var t=Ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Im)return vu[e]=t[n];return e}var bm=Ac("animationend"),Nm=Ac("animationiteration"),Rm=Ac("animationstart"),Mm=Ac("transitionend"),Dm=new Map,n1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Dm.set(e,t),ls(t,[e])}for(var Su=0;Su<n1.length;Su++){var Au=n1[Su],pE=Au.toLowerCase(),mE=Au[0].toUpperCase()+Au.slice(1);Mi(pE,"on"+mE)}Mi(bm,"onAnimationEnd");Mi(Nm,"onAnimationIteration");Mi(Rm,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(Mm,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function r1(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,pC(i,t,void 0,e),e.currentTarget=null}function _m(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],p=g.instance,m=g.currentTarget;if(g=g.listener,p!==l&&a.isPropagationStopped())break e;r1(a,g,m),l=p}else for(f=0;f<i.length;f++){if(g=i[f],p=g.instance,m=g.currentTarget,g=g.listener,p!==l&&a.isPropagationStopped())break e;r1(a,g,m),l=p}}}if(Fl)throw e=yd,Fl=!1,yd=null,e}function gt(e,t){var n=t[Nd];n===void 0&&(n=t[Nd]=new Set);var i=e+"__bubble";n.has(i)||(Om(t,e,2,!1),n.add(i))}function Tu(e,t,n){var i=0;t&&(i|=4),Om(n,e,i,t)}var il="_reactListening"+Math.random().toString(36).slice(2);function ca(e){if(!e[il]){e[il]=!0,Up.forEach(function(n){n!=="selectionchange"&&(xE.has(n)||Tu(n,!1,e),Tu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[il]||(t[il]=!0,Tu("selectionchange",!1,t))}}function Om(e,t,n,i){switch(mm(t)){case 1:var a=DC;break;case 4:a=_C;break;default:a=jf}n=a.bind(null,t,n,e),a=void 0,!xd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Iu(e,t,n,i,a){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var p=f.tag;if((p===3||p===4)&&(p=f.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;f=f.return}for(;g!==null;){if(f=Xi(g),f===null)return;if(p=f.tag,p===5||p===6){i=l=f;continue e}g=g.parentNode}}i=i.return}nm(function(){var m=l,C=Pf(n),E=[];e:{var A=Dm.get(e);if(A!==void 0){var R=Uf,_=e;switch(e){case"keypress":if(Sl(n)===0)break e;case"keydown":case"keyup":R=XC;break;case"focusin":_="focus",R=wu;break;case"focusout":_="blur",R=wu;break;case"beforeblur":case"afterblur":R=wu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=kC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=ZC;break;case bm:case Nm:case Rm:R=jC;break;case Mm:R=qC;break;case"scroll":R=OC;break;case"wheel":R=eE;break;case"copy":case"cut":case"paste":R=UC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=X0}var P=(t&4)!==0,U=!P&&e==="scroll",N=P?A!==null?A+"Capture":null:A;P=[];for(var b=m,S;b!==null;){S=b;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,N!==null&&(O=ra(b,N),O!=null&&P.push(ua(b,O,S)))),U)break;b=b.return}0<P.length&&(A=new R(A,_,null,n,C),E.push({event:A,listeners:P}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",A&&n!==pd&&(_=n.relatedTarget||n.fromElement)&&(Xi(_)||_[zr]))break e;if((R||A)&&(A=C.window===C?C:(A=C.ownerDocument)?A.defaultView||A.parentWindow:window,R?(_=n.relatedTarget||n.toElement,R=m,_=_?Xi(_):null,_!==null&&(U=cs(_),_!==U||_.tag!==5&&_.tag!==6)&&(_=null)):(R=null,_=m),R!==_)){if(P=G0,O="onMouseLeave",N="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(P=X0,O="onPointerLeave",N="onPointerEnter",b="pointer"),U=R==null?A:As(R),S=_==null?A:As(_),A=new P(O,b+"leave",R,n,C),A.target=U,A.relatedTarget=S,O=null,Xi(C)===m&&(P=new P(N,b+"enter",_,n,C),P.target=S,P.relatedTarget=U,O=P),U=O,R&&_)t:{for(P=R,N=_,b=0,S=P;S;S=ys(S))b++;for(S=0,O=N;O;O=ys(O))S++;for(;0<b-S;)P=ys(P),b--;for(;0<S-b;)N=ys(N),S--;for(;b--;){if(P===N||N!==null&&P===N.alternate)break t;P=ys(P),N=ys(N)}P=null}else P=null;R!==null&&i1(E,A,R,P,!1),_!==null&&U!==null&&i1(E,U,_,P,!0)}}e:{if(A=m?As(m):window,R=A.nodeName&&A.nodeName.toLowerCase(),R==="select"||R==="input"&&A.type==="file")var V=aE;else if(Z0(A))if(vm)V=dE;else{V=cE;var z=lE}else(R=A.nodeName)&&R.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(V=uE);if(V&&(V=V(e,m))){Em(E,V,n,C);break e}z&&z(e,A,m),e==="focusout"&&(z=A._wrapperState)&&z.controlled&&A.type==="number"&&ud(A,"number",A.value)}switch(z=m?As(m):window,e){case"focusin":(Z0(z)||z.contentEditable==="true")&&(vs=z,vd=m,Ho=null);break;case"focusout":Ho=vd=vs=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,t1(E,n,C);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":t1(E,n,C)}var F;if(zf)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Es?wm(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(ym&&n.locale!=="ko"&&(Es||B!=="onCompositionStart"?B==="onCompositionEnd"&&Es&&(F=xm()):(gi=C,Ff="value"in gi?gi.value:gi.textContent,Es=!0)),z=Hl(m,B),0<z.length&&(B=new Y0(B,e,null,n,C),E.push({event:B,listeners:z}),F?B.data=F:(F=Cm(n),F!==null&&(B.data=F)))),(F=nE?rE(e,n):iE(e,n))&&(m=Hl(m,"onBeforeInput"),0<m.length&&(C=new Y0("onBeforeInput","beforeinput",null,n,C),E.push({event:C,listeners:m}),C.data=F))}_m(E,t)})}function ua(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hl(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ra(e,n),l!=null&&i.unshift(ua(e,l,a)),l=ra(e,t),l!=null&&i.push(ua(e,l,a))),e=e.return}return i}function ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function i1(e,t,n,i,a){for(var l=t._reactName,f=[];n!==null&&n!==i;){var g=n,p=g.alternate,m=g.stateNode;if(p!==null&&p===i)break;g.tag===5&&m!==null&&(g=m,a?(p=ra(n,l),p!=null&&f.unshift(ua(n,p,g))):a||(p=ra(n,l),p!=null&&f.push(ua(n,p,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var yE=/\r\n?/g,wE=/\u0000|\uFFFD/g;function s1(e){return(typeof e=="string"?e:""+e).replace(yE,`
`).replace(wE,"")}function sl(e,t,n){if(t=s1(t),s1(e)!==t&&n)throw Error(ae(425))}function Gl(){}var Ad=null,Td=null;function Id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,CE=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,EE=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(e){return o1.resolve(null).then(e).catch(vE)}:bd;function vE(e){setTimeout(function(){throw e})}function bu(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),oa(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);oa(t)}function Ei(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function a1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var oo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+oo,da="__reactProps$"+oo,zr="__reactContainer$"+oo,Nd="__reactEvents$"+oo,SE="__reactListeners$"+oo,AE="__reactHandles$"+oo;function Xi(e){var t=e[Tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zr]||n[Tr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=a1(e);e!==null;){if(n=e[Tr])return n;e=a1(e)}return t}e=n,n=e.parentNode}return null}function Ma(e){return e=e[Tr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function As(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Tc(e){return e[da]||null}var Rd=[],Ts=-1;function Di(e){return{current:e}}function mt(e){0>Ts||(e.current=Rd[Ts],Rd[Ts]=null,Ts--)}function dt(e,t){Ts++,Rd[Ts]=e.current,e.current=t}var bi={},ln=Di(bi),bn=Di(!1),rs=bi;function Hs(e,t){var n=e.type.contextTypes;if(!n)return bi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Nn(e){return e=e.childContextTypes,e!=null}function Yl(){mt(bn),mt(ln)}function l1(e,t,n){if(ln.current!==bi)throw Error(ae(168));dt(ln,t),dt(bn,n)}function Pm(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(ae(108,lC(e)||"Unknown",a));return Tt({},n,i)}function Xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bi,rs=ln.current,dt(ln,e),dt(bn,bn.current),!0}function c1(e,t,n){var i=e.stateNode;if(!i)throw Error(ae(169));n?(e=Pm(e,t,rs),i.__reactInternalMemoizedMergedChildContext=e,mt(bn),mt(ln),dt(ln,e)):mt(bn),dt(bn,n)}var kr=null,Ic=!1,Nu=!1;function km(e){kr===null?kr=[e]:kr.push(e)}function TE(e){Ic=!0,km(e)}function _i(){if(!Nu&&kr!==null){Nu=!0;var e=0,t=st;try{var n=kr;for(st=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}kr=null,Ic=!1}catch(a){throw kr!==null&&(kr=kr.slice(e+1)),om(kf,_i),a}finally{st=t,Nu=!1}}return null}var Is=[],bs=0,Ql=null,Kl=0,Qn=[],Kn=0,is=null,Lr=1,Br="";function Hi(e,t){Is[bs++]=Kl,Is[bs++]=Ql,Ql=e,Kl=t}function Lm(e,t,n){Qn[Kn++]=Lr,Qn[Kn++]=Br,Qn[Kn++]=is,is=e;var i=Lr;e=Br;var a=32-ur(i)-1;i&=~(1<<a),n+=1;var l=32-ur(t)+a;if(30<l){var f=a-a%5;l=(i&(1<<f)-1).toString(32),i>>=f,a-=f,Lr=1<<32-ur(t)+a|n<<a|i,Br=l+e}else Lr=1<<l|n<<a|i,Br=e}function Hf(e){e.return!==null&&(Hi(e,1),Lm(e,1,0))}function Gf(e){for(;e===Ql;)Ql=Is[--bs],Is[bs]=null,Kl=Is[--bs],Is[bs]=null;for(;e===is;)is=Qn[--Kn],Qn[Kn]=null,Br=Qn[--Kn],Qn[Kn]=null,Lr=Qn[--Kn],Qn[Kn]=null}var Ln=null,kn=null,yt=!1,cr=null;function Bm(e,t){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function u1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ln=e,kn=Ei(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ln=e,kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=is!==null?{id:Lr,overflow:Br}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ln=e,kn=null,!0):!1;default:return!1}}function Md(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dd(e){if(yt){var t=kn;if(t){var n=t;if(!u1(e,t)){if(Md(e))throw Error(ae(418));t=Ei(n.nextSibling);var i=Ln;t&&u1(e,t)?Bm(i,n):(e.flags=e.flags&-4097|2,yt=!1,Ln=e)}}else{if(Md(e))throw Error(ae(418));e.flags=e.flags&-4097|2,yt=!1,Ln=e}}}function d1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ln=e}function ol(e){if(e!==Ln)return!1;if(!yt)return d1(e),yt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Id(e.type,e.memoizedProps)),t&&(t=kn)){if(Md(e))throw jm(),Error(ae(418));for(;t;)Bm(e,t),t=Ei(t.nextSibling)}if(d1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kn=Ei(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kn=null}}else kn=Ln?Ei(e.stateNode.nextSibling):null;return!0}function jm(){for(var e=kn;e;)e=Ei(e.nextSibling)}function Gs(){kn=Ln=null,yt=!1}function Yf(e){cr===null?cr=[e]:cr.push(e)}var IE=Kr.ReactCurrentBatchConfig;function Ro(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,e));var a=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(f){var g=a.refs;f===null?delete g[l]:g[l]=f},t._stringRef=l,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function al(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f1(e){var t=e._init;return t(e._payload)}function Fm(e){function t(N,b){if(e){var S=N.deletions;S===null?(N.deletions=[b],N.flags|=16):S.push(b)}}function n(N,b){if(!e)return null;for(;b!==null;)t(N,b),b=b.sibling;return null}function i(N,b){for(N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(N,b){return N=Ti(N,b),N.index=0,N.sibling=null,N}function l(N,b,S){return N.index=S,e?(S=N.alternate,S!==null?(S=S.index,S<b?(N.flags|=2,b):S):(N.flags|=2,b)):(N.flags|=1048576,b)}function f(N){return e&&N.alternate===null&&(N.flags|=2),N}function g(N,b,S,O){return b===null||b.tag!==6?(b=ku(S,N.mode,O),b.return=N,b):(b=a(b,S),b.return=N,b)}function p(N,b,S,O){var V=S.type;return V===Cs?C(N,b,S.props.children,O,S.key):b!==null&&(b.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ci&&f1(V)===b.type)?(O=a(b,S.props),O.ref=Ro(N,b,S),O.return=N,O):(O=Ml(S.type,S.key,S.props,null,N.mode,O),O.ref=Ro(N,b,S),O.return=N,O)}function m(N,b,S,O){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=Lu(S,N.mode,O),b.return=N,b):(b=a(b,S.children||[]),b.return=N,b)}function C(N,b,S,O,V){return b===null||b.tag!==7?(b=Ji(S,N.mode,O,V),b.return=N,b):(b=a(b,S),b.return=N,b)}function E(N,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ku(""+b,N.mode,S),b.return=N,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Za:return S=Ml(b.type,b.key,b.props,null,N.mode,S),S.ref=Ro(N,null,b),S.return=N,S;case ws:return b=Lu(b,N.mode,S),b.return=N,b;case ci:var O=b._init;return E(N,O(b._payload),S)}if(Lo(b)||Ao(b))return b=Ji(b,N.mode,S,null),b.return=N,b;al(N,b)}return null}function A(N,b,S,O){var V=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:g(N,b,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Za:return S.key===V?p(N,b,S,O):null;case ws:return S.key===V?m(N,b,S,O):null;case ci:return V=S._init,A(N,b,V(S._payload),O)}if(Lo(S)||Ao(S))return V!==null?null:C(N,b,S,O,null);al(N,S)}return null}function R(N,b,S,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return N=N.get(S)||null,g(b,N,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Za:return N=N.get(O.key===null?S:O.key)||null,p(b,N,O,V);case ws:return N=N.get(O.key===null?S:O.key)||null,m(b,N,O,V);case ci:var z=O._init;return R(N,b,S,z(O._payload),V)}if(Lo(O)||Ao(O))return N=N.get(S)||null,C(b,N,O,V,null);al(b,O)}return null}function _(N,b,S,O){for(var V=null,z=null,F=b,B=b=0,G=null;F!==null&&B<S.length;B++){F.index>B?(G=F,F=null):G=F.sibling;var te=A(N,F,S[B],O);if(te===null){F===null&&(F=G);break}e&&F&&te.alternate===null&&t(N,F),b=l(te,b,B),z===null?V=te:z.sibling=te,z=te,F=G}if(B===S.length)return n(N,F),yt&&Hi(N,B),V;if(F===null){for(;B<S.length;B++)F=E(N,S[B],O),F!==null&&(b=l(F,b,B),z===null?V=F:z.sibling=F,z=F);return yt&&Hi(N,B),V}for(F=i(N,F);B<S.length;B++)G=R(F,N,B,S[B],O),G!==null&&(e&&G.alternate!==null&&F.delete(G.key===null?B:G.key),b=l(G,b,B),z===null?V=G:z.sibling=G,z=G);return e&&F.forEach(function(we){return t(N,we)}),yt&&Hi(N,B),V}function P(N,b,S,O){var V=Ao(S);if(typeof V!="function")throw Error(ae(150));if(S=V.call(S),S==null)throw Error(ae(151));for(var z=V=null,F=b,B=b=0,G=null,te=S.next();F!==null&&!te.done;B++,te=S.next()){F.index>B?(G=F,F=null):G=F.sibling;var we=A(N,F,te.value,O);if(we===null){F===null&&(F=G);break}e&&F&&we.alternate===null&&t(N,F),b=l(we,b,B),z===null?V=we:z.sibling=we,z=we,F=G}if(te.done)return n(N,F),yt&&Hi(N,B),V;if(F===null){for(;!te.done;B++,te=S.next())te=E(N,te.value,O),te!==null&&(b=l(te,b,B),z===null?V=te:z.sibling=te,z=te);return yt&&Hi(N,B),V}for(F=i(N,F);!te.done;B++,te=S.next())te=R(F,N,B,te.value,O),te!==null&&(e&&te.alternate!==null&&F.delete(te.key===null?B:te.key),b=l(te,b,B),z===null?V=te:z.sibling=te,z=te);return e&&F.forEach(function(de){return t(N,de)}),yt&&Hi(N,B),V}function U(N,b,S,O){if(typeof S=="object"&&S!==null&&S.type===Cs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Za:e:{for(var V=S.key,z=b;z!==null;){if(z.key===V){if(V=S.type,V===Cs){if(z.tag===7){n(N,z.sibling),b=a(z,S.props.children),b.return=N,N=b;break e}}else if(z.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ci&&f1(V)===z.type){n(N,z.sibling),b=a(z,S.props),b.ref=Ro(N,z,S),b.return=N,N=b;break e}n(N,z);break}else t(N,z);z=z.sibling}S.type===Cs?(b=Ji(S.props.children,N.mode,O,S.key),b.return=N,N=b):(O=Ml(S.type,S.key,S.props,null,N.mode,O),O.ref=Ro(N,b,S),O.return=N,N=O)}return f(N);case ws:e:{for(z=S.key;b!==null;){if(b.key===z)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(N,b.sibling),b=a(b,S.children||[]),b.return=N,N=b;break e}else{n(N,b);break}else t(N,b);b=b.sibling}b=Lu(S,N.mode,O),b.return=N,N=b}return f(N);case ci:return z=S._init,U(N,b,z(S._payload),O)}if(Lo(S))return _(N,b,S,O);if(Ao(S))return P(N,b,S,O);al(N,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(N,b.sibling),b=a(b,S),b.return=N,N=b):(n(N,b),b=ku(S,N.mode,O),b.return=N,N=b),f(N)):n(N,b)}return U}var Ys=Fm(!0),Um=Fm(!1),Zl=Di(null),$l=null,Ns=null,Xf=null;function Qf(){Xf=Ns=$l=null}function Kf(e){var t=Zl.current;mt(Zl),e._currentValue=t}function _d(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Vs(e,t){$l=e,Xf=Ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tn=!0),e.firstContext=null)}function Jn(e){var t=e._currentValue;if(Xf!==e)if(e={context:e,memoizedValue:t,next:null},Ns===null){if($l===null)throw Error(ae(308));Ns=e,$l.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Qi=null;function Zf(e){Qi===null?Qi=[e]:Qi.push(e)}function Vm(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Zf(t)):(n.next=a.next,a.next=n),t.interleaved=n,Wr(e,i)}function Wr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ui=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,et&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Wr(e,n)}return a=i.interleaved,a===null?(t.next=t,Zf(i)):(t.next=a.next,a.next=t),i.interleaved=t,Wr(e,n)}function Al(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lf(e,n)}}function h1(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ql(e,t,n,i){var a=e.updateQueue;ui=!1;var l=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var p=g,m=p.next;p.next=null,f===null?l=m:f.next=m,f=p;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==f&&(g===null?C.firstBaseUpdate=m:g.next=m,C.lastBaseUpdate=p))}if(l!==null){var E=a.baseState;f=0,C=m=p=null,g=l;do{var A=g.lane,R=g.eventTime;if((i&A)===A){C!==null&&(C=C.next={eventTime:R,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var _=e,P=g;switch(A=t,R=n,P.tag){case 1:if(_=P.payload,typeof _=="function"){E=_.call(R,E,A);break e}E=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=P.payload,A=typeof _=="function"?_.call(R,E,A):_,A==null)break e;E=Tt({},E,A);break e;case 2:ui=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,A=a.effects,A===null?a.effects=[g]:A.push(g))}else R={eventTime:R,lane:A,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(m=C=R,p=E):C=C.next=R,f|=A;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;A=g,g=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(1);if(C===null&&(p=E),a.baseState=p,a.firstBaseUpdate=m,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);os|=f,e.lanes=f,e.memoizedState=E}}function g1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(ae(191,a));a.call(i)}}}var Da={},br=Di(Da),fa=Di(Da),ha=Di(Da);function Ki(e){if(e===Da)throw Error(ae(174));return e}function qf(e,t){switch(dt(ha,t),dt(fa,e),dt(br,Da),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fd(t,e)}mt(br),dt(br,t)}function Xs(){mt(br),mt(fa),mt(ha)}function Wm(e){Ki(ha.current);var t=Ki(br.current),n=fd(t,e.type);t!==n&&(dt(fa,e),dt(br,n))}function Jf(e){fa.current===e&&(mt(br),mt(fa))}var Et=Di(0);function Jl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ru=[];function eh(){for(var e=0;e<Ru.length;e++)Ru[e]._workInProgressVersionPrimary=null;Ru.length=0}var Tl=Kr.ReactCurrentDispatcher,Mu=Kr.ReactCurrentBatchConfig,ss=0,St=null,Vt=null,Yt=null,ec=!1,Go=!1,ga=0,bE=0;function nn(){throw Error(ae(321))}function th(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fr(e[n],t[n]))return!1;return!0}function nh(e,t,n,i,a,l){if(ss=l,St=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tl.current=e===null||e.memoizedState===null?DE:_E,e=n(i,a),Go){l=0;do{if(Go=!1,ga=0,25<=l)throw Error(ae(301));l+=1,Yt=Vt=null,t.updateQueue=null,Tl.current=OE,e=n(i,a)}while(Go)}if(Tl.current=tc,t=Vt!==null&&Vt.next!==null,ss=0,Yt=Vt=St=null,ec=!1,t)throw Error(ae(300));return e}function rh(){var e=ga!==0;return ga=0,e}function Sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?St.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function er(){if(Vt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Yt===null?St.memoizedState:Yt.next;if(t!==null)Yt=t,Vt=e;else{if(e===null)throw Error(ae(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yt===null?St.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function pa(e,t){return typeof t=="function"?t(e):t}function Du(e){var t=er(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var i=Vt,a=i.baseQueue,l=n.pending;if(l!==null){if(a!==null){var f=a.next;a.next=l.next,l.next=f}i.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,i=i.baseState;var g=f=null,p=null,m=l;do{var C=m.lane;if((ss&C)===C)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var E={lane:C,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(g=p=E,f=i):p=p.next=E,St.lanes|=C,os|=C}m=m.next}while(m!==null&&m!==l);p===null?f=i:p.next=g,fr(i,t.memoizedState)||(Tn=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=p,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do l=a.lane,St.lanes|=l,os|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _u(e){var t=er(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do l=e(l,f.action),f=f.next;while(f!==a);fr(l,t.memoizedState)||(Tn=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function Hm(){}function Gm(e,t){var n=St,i=er(),a=t(),l=!fr(i.memoizedState,a);if(l&&(i.memoizedState=a,Tn=!0),i=i.queue,ih(Qm.bind(null,n,i,e),[e]),i.getSnapshot!==t||l||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,ma(9,Xm.bind(null,n,i,a,t),void 0,null),Xt===null)throw Error(ae(349));ss&30||Ym(n,t,a)}return a}function Ym(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xm(e,t,n,i){t.value=n,t.getSnapshot=i,Km(t)&&Zm(e)}function Qm(e,t,n){return n(function(){Km(t)&&Zm(e)})}function Km(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fr(e,n)}catch{return!0}}function Zm(e){var t=Wr(e,1);t!==null&&dr(t,e,1,-1)}function p1(e){var t=Sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},t.queue=e,e=e.dispatch=ME.bind(null,St,e),[t.memoizedState,e]}function ma(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function $m(){return er().memoizedState}function Il(e,t,n,i){var a=Sr();St.flags|=e,a.memoizedState=ma(1|t,n,void 0,i===void 0?null:i)}function bc(e,t,n,i){var a=er();i=i===void 0?null:i;var l=void 0;if(Vt!==null){var f=Vt.memoizedState;if(l=f.destroy,i!==null&&th(i,f.deps)){a.memoizedState=ma(t,n,l,i);return}}St.flags|=e,a.memoizedState=ma(1|t,n,l,i)}function m1(e,t){return Il(8390656,8,e,t)}function ih(e,t){return bc(2048,8,e,t)}function qm(e,t){return bc(4,2,e,t)}function Jm(e,t){return bc(4,4,e,t)}function ex(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tx(e,t,n){return n=n!=null?n.concat([e]):null,bc(4,4,ex.bind(null,t,e),n)}function sh(){}function nx(e,t){var n=er();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&th(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rx(e,t){var n=er();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&th(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ix(e,t,n){return ss&21?(fr(n,t)||(n=cm(),St.lanes|=n,os|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tn=!0),e.memoizedState=n)}function NE(e,t){var n=st;st=n!==0&&4>n?n:4,e(!0);var i=Mu.transition;Mu.transition={};try{e(!1),t()}finally{st=n,Mu.transition=i}}function sx(){return er().memoizedState}function RE(e,t,n){var i=Ai(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ox(e))ax(t,n);else if(n=Vm(e,t,n,i),n!==null){var a=hn();dr(n,e,i,a),lx(n,t,i)}}function ME(e,t,n){var i=Ai(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ox(e))ax(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,g=l(f,n);if(a.hasEagerState=!0,a.eagerState=g,fr(g,f)){var p=t.interleaved;p===null?(a.next=a,Zf(t)):(a.next=p.next,p.next=a),t.interleaved=a;return}}catch{}finally{}n=Vm(e,t,a,i),n!==null&&(a=hn(),dr(n,e,i,a),lx(n,t,i))}}function ox(e){var t=e.alternate;return e===St||t!==null&&t===St}function ax(e,t){Go=ec=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lx(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lf(e,n)}}var tc={readContext:Jn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},DE={readContext:Jn,useCallback:function(e,t){return Sr().memoizedState=[e,t===void 0?null:t],e},useContext:Jn,useEffect:m1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Il(4194308,4,ex.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Il(4194308,4,e,t)},useInsertionEffect:function(e,t){return Il(4,2,e,t)},useMemo:function(e,t){var n=Sr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Sr();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=RE.bind(null,St,e),[i.memoizedState,e]},useRef:function(e){var t=Sr();return e={current:e},t.memoizedState=e},useState:p1,useDebugValue:sh,useDeferredValue:function(e){return Sr().memoizedState=e},useTransition:function(){var e=p1(!1),t=e[0];return e=NE.bind(null,e[1]),Sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=St,a=Sr();if(yt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),Xt===null)throw Error(ae(349));ss&30||Ym(i,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,m1(Qm.bind(null,i,l,e),[e]),i.flags|=2048,ma(9,Xm.bind(null,i,l,n,t),void 0,null),n},useId:function(){var e=Sr(),t=Xt.identifierPrefix;if(yt){var n=Br,i=Lr;n=(i&~(1<<32-ur(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=ga++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_E={readContext:Jn,useCallback:nx,useContext:Jn,useEffect:ih,useImperativeHandle:tx,useInsertionEffect:qm,useLayoutEffect:Jm,useMemo:rx,useReducer:Du,useRef:$m,useState:function(){return Du(pa)},useDebugValue:sh,useDeferredValue:function(e){var t=er();return ix(t,Vt.memoizedState,e)},useTransition:function(){var e=Du(pa)[0],t=er().memoizedState;return[e,t]},useMutableSource:Hm,useSyncExternalStore:Gm,useId:sx,unstable_isNewReconciler:!1},OE={readContext:Jn,useCallback:nx,useContext:Jn,useEffect:ih,useImperativeHandle:tx,useInsertionEffect:qm,useLayoutEffect:Jm,useMemo:rx,useReducer:_u,useRef:$m,useState:function(){return _u(pa)},useDebugValue:sh,useDeferredValue:function(e){var t=er();return Vt===null?t.memoizedState=e:ix(t,Vt.memoizedState,e)},useTransition:function(){var e=_u(pa)[0],t=er().memoizedState;return[e,t]},useMutableSource:Hm,useSyncExternalStore:Gm,useId:sx,unstable_isNewReconciler:!1};function or(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Od(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Nc={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=hn(),a=Ai(e),l=Fr(i,a);l.payload=t,n!=null&&(l.callback=n),t=vi(e,l,a),t!==null&&(dr(t,e,a,i),Al(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=hn(),a=Ai(e),l=Fr(i,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=vi(e,l,a),t!==null&&(dr(t,e,a,i),Al(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hn(),i=Ai(e),a=Fr(n,i);a.tag=2,t!=null&&(a.callback=t),t=vi(e,a,i),t!==null&&(dr(t,e,i,n),Al(t,e,i))}};function x1(e,t,n,i,a,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,f):t.prototype&&t.prototype.isPureReactComponent?!la(n,i)||!la(a,l):!0}function cx(e,t,n){var i=!1,a=bi,l=t.contextType;return typeof l=="object"&&l!==null?l=Jn(l):(a=Nn(t)?rs:ln.current,i=t.contextTypes,l=(i=i!=null)?Hs(e,a):bi),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nc,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function y1(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Nc.enqueueReplaceState(t,t.state,null)}function Pd(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},$f(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Jn(l):(l=Nn(t)?rs:ln.current,a.context=Hs(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Od(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Nc.enqueueReplaceState(a,a.state,null),ql(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Qs(e,t){try{var n="",i=t;do n+=aC(i),i=i.return;while(i);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ou(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var PE=typeof WeakMap=="function"?WeakMap:Map;function ux(e,t,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){rc||(rc=!0,Gd=i),kd(e,t)},n}function dx(e,t,n){n=Fr(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){kd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){kd(e,t),typeof i!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function w1(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new PE;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=QE.bind(null,e,t,n),t.then(e,e))}function C1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function E1(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fr(-1,1),t.tag=2,vi(n,t,1))),n.lanes|=1),e)}var kE=Kr.ReactCurrentOwner,Tn=!1;function dn(e,t,n,i){t.child=e===null?Um(t,null,n,i):Ys(t,e.child,n,i)}function v1(e,t,n,i,a){n=n.render;var l=t.ref;return Vs(t,a),i=nh(e,t,n,i,l,a),n=rh(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(yt&&n&&Hf(t),t.flags|=1,dn(e,t,i,a),t.child)}function S1(e,t,n,i,a){if(e===null){var l=n.type;return typeof l=="function"&&!hh(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,fx(e,t,l,i,a)):(e=Ml(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(f,i)&&e.ref===t.ref)return Hr(e,t,a)}return t.flags|=1,e=Ti(l,i),e.ref=t.ref,e.return=t,t.child=e}function fx(e,t,n,i,a){if(e!==null){var l=e.memoizedProps;if(la(l,i)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=i=l,(e.lanes&a)!==0)e.flags&131072&&(Tn=!0);else return t.lanes=e.lanes,Hr(e,t,a)}return Ld(e,t,n,i,a)}function hx(e,t,n){var i=t.pendingProps,a=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Ms,On),On|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dt(Ms,On),On|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,dt(Ms,On),On|=i}else l!==null?(i=l.baseLanes|n,t.memoizedState=null):i=n,dt(Ms,On),On|=i;return dn(e,t,a,n),t.child}function gx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ld(e,t,n,i,a){var l=Nn(n)?rs:ln.current;return l=Hs(t,l),Vs(t,a),n=nh(e,t,n,i,l,a),i=rh(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(yt&&i&&Hf(t),t.flags|=1,dn(e,t,n,a),t.child)}function A1(e,t,n,i,a){if(Nn(n)){var l=!0;Xl(t)}else l=!1;if(Vs(t,a),t.stateNode===null)bl(e,t),cx(t,n,i),Pd(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var p=f.context,m=n.contextType;typeof m=="object"&&m!==null?m=Jn(m):(m=Nn(n)?rs:ln.current,m=Hs(t,m));var C=n.getDerivedStateFromProps,E=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";E||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||p!==m)&&y1(t,f,i,m),ui=!1;var A=t.memoizedState;f.state=A,ql(t,i,f,a),p=t.memoizedState,g!==i||A!==p||bn.current||ui?(typeof C=="function"&&(Od(t,n,C,i),p=t.memoizedState),(g=ui||x1(t,n,g,i,A,p,m))?(E||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=p),f.props=i,f.state=p,f.context=m,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,zm(e,t),g=t.memoizedProps,m=t.type===t.elementType?g:or(t.type,g),f.props=m,E=t.pendingProps,A=f.context,p=n.contextType,typeof p=="object"&&p!==null?p=Jn(p):(p=Nn(n)?rs:ln.current,p=Hs(t,p));var R=n.getDerivedStateFromProps;(C=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==E||A!==p)&&y1(t,f,i,p),ui=!1,A=t.memoizedState,f.state=A,ql(t,i,f,a);var _=t.memoizedState;g!==E||A!==_||bn.current||ui?(typeof R=="function"&&(Od(t,n,R,i),_=t.memoizedState),(m=ui||x1(t,n,m,i,A,_,p)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,_,p),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,_,p)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),f.props=i,f.state=_,f.context=p,i=m):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),i=!1)}return Bd(e,t,n,i,l,a)}function Bd(e,t,n,i,a,l){gx(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&c1(t,n,!1),Hr(e,t,l);i=t.stateNode,kE.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=Ys(t,e.child,null,l),t.child=Ys(t,null,g,l)):dn(e,t,g,l),t.memoizedState=i.state,a&&c1(t,n,!0),t.child}function px(e){var t=e.stateNode;t.pendingContext?l1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&l1(e,t.context,!1),qf(e,t.containerInfo)}function T1(e,t,n,i,a){return Gs(),Yf(a),t.flags|=256,dn(e,t,n,i),t.child}var jd={dehydrated:null,treeContext:null,retryLane:0};function Fd(e){return{baseLanes:e,cachePool:null,transitions:null}}function mx(e,t,n){var i=t.pendingProps,a=Et.current,l=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),dt(Et,a&1),e===null)return Dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,l?(i=t.mode,l=t.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Dc(f,i,0,null),e=Ji(e,i,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Fd(n),t.memoizedState=jd,e):oh(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return LE(e,t,f,i,g,a,n);if(l){l=i.fallback,f=t.mode,a=e.child,g=a.sibling;var p={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=p,t.deletions=null):(i=Ti(a,p),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?l=Ti(g,l):(l=Ji(l,f,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,f=e.child.memoizedState,f=f===null?Fd(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=e.childLanes&~n,t.memoizedState=jd,i}return l=e.child,e=l.sibling,i=Ti(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function oh(e,t){return t=Dc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ll(e,t,n,i){return i!==null&&Yf(i),Ys(t,e.child,null,n),e=oh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LE(e,t,n,i,a,l,f){if(n)return t.flags&256?(t.flags&=-257,i=Ou(Error(ae(422))),ll(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,a=t.mode,i=Dc({mode:"visible",children:i.children},a,0,null),l=Ji(l,a,f,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&Ys(t,e.child,null,f),t.child.memoizedState=Fd(f),t.memoizedState=jd,l);if(!(t.mode&1))return ll(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(ae(419)),i=Ou(l,i,void 0),ll(e,t,f,i)}if(g=(f&e.childLanes)!==0,Tn||g){if(i=Xt,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Wr(e,a),dr(i,e,a,-1))}return fh(),i=Ou(Error(ae(421))),ll(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=KE.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,kn=Ei(a.nextSibling),Ln=t,yt=!0,cr=null,e!==null&&(Qn[Kn++]=Lr,Qn[Kn++]=Br,Qn[Kn++]=is,Lr=e.id,Br=e.overflow,is=t),t=oh(t,i.children),t.flags|=4096,t)}function I1(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),_d(e.return,t,n)}function Pu(e,t,n,i,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a)}function xx(e,t,n){var i=t.pendingProps,a=i.revealOrder,l=i.tail;if(dn(e,t,i.children,n),i=Et.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&I1(e,n,t);else if(e.tag===19)I1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(dt(Et,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Jl(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Pu(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Jl(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Pu(t,!0,n,null,l);break;case"together":Pu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),os|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Ti(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ti(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function BE(e,t,n){switch(t.tag){case 3:px(t),Gs();break;case 5:Wm(t);break;case 1:Nn(t.type)&&Xl(t);break;case 4:qf(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;dt(Zl,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(dt(Et,Et.current&1),t.flags|=128,null):n&t.child.childLanes?mx(e,t,n):(dt(Et,Et.current&1),e=Hr(e,t,n),e!==null?e.sibling:null);dt(Et,Et.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return xx(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),dt(Et,Et.current),i)break;return null;case 22:case 23:return t.lanes=0,hx(e,t,n)}return Hr(e,t,n)}var yx,Ud,wx,Cx;yx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};wx=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Ki(br.current);var l=null;switch(n){case"input":a=ld(e,a),i=ld(e,i),l=[];break;case"select":a=Tt({},a,{value:void 0}),i=Tt({},i,{value:void 0}),l=[];break;case"textarea":a=dd(e,a),i=dd(e,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Gl)}hd(n,i);var f;n=null;for(m in a)if(!i.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var g=a[m];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ta.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in i){var p=i[m];if(g=a!=null?a[m]:void 0,i.hasOwnProperty(m)&&p!==g&&(p!=null||g!=null))if(m==="style")if(g){for(f in g)!g.hasOwnProperty(f)||p&&p.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in p)p.hasOwnProperty(f)&&g[f]!==p[f]&&(n||(n={}),n[f]=p[f])}else n||(l||(l=[]),l.push(m,n)),n=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,g=g?g.__html:void 0,p!=null&&g!==p&&(l=l||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ta.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&gt("scroll",e),l||g===p||(l=[])):(l=l||[]).push(m,p))}n&&(l=l||[]).push("style",n);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};Cx=function(e,t,n,i){n!==i&&(t.flags|=4)};function Mo(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function jE(e,t,n){var i=t.pendingProps;switch(Gf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(t),null;case 1:return Nn(t.type)&&Yl(),rn(t),null;case 3:return i=t.stateNode,Xs(),mt(bn),mt(ln),eh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ol(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(Qd(cr),cr=null))),Ud(e,t),rn(t),null;case 5:Jf(t);var a=Ki(ha.current);if(n=t.type,e!==null&&t.stateNode!=null)wx(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ae(166));return rn(t),null}if(e=Ki(br.current),ol(t)){i=t.stateNode,n=t.type;var l=t.memoizedProps;switch(i[Tr]=t,i[da]=l,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",i),gt("close",i);break;case"iframe":case"object":case"embed":gt("load",i);break;case"video":case"audio":for(a=0;a<jo.length;a++)gt(jo[a],i);break;case"source":gt("error",i);break;case"img":case"image":case"link":gt("error",i),gt("load",i);break;case"details":gt("toggle",i);break;case"input":k0(i,l),gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},gt("invalid",i);break;case"textarea":B0(i,l),gt("invalid",i)}hd(n,l),a=null;for(var f in l)if(l.hasOwnProperty(f)){var g=l[f];f==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&sl(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&sl(i.textContent,g,e),a=["children",""+g]):ta.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&gt("scroll",i)}switch(n){case"input":$a(i),L0(i,l,!0);break;case"textarea":$a(i),j0(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Gl)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Tr]=t,e[da]=i,yx(e,t,!1,!1),t.stateNode=e;e:{switch(f=gd(n,i),n){case"dialog":gt("cancel",e),gt("close",e),a=i;break;case"iframe":case"object":case"embed":gt("load",e),a=i;break;case"video":case"audio":for(a=0;a<jo.length;a++)gt(jo[a],e);a=i;break;case"source":gt("error",e),a=i;break;case"img":case"image":case"link":gt("error",e),gt("load",e),a=i;break;case"details":gt("toggle",e),a=i;break;case"input":k0(e,i),a=ld(e,i),gt("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Tt({},i,{value:void 0}),gt("invalid",e);break;case"textarea":B0(e,i),a=dd(e,i),gt("invalid",e);break;default:a=i}hd(n,a),g=a;for(l in g)if(g.hasOwnProperty(l)){var p=g[l];l==="style"?$p(e,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Kp(e,p)):l==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&na(e,p):typeof p=="number"&&na(e,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ta.hasOwnProperty(l)?p!=null&&l==="onScroll"&&gt("scroll",e):p!=null&&Mf(e,l,p,f))}switch(n){case"input":$a(e),L0(e,i,!1);break;case"textarea":$a(e),j0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ii(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?Bs(e,!!i.multiple,l,!1):i.defaultValue!=null&&Bs(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Gl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rn(t),null;case 6:if(e&&t.stateNode!=null)Cx(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ae(166));if(n=Ki(ha.current),Ki(br.current),ol(t)){if(i=t.stateNode,n=t.memoizedProps,i[Tr]=t,(l=i.nodeValue!==n)&&(e=Ln,e!==null))switch(e.tag){case 3:sl(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sl(i.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Tr]=t,t.stateNode=i}return rn(t),null;case 13:if(mt(Et),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yt&&kn!==null&&t.mode&1&&!(t.flags&128))jm(),Gs(),t.flags|=98560,l=!1;else if(l=ol(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(ae(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ae(317));l[Tr]=t}else Gs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rn(t),l=!1}else cr!==null&&(Qd(cr),cr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Et.current&1?zt===0&&(zt=3):fh())),t.updateQueue!==null&&(t.flags|=4),rn(t),null);case 4:return Xs(),Ud(e,t),e===null&&ca(t.stateNode.containerInfo),rn(t),null;case 10:return Kf(t.type._context),rn(t),null;case 17:return Nn(t.type)&&Yl(),rn(t),null;case 19:if(mt(Et),l=t.memoizedState,l===null)return rn(t),null;if(i=(t.flags&128)!==0,f=l.rendering,f===null)if(i)Mo(l,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Jl(e),f!==null){for(t.flags|=128,Mo(l,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)l=n,e=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,e=f.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return dt(Et,Et.current&1|2),t.child}e=e.sibling}l.tail!==null&&Lt()>Ks&&(t.flags|=128,i=!0,Mo(l,!1),t.lanes=4194304)}else{if(!i)if(e=Jl(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!yt)return rn(t),null}else 2*Lt()-l.renderingStartTime>Ks&&n!==1073741824&&(t.flags|=128,i=!0,Mo(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(n=l.last,n!==null?n.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Lt(),t.sibling=null,n=Et.current,dt(Et,i?n&1|2:n&1),t):(rn(t),null);case 22:case 23:return dh(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?On&1073741824&&(rn(t),t.subtreeFlags&6&&(t.flags|=8192)):rn(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function FE(e,t){switch(Gf(t),t.tag){case 1:return Nn(t.type)&&Yl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xs(),mt(bn),mt(ln),eh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jf(t),null;case 13:if(mt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Gs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(Et),null;case 4:return Xs(),null;case 10:return Kf(t.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var cl=!1,on=!1,UE=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Rs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Dt(e,t,i)}else n.current=null}function Vd(e,t,n){try{n()}catch(i){Dt(e,t,i)}}var b1=!1;function VE(e,t){if(Ad=zl,e=Tm(),Wf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,g=-1,p=-1,m=0,C=0,E=e,A=null;t:for(;;){for(var R;E!==n||a!==0&&E.nodeType!==3||(g=f+a),E!==l||i!==0&&E.nodeType!==3||(p=f+i),E.nodeType===3&&(f+=E.nodeValue.length),(R=E.firstChild)!==null;)A=E,E=R;for(;;){if(E===e)break t;if(A===n&&++m===a&&(g=f),A===l&&++C===i&&(p=f),(R=E.nextSibling)!==null)break;E=A,A=E.parentNode}E=R}n=g===-1||p===-1?null:{start:g,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Td={focusedElem:e,selectionRange:n},zl=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var P=_.memoizedProps,U=_.memoizedState,N=t.stateNode,b=N.getSnapshotBeforeUpdate(t.elementType===t.type?P:or(t.type,P),U);N.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(O){Dt(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return _=b1,b1=!1,_}function Yo(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Vd(t,n,l)}a=a.next}while(a!==i)}}function Rc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function zd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ex(e){var t=e.alternate;t!==null&&(e.alternate=null,Ex(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tr],delete t[da],delete t[Nd],delete t[SE],delete t[AE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vx(e){return e.tag===5||e.tag===3||e.tag===4}function N1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Gl));else if(i!==4&&(e=e.child,e!==null))for(Wd(e,t,n),e=e.sibling;e!==null;)Wd(e,t,n),e=e.sibling}function Hd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Hd(e,t,n),e=e.sibling;e!==null;)Hd(e,t,n),e=e.sibling}var $t=null,ar=!1;function oi(e,t,n){for(n=n.child;n!==null;)Sx(e,t,n),n=n.sibling}function Sx(e,t,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:on||Rs(n,t);case 6:var i=$t,a=ar;$t=null,oi(e,t,n),$t=i,ar=a,$t!==null&&(ar?(e=$t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(ar?(e=$t,n=n.stateNode,e.nodeType===8?bu(e.parentNode,n):e.nodeType===1&&bu(e,n),oa(e)):bu($t,n.stateNode));break;case 4:i=$t,a=ar,$t=n.stateNode.containerInfo,ar=!0,oi(e,t,n),$t=i,ar=a;break;case 0:case 11:case 14:case 15:if(!on&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&Vd(n,t,f),a=a.next}while(a!==i)}oi(e,t,n);break;case 1:if(!on&&(Rs(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Dt(n,t,g)}oi(e,t,n);break;case 21:oi(e,t,n);break;case 22:n.mode&1?(on=(i=on)||n.memoizedState!==null,oi(e,t,n),on=i):oi(e,t,n);break;default:oi(e,t,n)}}function R1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new UE),t.forEach(function(i){var a=ZE.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function ir(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var l=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:$t=g.stateNode,ar=!1;break e;case 3:$t=g.stateNode.containerInfo,ar=!0;break e;case 4:$t=g.stateNode.containerInfo,ar=!0;break e}g=g.return}if($t===null)throw Error(ae(160));Sx(l,f,a),$t=null,ar=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(m){Dt(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ax(t,e),t=t.sibling}function Ax(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),vr(e),i&4){try{Yo(3,e,e.return),Rc(3,e)}catch(P){Dt(e,e.return,P)}try{Yo(5,e,e.return)}catch(P){Dt(e,e.return,P)}}break;case 1:ir(t,e),vr(e),i&512&&n!==null&&Rs(n,n.return);break;case 5:if(ir(t,e),vr(e),i&512&&n!==null&&Rs(n,n.return),e.flags&32){var a=e.stateNode;try{na(a,"")}catch(P){Dt(e,e.return,P)}}if(i&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,f=n!==null?n.memoizedProps:l,g=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&Yp(a,l),gd(g,f);var m=gd(g,l);for(f=0;f<p.length;f+=2){var C=p[f],E=p[f+1];C==="style"?$p(a,E):C==="dangerouslySetInnerHTML"?Kp(a,E):C==="children"?na(a,E):Mf(a,C,E,m)}switch(g){case"input":cd(a,l);break;case"textarea":Xp(a,l);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?Bs(a,!!l.multiple,R,!1):A!==!!l.multiple&&(l.defaultValue!=null?Bs(a,!!l.multiple,l.defaultValue,!0):Bs(a,!!l.multiple,l.multiple?[]:"",!1))}a[da]=l}catch(P){Dt(e,e.return,P)}}break;case 6:if(ir(t,e),vr(e),i&4){if(e.stateNode===null)throw Error(ae(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(P){Dt(e,e.return,P)}}break;case 3:if(ir(t,e),vr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(t.containerInfo)}catch(P){Dt(e,e.return,P)}break;case 4:ir(t,e),vr(e);break;case 13:ir(t,e),vr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(ch=Lt())),i&4&&R1(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(on=(m=on)||C,ir(t,e),on=m):ir(t,e),vr(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!C&&e.mode&1)for(Ce=e,C=e.child;C!==null;){for(E=Ce=C;Ce!==null;){switch(A=Ce,R=A.child,A.tag){case 0:case 11:case 14:case 15:Yo(4,A,A.return);break;case 1:Rs(A,A.return);var _=A.stateNode;if(typeof _.componentWillUnmount=="function"){i=A,n=A.return;try{t=i,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(P){Dt(i,n,P)}}break;case 5:Rs(A,A.return);break;case 22:if(A.memoizedState!==null){D1(E);continue}}R!==null?(R.return=A,Ce=R):D1(E)}C=C.sibling}e:for(C=null,E=e;;){if(E.tag===5){if(C===null){C=E;try{a=E.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=E.stateNode,p=E.memoizedProps.style,f=p!=null&&p.hasOwnProperty("display")?p.display:null,g.style.display=Zp("display",f))}catch(P){Dt(e,e.return,P)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=m?"":E.memoizedProps}catch(P){Dt(e,e.return,P)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ir(t,e),vr(e),i&4&&R1(e);break;case 21:break;default:ir(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vx(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(na(a,""),i.flags&=-33);var l=N1(e);Hd(e,l,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=N1(e);Wd(e,g,f);break;default:throw Error(ae(161))}}catch(p){Dt(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zE(e,t,n){Ce=e,Tx(e)}function Tx(e,t,n){for(var i=(e.mode&1)!==0;Ce!==null;){var a=Ce,l=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||cl;if(!f){var g=a.alternate,p=g!==null&&g.memoizedState!==null||on;g=cl;var m=on;if(cl=f,(on=p)&&!m)for(Ce=a;Ce!==null;)f=Ce,p=f.child,f.tag===22&&f.memoizedState!==null?_1(a):p!==null?(p.return=f,Ce=p):_1(a);for(;l!==null;)Ce=l,Tx(l),l=l.sibling;Ce=a,cl=g,on=m}M1(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Ce=l):M1(e)}}function M1(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:on||Rc(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!on)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:or(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&g1(t,l,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}g1(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var C=m.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&oa(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}on||t.flags&512&&zd(t)}catch(A){Dt(t,t.return,A)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function D1(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function _1(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rc(4,t)}catch(p){Dt(t,n,p)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(p){Dt(t,a,p)}}var l=t.return;try{zd(t)}catch(p){Dt(t,l,p)}break;case 5:var f=t.return;try{zd(t)}catch(p){Dt(t,f,p)}}}catch(p){Dt(t,t.return,p)}if(t===e){Ce=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ce=g;break}Ce=t.return}}var WE=Math.ceil,nc=Kr.ReactCurrentDispatcher,ah=Kr.ReactCurrentOwner,$n=Kr.ReactCurrentBatchConfig,et=0,Xt=null,jt=null,Jt=0,On=0,Ms=Di(0),zt=0,xa=null,os=0,Mc=0,lh=0,Xo=null,An=null,ch=0,Ks=1/0,Pr=null,rc=!1,Gd=null,Si=null,ul=!1,pi=null,ic=0,Qo=0,Yd=null,Nl=-1,Rl=0;function hn(){return et&6?Lt():Nl!==-1?Nl:Nl=Lt()}function Ai(e){return e.mode&1?et&2&&Jt!==0?Jt&-Jt:IE.transition!==null?(Rl===0&&(Rl=cm()),Rl):(e=st,e!==0||(e=window.event,e=e===void 0?16:mm(e.type)),e):1}function dr(e,t,n,i){if(50<Qo)throw Qo=0,Yd=null,Error(ae(185));Na(e,n,i),(!(et&2)||e!==Xt)&&(e===Xt&&(!(et&2)&&(Mc|=n),zt===4&&fi(e,Jt)),Rn(e,i),n===1&&et===0&&!(t.mode&1)&&(Ks=Lt()+500,Ic&&_i()))}function Rn(e,t){var n=e.callbackNode;IC(e,t);var i=Vl(e,e===Xt?Jt:0);if(i===0)n!==null&&V0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&V0(n),t===1)e.tag===0?TE(O1.bind(null,e)):km(O1.bind(null,e)),EE(function(){!(et&6)&&_i()}),n=null;else{switch(um(i)){case 1:n=kf;break;case 4:n=am;break;case 16:n=Ul;break;case 536870912:n=lm;break;default:n=Ul}n=Ox(n,Ix.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ix(e,t){if(Nl=-1,Rl=0,et&6)throw Error(ae(327));var n=e.callbackNode;if(zs()&&e.callbackNode!==n)return null;var i=Vl(e,e===Xt?Jt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=sc(e,i);else{t=i;var a=et;et|=2;var l=Nx();(Xt!==e||Jt!==t)&&(Pr=null,Ks=Lt()+500,qi(e,t));do try{YE();break}catch(g){bx(e,g)}while(1);Qf(),nc.current=l,et=a,jt!==null?t=0:(Xt=null,Jt=0,t=zt)}if(t!==0){if(t===2&&(a=wd(e),a!==0&&(i=a,t=Xd(e,a))),t===1)throw n=xa,qi(e,0),fi(e,i),Rn(e,Lt()),n;if(t===6)fi(e,i);else{if(a=e.current.alternate,!(i&30)&&!HE(a)&&(t=sc(e,i),t===2&&(l=wd(e),l!==0&&(i=l,t=Xd(e,l))),t===1))throw n=xa,qi(e,0),fi(e,i),Rn(e,Lt()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(ae(345));case 2:Gi(e,An,Pr);break;case 3:if(fi(e,i),(i&130023424)===i&&(t=ch+500-Lt(),10<t)){if(Vl(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){hn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=bd(Gi.bind(null,e,An,Pr),t);break}Gi(e,An,Pr);break;case 4:if(fi(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-ur(i);l=1<<f,f=t[f],f>a&&(a=f),i&=~l}if(i=a,i=Lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*WE(i/1960))-i,10<i){e.timeoutHandle=bd(Gi.bind(null,e,An,Pr),i);break}Gi(e,An,Pr);break;case 5:Gi(e,An,Pr);break;default:throw Error(ae(329))}}}return Rn(e,Lt()),e.callbackNode===n?Ix.bind(null,e):null}function Xd(e,t){var n=Xo;return e.current.memoizedState.isDehydrated&&(qi(e,t).flags|=256),e=sc(e,t),e!==2&&(t=An,An=n,t!==null&&Qd(t)),e}function Qd(e){An===null?An=e:An.push.apply(An,e)}function HE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],l=a.getSnapshot;a=a.value;try{if(!fr(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fi(e,t){for(t&=~lh,t&=~Mc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ur(t),i=1<<n;e[n]=-1,t&=~i}}function O1(e){if(et&6)throw Error(ae(327));zs();var t=Vl(e,0);if(!(t&1))return Rn(e,Lt()),null;var n=sc(e,t);if(e.tag!==0&&n===2){var i=wd(e);i!==0&&(t=i,n=Xd(e,i))}if(n===1)throw n=xa,qi(e,0),fi(e,t),Rn(e,Lt()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gi(e,An,Pr),Rn(e,Lt()),null}function uh(e,t){var n=et;et|=1;try{return e(t)}finally{et=n,et===0&&(Ks=Lt()+500,Ic&&_i())}}function as(e){pi!==null&&pi.tag===0&&!(et&6)&&zs();var t=et;et|=1;var n=$n.transition,i=st;try{if($n.transition=null,st=1,e)return e()}finally{st=i,$n.transition=n,et=t,!(et&6)&&_i()}}function dh(){On=Ms.current,mt(Ms)}function qi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,CE(n)),jt!==null)for(n=jt.return;n!==null;){var i=n;switch(Gf(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yl();break;case 3:Xs(),mt(bn),mt(ln),eh();break;case 5:Jf(i);break;case 4:Xs();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:Kf(i.type._context);break;case 22:case 23:dh()}n=n.return}if(Xt=e,jt=e=Ti(e.current,null),Jt=On=t,zt=0,xa=null,lh=Mc=os=0,An=Xo=null,Qi!==null){for(t=0;t<Qi.length;t++)if(n=Qi[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=a,i.next=f}n.pending=i}Qi=null}return e}function bx(e,t){do{var n=jt;try{if(Qf(),Tl.current=tc,ec){for(var i=St.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}ec=!1}if(ss=0,Yt=Vt=St=null,Go=!1,ga=0,ah.current=null,n===null||n.return===null){zt=1,xa=t,jt=null;break}e:{var l=e,f=n.return,g=n,p=t;if(t=Jt,g.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,C=g,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var A=C.alternate;A?(C.updateQueue=A.updateQueue,C.memoizedState=A.memoizedState,C.lanes=A.lanes):(C.updateQueue=null,C.memoizedState=null)}var R=C1(f);if(R!==null){R.flags&=-257,E1(R,f,g,l,t),R.mode&1&&w1(l,m,t),t=R,p=m;var _=t.updateQueue;if(_===null){var P=new Set;P.add(p),t.updateQueue=P}else _.add(p);break e}else{if(!(t&1)){w1(l,m,t),fh();break e}p=Error(ae(426))}}else if(yt&&g.mode&1){var U=C1(f);if(U!==null){!(U.flags&65536)&&(U.flags|=256),E1(U,f,g,l,t),Yf(Qs(p,g));break e}}l=p=Qs(p,g),zt!==4&&(zt=2),Xo===null?Xo=[l]:Xo.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var N=ux(l,p,t);h1(l,N);break e;case 1:g=p;var b=l.type,S=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Si===null||!Si.has(S)))){l.flags|=65536,t&=-t,l.lanes|=t;var O=dx(l,g,t);h1(l,O);break e}}l=l.return}while(l!==null)}Mx(n)}catch(V){t=V,jt===n&&n!==null&&(jt=n=n.return);continue}break}while(1)}function Nx(){var e=nc.current;return nc.current=tc,e===null?tc:e}function fh(){(zt===0||zt===3||zt===2)&&(zt=4),Xt===null||!(os&268435455)&&!(Mc&268435455)||fi(Xt,Jt)}function sc(e,t){var n=et;et|=2;var i=Nx();(Xt!==e||Jt!==t)&&(Pr=null,qi(e,t));do try{GE();break}catch(a){bx(e,a)}while(1);if(Qf(),et=n,nc.current=i,jt!==null)throw Error(ae(261));return Xt=null,Jt=0,zt}function GE(){for(;jt!==null;)Rx(jt)}function YE(){for(;jt!==null&&!xC();)Rx(jt)}function Rx(e){var t=_x(e.alternate,e,On);e.memoizedProps=e.pendingProps,t===null?Mx(e):jt=t,ah.current=null}function Mx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FE(n,t),n!==null){n.flags&=32767,jt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,jt=null;return}}else if(n=jE(n,t,On),n!==null){jt=n;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);zt===0&&(zt=5)}function Gi(e,t,n){var i=st,a=$n.transition;try{$n.transition=null,st=1,XE(e,t,n,i)}finally{$n.transition=a,st=i}return null}function XE(e,t,n,i){do zs();while(pi!==null);if(et&6)throw Error(ae(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(bC(e,l),e===Xt&&(jt=Xt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ul||(ul=!0,Ox(Ul,function(){return zs(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=$n.transition,$n.transition=null;var f=st;st=1;var g=et;et|=4,ah.current=null,VE(e,n),Ax(n,e),hE(Td),zl=!!Ad,Td=Ad=null,e.current=n,zE(n),yC(),et=g,st=f,$n.transition=l}else e.current=n;if(ul&&(ul=!1,pi=e,ic=a),l=e.pendingLanes,l===0&&(Si=null),EC(n.stateNode),Rn(e,Lt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(rc)throw rc=!1,e=Gd,Gd=null,e;return ic&1&&e.tag!==0&&zs(),l=e.pendingLanes,l&1?e===Yd?Qo++:(Qo=0,Yd=e):Qo=0,_i(),null}function zs(){if(pi!==null){var e=um(ic),t=$n.transition,n=st;try{if($n.transition=null,st=16>e?16:e,pi===null)var i=!1;else{if(e=pi,pi=null,ic=0,et&6)throw Error(ae(331));var a=et;for(et|=4,Ce=e.current;Ce!==null;){var l=Ce,f=l.child;if(Ce.flags&16){var g=l.deletions;if(g!==null){for(var p=0;p<g.length;p++){var m=g[p];for(Ce=m;Ce!==null;){var C=Ce;switch(C.tag){case 0:case 11:case 15:Yo(8,C,l)}var E=C.child;if(E!==null)E.return=C,Ce=E;else for(;Ce!==null;){C=Ce;var A=C.sibling,R=C.return;if(Ex(C),C===m){Ce=null;break}if(A!==null){A.return=R,Ce=A;break}Ce=R}}}var _=l.alternate;if(_!==null){var P=_.child;if(P!==null){_.child=null;do{var U=P.sibling;P.sibling=null,P=U}while(P!==null)}}Ce=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ce=f;else e:for(;Ce!==null;){if(l=Ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Yo(9,l,l.return)}var N=l.sibling;if(N!==null){N.return=l.return,Ce=N;break e}Ce=l.return}}var b=e.current;for(Ce=b;Ce!==null;){f=Ce;var S=f.child;if(f.subtreeFlags&2064&&S!==null)S.return=f,Ce=S;else e:for(f=b;Ce!==null;){if(g=Ce,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Rc(9,g)}}catch(V){Dt(g,g.return,V)}if(g===f){Ce=null;break e}var O=g.sibling;if(O!==null){O.return=g.return,Ce=O;break e}Ce=g.return}}if(et=a,_i(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Ec,e)}catch{}i=!0}return i}finally{st=n,$n.transition=t}}return!1}function P1(e,t,n){t=Qs(n,t),t=ux(e,t,1),e=vi(e,t,1),t=hn(),e!==null&&(Na(e,1,t),Rn(e,t))}function Dt(e,t,n){if(e.tag===3)P1(e,e,n);else for(;t!==null;){if(t.tag===3){P1(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Si===null||!Si.has(i))){e=Qs(n,e),e=dx(t,e,1),t=vi(t,e,1),e=hn(),t!==null&&(Na(t,1,e),Rn(t,e));break}}t=t.return}}function QE(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=hn(),e.pingedLanes|=e.suspendedLanes&n,Xt===e&&(Jt&n)===n&&(zt===4||zt===3&&(Jt&130023424)===Jt&&500>Lt()-ch?qi(e,0):lh|=n),Rn(e,t)}function Dx(e,t){t===0&&(e.mode&1?(t=el,el<<=1,!(el&130023424)&&(el=4194304)):t=1);var n=hn();e=Wr(e,t),e!==null&&(Na(e,t,n),Rn(e,n))}function KE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dx(e,n)}function ZE(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(t),Dx(e,n)}var _x;_x=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bn.current)Tn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tn=!1,BE(e,t,n);Tn=!!(e.flags&131072)}else Tn=!1,yt&&t.flags&1048576&&Lm(t,Kl,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;bl(e,t),e=t.pendingProps;var a=Hs(t,ln.current);Vs(t,n),a=nh(null,t,i,e,a,n);var l=rh();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(i)?(l=!0,Xl(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$f(t),a.updater=Nc,t.stateNode=a,a._reactInternals=t,Pd(t,i,e,n),t=Bd(null,t,i,!0,l,n)):(t.tag=0,yt&&l&&Hf(t),dn(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(bl(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=qE(i),e=or(i,e),a){case 0:t=Ld(null,t,i,e,n);break e;case 1:t=A1(null,t,i,e,n);break e;case 11:t=v1(null,t,i,e,n);break e;case 14:t=S1(null,t,i,or(i.type,e),n);break e}throw Error(ae(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:or(i,a),Ld(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:or(i,a),A1(e,t,i,a,n);case 3:e:{if(px(t),e===null)throw Error(ae(387));i=t.pendingProps,l=t.memoizedState,a=l.element,zm(e,t),ql(t,i,null,n);var f=t.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Qs(Error(ae(423)),t),t=T1(e,t,i,n,a);break e}else if(i!==a){a=Qs(Error(ae(424)),t),t=T1(e,t,i,n,a);break e}else for(kn=Ei(t.stateNode.containerInfo.firstChild),Ln=t,yt=!0,cr=null,n=Um(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),i===a){t=Hr(e,t,n);break e}dn(e,t,i,n)}t=t.child}return t;case 5:return Wm(t),e===null&&Dd(t),i=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,f=a.children,Id(i,a)?f=null:l!==null&&Id(i,l)&&(t.flags|=32),gx(e,t),dn(e,t,f,n),t.child;case 6:return e===null&&Dd(t),null;case 13:return mx(e,t,n);case 4:return qf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ys(t,null,i,n):dn(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:or(i,a),v1(e,t,i,a,n);case 7:return dn(e,t,t.pendingProps,n),t.child;case 8:return dn(e,t,t.pendingProps.children,n),t.child;case 12:return dn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,l=t.memoizedProps,f=a.value,dt(Zl,i._currentValue),i._currentValue=f,l!==null)if(fr(l.value,f)){if(l.children===a.children&&!bn.current){t=Hr(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var g=l.dependencies;if(g!==null){f=l.child;for(var p=g.firstContext;p!==null;){if(p.context===i){if(l.tag===1){p=Fr(-1,n&-n),p.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}}l.lanes|=n,p=l.alternate,p!==null&&(p.lanes|=n),_d(l.return,n,t),g.lanes|=n;break}p=p.next}}else if(l.tag===10)f=l.type===t.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ae(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),_d(f,n,t),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===t){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}dn(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Vs(t,n),a=Jn(a),i=i(a),t.flags|=1,dn(e,t,i,n),t.child;case 14:return i=t.type,a=or(i,t.pendingProps),a=or(i.type,a),S1(e,t,i,a,n);case 15:return fx(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:or(i,a),bl(e,t),t.tag=1,Nn(i)?(e=!0,Xl(t)):e=!1,Vs(t,n),cx(t,i,a),Pd(t,i,a,n),Bd(null,t,i,!0,e,n);case 19:return xx(e,t,n);case 22:return hx(e,t,n)}throw Error(ae(156,t.tag))};function Ox(e,t){return om(e,t)}function $E(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,n,i){return new $E(e,t,n,i)}function hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qE(e){if(typeof e=="function")return hh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_f)return 11;if(e===Of)return 14}return 2}function Ti(e,t){var n=e.alternate;return n===null?(n=Zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,i,a,l){var f=2;if(i=e,typeof e=="function")hh(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Cs:return Ji(n.children,a,l,t);case Df:f=8,a|=8;break;case id:return e=Zn(12,n,t,a|2),e.elementType=id,e.lanes=l,e;case sd:return e=Zn(13,n,t,a),e.elementType=sd,e.lanes=l,e;case od:return e=Zn(19,n,t,a),e.elementType=od,e.lanes=l,e;case Wp:return Dc(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vp:f=10;break e;case zp:f=9;break e;case _f:f=11;break e;case Of:f=14;break e;case ci:f=16,i=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Zn(f,n,t,a),t.elementType=e,t.type=i,t.lanes=l,t}function Ji(e,t,n,i){return e=Zn(7,e,i,t),e.lanes=n,e}function Dc(e,t,n,i){return e=Zn(22,e,i,t),e.elementType=Wp,e.lanes=n,e.stateNode={isHidden:!1},e}function ku(e,t,n){return e=Zn(6,e,null,t),e.lanes=n,e}function Lu(e,t,n){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JE(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function gh(e,t,n,i,a,l,f,g,p){return e=new JE(e,t,n,g,p),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Zn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(l),e}function e3(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Px(e){if(!e)return bi;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(Nn(n))return Pm(e,n,t)}return t}function kx(e,t,n,i,a,l,f,g,p){return e=gh(n,i,!0,e,a,l,f,g,p),e.context=Px(null),n=e.current,i=hn(),a=Ai(n),l=Fr(i,a),l.callback=t??null,vi(n,l,a),e.current.lanes=a,Na(e,a,i),Rn(e,i),e}function _c(e,t,n,i){var a=t.current,l=hn(),f=Ai(a);return n=Px(n),t.context===null?t.context=n:t.pendingContext=n,t=Fr(l,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=vi(a,t,f),e!==null&&(dr(e,a,f,l),Al(e,a,f)),f}function oc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function k1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ph(e,t){k1(e,t),(e=e.alternate)&&k1(e,t)}function t3(){return null}var Lx=typeof reportError=="function"?reportError:function(e){console.error(e)};function mh(e){this._internalRoot=e}Oc.prototype.render=mh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));_c(e,t,null,null)};Oc.prototype.unmount=mh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;as(function(){_c(null,e,null,null)}),t[zr]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=hm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<di.length&&t!==0&&t<di[n].priority;n++);di.splice(n,0,e),n===0&&pm(e)}};function xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function L1(){}function n3(e,t,n,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var m=oc(f);l.call(m)}}var f=kx(t,i,e,0,null,!1,!1,"",L1);return e._reactRootContainer=f,e[zr]=f.current,ca(e.nodeType===8?e.parentNode:e),as(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var m=oc(p);g.call(m)}}var p=gh(e,0,!1,null,null,!1,!1,"",L1);return e._reactRootContainer=p,e[zr]=p.current,ca(e.nodeType===8?e.parentNode:e),as(function(){_c(t,p,n,i)}),p}function kc(e,t,n,i,a){var l=n._reactRootContainer;if(l){var f=l;if(typeof a=="function"){var g=a;a=function(){var p=oc(f);g.call(p)}}_c(t,f,e,a)}else f=n3(n,t,e,a,i);return oc(f)}dm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bo(t.pendingLanes);n!==0&&(Lf(t,n|1),Rn(t,Lt()),!(et&6)&&(Ks=Lt()+500,_i()))}break;case 13:as(function(){var i=Wr(e,1);if(i!==null){var a=hn();dr(i,e,1,a)}}),ph(e,1)}};Bf=function(e){if(e.tag===13){var t=Wr(e,134217728);if(t!==null){var n=hn();dr(t,e,134217728,n)}ph(e,134217728)}};fm=function(e){if(e.tag===13){var t=Ai(e),n=Wr(e,t);if(n!==null){var i=hn();dr(n,e,t,i)}ph(e,t)}};hm=function(){return st};gm=function(e,t){var n=st;try{return st=e,t()}finally{st=n}};md=function(e,t,n){switch(t){case"input":if(cd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=Tc(i);if(!a)throw Error(ae(90));Gp(i),cd(i,a)}}}break;case"textarea":Xp(e,n);break;case"select":t=n.value,t!=null&&Bs(e,!!n.multiple,t,!1)}};em=uh;tm=as;var r3={usingClientEntryPoint:!1,Events:[Ma,As,Tc,qp,Jp,uh]},Do={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i3={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=im(e),e===null?null:e.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||t3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Ec=dl.inject(i3),Ir=dl}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r3;jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(t))throw Error(ae(200));return e3(e,t,null,n)};jn.createRoot=function(e,t){if(!xh(e))throw Error(ae(299));var n=!1,i="",a=Lx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=gh(e,1,!1,null,null,n,!1,i,a),e[zr]=t.current,ca(e.nodeType===8?e.parentNode:e),new mh(t)};jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=im(t),e=e===null?null:e.stateNode,e};jn.flushSync=function(e){return as(e)};jn.hydrate=function(e,t,n){if(!Pc(t))throw Error(ae(200));return kc(null,e,t,!0,n)};jn.hydrateRoot=function(e,t,n){if(!xh(e))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,a=!1,l="",f=Lx;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=kx(t,null,e,1,n??null,a,!1,l,f),e[zr]=t.current,ca(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Oc(t)};jn.render=function(e,t,n){if(!Pc(t))throw Error(ae(200));return kc(null,e,t,!1,n)};jn.unmountComponentAtNode=function(e){if(!Pc(e))throw Error(ae(40));return e._reactRootContainer?(as(function(){kc(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1};jn.unstable_batchedUpdates=uh;jn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Pc(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return kc(e,t,n,!1,i)};jn.version="18.3.1-next-f1338f8080-20240426";function Bx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bx)}catch(e){console.error(e)}}Bx(),Bp.exports=jn;var s3=Bp.exports,jx,B1=s3;jx=B1.createRoot,B1.hydrateRoot;const o3="modulepreload",a3=function(e){return"/"+e},j1={},l3=function(t,n,i){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=a3(l),l in j1)return;j1[l]=!0;const f=l.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(!!i)for(let C=a.length-1;C>=0;C--){const E=a[C];if(E.href===l&&(!f||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":o3,f||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),f)return new Promise((C,E)=>{m.addEventListener("load",C),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l})};var yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.parse=p3;yh.serialize=m3;const c3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,u3=/^[\u0021-\u003A\u003C-\u007E]*$/,d3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f3=/^[\u0020-\u003A\u003D-\u007E]*$/,h3=Object.prototype.toString,g3=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function p3(e,t){const n=new g3,i=e.length;if(i<2)return n;const a=(t==null?void 0:t.decode)||x3;let l=0;do{const f=e.indexOf("=",l);if(f===-1)break;const g=e.indexOf(";",l),p=g===-1?i:g;if(f>p){l=e.lastIndexOf(";",f-1)+1;continue}const m=F1(e,l,f),C=U1(e,f,m),E=e.slice(m,C);if(n[E]===void 0){let A=F1(e,f+1,p),R=U1(e,p,A);const _=a(e.slice(A,R));n[E]=_}l=p+1}while(l<i);return n}function F1(e,t,n){do{const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}while(++t<n);return n}function U1(e,t,n){for(;t>n;){const i=e.charCodeAt(--t);if(i!==32&&i!==9)return t+1}return n}function m3(e,t,n){const i=(n==null?void 0:n.encode)||encodeURIComponent;if(!c3.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=i(t);if(!u3.test(a))throw new TypeError(`argument val is invalid: ${t}`);let l=e+"="+a;if(!n)return l;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);l+="; Max-Age="+n.maxAge}if(n.domain){if(!d3.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);l+="; Domain="+n.domain}if(n.path){if(!f3.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);l+="; Path="+n.path}if(n.expires){if(!y3(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.partitioned&&(l+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return l}function x3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function y3(e){return h3.call(e)==="[object Date]"}var V1="popstate";function w3(e={}){function t(i,a){let{pathname:l,search:f,hash:g}=i.location;return Kd("",{pathname:l,search:f,hash:g},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:ya(a)}return E3(t,n,null,e)}function wt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C3(){return Math.random().toString(36).substring(2,10)}function z1(e,t){return{usr:e.state,key:e.key,idx:t}}function Kd(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ao(t):t,state:n,key:t&&t.key||i||C3()}}function ya({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ao(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function E3(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,f=a.history,g="POP",p=null,m=C();m==null&&(m=0,f.replaceState({...f.state,idx:m},""));function C(){return(f.state||{idx:null}).idx}function E(){g="POP";let U=C(),N=U==null?null:U-m;m=U,p&&p({action:g,location:P.location,delta:N})}function A(U,N){g="PUSH";let b=Kd(P.location,U,N);n&&n(b,U),m=C()+1;let S=z1(b,m),O=P.createHref(b);try{f.pushState(S,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(O)}l&&p&&p({action:g,location:P.location,delta:1})}function R(U,N){g="REPLACE";let b=Kd(P.location,U,N);n&&n(b,U),m=C();let S=z1(b,m),O=P.createHref(b);f.replaceState(S,"",O),l&&p&&p({action:g,location:P.location,delta:0})}function _(U){return v3(U)}let P={get action(){return g},get location(){return e(a,f)},listen(U){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(V1,E),p=U,()=>{a.removeEventListener(V1,E),p=null}},createHref(U){return t(a,U)},createURL:_,encodeLocation(U){let N=_(U);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:A,replace:R,go(U){return f.go(U)}};return P}function v3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wt(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:ya(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Fx(e,t,n="/"){return S3(e,t,n,!1)}function S3(e,t,n,i){let a=typeof t=="string"?ao(t):t,l=Gr(a.pathname||"/",n);if(l==null)return null;let f=Ux(e);A3(f);let g=null;for(let p=0;g==null&&p<f.length;++p){let m=k3(l);g=O3(f[p],m,i)}return g}function Ux(e,t=[],n=[],i=""){let a=(l,f,g)=>{let p={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};p.relativePath.startsWith("/")&&(wt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=Ur([i,p.relativePath]),C=n.concat(p);l.children&&l.children.length>0&&(wt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ux(l.children,t,C,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:D3(m,l.index),routesMeta:C})};return e.forEach((l,f)=>{var g;if(l.path===""||!((g=l.path)!=null&&g.includes("?")))a(l,f);else for(let p of Vx(l.path))a(l,f,p)}),t}function Vx(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let f=Vx(i.join("/")),g=[];return g.push(...f.map(p=>p===""?l:[l,p].join("/"))),a&&g.push(...f),g.map(p=>e.startsWith("/")&&p===""?"/":p)}function A3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_3(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var T3=/^:[\w-]+$/,I3=3,b3=2,N3=1,R3=10,M3=-2,W1=e=>e==="*";function D3(e,t){let n=e.split("/"),i=n.length;return n.some(W1)&&(i+=M3),t&&(i+=b3),n.filter(a=>!W1(a)).reduce((a,l)=>a+(T3.test(l)?I3:l===""?N3:R3),i)}function _3(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function O3(e,t,n=!1){let{routesMeta:i}=e,a={},l="/",f=[];for(let g=0;g<i.length;++g){let p=i[g],m=g===i.length-1,C=l==="/"?t:t.slice(l.length)||"/",E=ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},C),A=p.route;if(!E&&m&&n&&!i[i.length-1].route.index&&(E=ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},C)),!E)return null;Object.assign(a,E.params),f.push({params:a,pathname:Ur([l,E.pathname]),pathnameBase:F3(Ur([l,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(l=Ur([l,E.pathnameBase]))}return f}function ac(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=P3(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],f=l.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((m,{paramName:C,isOptional:E},A)=>{if(C==="*"){let _=g[A]||"";f=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const R=g[A];return E&&!R?m[C]=void 0:m[C]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:f,pattern:e}}function P3(e,t=!1,n=!0){hr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function k3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Gr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function L3(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?ao(e):e;return{pathname:n?n.startsWith("/")?n:B3(n,t):t,search:U3(i),hash:V3(a)}}function B3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Bu(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wh(e){let t=j3(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Ch(e,t,n,i=!1){let a;typeof e=="string"?a=ao(e):(a={...e},wt(!a.pathname||!a.pathname.includes("?"),Bu("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),Bu("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),Bu("#","search","hash",a)));let l=e===""||a.pathname==="",f=l?"/":a.pathname,g;if(f==null)g=n;else{let E=t.length-1;if(!i&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),E-=1;a.pathname=A.join("/")}g=E>=0?t[E]:"/"}let p=L3(a,g),m=f&&f!=="/"&&f.endsWith("/"),C=(l||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||C)&&(p.pathname+="/"),p}var Ur=e=>e.join("/").replace(/\/\/+/g,"/"),F3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,V3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function z3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var zx=["POST","PUT","PATCH","DELETE"];new Set(zx);var W3=["GET",...zx];new Set(W3);var lo=M.createContext(null);lo.displayName="DataRouter";var Lc=M.createContext(null);Lc.displayName="DataRouterState";var Wx=M.createContext({isTransitioning:!1});Wx.displayName="ViewTransition";var H3=M.createContext(new Map);H3.displayName="Fetchers";var G3=M.createContext(null);G3.displayName="Await";var gr=M.createContext(null);gr.displayName="Navigation";var _a=M.createContext(null);_a.displayName="Location";var Dr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var Eh=M.createContext(null);Eh.displayName="RouteError";function Y3(e,{relative:t}={}){wt(co(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=M.useContext(gr),{hash:a,pathname:l,search:f}=Oa(e,{relative:t}),g=l;return n!=="/"&&(g=l==="/"?n:Ur([n,l])),i.createHref({pathname:g,search:f,hash:a})}function co(){return M.useContext(_a)!=null}function _r(){return wt(co(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(_a).location}var Hx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gx(e){M.useContext(gr).static||M.useLayoutEffect(e)}function Zr(){let{isDataRoute:e}=M.useContext(Dr);return e?sv():X3()}function X3(){wt(co(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(lo),{basename:t,navigator:n}=M.useContext(gr),{matches:i}=M.useContext(Dr),{pathname:a}=_r(),l=JSON.stringify(wh(i)),f=M.useRef(!1);return Gx(()=>{f.current=!0}),M.useCallback((p,m={})=>{if(hr(f.current,Hx),!f.current)return;if(typeof p=="number"){n.go(p);return}let C=Ch(p,JSON.parse(l),a,m.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:Ur([t,C.pathname])),(m.replace?n.replace:n.push)(C,m.state,m)},[t,n,l,a,e])}M.createContext(null);function Oa(e,{relative:t}={}){let{matches:n}=M.useContext(Dr),{pathname:i}=_r(),a=JSON.stringify(wh(n));return M.useMemo(()=>Ch(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function Q3(e,t){return Yx(e,t)}function Yx(e,t,n,i){var N;wt(co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=M.useContext(gr),{matches:l}=M.useContext(Dr),f=l[l.length-1],g=f?f.params:{},p=f?f.pathname:"/",m=f?f.pathnameBase:"/",C=f&&f.route;{let b=C&&C.path||"";Xx(p,!C||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let E=_r(),A;if(t){let b=typeof t=="string"?ao(t):t;wt(m==="/"||((N=b.pathname)==null?void 0:N.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${b.pathname}" was given in the \`location\` prop.`),A=b}else A=E;let R=A.pathname||"/",_=R;if(m!=="/"){let b=m.replace(/^\//,"").split("/");_="/"+R.replace(/^\//,"").split("/").slice(b.length).join("/")}let P=Fx(e,{pathname:_});hr(C||P!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),hr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=J3(P&&P.map(b=>Object.assign({},b,{params:Object.assign({},g,b.params),pathname:Ur([m,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?m:Ur([m,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,i);return t&&U?M.createElement(_a.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function K3(){let e=iv(),t=z3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:a},n):null,f)}var Z3=M.createElement(K3,null),$3=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(Dr.Provider,{value:this.props.routeContext},M.createElement(Eh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q3({routeContext:e,match:t,children:n}){let i=M.useContext(lo);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Dr.Provider,{value:e},n)}function J3(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);wt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let f=!1,g=-1;if(n)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(g=p),m.route.id){let{loaderData:C,errors:E}=n,A=m.route.loader&&!C.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||A){f=!0,g>=0?a=a.slice(0,g+1):a=[a[0]];break}}}return a.reduceRight((p,m,C)=>{let E,A=!1,R=null,_=null;n&&(E=l&&m.route.id?l[m.route.id]:void 0,R=m.route.errorElement||Z3,f&&(g<0&&C===0?(Xx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,_=null):g===C&&(A=!0,_=m.route.hydrateFallbackElement||null)));let P=t.concat(a.slice(0,C+1)),U=()=>{let N;return E?N=R:A?N=_:m.route.Component?N=M.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=p,M.createElement(q3,{match:m,routeContext:{outlet:p,matches:P,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||C===0)?M.createElement($3,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:U(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):U()},null)}function vh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ev(e){let t=M.useContext(lo);return wt(t,vh(e)),t}function tv(e){let t=M.useContext(Lc);return wt(t,vh(e)),t}function nv(e){let t=M.useContext(Dr);return wt(t,vh(e)),t}function Sh(e){let t=nv(e),n=t.matches[t.matches.length-1];return wt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function rv(){return Sh("useRouteId")}function iv(){var i;let e=M.useContext(Eh),t=tv("useRouteError"),n=Sh("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function sv(){let{router:e}=ev("useNavigate"),t=Sh("useNavigate"),n=M.useRef(!1);return Gx(()=>{n.current=!0}),M.useCallback(async(a,l={})=>{hr(n.current,Hx),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var H1={};function Xx(e,t,n){!t&&!H1[e]&&(H1[e]=!0,hr(!1,n))}M.memo(ov);function ov({routes:e,future:t,state:n}){return Yx(e,void 0,n,t)}function lc({to:e,replace:t,state:n,relative:i}){wt(co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(gr);hr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Dr),{pathname:f}=_r(),g=Zr(),p=Ch(e,wh(l),f,i==="path"),m=JSON.stringify(p);return M.useEffect(()=>{g(JSON.parse(m),{replace:t,state:n,relative:i})},[g,m,i,t,n]),null}function Sn(e){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function av({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:l=!1}){wt(!co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:f,navigator:a,static:l,future:{}}),[f,a,l]);typeof n=="string"&&(n=ao(n));let{pathname:p="/",search:m="",hash:C="",state:E=null,key:A="default"}=n,R=M.useMemo(()=>{let _=Gr(p,f);return _==null?null:{location:{pathname:_,search:m,hash:C,state:E,key:A},navigationType:i}},[f,p,m,C,E,A,i]);return hr(R!=null,`<Router basename="${f}"> is not able to match the URL "${p}${m}${C}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:M.createElement(gr.Provider,{value:g},M.createElement(_a.Provider,{children:t,value:R}))}function lv({children:e,location:t}){return Q3(Zd(e),t)}function Zd(e,t=[]){let n=[];return M.Children.forEach(e,(i,a)=>{if(!M.isValidElement(i))return;let l=[...t,a];if(i.type===M.Fragment){n.push.apply(n,Zd(i.props.children,l));return}wt(i.type===Sn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Zd(i.props.children,l)),n.push(f)}),n}var Dl="get",_l="application/x-www-form-urlencoded";function Bc(e){return e!=null&&typeof e.tagName=="string"}function cv(e){return Bc(e)&&e.tagName.toLowerCase()==="button"}function uv(e){return Bc(e)&&e.tagName.toLowerCase()==="form"}function dv(e){return Bc(e)&&e.tagName.toLowerCase()==="input"}function fv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hv(e,t){return e.button===0&&(!t||t==="_self")&&!fv(e)}var fl=null;function gv(){if(fl===null)try{new FormData(document.createElement("form"),0),fl=!1}catch{fl=!0}return fl}var pv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ju(e){return e!=null&&!pv.has(e)?(hr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_l}"`),null):e}function mv(e,t){let n,i,a,l,f;if(uv(e)){let g=e.getAttribute("action");i=g?Gr(g,t):null,n=e.getAttribute("method")||Dl,a=ju(e.getAttribute("enctype"))||_l,l=new FormData(e)}else if(cv(e)||dv(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||g.getAttribute("action");if(i=p?Gr(p,t):null,n=e.getAttribute("formmethod")||g.getAttribute("method")||Dl,a=ju(e.getAttribute("formenctype"))||ju(g.getAttribute("enctype"))||_l,l=new FormData(g,e),!gv()){let{name:m,type:C,value:E}=e;if(C==="image"){let A=m?`${m}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else m&&l.append(m,E)}}else{if(Bc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Dl,i=null,a=_l,f=e}return l&&a==="text/plain"&&(f=l,l=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:l,body:f}}function Ah(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function xv(e,t){if(e.id in t)return t[e.id];try{let n=await l3(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yv(e){return e!=null&&typeof e.page=="string"}function wv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Cv(e,t,n){let i=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let f=await xv(l,n);return f.links?f.links():[]}return[]}));return Av(i.flat(1).filter(wv).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function G1(e,t,n,i,a,l){let f=(p,m)=>n[m]?p.route.id!==n[m].route.id:!0,g=(p,m)=>{var C;return n[m].pathname!==p.pathname||((C=n[m].route.path)==null?void 0:C.endsWith("*"))&&n[m].params["*"]!==p.params["*"]};return l==="assets"?t.filter((p,m)=>f(p,m)||g(p,m)):l==="data"?t.filter((p,m)=>{var E;let C=i.routes[p.route.id];if(!C||!C.hasLoader)return!1;if(f(p,m)||g(p,m))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function Ev(e,t,{includeHydrateFallback:n}={}){return vv(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function vv(e){return[...new Set(e)]}function Sv(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function Av(e,t){let n=new Set,i=new Set(t);return e.reduce((a,l)=>{if(t&&!yv(l)&&l.as==="script"&&l.href&&i.has(l.href))return a;let g=JSON.stringify(Sv(l));return n.has(g)||(n.add(g),a.push({key:g,link:l})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Tv=new Set([100,101,204,205]);function Iv(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Gr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Qx(){let e=M.useContext(lo);return Ah(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function bv(){let e=M.useContext(Lc);return Ah(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Th=M.createContext(void 0);Th.displayName="FrameworkContext";function Kx(){let e=M.useContext(Th);return Ah(e,"You must render this element inside a <HydratedRouter> element"),e}function Nv(e,t){let n=M.useContext(Th),[i,a]=M.useState(!1),[l,f]=M.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:m,onMouseLeave:C,onTouchStart:E}=t,A=M.useRef(null);M.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let P=N=>{N.forEach(b=>{f(b.isIntersecting)})},U=new IntersectionObserver(P,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[e]),M.useEffect(()=>{if(i){let P=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(P)}}},[i]);let R=()=>{a(!0)},_=()=>{a(!1),f(!1)};return n?e!=="intent"?[l,A,{}]:[l,A,{onFocus:_o(g,R),onBlur:_o(p,_),onMouseEnter:_o(m,R),onMouseLeave:_o(C,_),onTouchStart:_o(E,R)}]:[!1,A,{}]}function _o(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Rv({page:e,...t}){let{router:n}=Qx(),i=M.useMemo(()=>Fx(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?M.createElement(Dv,{page:e,matches:i,...t}):null}function Mv(e){let{manifest:t,routeModules:n}=Kx(),[i,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return Cv(e,t,n).then(f=>{l||a(f)}),()=>{l=!0}},[e,t,n]),i}function Dv({page:e,matches:t,...n}){let i=_r(),{manifest:a,routeModules:l}=Kx(),{basename:f}=Qx(),{loaderData:g,matches:p}=bv(),m=M.useMemo(()=>G1(e,t,p,a,i,"data"),[e,t,p,a,i]),C=M.useMemo(()=>G1(e,t,p,a,i,"assets"),[e,t,p,a,i]),E=M.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let _=new Set,P=!1;if(t.forEach(N=>{var S;let b=a.routes[N.route.id];!b||!b.hasLoader||(!m.some(O=>O.route.id===N.route.id)&&N.route.id in g&&((S=l[N.route.id])!=null&&S.shouldRevalidate)||b.hasClientLoader?P=!0:_.add(N.route.id))}),_.size===0)return[];let U=Iv(e,f);return P&&_.size>0&&U.searchParams.set("_routes",t.filter(N=>_.has(N.route.id)).map(N=>N.route.id).join(",")),[U.pathname+U.search]},[f,g,i,a,m,t,e,l]),A=M.useMemo(()=>Ev(C,a),[C,a]),R=Mv(C);return M.createElement(M.Fragment,null,E.map(_=>M.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),A.map(_=>M.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),R.map(({key:_,link:P})=>M.createElement("link",{key:_,...P})))}function _v(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zx&&(window.__reactRouterVersion="7.6.2")}catch{}function Ov({basename:e,children:t,window:n}){let i=M.useRef();i.current==null&&(i.current=w3({window:n,v5Compat:!0}));let a=i.current,[l,f]=M.useState({action:a.action,location:a.location}),g=M.useCallback(p=>{M.startTransition(()=>f(p))},[f]);return M.useLayoutEffect(()=>a.listen(g),[a,g]),M.createElement(av,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var $x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ih=M.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:l,replace:f,state:g,target:p,to:m,preventScrollReset:C,viewTransition:E,...A},R){let{basename:_}=M.useContext(gr),P=typeof m=="string"&&$x.test(m),U,N=!1;if(typeof m=="string"&&P&&(U=m,Zx))try{let G=new URL(window.location.href),te=m.startsWith("//")?new URL(G.protocol+m):new URL(m),we=Gr(te.pathname,_);te.origin===G.origin&&we!=null?m=we+te.search+te.hash:N=!0}catch{hr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Y3(m,{relative:a}),[S,O,V]=Nv(i,A),z=Bv(m,{replace:f,state:g,target:p,preventScrollReset:C,relative:a,viewTransition:E});function F(G){t&&t(G),G.defaultPrevented||z(G)}let B=M.createElement("a",{...A,...V,href:U||b,onClick:N||l?t:F,ref:_v(R,O),target:p,"data-discover":!P&&n==="render"?"true":void 0});return S&&!P?M.createElement(M.Fragment,null,B,M.createElement(Rv,{page:b})):B});Ih.displayName="Link";var Pv=M.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:l,to:f,viewTransition:g,children:p,...m},C){let E=Oa(f,{relative:m.relative}),A=_r(),R=M.useContext(Lc),{navigator:_,basename:P}=M.useContext(gr),U=R!=null&&zv(E)&&g===!0,N=_.encodeLocation?_.encodeLocation(E).pathname:E.pathname,b=A.pathname,S=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(b=b.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&P&&(S=Gr(S,P)||S);const O=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let V=b===N||!a&&b.startsWith(N)&&b.charAt(O)==="/",z=S!=null&&(S===N||!a&&S.startsWith(N)&&S.charAt(N.length)==="/"),F={isActive:V,isPending:z,isTransitioning:U},B=V?t:void 0,G;typeof i=="function"?G=i(F):G=[i,V?"active":null,z?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let te=typeof l=="function"?l(F):l;return M.createElement(Ih,{...m,"aria-current":B,className:G,ref:C,style:te,to:f,viewTransition:g},typeof p=="function"?p(F):p)});Pv.displayName="NavLink";var kv=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:l,method:f=Dl,action:g,onSubmit:p,relative:m,preventScrollReset:C,viewTransition:E,...A},R)=>{let _=Uv(),P=Vv(g,{relative:m}),U=f.toLowerCase()==="get"?"get":"post",N=typeof g=="string"&&$x.test(g),b=S=>{if(p&&p(S),S.defaultPrevented)return;S.preventDefault();let O=S.nativeEvent.submitter,V=(O==null?void 0:O.getAttribute("formmethod"))||f;_(O||S.currentTarget,{fetcherKey:t,method:V,navigate:n,replace:a,state:l,relative:m,preventScrollReset:C,viewTransition:E})};return M.createElement("form",{ref:R,method:U,action:P,onSubmit:i?p:b,...A,"data-discover":!N&&e==="render"?"true":void 0})});kv.displayName="Form";function Lv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qx(e){let t=M.useContext(lo);return wt(t,Lv(e)),t}function Bv(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:l,viewTransition:f}={}){let g=Zr(),p=_r(),m=Oa(e,{relative:l});return M.useCallback(C=>{if(hv(C,t)){C.preventDefault();let E=n!==void 0?n:ya(p)===ya(m);g(e,{replace:E,state:i,preventScrollReset:a,relative:l,viewTransition:f})}},[p,g,m,n,i,t,e,a,l,f])}var jv=0,Fv=()=>`__${String(++jv)}__`;function Uv(){let{router:e}=qx("useSubmit"),{basename:t}=M.useContext(gr),n=rv();return M.useCallback(async(i,a={})=>{let{action:l,method:f,encType:g,formData:p,body:m}=mv(i,t);if(a.navigate===!1){let C=a.fetcherKey||Fv();await e.fetch(C,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||f,formEncType:a.encType||g,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||f,formEncType:a.encType||g,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function Vv(e,{relative:t}={}){let{basename:n}=M.useContext(gr),i=M.useContext(Dr);wt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Oa(e||".",{relative:t})},f=_r();if(e==null){l.search=f.search;let g=new URLSearchParams(l.search),p=g.getAll("index");if(p.some(C=>C==="")){g.delete("index"),p.filter(E=>E).forEach(E=>g.append("index",E));let C=g.toString();l.search=C?`?${C}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Ur([n,l.pathname])),ya(l)}function zv(e,t={}){let n=M.useContext(Wx);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=qx("useViewTransitionState"),a=Oa(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Gr(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=Gr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ac(a.pathname,f)!=null||ac(a.pathname,l)!=null}[...Tv];const bh=M.createContext({});function Nh(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const Rh=typeof window<"u",Jx=Rh?M.useLayoutEffect:M.useEffect,jc=M.createContext(null);function Mh(e,t){e.indexOf(t)===-1&&e.push(t)}function Dh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Yr=(e,t,n)=>n>t?t:n<e?e:n;let _h=()=>{};const Xr={},e2=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function t2(e){return typeof e=="object"&&e!==null}const n2=e=>/^0[^.\s]+$/u.test(e);function Oh(e){let t;return()=>(t===void 0&&(t=e()),t)}const qn=e=>e,Wv=(e,t)=>n=>t(e(n)),Pa=(...e)=>e.reduce(Wv),wa=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class Ph{constructor(){this.subscriptions=[]}add(t){return Mh(this.subscriptions,t),()=>Dh(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let l=0;l<a;l++){const f=this.subscriptions[l];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nr=e=>e*1e3,Rr=e=>e/1e3;function r2(e,t){return t?e*(1e3/t):0}const i2=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Hv=1e-7,Gv=12;function Yv(e,t,n,i,a){let l,f,g=0;do f=t+(n-t)/2,l=i2(f,i,a)-e,l>0?n=f:t=f;while(Math.abs(l)>Hv&&++g<Gv);return f}function ka(e,t,n,i){if(e===t&&n===i)return qn;const a=l=>Yv(l,0,1,e,n);return l=>l===0||l===1?l:i2(a(l),t,i)}const s2=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,o2=e=>t=>1-e(1-t),a2=ka(.33,1.53,.69,.99),kh=o2(a2),l2=s2(kh),c2=e=>(e*=2)<1?.5*kh(e):.5*(2-Math.pow(2,-10*(e-1))),Lh=e=>1-Math.sin(Math.acos(e)),u2=o2(Lh),d2=s2(Lh),Xv=ka(.42,0,1,1),Qv=ka(0,0,.58,1),f2=ka(.42,0,.58,1),Kv=e=>Array.isArray(e)&&typeof e[0]!="number",h2=e=>Array.isArray(e)&&typeof e[0]=="number",Zv={linear:qn,easeIn:Xv,easeInOut:f2,easeOut:Qv,circIn:Lh,circInOut:d2,circOut:u2,backIn:kh,backInOut:l2,backOut:a2,anticipate:c2},$v=e=>typeof e=="string",Y1=e=>{if(h2(e)){_h(e.length===4);const[t,n,i,a]=e;return ka(t,n,i,a)}else if($v(e))return Zv[e];return e},hl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],X1={value:null,addProjectionMetrics:null};function qv(e,t){let n=new Set,i=new Set,a=!1,l=!1;const f=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1},p=0;function m(E){f.has(E)&&(C.schedule(E),e()),p++,E(g)}const C={schedule:(E,A=!1,R=!1)=>{const P=R&&a?n:i;return A&&f.add(E),P.has(E)||P.add(E),E},cancel:E=>{i.delete(E),f.delete(E)},process:E=>{if(g=E,a){l=!0;return}a=!0,[n,i]=[i,n],n.forEach(m),t&&X1.value&&X1.value.frameloop[t].push(p),p=0,n.clear(),a=!1,l&&(l=!1,C.process(E))}};return C}const Jv=40;function g2(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,f=hl.reduce((S,O)=>(S[O]=qv(l,t?O:void 0),S),{}),{setup:g,read:p,resolveKeyframes:m,preUpdate:C,update:E,preRender:A,render:R,postRender:_}=f,P=()=>{const S=Xr.useManualTiming?a.timestamp:performance.now();n=!1,Xr.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(S-a.timestamp,Jv),1)),a.timestamp=S,a.isProcessing=!0,g.process(a),p.process(a),m.process(a),C.process(a),E.process(a),A.process(a),R.process(a),_.process(a),a.isProcessing=!1,n&&t&&(i=!1,e(P))},U=()=>{n=!0,i=!0,a.isProcessing||e(P)};return{schedule:hl.reduce((S,O)=>{const V=f[O];return S[O]=(z,F=!1,B=!1)=>(n||U(),V.schedule(z,F,B)),S},{}),cancel:S=>{for(let O=0;O<hl.length;O++)f[hl[O]].cancel(S)},state:a,steps:f}}const{schedule:At,cancel:Ni,state:qt,steps:Fu}=g2(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0);let Ol;function eS(){Ol=void 0}const In={now:()=>(Ol===void 0&&In.set(qt.isProcessing||Xr.useManualTiming?qt.timestamp:performance.now()),Ol),set:e=>{Ol=e,queueMicrotask(eS)}},p2=e=>t=>typeof t=="string"&&t.startsWith(e),Bh=p2("--"),tS=p2("var(--"),jh=e=>tS(e)?nS.test(e.split("/*")[0].trim()):!1,nS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ca={...uo,transform:e=>Yr(0,1,e)},gl={...uo,default:1},Ko=e=>Math.round(e*1e5)/1e5,Fh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rS(e){return e==null}const iS=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uh=(e,t)=>n=>!!(typeof n=="string"&&iS.test(n)&&n.startsWith(e)||t&&!rS(n)&&Object.prototype.hasOwnProperty.call(n,t)),m2=(e,t,n)=>i=>{if(typeof i!="string")return i;const[a,l,f,g]=i.match(Fh);return{[e]:parseFloat(a),[t]:parseFloat(l),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},sS=e=>Yr(0,255,e),Uu={...uo,transform:e=>Math.round(sS(e))},Zi={test:Uh("rgb","red"),parse:m2("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Uu.transform(e)+", "+Uu.transform(t)+", "+Uu.transform(n)+", "+Ko(Ca.transform(i))+")"};function oS(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const $d={test:Uh("#"),parse:oS,transform:Zi.transform},La=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),li=La("deg"),Mr=La("%"),je=La("px"),aS=La("vh"),lS=La("vw"),Q1=(()=>({...Mr,parse:e=>Mr.parse(e)/100,transform:e=>Mr.transform(e*100)}))(),Ds={test:Uh("hsl","hue"),parse:m2("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Mr.transform(Ko(t))+", "+Mr.transform(Ko(n))+", "+Ko(Ca.transform(i))+")"},sn={test:e=>Zi.test(e)||$d.test(e)||Ds.test(e),parse:e=>Zi.test(e)?Zi.parse(e):Ds.test(e)?Ds.parse(e):$d.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Zi.transform(e):Ds.transform(e)},cS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uS(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Fh))==null?void 0:t.length)||0)+(((n=e.match(cS))==null?void 0:n.length)||0)>0}const x2="number",y2="color",dS="var",fS="var(",K1="${}",hS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ea(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},a=[];let l=0;const g=t.replace(hS,p=>(sn.test(p)?(i.color.push(l),a.push(y2),n.push(sn.parse(p))):p.startsWith(fS)?(i.var.push(l),a.push(dS),n.push(p)):(i.number.push(l),a.push(x2),n.push(parseFloat(p))),++l,K1)).split(K1);return{values:n,split:g,indexes:i,types:a}}function w2(e){return Ea(e).values}function C2(e){const{split:t,types:n}=Ea(e),i=t.length;return a=>{let l="";for(let f=0;f<i;f++)if(l+=t[f],a[f]!==void 0){const g=n[f];g===x2?l+=Ko(a[f]):g===y2?l+=sn.transform(a[f]):l+=a[f]}return l}}const gS=e=>typeof e=="number"?0:e;function pS(e){const t=w2(e);return C2(e)(t.map(gS))}const Ri={test:uS,parse:w2,createTransformer:C2,getAnimatableNone:pS};function Vu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function mS({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,l=0,f=0;if(!t)a=l=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,p=2*n-g;a=Vu(p,g,e+1/3),l=Vu(p,g,e),f=Vu(p,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(f*255),alpha:i}}function cc(e,t){return n=>n>0?t:e}const vt=(e,t,n)=>e+(t-e)*n,zu=(e,t,n)=>{const i=e*e,a=n*(t*t-i)+i;return a<0?0:Math.sqrt(a)},xS=[$d,Zi,Ds],yS=e=>xS.find(t=>t.test(e));function Z1(e){const t=yS(e);if(!t)return!1;let n=t.parse(e);return t===Ds&&(n=mS(n)),n}const $1=(e,t)=>{const n=Z1(e),i=Z1(t);if(!n||!i)return cc(e,t);const a={...n};return l=>(a.red=zu(n.red,i.red,l),a.green=zu(n.green,i.green,l),a.blue=zu(n.blue,i.blue,l),a.alpha=vt(n.alpha,i.alpha,l),Zi.transform(a))},qd=new Set(["none","hidden"]);function wS(e,t){return qd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function CS(e,t){return n=>vt(e,t,n)}function Vh(e){return typeof e=="number"?CS:typeof e=="string"?jh(e)?cc:sn.test(e)?$1:SS:Array.isArray(e)?E2:typeof e=="object"?sn.test(e)?$1:ES:cc}function E2(e,t){const n=[...e],i=n.length,a=e.map((l,f)=>Vh(l)(l,t[f]));return l=>{for(let f=0;f<i;f++)n[f]=a[f](l);return n}}function ES(e,t){const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=Vh(e[a])(e[a],t[a]));return a=>{for(const l in i)n[l]=i[l](a);return n}}function vS(e,t){const n=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],f=e.indexes[l][i[l]],g=e.values[f]??0;n[a]=g,i[l]++}return n}const SS=(e,t)=>{const n=Ri.createTransformer(t),i=Ea(e),a=Ea(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?qd.has(e)&&!a.values.length||qd.has(t)&&!i.values.length?wS(e,t):Pa(E2(vS(i,a),a.values),n):cc(e,t)};function v2(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?vt(e,t,n):Vh(e)(e,t)}const AS=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>At.update(t,n),stop:()=>Ni(t),now:()=>qt.isProcessing?qt.timestamp:In.now()}},S2=(e,t,n=10)=>{let i="";const a=Math.max(Math.round(t/n),2);for(let l=0;l<a;l++)i+=e(l/(a-1))+", ";return`linear(${i.substring(0,i.length-2)})`},uc=2e4;function zh(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<uc;)t+=n,i=e.next(t);return t>=uc?1/0:t}function TS(e,t=100,n){const i=n({...e,keyframes:[0,t]}),a=Math.min(zh(i),uc);return{type:"keyframes",ease:l=>i.next(a*l).value/t,duration:Rr(a)}}const IS=5;function A2(e,t,n){const i=Math.max(t-IS,0);return r2(n-e(i),t-i)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wu=.001;function bS({duration:e=Mt.duration,bounce:t=Mt.bounce,velocity:n=Mt.velocity,mass:i=Mt.mass}){let a,l,f=1-t;f=Yr(Mt.minDamping,Mt.maxDamping,f),e=Yr(Mt.minDuration,Mt.maxDuration,Rr(e)),f<1?(a=m=>{const C=m*f,E=C*e,A=C-n,R=Jd(m,f),_=Math.exp(-E);return Wu-A/R*_},l=m=>{const E=m*f*e,A=E*n+n,R=Math.pow(f,2)*Math.pow(m,2)*e,_=Math.exp(-E),P=Jd(Math.pow(m,2),f);return(-a(m)+Wu>0?-1:1)*((A-R)*_)/P}):(a=m=>{const C=Math.exp(-m*e),E=(m-n)*e+1;return-Wu+C*E},l=m=>{const C=Math.exp(-m*e),E=(n-m)*(e*e);return C*E});const g=5/e,p=RS(a,l,g);if(e=Nr(e),isNaN(p))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:e};{const m=Math.pow(p,2)*i;return{stiffness:m,damping:f*2*Math.sqrt(i*m),duration:e}}}const NS=12;function RS(e,t,n){let i=n;for(let a=1;a<NS;a++)i=i-e(i)/t(i);return i}function Jd(e,t){return e*Math.sqrt(1-t*t)}const MS=["duration","bounce"],DS=["stiffness","damping","mass"];function q1(e,t){return t.some(n=>e[n]!==void 0)}function _S(e){let t={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...e};if(!q1(e,DS)&&q1(e,MS))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),a=i*i,l=2*Yr(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Mt.mass,stiffness:a,damping:l}}else{const n=bS(e);t={...t,...n,mass:Mt.mass},t.isResolvedFromDuration=!0}return t}function dc(e=Mt.visualDuration,t=Mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:a}=n;const l=n.keyframes[0],f=n.keyframes[n.keyframes.length-1],g={done:!1,value:l},{stiffness:p,damping:m,mass:C,duration:E,velocity:A,isResolvedFromDuration:R}=_S({...n,velocity:-Rr(n.velocity||0)}),_=A||0,P=m/(2*Math.sqrt(p*C)),U=f-l,N=Rr(Math.sqrt(p/C)),b=Math.abs(U)<5;i||(i=b?Mt.restSpeed.granular:Mt.restSpeed.default),a||(a=b?Mt.restDelta.granular:Mt.restDelta.default);let S;if(P<1){const V=Jd(N,P);S=z=>{const F=Math.exp(-P*N*z);return f-F*((_+P*N*U)/V*Math.sin(V*z)+U*Math.cos(V*z))}}else if(P===1)S=V=>f-Math.exp(-N*V)*(U+(_+N*U)*V);else{const V=N*Math.sqrt(P*P-1);S=z=>{const F=Math.exp(-P*N*z),B=Math.min(V*z,300);return f-F*((_+P*N*U)*Math.sinh(B)+V*U*Math.cosh(B))/V}}const O={calculatedDuration:R&&E||null,next:V=>{const z=S(V);if(R)g.done=V>=E;else{let F=V===0?_:0;P<1&&(F=V===0?Nr(_):A2(S,V,z));const B=Math.abs(F)<=i,G=Math.abs(f-z)<=a;g.done=B&&G}return g.value=g.done?f:z,g},toString:()=>{const V=Math.min(zh(O),uc),z=S2(F=>O.next(V*F).value,V,30);return V+"ms "+z},toTransition:()=>{}};return O}dc.applyToOptions=e=>{const t=TS(e,100,dc);return e.ease=t.ease,e.duration=Nr(t.duration),e.type="keyframes",e};function ef({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:f,min:g,max:p,restDelta:m=.5,restSpeed:C}){const E=e[0],A={done:!1,value:E},R=B=>g!==void 0&&B<g||p!==void 0&&B>p,_=B=>g===void 0?p:p===void 0||Math.abs(g-B)<Math.abs(p-B)?g:p;let P=n*t;const U=E+P,N=f===void 0?U:f(U);N!==U&&(P=N-E);const b=B=>-P*Math.exp(-B/i),S=B=>N+b(B),O=B=>{const G=b(B),te=S(B);A.done=Math.abs(G)<=m,A.value=A.done?N:te};let V,z;const F=B=>{R(A.value)&&(V=B,z=dc({keyframes:[A.value,_(A.value)],velocity:A2(S,B,A.value),damping:a,stiffness:l,restDelta:m,restSpeed:C}))};return F(0),{calculatedDuration:null,next:B=>{let G=!1;return!z&&V===void 0&&(G=!0,O(B),F(B)),V!==void 0&&B>=V?z.next(B-V):(!G&&O(B),A)}}}function OS(e,t,n){const i=[],a=n||Xr.mix||v2,l=e.length-1;for(let f=0;f<l;f++){let g=a(e[f],e[f+1]);if(t){const p=Array.isArray(t)?t[f]||qn:t;g=Pa(p,g)}i.push(g)}return i}function PS(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const l=e.length;if(_h(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const f=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=OS(t,i,a),p=g.length,m=C=>{if(f&&C<e[0])return t[0];let E=0;if(p>1)for(;E<e.length-2&&!(C<e[E+1]);E++);const A=wa(e[E],e[E+1],C);return g[E](A)};return n?C=>m(Yr(e[0],e[l-1],C)):m}function kS(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=wa(0,t,i);e.push(vt(n,1,a))}}function LS(e){const t=[0];return kS(t,e.length-1),t}function BS(e,t){return e.map(n=>n*t)}function jS(e,t){return e.map(()=>t||f2).splice(0,e.length-1)}function Zo({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=Kv(i)?i.map(Y1):Y1(i),l={done:!1,value:t[0]},f=BS(n&&n.length===t.length?n:LS(t),e),g=PS(f,t,{ease:Array.isArray(a)?a:jS(t,a)});return{calculatedDuration:e,next:p=>(l.value=g(p),l.done=p>=e,l)}}const FS=e=>e!==null;function Wh(e,{repeat:t,repeatType:n="loop"},i,a=1){const l=e.filter(FS),g=a<0||t&&n!=="loop"&&t%2===1?0:l.length-1;return!g||i===void 0?l[g]:i}const US={decay:ef,inertia:ef,tween:Zo,keyframes:Zo,spring:dc};function T2(e){typeof e.type=="string"&&(e.type=US[e.type])}class Hh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const VS=e=>e/100;class Gh extends Hh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;T2(t);const{type:n=Zo,repeat:i=0,repeatDelay:a=0,repeatType:l,velocity:f=0}=t;let{keyframes:g}=t;const p=n||Zo;p!==Zo&&typeof g[0]!="number"&&(this.mixKeyframes=Pa(VS,v2(g[0],g[1])),g=[0,100]);const m=p({...t,keyframes:g});l==="mirror"&&(this.mirroredGenerator=p({...t,keyframes:[...g].reverse(),velocity:-f})),m.calculatedDuration===null&&(m.calculatedDuration=zh(m));const{calculatedDuration:C}=m;this.calculatedDuration=C,this.resolvedDuration=C+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=m}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:a,mixKeyframes:l,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:p}=this;if(this.startTime===null)return i.next(0);const{delay:m=0,keyframes:C,repeat:E,repeatType:A,repeatDelay:R,type:_,onUpdate:P,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const N=this.currentTime-m*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let S=this.currentTime,O=i;if(E){const B=Math.min(this.currentTime,a)/g;let G=Math.floor(B),te=B%1;!te&&B>=1&&(te=1),te===1&&G--,G=Math.min(G,E+1),!!(G%2)&&(A==="reverse"?(te=1-te,R&&(te-=R/g)):A==="mirror"&&(O=f)),S=Yr(0,1,te)*g}const V=b?{done:!1,value:C[0]}:O.next(S);l&&(V.value=l(V.value));let{done:z}=V;!b&&p!==null&&(z=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return F&&_!==ef&&(V.value=Wh(C,this.options,U,this.speed)),P&&P(V.value),F&&this.finish(),V}then(t,n){return this.finished.then(t,n)}get duration(){return Rr(this.calculatedDuration)}get time(){return Rr(this.currentTime)}set time(t){var n;t=Nr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(In.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rr(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:t=AS,startTime:n}=this.options;this.driver||(this.driver=t(f=>this.tick(f))),(l=(a=this.options).onPlay)==null||l.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function zS(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $i=e=>e*180/Math.PI,tf=e=>{const t=$i(Math.atan2(e[1],e[0]));return nf(t)},WS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tf,rotateZ:tf,skewX:e=>$i(Math.atan(e[1])),skewY:e=>$i(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},nf=e=>(e=e%360,e<0&&(e+=360),e),J1=tf,eg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),HS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eg,scaleY:tg,scale:e=>(eg(e)+tg(e))/2,rotateX:e=>nf($i(Math.atan2(e[6],e[5]))),rotateY:e=>nf($i(Math.atan2(-e[2],e[0]))),rotateZ:J1,rotate:J1,skewX:e=>$i(Math.atan(e[4])),skewY:e=>$i(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function rf(e){return e.includes("scale")?1:0}function sf(e,t){if(!e||e==="none")return rf(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(n)i=HS,a=n;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=WS,a=g}if(!a)return rf(t);const l=i[t],f=a[1].split(",").map(YS);return typeof l=="function"?l(f):f[l]}const GS=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sf(n,t)};function YS(e){return parseFloat(e.trim())}const fo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ho=(()=>new Set(fo))(),ng=e=>e===uo||e===je,XS=new Set(["x","y","z"]),QS=fo.filter(e=>!XS.has(e));function KS(e){const t=[];return QS.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const es={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sf(t,"x"),y:(e,{transform:t})=>sf(t,"y")};es.translateX=es.x;es.translateY=es.y;const ts=new Set;let of=!1,af=!1,lf=!1;function I2(){if(af){const e=Array.from(ts).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const a=KS(i);a.length&&(n.set(i,a),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=n.get(i);a&&a.forEach(([l,f])=>{var g;(g=i.getValue(l))==null||g.set(f)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}af=!1,of=!1,ts.forEach(e=>e.complete(lf)),ts.clear()}function b2(){ts.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(af=!0)})}function ZS(){lf=!0,b2(),I2(),lf=!1}class Yh{constructor(t,n,i,a,l,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=a,this.element=l,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(ts.add(this),of||(of=!0,At.read(b2),At.resolveKeyframes(I2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:a}=this;if(t[0]===null){const l=a==null?void 0:a.get(),f=t[t.length-1];if(l!==void 0)t[0]=l;else if(i&&n){const g=i.readValue(n,f);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=f),a&&l===void 0&&a.set(t[0])}zS(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ts.delete(this)}cancel(){this.state==="scheduled"&&(ts.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $S=e=>e.startsWith("--");function qS(e,t,n){$S(t)?e.style.setProperty(t,n):e.style[t]=n}const JS=Oh(()=>window.ScrollTimeline!==void 0),eA={};function tA(e,t){const n=Oh(e);return()=>eA[t]??n()}const N2=tA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fo=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,rg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fo([0,.65,.55,1]),circOut:Fo([.55,0,1,.45]),backIn:Fo([.31,.01,.66,-.59]),backOut:Fo([.33,1.53,.69,.99])};function R2(e,t){if(e)return typeof e=="function"?N2()?S2(e,t):"ease-out":h2(e)?Fo(e):Array.isArray(e)?e.map(n=>R2(n,t)||rg.easeOut):rg[e]}function nA(e,t,n,{delay:i=0,duration:a=300,repeat:l=0,repeatType:f="loop",ease:g="easeOut",times:p}={},m=void 0){const C={[t]:n};p&&(C.offset=p);const E=R2(g,a);Array.isArray(E)&&(C.easing=E);const A={delay:i,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:l+1,direction:f==="reverse"?"alternate":"normal"};return m&&(A.pseudoElement=m),e.animate(C,A)}function M2(e){return typeof e=="function"&&"applyToOptions"in e}function rA({type:e,...t}){return M2(e)&&N2()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class iA extends Hh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:a,pseudoElement:l,allowFlatten:f=!1,finalKeyframe:g,onComplete:p}=t;this.isPseudoElement=!!l,this.allowFlatten=f,this.options=t,_h(typeof t.type!="string");const m=rA(t);this.animation=nA(n,i,a,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const C=Wh(a,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(C):qS(n,i,C),this.animation.cancel()}p==null||p(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Rr(Number(t))}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Nr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&JS()?(this.animation.timeline=t,qn):n(this)}}const D2={anticipate:c2,backInOut:l2,circInOut:d2};function sA(e){return e in D2}function oA(e){typeof e.ease=="string"&&sA(e.ease)&&(e.ease=D2[e.ease])}const ig=10;class aA extends iA{constructor(t){oA(t),T2(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:a,element:l,...f}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const g=new Gh({...f,autoplay:!1}),p=Nr(this.finishedTime??this.time);n.setWithVelocity(g.sample(p-ig).value,g.sample(p).value,ig),g.stop()}}const sg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ri.test(e)||e==="0")&&!e.startsWith("url("));function lA(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function cA(e,t,n,i){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],f=sg(a,t),g=sg(l,t);return!f||!g?!1:lA(e)||(n==="spring"||M2(n))&&i}function Xh(e){return t2(e)&&"offsetHeight"in e}const uA=new Set(["opacity","clipPath","filter","transform"]),dA=Oh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function fA(e){var m;const{motionValue:t,name:n,repeatDelay:i,repeatType:a,damping:l,type:f}=e;if(!Xh((m=t==null?void 0:t.owner)==null?void 0:m.current))return!1;const{onUpdate:g,transformTemplate:p}=t.owner.getProps();return dA()&&n&&uA.has(n)&&(n!=="transform"||!p)&&!g&&!i&&a!=="mirror"&&l!==0&&f!=="inertia"}const hA=40;class gA extends Hh{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:f="loop",keyframes:g,name:p,motionValue:m,element:C,...E}){var _;super(),this.stop=()=>{var P,U;this._animation&&(this._animation.stop(),(P=this.stopTimeline)==null||P.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=In.now();const A={autoplay:t,delay:n,type:i,repeat:a,repeatDelay:l,repeatType:f,name:p,motionValue:m,element:C,...E},R=(C==null?void 0:C.KeyframeResolver)||Yh;this.keyframeResolver=new R(g,(P,U,N)=>this.onKeyframesResolved(P,U,A,!N),p,m,C),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,n,i,a){this.keyframeResolver=void 0;const{name:l,type:f,velocity:g,delay:p,isHandoff:m,onUpdate:C}=i;this.resolvedAt=In.now(),cA(t,l,f,g)||((Xr.instantAnimations||!p)&&(C==null||C(Wh(t,i,n))),t[0]=t[t.length-1],i.duration=0,i.repeat=0);const A={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>hA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},R=!m&&fA(A)?new aA({...A,element:A.motionValue.owner.current}):new Gh(A);R.finished.then(()=>this.notifyFinished()).catch(qn),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),ZS()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const pA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mA(e){const t=pA.exec(e);if(!t)return[,];const[,n,i,a]=t;return[`--${n??i}`,a]}function _2(e,t,n=1){const[i,a]=mA(e);if(!i)return;const l=window.getComputedStyle(t).getPropertyValue(i);if(l){const f=l.trim();return e2(f)?parseFloat(f):f}return jh(a)?_2(a,t,n+1):a}function Qh(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const O2=new Set(["width","height","top","left","right","bottom",...fo]),xA={test:e=>e==="auto",parse:e=>e},P2=e=>t=>t.test(e),k2=[uo,je,Mr,li,lS,aS,xA],og=e=>k2.find(P2(e));function yA(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||n2(e):!0}const wA=new Set(["brightness","contrast","saturate","opacity"]);function CA(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Fh)||[];if(!i)return e;const a=n.replace(i,"");let l=wA.has(t)?1:0;return i!==n&&(l*=100),t+"("+l+a+")"}const EA=/\b([a-z-]*)\(.*?\)/gu,cf={...Ri,getAnimatableNone:e=>{const t=e.match(EA);return t?t.map(CA).join(" "):e}},ag={...uo,transform:Math.round},vA={rotate:li,rotateX:li,rotateY:li,rotateZ:li,scale:gl,scaleX:gl,scaleY:gl,scaleZ:gl,skew:li,skewX:li,skewY:li,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:Ca,originX:Q1,originY:Q1,originZ:je},Kh={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je,...vA,zIndex:ag,fillOpacity:Ca,strokeOpacity:Ca,numOctaves:ag},SA={...Kh,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:cf,WebkitFilter:cf},L2=e=>SA[e];function B2(e,t){let n=L2(e);return n!==cf&&(n=Ri),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const AA=new Set(["auto","none","0"]);function TA(e,t,n){let i=0,a;for(;i<e.length&&!a;){const l=e[i];typeof l=="string"&&!AA.has(l)&&Ea(l).values.length&&(a=e[i]),i++}if(a&&n)for(const l of t)e[l]=B2(n,a)}class IA extends Yh{constructor(t,n,i,a,l){super(t,n,i,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let m=t[p];if(typeof m=="string"&&(m=m.trim(),jh(m))){const C=_2(m,n.current);C!==void 0&&(t[p]=C),p===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!O2.has(i)||t.length!==2)return;const[a,l]=t,f=og(a),g=og(l);if(f!==g)if(ng(f)&&ng(g))for(let p=0;p<t.length;p++){const m=t[p];typeof m=="string"&&(t[p]=parseFloat(m))}else es[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let a=0;a<t.length;a++)(t[a]===null||yA(t[a]))&&i.push(a);i.length&&TA(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=es[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){var g;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,f=i[l];i[l]=es[n](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),(g=this.removedTransforms)!=null&&g.length&&this.removedTransforms.forEach(([p,m])=>{t.getValue(p).set(m)}),this.resolveNoneKeyframes()}}function bA(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const a=(n==null?void 0:n[e])??i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const j2=(e,t)=>t&&typeof e=="number"?t.transform(e):e,lg=30,NA=e=>!isNaN(parseFloat(e));class RA{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,a=!0)=>{var f,g;const l=In.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((f=this.events.change)==null||f.notify(this.current),this.dependents))for(const p of this.dependents)p.dirty();a&&((g=this.events.renderRequest)==null||g.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=In.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=NA(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ph);const i=this.events[t].add(n);return t==="change"?()=>{i(),At.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lg);return r2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zs(e,t){return new RA(e,t)}const{schedule:Zh,cancel:Pb}=g2(queueMicrotask,!1),sr={x:!1,y:!1};function F2(){return sr.x||sr.y}function MA(e){return e==="x"||e==="y"?sr[e]?null:(sr[e]=!0,()=>{sr[e]=!1}):sr.x||sr.y?null:(sr.x=sr.y=!0,()=>{sr.x=sr.y=!1})}function U2(e,t){const n=bA(e),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[n,a,()=>i.abort()]}function cg(e){return!(e.pointerType==="touch"||F2())}function DA(e,t,n={}){const[i,a,l]=U2(e,n),f=g=>{if(!cg(g))return;const{target:p}=g,m=t(p,g);if(typeof m!="function"||!p)return;const C=E=>{cg(E)&&(m(E),p.removeEventListener("pointerleave",C))};p.addEventListener("pointerleave",C,a)};return i.forEach(g=>{g.addEventListener("pointerenter",f,a)}),l}const V2=(e,t)=>t?e===t?!0:V2(e,t.parentElement):!1,$h=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_A=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OA(e){return _A.has(e.tagName)||e.tabIndex!==-1}const Pl=new WeakSet;function ug(e){return t=>{t.key==="Enter"&&e(t)}}function Hu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const PA=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=ug(()=>{if(Pl.has(n))return;Hu(n,"down");const a=ug(()=>{Hu(n,"up")}),l=()=>Hu(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function dg(e){return $h(e)&&!F2()}function kA(e,t,n={}){const[i,a,l]=U2(e,n),f=g=>{const p=g.currentTarget;if(!dg(g))return;Pl.add(p);const m=t(p,g),C=(R,_)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",A),Pl.has(p)&&Pl.delete(p),dg(R)&&typeof m=="function"&&m(R,{success:_})},E=R=>{C(R,p===window||p===document||n.useGlobalTarget||V2(p,R.target))},A=R=>{C(R,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",A,a)};return i.forEach(g=>{(n.useGlobalTarget?window:g).addEventListener("pointerdown",f,a),Xh(g)&&(g.addEventListener("focus",m=>PA(m,a)),!OA(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),l}function z2(e){return t2(e)&&"ownerSVGElement"in e}function LA(e){return z2(e)&&e.tagName==="svg"}const an=e=>!!(e&&e.getVelocity),BA=[...k2,sn,Ri],jA=e=>BA.find(P2(e)),qh=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class FA extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,a=Xh(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UA({children:e,isPresent:t,anchorX:n}){const i=M.useId(),a=M.useRef(null),l=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=M.useContext(qh);return M.useInsertionEffect(()=>{const{width:g,height:p,top:m,left:C,right:E}=l.current;if(t||!a.current||!g||!p)return;const A=n==="left"?`left: ${C}`:`right: ${E}`;a.current.dataset.motionPopId=i;const R=document.createElement("style");return f&&(R.nonce=f),document.head.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${p}px !important;
            ${A}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.contains(R)&&document.head.removeChild(R)}},[t]),x.jsx(FA,{isPresent:t,childRef:a,sizeRef:l,children:M.cloneElement(e,{ref:a})})}const VA=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:l,mode:f,anchorX:g})=>{const p=Nh(zA),m=M.useId();let C=!0,E=M.useMemo(()=>(C=!1,{id:m,initial:t,isPresent:n,custom:a,onExitComplete:A=>{p.set(A,!0);for(const R of p.values())if(!R)return;i&&i()},register:A=>(p.set(A,!1),()=>p.delete(A))}),[n,p,i]);return l&&C&&(E={...E}),M.useMemo(()=>{p.forEach((A,R)=>p.set(R,!1))},[n]),M.useEffect(()=>{!n&&!p.size&&i&&i()},[n]),f==="popLayout"&&(e=x.jsx(UA,{isPresent:n,anchorX:g,children:e})),x.jsx(jc.Provider,{value:E,children:e})};function zA(){return new Map}function W2(e=!0){const t=M.useContext(jc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:a}=t,l=M.useId();M.useEffect(()=>{if(e)return a(l)},[e]);const f=M.useCallback(()=>e&&i&&i(l),[l,i,e]);return!n&&i?[!1,f]:[!0]}const pl=e=>e.key||"";function fg(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const $s=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:l="sync",propagate:f=!1,anchorX:g="left"})=>{const[p,m]=W2(f),C=M.useMemo(()=>fg(e),[e]),E=f&&!p?[]:C.map(pl),A=M.useRef(!0),R=M.useRef(C),_=Nh(()=>new Map),[P,U]=M.useState(C),[N,b]=M.useState(C);Jx(()=>{A.current=!1,R.current=C;for(let V=0;V<N.length;V++){const z=pl(N[V]);E.includes(z)?_.delete(z):_.get(z)!==!0&&_.set(z,!1)}},[N,E.length,E.join("-")]);const S=[];if(C!==P){let V=[...C];for(let z=0;z<N.length;z++){const F=N[z],B=pl(F);E.includes(B)||(V.splice(z,0,F),S.push(F))}return l==="wait"&&S.length&&(V=S),b(fg(V)),U(C),null}const{forceRender:O}=M.useContext(bh);return x.jsx(x.Fragment,{children:N.map(V=>{const z=pl(V),F=f&&!p?!1:C===N||E.includes(z),B=()=>{if(_.has(z))_.set(z,!0);else return;let G=!0;_.forEach(te=>{te||(G=!1)}),G&&(O==null||O(),b(R.current),f&&(m==null||m()),i&&i())};return x.jsx(VA,{isPresent:F,initial:!A.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:l,onExitComplete:F?void 0:B,anchorX:g,children:V},z)})})},H2=M.createContext({strict:!1}),hg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qs={};for(const e in hg)qs[e]={isEnabled:t=>hg[e].some(n=>!!t[n])};function WA(e){for(const t in e)qs[t]={...qs[t],...e[t]}}const HA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||HA.has(e)}let G2=e=>!fc(e);function GA(e){e&&(G2=t=>t.startsWith("on")?!fc(t):e(t))}try{GA(require("@emotion/is-prop-valid").default)}catch{}function YA(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(G2(a)||n===!0&&fc(a)||!t&&!fc(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function XA(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...i)=>e(...i);return new Proxy(n,{get:(i,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const Fc=M.createContext({});function Uc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function va(e){return typeof e=="string"||Array.isArray(e)}const Jh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e0=["initial",...Jh];function Vc(e){return Uc(e.animate)||e0.some(t=>va(e[t]))}function Y2(e){return!!(Vc(e)||e.variants)}function QA(e,t){if(Vc(e)){const{initial:n,animate:i}=e;return{initial:n===!1||va(n)?n:void 0,animate:va(i)?i:void 0}}return e.inherit!==!1?t:{}}function KA(e){const{initial:t,animate:n}=QA(e,M.useContext(Fc));return M.useMemo(()=>({initial:t,animate:n}),[gg(t),gg(n)])}function gg(e){return Array.isArray(e)?e.join(" "):e}const ZA=Symbol.for("motionComponentSymbol");function _s(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $A(e,t,n){return M.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):_s(n)&&(n.current=i))},[t])}const t0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qA="framerAppearId",X2="data-"+t0(qA),Q2=M.createContext({});function JA(e,t,n,i,a){var P,U;const{visualElement:l}=M.useContext(Fc),f=M.useContext(H2),g=M.useContext(jc),p=M.useContext(qh).reducedMotion,m=M.useRef(null);i=i||f.renderer,!m.current&&i&&(m.current=i(e,{visualState:t,parent:l,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:p}));const C=m.current,E=M.useContext(Q2);C&&!C.projection&&a&&(C.type==="html"||C.type==="svg")&&e4(m.current,n,a,E);const A=M.useRef(!1);M.useInsertionEffect(()=>{C&&A.current&&C.update(n,g)});const R=n[X2],_=M.useRef(!!R&&!((P=window.MotionHandoffIsComplete)!=null&&P.call(window,R))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,R)));return Jx(()=>{C&&(A.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),Zh.render(C.render),_.current&&C.animationState&&C.animationState.animateChanges())}),M.useEffect(()=>{C&&(!_.current&&C.animationState&&C.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,R)}),_.current=!1))}),C}function e4(e,t,n,i){const{layoutId:a,layout:l,drag:f,dragConstraints:g,layoutScroll:p,layoutRoot:m,layoutCrossfade:C}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:K2(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!f||g&&_s(g),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:C,layoutScroll:p,layoutRoot:m})}function K2(e){if(e)return e.options.allowProjection!==!1?e.projection:K2(e.parent)}function t4({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&WA(e);function l(g,p){let m;const C={...M.useContext(qh),...g,layoutId:n4(g)},{isStatic:E}=C,A=KA(g),R=i(g,E);if(!E&&Rh){r4();const _=i4(C);m=_.MeasureLayout,A.visualElement=JA(a,R,C,t,_.ProjectionNode)}return x.jsxs(Fc.Provider,{value:A,children:[m&&A.visualElement?x.jsx(m,{visualElement:A.visualElement,...C}):null,n(a,g,$A(R,A.visualElement,p),R,E,A.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const f=M.forwardRef(l);return f[ZA]=a,f}function n4({layoutId:e}){const t=M.useContext(bh).id;return t&&e!==void 0?t+"-"+e:e}function r4(e,t){M.useContext(H2).strict}function i4(e){const{drag:t,layout:n}=qs;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Sa={};function s4(e){for(const t in e)Sa[t]=e[t],Bh(t)&&(Sa[t].isCSSVariable=!0)}function Z2(e,{layout:t,layoutId:n}){return ho.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Sa[e]||e==="opacity")}const o4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a4=fo.length;function l4(e,t,n){let i="",a=!0;for(let l=0;l<a4;l++){const f=fo[l],g=e[f];if(g===void 0)continue;let p=!0;if(typeof g=="number"?p=g===(f.startsWith("scale")?1:0):p=parseFloat(g)===0,!p||n){const m=j2(g,Kh[f]);if(!p){a=!1;const C=o4[f]||f;i+=`${C}(${m}) `}n&&(t[f]=m)}}return i=i.trim(),n?i=n(t,a?"":i):a&&(i="none"),i}function n0(e,t,n){const{style:i,vars:a,transformOrigin:l}=e;let f=!1,g=!1;for(const p in t){const m=t[p];if(ho.has(p)){f=!0;continue}else if(Bh(p)){a[p]=m;continue}else{const C=j2(m,Kh[p]);p.startsWith("origin")?(g=!0,l[p]=C):i[p]=C}}if(t.transform||(f||n?i.transform=l4(t,e.transform,n):i.transform&&(i.transform="none")),g){const{originX:p="50%",originY:m="50%",originZ:C=0}=l;i.transformOrigin=`${p} ${m} ${C}`}}const r0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $2(e,t,n){for(const i in t)!an(t[i])&&!Z2(i,n)&&(e[i]=t[i])}function c4({transformTemplate:e},t){return M.useMemo(()=>{const n=r0();return n0(n,t,e),Object.assign({},n.vars,n.style)},[t])}function u4(e,t){const n=e.style||{},i={};return $2(i,n,e),Object.assign(i,c4(e,t)),i}function d4(e,t){const n={},i=u4(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const f4={offset:"stroke-dashoffset",array:"stroke-dasharray"},h4={offset:"strokeDashoffset",array:"strokeDasharray"};function g4(e,t,n=1,i=0,a=!0){e.pathLength=1;const l=a?f4:h4;e[l.offset]=je.transform(-i);const f=je.transform(t),g=je.transform(n);e[l.array]=`${f} ${g}`}function q2(e,{attrX:t,attrY:n,attrScale:i,pathLength:a,pathSpacing:l=1,pathOffset:f=0,...g},p,m,C){if(n0(e,g,m),p){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:A}=e;E.transform&&(A.transform=E.transform,delete E.transform),(A.transform||E.transformOrigin)&&(A.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),A.transform&&(A.transformBox=(C==null?void 0:C.transformBox)??"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),a!==void 0&&g4(E,a,l,f,!1)}const J2=()=>({...r0(),attrs:{}}),ey=e=>typeof e=="string"&&e.toLowerCase()==="svg";function p4(e,t,n,i){const a=M.useMemo(()=>{const l=J2();return q2(l,t,ey(i),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};$2(l,e.style,e),a.style={...l,...a.style}}return a}const m4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i0(e){return typeof e!="string"||e.includes("-")?!1:!!(m4.indexOf(e)>-1||/[A-Z]/u.test(e))}function x4(e=!1){return(n,i,a,{latestValues:l},f)=>{const p=(i0(n)?p4:d4)(i,l,f,n),m=YA(i,typeof n=="string",e),C=n!==M.Fragment?{...m,...p,ref:a}:{},{children:E}=i,A=M.useMemo(()=>an(E)?E.get():E,[E]);return M.createElement(n,{...C,children:A})}}function pg(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function s0(e,t,n,i){if(typeof t=="function"){const[a,l]=pg(i);t=t(n!==void 0?n:e.custom,a,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,l]=pg(i);t=t(n!==void 0?n:e.custom,a,l)}return t}function kl(e){return an(e)?e.get():e}function y4({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,a){return{latestValues:w4(n,i,a,e),renderState:t()}}const ty=e=>(t,n)=>{const i=M.useContext(Fc),a=M.useContext(jc),l=()=>y4(e,t,i,a);return n?l():Nh(l)};function w4(e,t,n,i){const a={},l=i(e,{});for(const A in l)a[A]=kl(l[A]);let{initial:f,animate:g}=e;const p=Vc(e),m=Y2(e);t&&m&&!p&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const E=C?g:f;if(E&&typeof E!="boolean"&&!Uc(E)){const A=Array.isArray(E)?E:[E];for(let R=0;R<A.length;R++){const _=s0(e,A[R]);if(_){const{transitionEnd:P,transition:U,...N}=_;for(const b in N){let S=N[b];if(Array.isArray(S)){const O=C?S.length-1:0;S=S[O]}S!==null&&(a[b]=S)}for(const b in P)a[b]=P[b]}}}return a}function o0(e,t,n){var l;const{style:i}=e,a={};for(const f in i)(an(i[f])||t.style&&an(t.style[f])||Z2(f,e)||((l=n==null?void 0:n.getValue(f))==null?void 0:l.liveStyle)!==void 0)&&(a[f]=i[f]);return a}const C4={useVisualState:ty({scrapeMotionValuesFromProps:o0,createRenderState:r0})};function ny(e,t,n){const i=o0(e,t,n);for(const a in e)if(an(e[a])||an(t[a])){const l=fo.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[l]=e[a]}return i}const E4={useVisualState:ty({scrapeMotionValuesFromProps:ny,createRenderState:J2})};function v4(e,t){return function(i,{forwardMotionProps:a}={forwardMotionProps:!1}){const f={...i0(i)?E4:C4,preloadedFeatures:e,useRender:x4(a),createVisualElement:t,Component:i};return t4(f)}}function Aa(e,t,n){const i=e.getProps();return s0(i,t,n!==void 0?n:i.custom,e)}const uf=e=>Array.isArray(e);function S4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Zs(n))}function A4(e){return uf(e)?e[e.length-1]||0:e}function T4(e,t){const n=Aa(e,t);let{transitionEnd:i={},transition:a={},...l}=n||{};l={...l,...i};for(const f in l){const g=A4(l[f]);S4(e,f,g)}}function I4(e){return!!(an(e)&&e.add)}function df(e,t){const n=e.getValue("willChange");if(I4(n))return n.add(t);if(!n&&Xr.WillChange){const i=new Xr.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function ry(e){return e.props[X2]}const b4=e=>e!==null;function N4(e,{repeat:t,repeatType:n="loop"},i){const a=e.filter(b4),l=t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||i===void 0?a[l]:i}const R4={type:"spring",stiffness:500,damping:25,restSpeed:10},M4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),D4={type:"keyframes",duration:.8},_4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},O4=(e,{keyframes:t})=>t.length>2?D4:ho.has(e)?e.startsWith("scale")?M4(t[1]):R4:_4;function P4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:l,repeatType:f,repeatDelay:g,from:p,elapsed:m,...C}){return!!Object.keys(C).length}const a0=(e,t,n,i={},a,l)=>f=>{const g=Qh(i,e)||{},p=g.delay||i.delay||0;let{elapsed:m=0}=i;m=m-Nr(p);const C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-m,onUpdate:A=>{t.set(A),g.onUpdate&&g.onUpdate(A)},onComplete:()=>{f(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:l?void 0:a};P4(g)||Object.assign(C,O4(e,C)),C.duration&&(C.duration=Nr(C.duration)),C.repeatDelay&&(C.repeatDelay=Nr(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let E=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(E=!0)),(Xr.instantAnimations||Xr.skipAnimations)&&(E=!0,C.duration=0,C.delay=0),C.allowFlatten=!g.type&&!g.ease,E&&!l&&t.get()!==void 0){const A=N4(C.keyframes,g);if(A!==void 0){At.update(()=>{C.onUpdate(A),C.onComplete()});return}}return g.isSync?new Gh(C):new gA(C)};function k4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function iy(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:f,...g}=t;i&&(l=i);const p=[],m=a&&e.animationState&&e.animationState.getState()[a];for(const C in g){const E=e.getValue(C,e.latestValues[C]??null),A=g[C];if(A===void 0||m&&k4(m,C))continue;const R={delay:n,...Qh(l||{},C)},_=E.get();if(_!==void 0&&!E.isAnimating&&!Array.isArray(A)&&A===_&&!R.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const N=ry(e);if(N){const b=window.MotionHandoffAnimation(N,C,At);b!==null&&(R.startTime=b,P=!0)}}df(e,C),E.start(a0(C,E,A,e.shouldReduceMotion&&O2.has(C)?{type:!1}:R,e,P));const U=E.animation;U&&p.push(U)}return f&&Promise.all(p).then(()=>{At.update(()=>{f&&T4(e,f)})}),p}function ff(e,t,n={}){var p;const i=Aa(e,t,n.type==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const l=i?()=>Promise.all(iy(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(m=0)=>{const{delayChildren:C=0,staggerChildren:E,staggerDirection:A}=a;return L4(e,t,C+m,E,A,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[m,C]=g==="beforeChildren"?[l,f]:[f,l];return m().then(()=>C())}else return Promise.all([l(),f(n.delay)])}function L4(e,t,n=0,i=0,a=1,l){const f=[],g=(e.variantChildren.size-1)*i,p=a===1?(m=0)=>m*i:(m=0)=>g-m*i;return Array.from(e.variantChildren).sort(B4).forEach((m,C)=>{m.notify("AnimationStart",t),f.push(ff(m,t,{...l,delay:n+p(C)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(f)}function B4(e,t){return e.sortNodePosition(t)}function j4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(l=>ff(e,l,n));i=Promise.all(a)}else if(typeof t=="string")i=ff(e,t,n);else{const a=typeof t=="function"?Aa(e,t,n.custom):t;i=Promise.all(iy(e,a,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function sy(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const F4=e0.length;function oy(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oy(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<F4;n++){const i=e0[n],a=e.props[i];(va(a)||a===!1)&&(t[i]=a)}return t}const U4=[...Jh].reverse(),V4=Jh.length;function z4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>j4(e,n,i)))}function W4(e){let t=z4(e),n=mg(),i=!0;const a=p=>(m,C)=>{var A;const E=Aa(e,C,p==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(E){const{transition:R,transitionEnd:_,...P}=E;m={...m,...P,..._}}return m};function l(p){t=p(e)}function f(p){const{props:m}=e,C=oy(e.parent)||{},E=[],A=new Set;let R={},_=1/0;for(let U=0;U<V4;U++){const N=U4[U],b=n[N],S=m[N]!==void 0?m[N]:C[N],O=va(S),V=N===p?b.isActive:null;V===!1&&(_=U);let z=S===C[N]&&S!==m[N]&&O;if(z&&i&&e.manuallyAnimateOnMount&&(z=!1),b.protectedKeys={...R},!b.isActive&&V===null||!S&&!b.prevProp||Uc(S)||typeof S=="boolean")continue;const F=H4(b.prevProp,S);let B=F||N===p&&b.isActive&&!z&&O||U>_&&O,G=!1;const te=Array.isArray(S)?S:[S];let we=te.reduce(a(N),{});V===!1&&(we={});const{prevResolvedValues:de={}}=b,Ee={...de,...we},Oe=oe=>{B=!0,A.has(oe)&&(G=!0,A.delete(oe)),b.needsAnimating[oe]=!0;const J=e.getValue(oe);J&&(J.liveStyle=!1)};for(const oe in Ee){const J=we[oe],he=de[oe];if(R.hasOwnProperty(oe))continue;let ue=!1;uf(J)&&uf(he)?ue=!sy(J,he):ue=J!==he,ue?J!=null?Oe(oe):A.add(oe):J!==void 0&&A.has(oe)?Oe(oe):b.protectedKeys[oe]=!0}b.prevProp=S,b.prevResolvedValues=we,b.isActive&&(R={...R,...we}),i&&e.blockInitialAnimation&&(B=!1),B&&(!(z&&F)||G)&&E.push(...te.map(oe=>({animation:oe,options:{type:N}})))}if(A.size){const U={};if(typeof m.initial!="boolean"){const N=Aa(e,Array.isArray(m.initial)?m.initial[0]:m.initial);N&&N.transition&&(U.transition=N.transition)}A.forEach(N=>{const b=e.getBaseTarget(N),S=e.getValue(N);S&&(S.liveStyle=!0),U[N]=b??null}),E.push({animation:U})}let P=!!E.length;return i&&(m.initial===!1||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(P=!1),i=!1,P?t(E):Promise.resolve()}function g(p,m){var E;if(n[p].isActive===m)return Promise.resolve();(E=e.variantChildren)==null||E.forEach(A=>{var R;return(R=A.animationState)==null?void 0:R.setActive(p,m)}),n[p].isActive=m;const C=f(p);for(const A in n)n[A].protectedKeys={};return C}return{animateChanges:f,setActive:g,setAnimateFunction:l,getState:()=>n,reset:()=>{n=mg(),i=!0}}}function H4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!sy(t,e):!1}function Wi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mg(){return{animate:Wi(!0),whileInView:Wi(),whileHover:Wi(),whileTap:Wi(),whileDrag:Wi(),whileFocus:Wi(),exit:Wi()}}class Oi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class G4 extends Oi{constructor(t){super(t),t.animationState||(t.animationState=W4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Uc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Y4=0;class X4 extends Oi{constructor(){super(...arguments),this.id=Y4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Q4={animation:{Feature:G4},exit:{Feature:X4}};function Ta(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Ba(e){return{point:{x:e.pageX,y:e.pageY}}}const K4=e=>t=>$h(t)&&e(t,Ba(t));function $o(e,t,n,i){return Ta(e,t,K4(n),i)}function ay({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function Z4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const ly=1e-4,q4=1-ly,J4=1+ly,cy=.01,e8=0-cy,t8=0+cy;function fn(e){return e.max-e.min}function n8(e,t,n){return Math.abs(e-t)<=n}function xg(e,t,n,i=.5){e.origin=i,e.originPoint=vt(t.min,t.max,e.origin),e.scale=fn(n)/fn(t),e.translate=vt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=q4&&e.scale<=J4||isNaN(e.scale))&&(e.scale=1),(e.translate>=e8&&e.translate<=t8||isNaN(e.translate))&&(e.translate=0)}function qo(e,t,n,i){xg(e.x,t.x,n.x,i?i.originX:void 0),xg(e.y,t.y,n.y,i?i.originY:void 0)}function yg(e,t,n){e.min=n.min+t.min,e.max=e.min+fn(t)}function r8(e,t,n){yg(e.x,t.x,n.x),yg(e.y,t.y,n.y)}function wg(e,t,n){e.min=t.min-n.min,e.max=e.min+fn(t)}function Jo(e,t,n){wg(e.x,t.x,n.x),wg(e.y,t.y,n.y)}const Cg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Os=()=>({x:Cg(),y:Cg()}),Eg=()=>({min:0,max:0}),kt=()=>({x:Eg(),y:Eg()});function Xn(e){return[e("x"),e("y")]}function Gu(e){return e===void 0||e===1}function hf({scale:e,scaleX:t,scaleY:n}){return!Gu(e)||!Gu(t)||!Gu(n)}function Yi(e){return hf(e)||uy(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function uy(e){return vg(e.x)||vg(e.y)}function vg(e){return e&&e!=="0%"}function hc(e,t,n){const i=e-n,a=t*i;return n+a}function Sg(e,t,n,i,a){return a!==void 0&&(e=hc(e,a,i)),hc(e,n,i)+t}function gf(e,t=0,n=1,i,a){e.min=Sg(e.min,t,n,i,a),e.max=Sg(e.max,t,n,i,a)}function dy(e,{x:t,y:n}){gf(e.x,t.translate,t.scale,t.originPoint),gf(e.y,n.translate,n.scale,n.originPoint)}const Ag=.999999999999,Tg=1.0000000000001;function i8(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let l,f;for(let g=0;g<a;g++){l=n[g],f=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ks(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,dy(e,f)),i&&Yi(l.latestValues)&&ks(e,l.latestValues))}t.x<Tg&&t.x>Ag&&(t.x=1),t.y<Tg&&t.y>Ag&&(t.y=1)}function Ps(e,t){e.min=e.min+t,e.max=e.max+t}function Ig(e,t,n,i,a=.5){const l=vt(e.min,e.max,a);gf(e,t,n,l,i)}function ks(e,t){Ig(e.x,t.x,t.scaleX,t.scale,t.originX),Ig(e.y,t.y,t.scaleY,t.scale,t.originY)}function fy(e,t){return ay($4(e.getBoundingClientRect(),t))}function s8(e,t,n){const i=fy(e,n),{scroll:a}=t;return a&&(Ps(i.x,a.offset.x),Ps(i.y,a.offset.y)),i}const hy=({current:e})=>e?e.ownerDocument.defaultView:null,bg=(e,t)=>Math.abs(e-t);function o8(e,t){const n=bg(e.x,t.x),i=bg(e.y,t.y);return Math.sqrt(n**2+i**2)}class gy{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Xu(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,R=o8(E.offset,{x:0,y:0})>=3;if(!A&&!R)return;const{point:_}=E,{timestamp:P}=qt;this.history.push({..._,timestamp:P});const{onStart:U,onMove:N}=this.handlers;A||(U&&U(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,E)},this.handlePointerMove=(E,A)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Yu(A,this.transformPagePoint),At.update(this.updatePoint,!0)},this.handlePointerUp=(E,A)=>{this.end();const{onEnd:R,onSessionEnd:_,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Xu(E.type==="pointercancel"?this.lastMoveEventInfo:Yu(A,this.transformPagePoint),this.history);this.startEvent&&R&&R(E,U),_&&_(E,U)},!$h(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=Ba(t),g=Yu(f,this.transformPagePoint),{point:p}=g,{timestamp:m}=qt;this.history=[{...p,timestamp:m}];const{onSessionStart:C}=n;C&&C(t,Xu(g,this.history)),this.removeListeners=Pa($o(this.contextWindow,"pointermove",this.handlePointerMove),$o(this.contextWindow,"pointerup",this.handlePointerUp),$o(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ni(this.updatePoint)}}function Yu(e,t){return t?{point:t(e.point)}:e}function Ng(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xu({point:e},t){return{point:e,delta:Ng(e,py(t)),offset:Ng(e,a8(t)),velocity:l8(t,.1)}}function a8(e){return e[0]}function py(e){return e[e.length-1]}function l8(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=py(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>Nr(t)));)n--;if(!i)return{x:0,y:0};const l=Rr(a.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const f={x:(a.x-i.x)/l,y:(a.y-i.y)/l};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function c8(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?vt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?vt(n,e,i.max):Math.min(e,n)),e}function Rg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function u8(e,{top:t,left:n,bottom:i,right:a}){return{x:Rg(e.x,n,a),y:Rg(e.y,t,i)}}function Mg(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function d8(e,t){return{x:Mg(e.x,t.x),y:Mg(e.y,t.y)}}function f8(e,t){let n=.5;const i=fn(e),a=fn(t);return a>i?n=wa(t.min,t.max-i,e.min):i>a&&(n=wa(e.min,e.max-a,t.min)),Yr(0,1,n)}function h8(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const pf=.35;function g8(e=pf){return e===!1?e=0:e===!0&&(e=pf),{x:Dg(e,"left","right"),y:Dg(e,"top","bottom")}}function Dg(e,t,n){return{min:_g(e,t),max:_g(e,n)}}function _g(e,t){return typeof e=="number"?e:e[t]||0}const p8=new WeakMap;class m8{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=C=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ba(C).point)},l=(C,E)=>{const{drag:A,dragPropagation:R,onDragStart:_}=this.getProps();if(A&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=MA(A),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xn(U=>{let N=this.getAxisMotionValue(U).get()||0;if(Mr.test(N)){const{projection:b}=this.visualElement;if(b&&b.layout){const S=b.layout.layoutBox[U];S&&(N=fn(S)*(parseFloat(N)/100))}}this.originPoint[U]=N}),_&&At.postRender(()=>_(C,E)),df(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},f=(C,E)=>{const{dragPropagation:A,dragDirectionLock:R,onDirectionLock:_,onDrag:P}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:U}=E;if(R&&this.currentDirection===null){this.currentDirection=x8(U),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",E.point,U),this.updateAxis("y",E.point,U),this.visualElement.render(),P&&P(C,E)},g=(C,E)=>this.stop(C,E),p=()=>Xn(C=>{var E;return this.getAnimationState(C)==="paused"&&((E=this.getAxisMotionValue(C).animation)==null?void 0:E.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new gy(t,{onSessionStart:a,onStart:l,onMove:f,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:hy(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&At.postRender(()=>l(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!ml(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=c8(f,this.constraints[t],this.elastic[t])),l.set(f)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;t&&_s(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=u8(i.layoutBox,t):this.constraints=!1,this.elastic=g8(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Xn(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=h8(i.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!_s(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=s8(i,a.root,this.visualElement.getTransformPagePoint());let f=d8(a.layout.layoutBox,l);if(n){const g=n(Z4(f));this.hasMutatedConstraints=!!g,g&&(f=ay(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:l,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),p=this.constraints||{},m=Xn(C=>{if(!ml(C,n,this.currentDirection))return;let E=p&&p[C]||{};f&&(E={min:0,max:0});const A=a?200:1e6,R=a?40:1e7,_={type:"inertia",velocity:i?t[C]:0,bounceStiffness:A,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...l,...E};return this.startAxisValueAnimation(C,_)});return Promise.all(m).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return df(this.visualElement,t),i.start(a0(t,i,0,n,this.visualElement,!1))}stopAnimation(){Xn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Xn(n=>{const{drag:i}=this.getProps();if(!ml(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];l.set(t[n]-vt(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!_s(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Xn(f=>{const g=this.getAxisMotionValue(f);if(g&&this.constraints!==!1){const p=g.get();a[f]=f8({min:p,max:p},this.constraints[f])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Xn(f=>{if(!ml(f,t,null))return;const g=this.getAxisMotionValue(f),{min:p,max:m}=this.constraints[f];g.set(vt(p,m,a[f]))})}addListeners(){if(!this.visualElement.current)return;p8.set(this.visualElement,this);const t=this.visualElement.current,n=$o(t,"pointerdown",p=>{const{drag:m,dragListener:C=!0}=this.getProps();m&&C&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();_s(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),At.read(i);const f=Ta(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Xn(C=>{const E=this.getAxisMotionValue(C);E&&(this.originPoint[C]+=p[C].translate,E.set(E.get()+p[C].translate))}),this.visualElement.render())});return()=>{f(),n(),l(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:f=pf,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:l,dragElastic:f,dragMomentum:g}}}function ml(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function x8(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class y8 extends Oi{constructor(t){super(t),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new m8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Og=e=>(t,n)=>{e&&At.postRender(()=>e(t,n))};class w8 extends Oi{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(t){this.session=new gy(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Og(t),onStart:Og(n),onMove:i,onEnd:(l,f)=>{delete this.session,a&&At.postRender(()=>a(l,f))}}}mount(){this.removePointerDownListener=$o(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ll={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(je.test(e))e=parseFloat(e);else return e;const n=Pg(e,t.target.x),i=Pg(e,t.target.y);return`${n}% ${i}%`}},C8={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=Ri.parse(e);if(a.length>5)return i;const l=Ri.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,p=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=p;const m=vt(g,p,.5);return typeof a[2+f]=="number"&&(a[2+f]/=m),typeof a[3+f]=="number"&&(a[3+f]/=m),l(a)}};class E8 extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:l}=t;s4(v8),l&&(n.group&&n.group.add(l),i&&i.register&&a&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ll.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:l}=this.props,{projection:f}=i;return f&&(f.isPresent=l,a||t.layoutDependency!==n||n===void 0||t.isPresent!==l?f.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?f.promote():f.relegate()||At.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Zh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function my(e){const[t,n]=W2(),i=M.useContext(bh);return x.jsx(E8,{...e,layoutGroup:i,switchLayoutGroup:M.useContext(Q2),isPresent:t,safeToRemove:n})}const v8={borderRadius:{...Oo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oo,borderTopRightRadius:Oo,borderBottomLeftRadius:Oo,borderBottomRightRadius:Oo,boxShadow:C8};function S8(e,t,n){const i=an(e)?e:Zs(e);return i.start(a0("",i,t,n)),i.animation}const A8=(e,t)=>e.depth-t.depth;class T8{constructor(){this.children=[],this.isDirty=!1}add(t){Mh(this.children,t),this.isDirty=!0}remove(t){Dh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(A8),this.isDirty=!1,this.children.forEach(t)}}function I8(e,t){const n=In.now(),i=({timestamp:a})=>{const l=a-n;l>=t&&(Ni(i),e(l-t))};return At.setup(i,!0),()=>Ni(i)}const xy=["TopLeft","TopRight","BottomLeft","BottomRight"],b8=xy.length,kg=e=>typeof e=="string"?parseFloat(e):e,Lg=e=>typeof e=="number"||je.test(e);function N8(e,t,n,i,a,l){a?(e.opacity=vt(0,n.opacity??1,R8(i)),e.opacityExit=vt(t.opacity??1,0,M8(i))):l&&(e.opacity=vt(t.opacity??1,n.opacity??1,i));for(let f=0;f<b8;f++){const g=`border${xy[f]}Radius`;let p=Bg(t,g),m=Bg(n,g);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||Lg(p)===Lg(m)?(e[g]=Math.max(vt(kg(p),kg(m),i),0),(Mr.test(m)||Mr.test(p))&&(e[g]+="%")):e[g]=m}(t.rotate||n.rotate)&&(e.rotate=vt(t.rotate||0,n.rotate||0,i))}function Bg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const R8=yy(0,.5,u2),M8=yy(.5,.95,qn);function yy(e,t,n){return i=>i<e?0:i>t?1:n(wa(e,t,i))}function jg(e,t){e.min=t.min,e.max=t.max}function Yn(e,t){jg(e.x,t.x),jg(e.y,t.y)}function Fg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ug(e,t,n,i,a){return e-=t,e=hc(e,1/n,i),a!==void 0&&(e=hc(e,1/a,i)),e}function D8(e,t=0,n=1,i=.5,a,l=e,f=e){if(Mr.test(t)&&(t=parseFloat(t),t=vt(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=vt(l.min,l.max,i);e===l&&(g-=t),e.min=Ug(e.min,t,n,g,a),e.max=Ug(e.max,t,n,g,a)}function Vg(e,t,[n,i,a],l,f){D8(e,t[n],t[i],t[a],t.scale,l,f)}const _8=["x","scaleX","originX"],O8=["y","scaleY","originY"];function zg(e,t,n,i){Vg(e.x,t,_8,n?n.x:void 0,i?i.x:void 0),Vg(e.y,t,O8,n?n.y:void 0,i?i.y:void 0)}function Wg(e){return e.translate===0&&e.scale===1}function wy(e){return Wg(e.x)&&Wg(e.y)}function Hg(e,t){return e.min===t.min&&e.max===t.max}function P8(e,t){return Hg(e.x,t.x)&&Hg(e.y,t.y)}function Gg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Cy(e,t){return Gg(e.x,t.x)&&Gg(e.y,t.y)}function Yg(e){return fn(e.x)/fn(e.y)}function Xg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class k8{constructor(){this.members=[]}add(t){Mh(this.members,t),t.scheduleRender()}remove(t){if(Dh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function L8(e,t,n){let i="";const a=e.x.translate/t.x,l=e.y.translate/t.y,f=(n==null?void 0:n.z)||0;if((a||l||f)&&(i=`translate3d(${a}px, ${l}px, ${f}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:m,rotate:C,rotateX:E,rotateY:A,skewX:R,skewY:_}=n;m&&(i=`perspective(${m}px) ${i}`),C&&(i+=`rotate(${C}deg) `),E&&(i+=`rotateX(${E}deg) `),A&&(i+=`rotateY(${A}deg) `),R&&(i+=`skewX(${R}deg) `),_&&(i+=`skewY(${_}deg) `)}const g=e.x.scale*t.x,p=e.y.scale*t.y;return(g!==1||p!==1)&&(i+=`scale(${g}, ${p})`),i||"none"}const Qu=["","X","Y","Z"],B8={visibility:"hidden"},j8=1e3;let F8=0;function Ku(e,t,n,i){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),i&&(i[e]=0))}function Ey(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ry(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",At,!(a||l))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Ey(i)}function vy({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=F8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(z8),this.nodes.forEach(X8),this.nodes.forEach(Q8),this.nodes.forEach(W8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new T8)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new Ph),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const p=this.eventHandlers.get(f);p&&p.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=z2(f)&&!LA(f),this.instance=f;const{layoutId:g,layout:p,visualElement:m}=this.options;if(m&&!m.current&&m.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||g)&&(this.isLayoutDirty=!0),e){let C;const E=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,C&&C(),C=I8(E,250),Ll.hasAnimatedSinceResize&&(Ll.hasAnimatedSinceResize=!1,this.nodes.forEach(Kg))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&m&&(g||p)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:E,hasRelativeLayoutChanged:A,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||m.getDefaultTransition()||J8,{onLayoutAnimationStart:P,onLayoutAnimationComplete:U}=m.getProps(),N=!this.targetLayout||!Cy(this.targetLayout,R),b=!E&&A;if(this.options.layoutRoot||this.resumeFrom||b||E&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...Qh(_,"layout"),onPlay:P,onComplete:U};(m.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(C,b)}else E||Kg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K8),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ey(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const E=this.path[C];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:g,layout:p}=this.options;if(g===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qg);return}this.isUpdating||this.nodes.forEach(G8),this.isUpdating=!1,this.nodes.forEach(Y8),this.nodes.forEach(U8),this.nodes.forEach(V8),this.clearAllSnapshots();const g=In.now();qt.delta=Yr(0,1e3/60,g-qt.timestamp),qt.timestamp=g,qt.isProcessing=!0,Fu.update.process(qt),Fu.preRender.process(qt),Fu.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H8),this.sharedNodes.forEach(Z8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,At.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){At.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&this.instance){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:p,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!wy(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,C=m!==this.prevTransformTemplateValue;f&&this.instance&&(g||Yi(this.latestValues)||C)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let p=this.removeElementScroll(g);return f&&(p=this.removeTransform(p)),eT(p),{animationId:this.root.animationId,measuredBox:g,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:f}=this.options;if(!f)return kt();const g=f.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(tT))){const{scroll:C}=this.root;C&&(Ps(g.x,C.offset.x),Ps(g.y,C.offset.y))}return g}removeElementScroll(f){var p;const g=kt();if(Yn(g,f),(p=this.scroll)!=null&&p.wasRoot)return g;for(let m=0;m<this.path.length;m++){const C=this.path[m],{scroll:E,options:A}=C;C!==this.root&&E&&A.layoutScroll&&(E.wasRoot&&Yn(g,f),Ps(g.x,E.offset.x),Ps(g.y,E.offset.y))}return g}applyTransform(f,g=!1){const p=kt();Yn(p,f);for(let m=0;m<this.path.length;m++){const C=this.path[m];!g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&ks(p,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Yi(C.latestValues)&&ks(p,C.latestValues)}return Yi(this.latestValues)&&ks(p,this.latestValues),p}removeTransform(f){const g=kt();Yn(g,f);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Yi(m.latestValues))continue;hf(m.latestValues)&&m.updateSnapshot();const C=kt(),E=m.measurePageBox();Yn(C,E),zg(g,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,C)}return Yi(this.latestValues)&&zg(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var A;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==g;if(!(f||p&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:E}=this.options;if(!(!this.layout||!(C||E))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Jo(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),dy(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Jo(this.relativeTargetOrigin,this.target,R.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hf(this.parent.latestValues)||uy(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const f=this.getLead(),g=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(p=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(p=!1),p)return;const{layout:m,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||C))return;Yn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;i8(this.layoutCorrected,this.treeScale,this.path,g),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=kt());const{target:R}=f;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fg(this.prevProjectionDelta.x,this.projectionDelta.x),Fg(this.prevProjectionDelta.y,this.projectionDelta.y)),qo(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!Xg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var g;if((g=this.options.visualElement)==null||g.scheduleRender(),f){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Os(),this.projectionDelta=Os(),this.projectionDeltaWithTransform=Os()}setAnimationOrigin(f,g=!1){const p=this.snapshot,m=p?p.latestValues:{},C={...this.latestValues},E=Os();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const A=kt(),R=p?p.source:void 0,_=this.layout?this.layout.source:void 0,P=R!==_,U=this.getStack(),N=!U||U.members.length<=1,b=!!(P&&!N&&this.options.crossfade===!0&&!this.path.some(q8));this.animationProgress=0;let S;this.mixTargetDelta=O=>{const V=O/1e3;Zg(E.x,f.x,V),Zg(E.y,f.y,V),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jo(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$8(this.relativeTarget,this.relativeTargetOrigin,A,V),S&&P8(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=kt()),Yn(S,this.relativeTarget)),P&&(this.animationValues=C,N8(C,m,this.latestValues,V,b,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){var g,p,m;this.notifyListeners("animationStart"),(g=this.currentAnimation)==null||g.stop(),(m=(p=this.resumingFrom)==null?void 0:p.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=At.update(()=>{Ll.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zs(0)),this.currentAnimation=S8(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:C=>{this.mixTargetDelta(C),f.onUpdate&&f.onUpdate(C)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(j8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:p,layout:m,latestValues:C}=f;if(!(!g||!p||!m)){if(this!==f&&this.layout&&m&&Sy(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||kt();const E=fn(this.layout.layoutBox.x);p.x.min=f.target.x.min,p.x.max=p.x.min+E;const A=fn(this.layout.layoutBox.y);p.y.min=f.target.y.min,p.y.max=p.y.min+A}Yn(g,p),ks(g,C),qo(this.projectionDeltaWithTransform,this.layoutCorrected,g,C)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new k8),this.sharedNodes.get(f).add(g);const m=g.options.initialPromotionConfig;g.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var g;const{layoutId:f}=this.options;return f?((g=this.getStack())==null?void 0:g.lead)||this:this}getPrevLead(){var g;const{layoutId:f}=this.options;return f?(g=this.getStack())==null?void 0:g.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:p}=f;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(g=!0),!g)return;const m={};p.z&&Ku("z",f,m,this.animationValues);for(let C=0;C<Qu.length;C++)Ku(`rotate${Qu[C]}`,f,m,this.animationValues),Ku(`skew${Qu[C]}`,f,m,this.animationValues);f.render();for(const C in m)f.setStaticValue(C,m[C]),this.animationValues&&(this.animationValues[C]=m[C]);f.scheduleRender()}getProjectionStyles(f){if(!this.instance||this.isSVG)return;if(!this.isVisible)return B8;const g={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=kl(f==null?void 0:f.pointerEvents)||"",g.transform=p?p(this.latestValues,""):"none",g;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=kl(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(R.transform=p?p({},""):"none",this.hasProjected=!1),R}const C=m.animationValues||m.latestValues;this.applyTransformsToTarget(),g.transform=L8(this.projectionDeltaWithTransform,this.treeScale,C),p&&(g.transform=p(C,g.transform));const{x:E,y:A}=this.projectionDelta;g.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,m.animationValues?g.opacity=m===this?C.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:g.opacity=m===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const R in Sa){if(C[R]===void 0)continue;const{correct:_,applyTo:P,isCSSVariable:U}=Sa[R],N=g.transform==="none"?C[R]:_(C[R],m);if(P){const b=P.length;for(let S=0;S<b;S++)g[P[S]]=N}else U?this.options.visualElement.renderState.vars[R]=N:g[R]=N}return this.options.layoutId&&(g.pointerEvents=m===this?kl(f==null?void 0:f.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)==null?void 0:g.stop()}),this.root.nodes.forEach(Qg),this.root.sharedNodes.clear()}}}function U8(e){e.updateLayout()}function V8(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:l}=e.options,f=t.source!==e.layout.source;l==="size"?Xn(E=>{const A=f?t.measuredBox[E]:t.layoutBox[E],R=fn(A);A.min=i[E].min,A.max=A.min+R}):Sy(l,t.layoutBox,i)&&Xn(E=>{const A=f?t.measuredBox[E]:t.layoutBox[E],R=fn(i[E]);A.max=A.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+R)});const g=Os();qo(g,i,t.layoutBox);const p=Os();f?qo(p,e.applyTransform(a,!0),t.measuredBox):qo(p,i,t.layoutBox);const m=!wy(g);let C=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:A,layout:R}=E;if(A&&R){const _=kt();Jo(_,t.layoutBox,A.layoutBox);const P=kt();Jo(P,i,R.layoutBox),Cy(_,P)||(C=!0),E.options.layoutRoot&&(e.relativeTarget=P,e.relativeTargetOrigin=_,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:p,layoutDelta:g,hasLayoutChanged:m,hasRelativeLayoutChanged:C})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function z8(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function W8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function H8(e){e.clearSnapshot()}function Qg(e){e.clearMeasurements()}function G8(e){e.isLayoutDirty=!1}function Y8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function X8(e){e.resolveTargetDelta()}function Q8(e){e.calcProjection()}function K8(e){e.resetSkewAndRotation()}function Z8(e){e.removeLeadSnapshot()}function Zg(e,t,n){e.translate=vt(t.translate,0,n),e.scale=vt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function $g(e,t,n,i){e.min=vt(t.min,n.min,i),e.max=vt(t.max,n.max,i)}function $8(e,t,n,i){$g(e.x,t.x,n.x,i),$g(e.y,t.y,n.y,i)}function q8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const J8={duration:.45,ease:[.4,0,.1,1]},qg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Jg=qg("applewebkit/")&&!qg("chrome/")?Math.round:qn;function ep(e){e.min=Jg(e.min),e.max=Jg(e.max)}function eT(e){ep(e.x),ep(e.y)}function Sy(e,t,n){return e==="position"||e==="preserve-aspect"&&!n8(Yg(t),Yg(n),.2)}function tT(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const nT=vy({attachResizeListener:(e,t)=>Ta(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zu={current:void 0},Ay=vy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zu.current){const e=new nT({});e.mount(window),e.setOptions({layoutScroll:!0}),Zu.current=e}return Zu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),rT={pan:{Feature:w8},drag:{Feature:y8,ProjectionNode:Ay,MeasureLayout:my}};function tp(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=i[a];l&&At.postRender(()=>l(t,Ba(t)))}class iT extends Oi{mount(){const{current:t}=this.node;t&&(this.unmount=DA(t,(n,i)=>(tp(this.node,i,"Start"),a=>tp(this.node,a,"End"))))}unmount(){}}class sT extends Oi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Pa(Ta(this.node.current,"focus",()=>this.onFocus()),Ta(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function np(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=i[a];l&&At.postRender(()=>l(t,Ba(t)))}class oT extends Oi{mount(){const{current:t}=this.node;t&&(this.unmount=kA(t,(n,i)=>(np(this.node,i,"Start"),(a,{success:l})=>np(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mf=new WeakMap,$u=new WeakMap,aT=e=>{const t=mf.get(e.target);t&&t(e)},lT=e=>{e.forEach(aT)};function cT({root:e,...t}){const n=e||document;$u.has(n)||$u.set(n,{});const i=$u.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(lT,{root:e,...t})),i[a]}function uT(e,t,n){const i=cT(t);return mf.set(e,n),i.observe(e),()=>{mf.delete(e),i.unobserve(e)}}const dT={some:0,all:1};class fT extends Oi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:l}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:dT[a]},g=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:C,onViewportLeave:E}=this.node.getProps(),A=m?C:E;A&&A(p)};return uT(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hT(t,n))&&this.startObserver()}unmount(){}}function hT({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gT={inView:{Feature:fT},tap:{Feature:oT},focus:{Feature:sT},hover:{Feature:iT}},pT={layout:{ProjectionNode:Ay,MeasureLayout:my}},xf={current:null},Ty={current:!1};function mT(){if(Ty.current=!0,!!Rh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>xf.current=e.matches;e.addListener(t),t()}else xf.current=!1}const xT=new WeakMap;function yT(e,t,n){for(const i in t){const a=t[i],l=n[i];if(an(a))e.addValue(i,a);else if(an(l))e.addValue(i,Zs(a,{owner:e}));else if(l!==a)if(e.hasValue(i)){const f=e.getValue(i);f.liveStyle===!0?f.jump(a):f.hasAnimated||f.set(a)}else{const f=e.getStaticValue(i);e.addValue(i,Zs(f!==void 0?f:a,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const rp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wT{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:l,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=In.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,At.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=f;this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=m,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=g,this.blockInitialAnimation=!!l,this.isControllingVariants=Vc(n),this.isVariantNode=Y2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in E){const R=E[A];p[A]!==void 0&&an(R)&&R.set(p[A],!1)}}mount(t){this.current=t,xT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Ty.current||mT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ni(this.notifyUpdate),Ni(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=ho.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",g=>{this.latestValues[t]=g,this.props.onUpdate&&At.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let f;window.MotionCheckAppearSync&&(f=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),l(),f&&f(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qs){const n=qs[t];if(!n)continue;const{isEnabled:i,Feature:a}=n;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<rp.length;i++){const a=rp[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,f=t[l];f&&(this.propEventSubscriptions[a]=this.on(a,f))}this.prevMotionValues=yT(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Zs(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(e2(i)||n2(i))?i=parseFloat(i):!jA(i)&&Ri.test(n)&&(i=B2(t,n)),this.setBaseTarget(t,an(i)?i.get():i)),an(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var l;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const f=s0(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);f&&(i=f[t])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!an(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ph),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Iy extends wT{constructor(){super(...arguments),this.KeyframeResolver=IA}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;an(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function by(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const l in n)e.style.setProperty(l,n[l])}function CT(e){return window.getComputedStyle(e)}class ET extends Iy{constructor(){super(...arguments),this.type="html",this.renderInstance=by}readValueFromInstance(t,n){var i;if(ho.has(n))return(i=this.projection)!=null&&i.isProjecting?rf(n):GS(t,n);{const a=CT(t),l=(Bh(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return fy(t,n)}build(t,n,i){n0(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return o0(t,n,i)}}const Ny=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vT(e,t,n,i){by(e,t,void 0,i);for(const a in t.attrs)e.setAttribute(Ny.has(a)?a:t0(a),t.attrs[a])}class ST extends Iy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ho.has(n)){const i=L2(n);return i&&i.default||0}return n=Ny.has(n)?n:t0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return ny(t,n,i)}build(t,n,i){q2(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,a){vT(t,n,i,a)}mount(t){this.isSVGTag=ey(t.tagName),super.mount(t)}}const AT=(e,t)=>i0(e)?new ST(t):new ET(t,{allowProjection:e!==M.Fragment}),TT=v4({...Q4,...gT,...rT,...pT},AT),ns=XA(TT),ja=()=>{const[e,t]=M.useState(null),[n,i]=M.useState(null),[a,l]=M.useState(!0),[f,g]=M.useState(null);M.useEffect(()=>{(()=>{try{const _=localStorage.getItem("token"),P=localStorage.getItem("userInfo");if(_&&i(_),P){const U=JSON.parse(P);t(U),console.log("⚡ Fast loaded user info:",U)}}catch(_){console.error("❌ Error loading basic user data:",_),localStorage.removeItem("token"),localStorage.removeItem("userInfo")}finally{l(!1)}})()},[]);const p=async()=>{if(!(!n||f))try{const _=await(await fetch(`/api/user/profile?token=${encodeURIComponent(n)}&includeImage=true`)).json();if(_.status&&_.data.profileImage){const P=`data:image/jpeg;base64,${_.data.profileImage}`;g(P),console.log("🖼️ Profile image loaded")}}catch(R){console.error("Error loading profile image:",R)}},m=async()=>{if(n)try{const _=await(await fetch(`/api/user/profile?token=${encodeURIComponent(n)}`)).json();if(_.status)return t(_.data),localStorage.setItem("userInfo",JSON.stringify(_.data)),console.log("🔄 User data refreshed:",_.data),_.data}catch(R){console.error("Error refreshing user data:",R)}},C=()=>{localStorage.removeItem("token"),localStorage.removeItem("userInfo"),i(null),t(null),g(null)},E=R=>{t(R),localStorage.setItem("userInfo",JSON.stringify(R))};return{user:e,token:n,isLoading:a,isLoggedIn:!!n&&!!e,isAdmin:(()=>(e==null?void 0:e.admin)===!0||(e==null?void 0:e.role)==="admin")(),profileImage:f,logout:C,updateUser:E,loadProfileImage:p,refreshUserData:m,hasProfileImage:!!f}},$e={STUDENT:"student",TEACHER:"teacher",OFFICER:"officer",ADMIN:"admin"},Fe={VIEW_USER_DATA:"view_user_data",EDIT_OWN_PROFILE:"edit_own_profile",EDIT_OTHER_PROFILES:"edit_other_profiles",DEDUCT_POINTS:"deduct_points",VIEW_WEAPON_STORAGE:"view_weapon_storage",EDIT_WEAPON_STORAGE:"edit_weapon_storage",ADD_SUMMARY:"add_summary",VIEW_SUMMARY:"view_summary",EDIT_SUMMARY:"edit_summary",DELETE_SUMMARY:"delete_summary",MANAGE_USERS:"manage_users",MANAGE_ROLES:"manage_roles",VIEW_ALL_DATA:"view_all_data"},IT={[$e.STUDENT]:[Fe.EDIT_OWN_PROFILE,Fe.ADD_SUMMARY,Fe.VIEW_SUMMARY,Fe.VIEW_WEAPON_STORAGE],[$e.TEACHER]:[Fe.VIEW_USER_DATA,Fe.VIEW_ALL_DATA,Fe.DEDUCT_POINTS,Fe.VIEW_SUMMARY],[$e.OFFICER]:[Fe.VIEW_USER_DATA,Fe.VIEW_ALL_DATA,Fe.DEDUCT_POINTS,Fe.VIEW_WEAPON_STORAGE,Fe.EDIT_WEAPON_STORAGE,Fe.VIEW_SUMMARY],[$e.ADMIN]:[Fe.VIEW_USER_DATA,Fe.VIEW_ALL_DATA,Fe.EDIT_OWN_PROFILE,Fe.EDIT_OTHER_PROFILES,Fe.DEDUCT_POINTS,Fe.VIEW_WEAPON_STORAGE,Fe.EDIT_WEAPON_STORAGE,Fe.ADD_SUMMARY,Fe.VIEW_SUMMARY,Fe.EDIT_SUMMARY,Fe.DELETE_SUMMARY,Fe.MANAGE_USERS,Fe.MANAGE_ROLES]},hi=(e,t)=>!e||!e.role?!1:e.admin||e.role===$e.ADMIN?!0:(IT[e.role]||[]).includes(t),bT=(e,t)=>{if(!e)return!1;switch(t){case"role-manager":return hi(e,Fe.MANAGE_ROLES);case"deduct-point":return hi(e,Fe.DEDUCT_POINTS);case"gun-borrowing":return hi(e,Fe.VIEW_WEAPON_STORAGE);case"summary":return hi(e,Fe.VIEW_SUMMARY);case"behavior-point":case"home":case"profile":return hi(e,Fe.VIEW_USER_DATA)||e.role===$e.STUDENT;default:return!0}},Ry=(e,t)=>`${{[$e.STUDENT]:"นนร.",[$e.TEACHER]:"อาจารย์",[$e.OFFICER]:"นายทหาร",[$e.ADMIN]:"แอดมิน"}[e]||"ผู้ใช้"} ไม่มีสิทธิ์ในการ${t}`,My=e=>{if(!e)return[];const n=[...[{path:"/",label:"หน้าหลัก",icon:"🏠"},{path:"/profile",label:"ข้อมูลส่วนตัว",icon:"👤"}]];return e.role===$e.STUDENT&&n.push({path:"/summary",label:"ลงยอด",icon:"📊"},{path:"/gun-borrowing",label:"คลังอาวุธ",icon:"🔫"},{path:"/behavior-point",label:"คะแนนความประพฤติ",icon:"⭐"}),e.role===$e.TEACHER&&n.push({path:"/Deductpoint",label:"ตัดคะแนน",icon:"➖"},{path:"/summary",label:"ดูสรุปยอด",icon:"📊"},{path:"/behavior-point",label:"ดูคะแนนนักเรียน",icon:"⭐"}),e.role===$e.OFFICER&&n.push({path:"/Deductpoint",label:"ตัดคะแนน",icon:"➖"},{path:"/gun-borrowing",label:"คลังอาวุธ",icon:"🔫"},{path:"/summary",label:"ดูสรุปยอด",icon:"📊"},{path:"/behavior-point",label:"ดูคะแนนนักเรียน",icon:"⭐"}),(e.role===$e.ADMIN||e.admin)&&n.push({path:"/role-manager",label:"จัดการสิทธิ์ผู้ใช้",icon:"👥"},{path:"/Deductpoint",label:"ตัดคะแนน",icon:"➖"},{path:"/gun-borrowing",label:"คลังอาวุธ",icon:"🔫"},{path:"/summary",label:"จัดการสรุปยอด",icon:"📊"},{path:"/behavior-point",label:"จัดการคะแนน",icon:"⭐"}),n};function NT({post:e,userid:t,isAdmin:n,onClose:i,onSuccess:a,showMessage:l}){var b;const[f,g]=M.useState(e.title||""),[p,m]=M.useState(e.content||""),[C,E]=M.useState([]),[A,R]=M.useState([]),[_,P]=M.useState(!1),U=S=>{const O=Array.from(S.target.files);E(O);const V=O.map(z=>new Promise(F=>{const B=new FileReader;B.onloadend=()=>F(B.result),B.readAsDataURL(z)}));Promise.all(V).then(R)},N=async S=>{if(S.preventDefault(),!p.trim()){l("กรุณากรอกเนื้อหาข่าวสาร","error");return}P(!0);try{const O=new FormData;O.append("postId",e.id),O.append("title",f),O.append("content",p),O.append("userid",t),C.forEach(F=>{O.append("images",F)}),console.log("Sending edit request for post:",e.id);const V=await fetch("/api/edit-post",{method:"PUT",body:O}),z=await V.json();if(console.log("Edit response:",z),V.ok&&z.status)l("แก้ไขโพสต์สำเร็จ! ✏️","success"),a(),i();else throw new Error(z.message||"Failed to update post")}catch(O){console.error("Edit post error:",O),l(`เกิดข้อผิดพลาดขณะแก้ไขโพสต์: ${O.message}`,"error")}finally{P(!1)}};return x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:x.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)"},children:[x.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1e293b",fontSize:"20px",fontWeight:"600"},children:"แก้ไขโพสต์"}),x.jsxs("form",{onSubmit:N,children:[x.jsx("div",{style:{marginBottom:"16px"},children:x.jsx("input",{type:"text",placeholder:"หัวข้อข่าว (ไม่บังคับ)",value:f,onChange:S=>g(S.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",background:"#fafafa"},onFocus:S=>S.target.style.borderColor="#3b82f6",onBlur:S=>S.target.style.borderColor="#f1f5f9"})}),x.jsx("div",{style:{marginBottom:"20px"},children:x.jsx("textarea",{placeholder:"เขียนข่าวสาร...",value:p,onChange:S=>m(S.target.value),required:!0,rows:"4",style:{width:"100%",padding:"16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",outline:"none",resize:"vertical",minHeight:"100px",fontFamily:"inherit",lineHeight:"1.6",background:"#fafafa",transition:"all 0.2s ease"},onFocus:S=>S.target.style.borderColor="#3b82f6",onBlur:S=>S.target.style.borderColor="#f1f5f9"})}),((b=e.images)==null?void 0:b.length)>0&&x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("p",{style:{marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"รูปภาพปัจจุบัน:"}),x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"8px",marginBottom:"12px"},children:e.images.map((S,O)=>x.jsx("img",{src:S,alt:`current-${O}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}},O))})]}),x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:U,style:{display:"none"},id:"editImageUpload"}),x.jsx("label",{htmlFor:"editImageUpload",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:S=>{S.target.style.background="#f1f5f9",S.target.style.borderColor="#cbd5e1"},onMouseOut:S=>{S.target.style.background="#f8fafc",S.target.style.borderColor="#e2e8f0"},children:"📎 เพิ่มรูปใหม่"})]}),A.length>0&&x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"20px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:A.map((S,O)=>x.jsxs("div",{style:{position:"relative"},children:[x.jsx("img",{src:S,alt:`preview-${O}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),x.jsx("button",{type:"button",onClick:()=>{const V=C.filter((F,B)=>B!==O),z=A.filter((F,B)=>B!==O);E(V),R(z)},style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",background:"rgba(0,0,0,0.7)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"✕"})]},O))}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[x.jsx("button",{type:"button",onClick:i,style:{padding:"12px 20px",background:"transparent",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#64748b",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:S=>{S.target.style.borderColor="#cbd5e1",S.target.style.color="#475569"},onMouseOut:S=>{S.target.style.borderColor="#e2e8f0",S.target.style.color="#64748b"},children:"ยกเลิก"}),x.jsx("button",{type:"submit",disabled:!p.trim()||_,style:{padding:"12px 24px",background:!p.trim()||_?"#e2e8f0":"#3b82f6",border:"none",borderRadius:"10px",color:!p.trim()||_?"#94a3b8":"white",fontWeight:"600",cursor:!p.trim()||_?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"100px"},onMouseOver:S=>{!p.trim()||_||(S.target.style.background="#2563eb")},onMouseOut:S=>{!p.trim()||_||(S.target.style.background="#3b82f6")},children:_?"กำลังแก้ไข...":"บันทึก"})]})]})]})})}function RT({title:e,setTitle:t,content:n,setContent:i,imageFiles:a,setImageFiles:l,imageBase64List:f,setImageBase64List:g,isExpanded:p,setIsExpanded:m,isSubmitting:C,setIsSubmitting:E,userid:A,fetchPosts:R,showMessage:_}){const[P,U]=M.useState(!1),[N,b]=M.useState(null),[S,O]=M.useState("back"),[V,z]=M.useState(!1),F=M.useRef(null),B=M.useRef(null),G=j=>{const $=Array.from(j.target.files);l($);const oe=$.map(J=>new Promise(he=>{const ue=new FileReader;ue.onloadend=()=>he(ue.result),ue.readAsDataURL(J)}));Promise.all(oe).then(g)},te=async(j="back")=>{try{U(!0),O(j),N&&N.getTracks().forEach(J=>J.stop());const $={video:j==="back"?{facingMode:{ideal:"environment"}}:{facingMode:"user"}};console.log(`🎥 เปิดกล้อง${j==="back"?"หลัง":"หน้า"}...`);const oe=await navigator.mediaDevices.getUserMedia($);b(oe),setTimeout(()=>{F.current&&(F.current.srcObject=oe,F.current.play().catch(J=>{console.error("Error playing video:",J)}))},100)}catch($){console.error("Error accessing camera:",$),U(!1),$.name==="NotAllowedError"?_("กรุณาอนุญาตให้เข้าถึงกล้องในเบราว์เซอร์","error"):$.name==="NotFoundError"?_("ไม่พบกล้องในอุปกรณ์นี้","error"):$.name==="NotSupportedError"?_("เบราว์เซอร์นี้ไม่รองรับการใช้งานกล้อง","error"):_("ไม่สามารถเปิดกล้องได้ กรุณาลองใหม่อีกครั้ง","error")}},we=()=>{te(S==="back"?"front":"back")},de=()=>{N&&(N.getTracks().forEach(j=>j.stop()),b(null)),U(!1)},Ee=()=>{if(F.current&&B.current){z(!0);const j=F.current,$=B.current,oe=$.getContext("2d");if(j.readyState!==4){_("กรุณารอสักครู่ให้กล้องเตรียมพร้อม","error"),z(!1);return}$.width=j.videoWidth||640,$.height=j.videoHeight||480,S==="front"?(oe.scale(-1,1),oe.drawImage(j,-$.width,0,$.width,$.height)):oe.drawImage(j,0,0,$.width,$.height),$.toBlob(J=>{if(J){const he=new File([J],`photo_${Date.now()}.jpg`,{type:"image/jpeg"}),ue=[...a,he];l(ue);const Le=new FileReader;Le.onloadend=()=>{g(ve=>[...ve,Le.result])},Le.readAsDataURL(he),de(),_("ถ่ายรูปสำเร็จ! 📸","success")}else _("เกิดข้อผิดพลาดในการถ่ายรูป","error");z(!1)},"image/jpeg",.8)}else _("กล้องยังไม่พร้อม กรุณาลองใหม่อีกครั้ง","error"),z(!1)},Oe=async j=>{if(j.preventDefault(),!n.trim()){_("กรุณากรอกเนื้อหาข่าวสาร","error");return}if(!A){_("ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่","error");return}E(!0);try{const $=new FormData;$.append("title",e||""),$.append("content",n),$.append("userid",A),a.forEach(ue=>{$.append("images",ue)}),console.log("📤 Sending post data:",{title:e||"",content:n.substring(0,50)+"...",userid:A,filesCount:a.length});const oe=await fetch("/api/post",{method:"POST",body:$}),J=await oe.text();console.log("📥 Raw response:",J);let he;try{he=JSON.parse(J)}catch(ue){throw console.error("❌ Failed to parse response:",ue),new Error("Invalid response from server")}if(oe.ok&&he.status)console.log("✅ Post created successfully"),t(""),i(""),l([]),g([]),m(!1),await R(),_("โพสต์ข่าวสารสำเร็จ! 🎉","success");else throw console.error("❌ Server error:",he),new Error(he.message||"Failed to create post")}catch($){console.error("💥 Submit error:",$),_(`เกิดข้อผิดพลาดขณะโพสต์: ${$.message}`,"error")}finally{E(!1)}};return x.jsx("section",{className:"new-post-section",children:x.jsx($s,{children:p?x.jsxs(ns.form,{onSubmit:Oe,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9",marginBottom:"24px"},children:[x.jsx("div",{style:{marginBottom:"16px"},children:x.jsx("input",{type:"text",placeholder:"หัวข้อข่าว (ไม่บังคับ)",value:e,onChange:j=>t(j.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",background:"#fafafa"},onFocus:j=>j.target.style.borderColor="#3b82f6",onBlur:j=>j.target.style.borderColor="#f1f5f9"})}),x.jsx("div",{style:{marginBottom:"20px"},children:x.jsx("textarea",{placeholder:"เขียนข่าวสาร...",value:n,onChange:j=>i(j.target.value),required:!0,rows:"4",style:{width:"100%",padding:"16px",border:"2px solid #f1f5f9",borderRadius:"12px",fontSize:"16px",outline:"none",resize:"vertical",minHeight:"100px",fontFamily:"inherit",lineHeight:"1.6",background:"#fafafa",transition:"all 0.2s ease"},onFocus:j=>j.target.style.borderColor="#3b82f6",onBlur:j=>j.target.style.borderColor="#f1f5f9"})}),x.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[x.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:G,style:{display:"none"},id:"imageUpload"}),x.jsx("label",{htmlFor:"imageUpload",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:j=>{j.target.style.background="#f1f5f9",j.target.style.borderColor="#cbd5e1"},onMouseOut:j=>{j.target.style.background="#f8fafc",j.target.style.borderColor="#e2e8f0"},children:"📎 เลือกรูป"}),x.jsx("button",{type:"button",onClick:()=>te("back"),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#475569",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseOver:j=>{j.target.style.background="#f1f5f9",j.target.style.borderColor="#cbd5e1"},onMouseOut:j=>{j.target.style.background="#f8fafc",j.target.style.borderColor="#e2e8f0"},children:"📷 ถ่ายรูป"})]}),P&&x.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.92)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:[x.jsxs("div",{style:{position:"absolute",top:"24px",left:"50%",transform:"translateX(-50%)",color:"white",fontSize:"16px",fontWeight:"500",opacity:"0.9"},children:["กล้อง",S==="back"?"หลัง":"หน้า"]}),N?x.jsxs(x.Fragment,{children:[x.jsx("video",{ref:F,autoPlay:!0,playsInline:!0,muted:!0,style:{maxWidth:"90vw",maxHeight:"65vh",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",transform:S==="front"?"scaleX(-1)":"none"}}),x.jsxs("div",{style:{marginTop:"32px",display:"flex",gap:"16px",alignItems:"center"},children:[x.jsx("button",{type:"button",onClick:we,style:{width:"48px",height:"48px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseOver:j=>j.target.style.backgroundColor="rgba(255,255,255,0.3)",onMouseOut:j=>j.target.style.backgroundColor="rgba(255,255,255,0.2)",children:"🔄"}),x.jsx("button",{type:"button",onClick:Ee,disabled:V,style:{width:"72px",height:"72px",backgroundColor:V?"rgba(255,255,255,0.3)":"white",border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",color:V?"rgba(0,0,0,0.5)":"#000",cursor:V?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"all 0.2s ease"},children:V?"⏳":"📸"}),x.jsx("button",{type:"button",onClick:de,style:{width:"48px",height:"48px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseOver:j=>j.target.style.backgroundColor="rgba(255,255,255,0.3)",onMouseOut:j=>j.target.style.backgroundColor="rgba(255,255,255,0.2)",children:"✕"})]})]}):x.jsxs("div",{style:{color:"white",fontSize:"16px",textAlign:"center",background:"rgba(255,255,255,0.1)",padding:"32px",borderRadius:"16px",backdropFilter:"blur(10px)"},children:[x.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:"�"}),x.jsx("div",{style:{marginBottom:"8px"},children:"กำลังเปิดกล้อง..."}),x.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"อนุญาตการเข้าถึงกล้องในเบราว์เซอร์"})]}),x.jsx("canvas",{ref:B,style:{display:"none"}})]}),f.length>0&&x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"20px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:f.map((j,$)=>x.jsxs("div",{style:{position:"relative"},children:[x.jsx("img",{src:j,alt:`preview-${$}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),x.jsx("button",{type:"button",onClick:()=>{const oe=a.filter((he,ue)=>ue!==$),J=f.filter((he,ue)=>ue!==$);l(oe),g(J)},style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",background:"rgba(0,0,0,0.7)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"✕"})]},$))}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[x.jsx("button",{type:"button",onClick:()=>{m(!1),t(""),i(""),l([]),g([]),O("back"),de()},style:{padding:"12px 20px",background:"transparent",border:"2px solid #e2e8f0",borderRadius:"10px",color:"#64748b",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:j=>{j.target.style.borderColor="#cbd5e1",j.target.style.color="#475569"},onMouseOut:j=>{j.target.style.borderColor="#e2e8f0",j.target.style.color="#64748b"},children:"ยกเลิก"}),x.jsx("button",{type:"submit",disabled:!n.trim()||C,style:{padding:"12px 24px",background:!n.trim()||C?"#e2e8f0":"#3b82f6",border:"none",borderRadius:"10px",color:!n.trim()||C?"#94a3b8":"white",fontWeight:"600",cursor:!n.trim()||C?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"100px"},onMouseOver:j=>{!n.trim()||C||(j.target.style.background="#2563eb")},onMouseOut:j=>{!n.trim()||C||(j.target.style.background="#3b82f6")},children:C?"กำลังโพสต์...":"โพสต์"})]})]}):x.jsx("button",{onClick:()=>m(!0),style:{width:"100%",padding:"16px",background:"white",border:"2px solid #f1f5f9",borderRadius:"16px",color:"#64748b",fontSize:"16px",fontWeight:"500",cursor:"pointer",marginBottom:"24px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},onMouseOver:j=>{j.target.style.borderColor="#e2e8f0",j.target.style.background="#fafafa"},onMouseOut:j=>{j.target.style.borderColor="#f1f5f9",j.target.style.background="white"},children:"✍️ เขียนข่าวสาร..."})})})}function MT(){const{user:e,isLoading:t,loadProfileImage:n,profileImage:i}=ja(),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState([]),[C,E]=M.useState([]),[A,R]=M.useState([]),[_,P]=M.useState(!1),[U,N]=M.useState(!1),[b,S]=M.useState(null),[O,V]=M.useState(!1),[z,F]=M.useState(""),[B,G]=M.useState(!1),[te,we]=M.useState(""),[de,Ee]=M.useState("success"),[Oe,j]=M.useState(null),[$,oe]=M.useState(new Set),J=Zr(),he=se=>{switch(se){case $e.STUDENT:return"🎓 นักเรียน";case $e.TEACHER:return"👨‍🏫 อาจารย์";case $e.OFFICER:return"🎖️ นายทหาร";case $e.ADMIN:return"👑 ผู้ดูแลระบบ";default:return"✨ สมาชิก"}},ue=se=>{switch(se){case $e.STUDENT:return"#3b82f6";case $e.TEACHER:return"#10b981";case $e.OFFICER:return"#f59e0b";case $e.ADMIN:return"#ef4444";default:return"#6b7280"}},Le=e&&e.realname?e.realname:"ผู้ใช้",ve=e&&(e.userid||e.username)?e.userid||e.username:"",ct=e&&(e.admin||e.role===$e.ADMIN),He=(se,Te="success")=>{we(se),Ee(Te),G(!0)},Bt=()=>{G(!1)},fe=M.useCallback(async()=>{try{console.log("🔄 Fetching posts...");const Te=await(await fetch("/api/post")).json();Te.status&&Te.data?(console.log("✅ Posts loaded:",Te.data.length,"posts"),R(Te.data)):(console.log("❌ No posts data received"),R([]))}catch(se){console.error("� Error fetching posts:",se),R([])}},[]),Ie=M.useCallback(async()=>{if(!(!(e!=null&&e.id)||z))try{const se=localStorage.getItem("token"),Me=await(await fetch(`/api/user/profile?token=${encodeURIComponent(se)}&includeImage=true`)).json();if(Me.status&&Me.data.profileImage){const Ue=`data:image/jpeg;base64,${Me.data.profileImage}`;F(Ue),console.log("🖼️ Direct profile image loaded")}}catch(se){console.error("Error loading profile image directly:",se)}},[e==null?void 0:e.id,z]);M.useEffect(()=>{if(!t){if(!(e!=null&&e.id)&&!(e!=null&&e.username)){J("/login");return}e!=null&&e.profileImage?F(`data:image/jpeg;base64,${e.profileImage}`):i?F(i):e&&!i&&n(),console.log("� User ready, fetching posts once..."),fe()}},[e==null?void 0:e.id,t,J,fe]),M.useEffect(()=>{t||!e||(e!=null&&e.profileImage?F(`data:image/jpeg;base64,${e.profileImage}`):i?F(i):n())},[e==null?void 0:e.profileImage,i,n,t,e]),M.useEffect(()=>{i&&i!==z?(F(i),console.log("🖼️ Profile image updated in Home")):e!=null&&e.id&&!z&&!i&&Ie()},[i,e==null?void 0:e.id,z,Ie]);const nt=async se=>{if(window.confirm("คุณต้องการลบโพสต์นี้ใช่หรือไม่?"))try{const Te=localStorage.getItem("token");(await fetch(`/api/post/${se}`,{method:"DELETE",headers:{Authorization:`Bearer ${Te}`}})).ok?(await fe(),He("ลบโพสต์สำเร็จแล้ว! 🗑️","success")):He("ลบโพสต์ไม่สำเร็จ","error")}catch{He("เกิดข้อผิดพลาดขณะลบโพสต์","error")}},cn=async se=>{if($.has(se)){console.log("Already processing like for post:",se);return}try{oe(Ue=>new Set([...Ue,se])),console.log("👍 Like request for post:",se);const Te=await fetch("/api/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:se,userid:ve})}),Me=await Te.json();if(Te.ok&&Me.status)console.log("✅ Like updated successfully"),R(Ue=>Ue.map(ge=>ge.id===se?{...ge,likes:Me.data.likes,likesBy:Me.data.likesBy||[]}:ge));else throw new Error(Me.message||"Failed to toggle like")}catch(Te){console.error("💥 Like post error:",Te),He(`เกิดข้อผิดพลาด: ${Te.message}`,"error")}finally{oe(Te=>{const Me=new Set(Te);return Me.delete(se),Me})}},Se=se=>{j(se)},Ae=()=>{j(null)},Ge=()=>{fe()},pe=M.useCallback(se=>!se.likesBy||!ve?!1:se.likesBy.some(Te=>String(Te)===String(ve)),[ve]),_t=se=>{S(se),N(!0)},Ot=()=>{N(!1),S(null)};function tr(se){const Te=/(https?:\/\/[^\s]+)/g;return se.split(Te).map((Ue,ge)=>Te.test(Ue)?x.jsx("a",{href:Ue,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:Ue},ge):Ue)}return x.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",padding:"20px"},children:[t&&x.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column"},children:[x.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",animation:"pulse 1.5s ease-in-out infinite"},children:"🔄"}),x.jsx("div",{style:{fontSize:"18px",color:"#6b7280",fontWeight:"500"},children:"กำลังโหลด..."})]}),!t&&e&&x.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[x.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"24px",marginBottom:"24px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9"},children:[x.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"3px solid #e2e8f0"},children:z?x.jsx("img",{src:z,alt:"avatar",style:{width:"100%",height:"100%",objectFit:"cover"},onError:se=>{se.target.style.display="none",Ie()}}):x.jsx("div",{style:{fontSize:"32px",color:"#94a3b8",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>{console.log("� Manual profile image reload"),Ie()},title:"คลิกเพื่อโหลดรูปโปรไฟล์",children:"👤"})}),x.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1e293b",marginBottom:"8px"},children:Le}),x.jsx("div",{style:{fontSize:"14px",color:"white",background:ue(e==null?void 0:e.role),padding:"6px 16px",borderRadius:"20px",display:"inline-block",fontWeight:"600",marginBottom:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:he(e==null?void 0:e.role)}),x.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"16px",margin:"16px 0",border:"1px solid #e2e8f0"},children:[x.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"🔑 สิทธิ์การเข้าถึง"}),x.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"center"},children:[(e==null?void 0:e.role)===$e.STUDENT&&x.jsxs(x.Fragment,{children:[x.jsx("span",{style:{fontSize:"12px",background:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"✏️ แก้ไขโปรไฟล์"}),x.jsx("span",{style:{fontSize:"12px",background:"#dcfce7",color:"#166534",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"📊 เพิ่มสรุปยอด"}),x.jsx("span",{style:{fontSize:"12px",background:"#fef3c7",color:"#92400e",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"👁️ ดูคลังอาวุธ"})]}),(e==null?void 0:e.role)===$e.TEACHER&&x.jsxs(x.Fragment,{children:[x.jsx("span",{style:{fontSize:"12px",background:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"👥 ดูข้อมูลผู้ใช้"}),x.jsx("span",{style:{fontSize:"12px",background:"#fecaca",color:"#b91c1c",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"➖ ตัดคะแนน"}),x.jsx("span",{style:{fontSize:"12px",background:"#dcfce7",color:"#166534",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"📊 ดูสรุปยอด"})]}),(e==null?void 0:e.role)===$e.OFFICER&&x.jsxs(x.Fragment,{children:[x.jsx("span",{style:{fontSize:"12px",background:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"👥 ดูข้อมูลผู้ใช้"}),x.jsx("span",{style:{fontSize:"12px",background:"#fecaca",color:"#b91c1c",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"➖ ตัดคะแนน"}),x.jsx("span",{style:{fontSize:"12px",background:"#f3e8ff",color:"#7c3aed",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"🔫 จัดการคลังอาวุธ"}),x.jsx("span",{style:{fontSize:"12px",background:"#dcfce7",color:"#166534",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"📊 ดูสรุปยอด"})]}),((e==null?void 0:e.role)===$e.ADMIN||(e==null?void 0:e.admin))&&x.jsx("span",{style:{fontSize:"12px",background:"#fecaca",color:"#b91c1c",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:"👑 สิทธิ์เต็มรูปแบบ"})]})]})]}),x.jsx("div",{style:{width:"100%",maxWidth:4500,margin:"0 auto"},children:x.jsx(RT,{title:a,setTitle:l,content:f,setContent:g,imageFiles:p,setImageFiles:m,imageBase64List:C,setImageBase64List:E,isExpanded:_,setIsExpanded:P,isSubmitting:O,setIsSubmitting:V,userid:ve,fetchPosts:fe,showMessage:He})}),x.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[x.jsxs("section",{style:{marginTop:"8px"},children:[x.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"📰 ข่าวสารล่าสุด"}),x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:A.length===0?x.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"48px 20px",background:"white",borderRadius:"16px",border:"2px dashed #e5e7eb"},children:[x.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📝"}),x.jsx("div",{style:{fontSize:"16px",fontWeight:"500"},children:"ยังไม่มีข่าวสาร"}),x.jsx("div",{style:{fontSize:"14px",marginTop:"8px"},children:"เป็นคนแรกที่แชร์ข่าวสารกันเลย!"})]}):x.jsx($s,{children:A.map(se=>{var Te,Me;return x.jsxs(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f1f5f9",position:"relative"},children:[x.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",fontSize:"12px",color:"#6b7280",background:"#f8fafc",padding:"4px 8px",borderRadius:"6px",border:"1px solid #e2e8f0",fontWeight:"500"},children:new Date(se.date).toLocaleDateString("th-TH")}),se.title&&x.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",marginBottom:"12px",lineHeight:"1.4",marginRight:"80px"},children:se.title}),x.jsx("p",{style:{fontSize:"16px",color:"#374151",lineHeight:"1.6",marginBottom:((Te=se.images)==null?void 0:Te.length)>0?"16px":"20px",whiteSpace:"pre-wrap"},children:tr(se.content)}),((Me=se.images)==null?void 0:Me.length)>0&&x.jsx("div",{style:{display:"grid",gridTemplateColumns:se.images.length===1?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"20px"},children:se.images.map((Ue,ge)=>x.jsx("img",{src:Ue,alt:`โพสต์ ${ge+1}`,style:{width:"100%",height:se.images.length===1?"auto":"200px",objectFit:"cover",borderRadius:"12px",cursor:"pointer",transition:"transform 0.2s ease",border:"1px solid #e2e8f0"},onClick:()=>_t(Ue),onMouseOver:Vn=>Vn.target.style.transform="scale(1.02)",onMouseOut:Vn=>Vn.target.style.transform="scale(1)"},ge))}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:"1px solid #f1f5f9"},children:[x.jsx("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:x.jsx("span",{style:{background:"#f3f4f6",padding:"4px 8px",borderRadius:"6px",fontWeight:"500"},children:se.postedBy})}),x.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[x.jsxs("button",{onClick:()=>cn(se.id),disabled:$.has(se.id),style:{padding:"8px 12px",background:$.has(se.id)?"#f3f4f6":pe(se)?"#fef3f2":"#f8fafc",border:`1px solid ${$.has(se.id)?"#d1d5db":pe(se)?"#fecaca":"#e2e8f0"}`,borderRadius:"8px",color:$.has(se.id)?"#9ca3af":pe(se)?"#dc2626":"#64748b",cursor:$.has(se.id)?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",opacity:$.has(se.id)?.7:1},onMouseOver:Ue=>{$.has(se.id)||(pe(se)?(Ue.target.style.background="#fee2e2",Ue.target.style.borderColor="#fca5a5"):(Ue.target.style.background="#f1f5f9",Ue.target.style.borderColor="#cbd5e1"))},onMouseOut:Ue=>{$.has(se.id)||(pe(se)?(Ue.target.style.background="#fef3f2",Ue.target.style.borderColor="#fecaca"):(Ue.target.style.background="#f8fafc",Ue.target.style.borderColor="#e2e8f0"))},title:$.has(se.id)?"กำลังประมวลผล...":pe(se)?"ยกเลิกไลค์":"กดไลค์",children:[$.has(se.id)?"⏳":pe(se)?"❤️":"🤍",x.jsx("span",{children:se.likes||0})]}),(ct||String(se.userid)===String(ve))&&x.jsx("button",{onClick:()=>Se(se),style:{padding:"8px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"8px",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:Ue=>{Ue.target.style.background="#dbeafe",Ue.target.style.borderColor="#93c5fd"},onMouseOut:Ue=>{Ue.target.style.background="#eff6ff",Ue.target.style.borderColor="#bfdbfe"},title:"แก้ไขโพสต์",children:"✏️"}),(ct||String(se.userid)===String(ve))&&x.jsx("button",{onClick:()=>nt(se.id),style:{padding:"8px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:Ue=>{Ue.target.style.background="#fee2e2",Ue.target.style.borderColor="#fca5a5"},onMouseOut:Ue=>{Ue.target.style.background="#fef2f2",Ue.target.style.borderColor="#fecaca"},title:"ลบโพสต์",children:"🗑️"})]})]})]},se.id)})})})]}),U&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:Ot,children:x.jsx("img",{src:b,alt:"expanded",style:{maxWidth:"90vw",maxHeight:"90vh",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},onClick:se=>se.stopPropagation()})})]}),B&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"32px",borderRadius:"20px",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",textAlign:"center",maxWidth:"400px",margin:"20px",border:`3px solid ${de==="success"?"#10b981":"#ef4444"}`},children:[x.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:de==="success"?"✅":"❌"}),x.jsx("h3",{style:{margin:"0 0 12px 0",color:de==="success"?"#10b981":"#ef4444",fontSize:"1.25rem",fontWeight:"600"},children:de==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),x.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"1rem",lineHeight:"1.5"},children:te}),x.jsx("button",{onClick:Bt,style:{backgroundColor:de==="success"?"#10b981":"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"10px",fontSize:"16px",fontWeight:"600",cursor:"pointer",minWidth:"100px",transition:"all 0.2s ease"},onMouseOver:se=>se.target.style.opacity="0.9",onMouseOut:se=>se.target.style.opacity="1",children:"ตกลง"})]})}),Oe&&x.jsx(NT,{post:Oe,userid:ve,isAdmin:ct,onClose:Ae,onSuccess:Ge,showMessage:He})]})]})}const DT="/assets/logo-0b13794e.png";function _T(){const[e,t]=M.useState("login"),[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(!1),[C,E]=M.useState(""),[A,R]=M.useState(!1),[_,P]=M.useState(""),[U,N]=M.useState(""),[b,S]=M.useState(""),[O,V]=M.useState(""),[z,F]=M.useState(""),[B,G]=M.useState(""),[te,we]=M.useState(""),de="";console.log("🔍 Environment:","production"),console.log("🔍 API URL:",de);const Ee=Zr();M.useEffect(()=>{R(!0)},[]);const Oe=async $=>{var oe,J;$.preventDefault(),g(""),m(!0),E("กำลังเข้าสู่ระบบ...");try{const he=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}),ue=await he.json();if(console.log("Login response data:",ue),he.ok){E("เข้าสู่ระบบสำเร็จ! กำลังนำคุณไปยังหน้าหลัก...");const Le=ue.token||((oe=ue.data)==null?void 0:oe.token),ve=(J=ue.data)==null?void 0:J.user;console.log("⚡ Fast login - Token:",Le?"OK":"Missing"),console.log("⚡ Fast login - User info:",ve?"OK":"Missing"),Le?(localStorage.setItem("token",Le),console.log("✅ Token saved")):console.error("❌ No token received"),ve?(localStorage.setItem("userInfo",JSON.stringify(ve)),console.log("✅ User info saved immediately:",ve)):console.error("❌ No user info received"),Ee("/")}else g(ue.error||ue.message||"เข้าสู่ระบบไม่สำเร็จ"),E("")}catch{g("เกิดข้อผิดพลาดในการเชื่อมต่อ"),E("")}finally{m(!1)}},j=async $=>{if($.preventDefault(),G(""),!_||!O||!z||!U||!b||!te){G("กรุณากรอกข้อมูลให้ครบ");return}if(O!==z){G("รหัสผ่านไม่ตรงกัน");return}try{const oe=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:_,realname:U,userid:b,password:O,blood:te})}),J=await oe.json();oe.ok?(alert("สมัครสมาชิกสำเร็จ"),t("login")):G(J.error||J.message||"สมัครสมาชิกไม่สำเร็จ")}catch{G("เกิดข้อผิดพลาด")}};return x.jsx("div",{className:"login-bg",children:x.jsxs("div",{className:`container ${A?"fade-in":""}`,children:[x.jsx("div",{className:"logo-container",children:x.jsx("img",{src:DT,alt:"logo",className:"logo"})}),x.jsxs("div",{className:"tabs",children:[x.jsx("button",{className:e==="login"?"active":"",onClick:()=>t("login"),children:"Login"}),x.jsx("button",{className:e==="register"?"active":"",onClick:()=>t("register"),children:"Register"})]}),e==="login"&&x.jsxs("form",{className:"form active",onSubmit:Oe,children:[x.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้ หรือ รหัสประจำตัวประชาชน",value:n,onChange:$=>i($.target.value),required:!0,disabled:p}),x.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:a,onChange:$=>l($.target.value),required:!0,disabled:p}),f&&x.jsx("div",{className:"error-message",children:f}),C&&x.jsx("div",{className:"success-message",children:C}),x.jsx("button",{type:"submit",disabled:p,className:"btn",children:p?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]}),e==="register"&&x.jsxs("form",{className:"form active",onSubmit:j,children:[x.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้",value:_,onChange:$=>P($.target.value),required:!0}),x.jsx("input",{type:"text",placeholder:"ชื่อ-นามสกุล",value:U,onChange:$=>N($.target.value),required:!0}),x.jsx("input",{type:"text",placeholder:"รหัสประจำตัวประชาชน",value:b,onChange:$=>S($.target.value),required:!0}),x.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:O,onChange:$=>V($.target.value),required:!0}),x.jsx("input",{type:"password",placeholder:"ยืนยันรหัสผ่าน",value:z,onChange:$=>F($.target.value),required:!0}),x.jsxs("select",{value:te,onChange:$=>we($.target.value),required:!0,className:"register-blood-select",children:[x.jsx("option",{value:"",children:"เลือกกรุ๊ปเลือด"}),x.jsx("option",{value:"A",children:"A"}),x.jsx("option",{value:"B",children:"B"}),x.jsx("option",{value:"O",children:"O"}),x.jsx("option",{value:"AB",children:"AB"})]}),B&&x.jsx("div",{className:"error-message",children:B}),x.jsx("button",{type:"submit",className:"btn",children:"สมัครสมาชิก"})]}),e==="login"&&x.jsxs("div",{className:"login-footer",children:["ยังไม่มีบัญชี? ",x.jsx("span",{className:"login-link",onClick:()=>t("register"),children:"สมัครสมาชิก"})]})]})})}function OT(){const[e,t]=M.useState(""),[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),[C,E]=M.useState(""),[A,R]=M.useState(!1),_=Zr();M.useEffect(()=>{R(!0)},[]);const P=async U=>{U.preventDefault(),E("");try{const N=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,realname:n,userid:a,password:f,blood:p})}),b=await N.json();N.ok?(alert("สมัครสมาชิกสำเร็จ"),_("/login")):E(b.error||b.message||"สมัครสมาชิกไม่สำเร็จ")}catch{E("เกิดข้อผิดพลาด")}};return x.jsxs("div",{className:`register-container ${A?"fade-in":""}`,children:[x.jsx("h2",{className:"register-title",children:"สมัครสมาชิก"}),x.jsxs("form",{onSubmit:P,className:"register-form",children:[x.jsx("input",{type:"text",placeholder:"ชื่อผู้ใช้",value:e,onChange:U=>t(U.target.value),required:!0,className:"register-input"}),x.jsx("input",{type:"text",placeholder:"ชื่อ-นามสกุล",value:n,onChange:U=>i(U.target.value),required:!0,className:"register-input"}),x.jsx("input",{type:"text",placeholder:"รหัสประจำตัวประชาชน",value:a,onChange:U=>l(U.target.value),required:!0,className:"register-input"}),x.jsx("input",{type:"password",placeholder:"รหัสผ่าน",value:f,onChange:U=>g(U.target.value),required:!0,className:"register-input"}),x.jsxs("select",{value:p,onChange:U=>m(U.target.value),required:!0,className:"register-select",children:[x.jsx("option",{value:"",children:"เลือกกรุ๊ปเลือด"}),x.jsx("option",{value:"A",children:"A"}),x.jsx("option",{value:"B",children:"B"}),x.jsx("option",{value:"O",children:"O"}),x.jsx("option",{value:"AB",children:"AB"})]}),C&&x.jsx("div",{className:"register-error",children:C}),x.jsx("button",{type:"submit",className:"register-button",children:"สมัครสมาชิก"})]}),x.jsxs("div",{className:"register-footer",children:["มีบัญชีอยู่แล้ว? ",x.jsx(Ih,{to:"/login",children:"เข้าสู่ระบบ"})]})]})}const PT=()=>{const[e,t]=M.useState([]);M.useEffect(()=>{fetch("/api/users").then(f=>f.json()).then(f=>t(f)).catch(f=>console.error(f))},[]);const n=f=>f?typeof f=="string"?`data:image/png;base64,${f}`:f.data?`data:image/png;base64,${btoa(new Uint8Array(f.data).reduce((p,m)=>p+String.fromCharCode(m),""))}`:"":"",i=async(f,g)=>{await fetch("/api/user/setAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:f,admin:g})}),t(e.map(p=>p.userid===f?{...p,admin:g}:p)),console.log(g?`User ${f} is now Admin`:`User ${f} is no longer Admin`)},a=async(f,g)=>{try{(await(await fetch("/api/user/role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:f,role:g})})).json()).status&&(t(e.map(C=>C.userid===f?{...C,role:g,admin:g==="admin"}:C)),console.log(`User ${f} role updated to ${g}`))}catch(p){console.error("Error updating role:",p)}},l={student:"นักเรียนนายสิบ",teacher:"อาจารย์",officer:"นายทหาร",admin:"ผู้ดูแลระบบ"};return x.jsx("div",{className:"userlist-bg",children:x.jsxs("div",{className:"userlist-container",children:[x.jsx("h1",{className:"userlist-title",children:"รายชื่อผู้ใช้ระบบ"}),x.jsxs("table",{className:"userlist-table",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Username"}),x.jsx("th",{children:"Real Name"}),x.jsx("th",{children:"UserID"}),x.jsx("th",{children:"Blood"}),x.jsx("th",{children:"Gun Number"}),x.jsx("th",{children:"Point"}),x.jsx("th",{children:"Major"}),x.jsx("th",{children:"Role"}),x.jsx("th",{children:"Profile Image"}),x.jsx("th",{children:"Admin"})]})}),x.jsx("tbody",{children:e.length===0?x.jsx("tr",{children:x.jsx("td",{colSpan:"11",className:"userlist-loading",children:"ไม่พบข้อมูลผู้ใช้"})}):e.map(f=>x.jsxs("tr",{children:[x.jsx("td",{children:f.id}),x.jsx("td",{children:f.username}),x.jsx("td",{children:f.realname}),x.jsx("td",{children:f.userid}),x.jsx("td",{children:f.blood}),x.jsx("td",{children:f.gunNumber}),x.jsx("td",{children:f.point}),x.jsx("td",{children:f.major}),x.jsx("td",{children:x.jsx("select",{value:f.role||"student",onChange:g=>a(f.userid,g.target.value),className:"role-select",children:Object.entries(l).map(([g,p])=>x.jsx("option",{value:g,children:p},g))})}),x.jsx("td",{children:f.profileImage&&f.profileImage.data?x.jsx("img",{src:n(f.profileImage),alt:"profile",className:"userlist-avatar"}):x.jsx("div",{className:"userlist-no-avatar",children:"No Image"})}),x.jsxs("td",{children:[x.jsx("input",{type:"checkbox",checked:!!f.admin,onChange:g=>i(f.userid,g.target.checked),className:"userlist-checkbox"})," ",f.admin?"YES":"NO"]})]},f.id))})]})]})})},Po=({children:e})=>localStorage.getItem("token")?e:x.jsx(lc,{to:"/login",replace:!0});function kT(){var S;const[e,t]=M.useState(""),[n,i]=M.useState(""),[a,l]=M.useState(0),[f,g]=M.useState([]),[p,m]=M.useState(""),[C,E]=M.useState(""),[A,R]=M.useState(!0),[_,P]=M.useState(""),U=Zr(),N=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];M.useEffect(()=>{const O=localStorage.getItem("token");if(!O){R(!1);return}fetch("/api/user/me",{headers:{Authorization:`Bearer ${O}`}}).then(V=>V.json()).then(V=>{if(!V.data||!V.data.userid){R(!1);return}m(V.data.userid),t(V.data.realname||""),E(V.data.major||""),i(V.data.profileImage?`data:image/jpeg;base64,${V.data.profileImage}`:"");const z=V.data.adjustments||[];g(z),l(V.data.point||0),P(!!V.data.admin),R(!1)}).catch(()=>R(!1))},[]);function b(O){if(!O)return"";const V=new Date(O);return isNaN(V)?O:V.toLocaleDateString("th-TH",{year:"numeric",month:"2-digit",day:"2-digit"})}return A?x.jsx("div",{className:"behavior-point-container",children:x.jsx("div",{className:"loading",children:"Loading..."})}):x.jsx("div",{className:"behavior-point-bg",children:x.jsxs("div",{className:"behavior-point-container",children:[x.jsx("h1",{className:"behavior-point-title",children:"คะแนนความประพฤติ"}),x.jsxs("div",{className:"behavior-card",children:[x.jsx("h2",{children:"ข้อมูลผู้ใช้"}),x.jsxs("div",{className:"profile-section",children:[n?x.jsx("img",{src:n,alt:"Profile",className:"profile-img"}):x.jsx("div",{className:"profile-img no-img",children:"No Image"}),x.jsxs("div",{className:"profile-info",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"ชื่อ:"})," ",e]}),x.jsxs("p",{children:[x.jsx("strong",{children:"รหัส:"})," ",p]}),C&&x.jsxs("p",{children:[x.jsx("strong",{children:"สาขา:"})," ",((S=N.find(O=>O.value===C))==null?void 0:S.label)||C]}),x.jsxs("p",{children:[x.jsx("strong",{children:"คะแนนพฤติกรรม:"})," ",x.jsx("span",{className:"point",children:a})]}),_&&x.jsx("p",{className:"admin-badge",children:"สถานะ: Admin"})]})]}),_&&x.jsx("button",{className:"deduct-point-btn",onClick:()=>U("/DeductPoint"),children:"ไปหน้าหักคะแนน (DeductPoint)"}),x.jsx("h3",{children:"ประวัติการปรับคะแนน"}),x.jsxs("div",{style:{fontWeight:600,display:"flex",padding:"4px 0",borderBottom:"1px solid #e0e0e0",marginBottom:4},children:[x.jsx("span",{style:{flex:1},children:"วันที่"}),x.jsx("span",{style:{width:60,textAlign:"center"},children:"คะแนน"}),x.jsx("span",{style:{flex:2},children:"เหตุผล"}),x.jsx("span",{style:{flex:1},children:"โดย"})]}),x.jsxs("ul",{className:"adjustment-list",children:[f.length===0&&x.jsx("li",{className:"no-history",children:"ไม่มีประวัติการปรับคะแนน"}),f.map((O,V)=>x.jsxs("li",{className:O.change>0?"plus":O.change<0?"minus":"",style:{display:"flex",alignItems:"center"},children:[x.jsx("span",{className:"adj-date",style:{flex:1},children:b(O.date)}),x.jsxs("span",{className:"adj-change",style:{width:60,textAlign:"center"},children:[O.change>0?"+":"",O.change]}),x.jsxs("span",{className:"adj-reason",style:{flex:2},children:["(",O.reason,")"]}),x.jsxs("span",{className:"adj-operator",style:{flex:1},children:["โดย: ",O.operator]})]},V))]})]})]})})}function LT(){const[e,t]=M.useState(""),[n,i]=M.useState(-1),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),C=async E=>{E.preventDefault();const R=await(await fetch("/api/behavior/deduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:e,change:n,reason:a,operator:f})})).json();m(R.message||(R.status?"สำเร็จ":"เกิดข้อผิดพลาด"))};return x.jsx("div",{className:"deduct-point-bg",children:x.jsxs("div",{className:"deduct-point-container",children:[x.jsx("h1",{className:"deduct-point-title",children:"ระบบตัดคะแนนความประพฤติ"}),x.jsxs("div",{className:"deduct-point-card",children:[x.jsx("h2",{children:"ตัดคะแนน"}),x.jsxs("form",{onSubmit:C,children:[x.jsx("div",{children:x.jsxs("label",{children:["รหัสนักเรียน:",x.jsx("input",{value:e,onChange:E=>t(E.target.value),required:!0})]})}),x.jsx("div",{children:x.jsxs("label",{children:["คะแนนที่ตัด:",x.jsx("input",{type:"number",value:Math.abs(n),onChange:E=>i(-Math.abs(Number(E.target.value))),min:"1",required:!0})]})}),x.jsx("div",{children:x.jsxs("label",{children:["เหตุผล:",x.jsx("input",{value:a,onChange:E=>l(E.target.value),required:!0})]})}),x.jsx("div",{children:x.jsxs("label",{children:["ผู้ตัดคะแนน:",x.jsx("input",{value:f,onChange:E=>g(E.target.value),required:!0})]})}),x.jsx("button",{type:"submit",children:"ตัดคะแนน"})]}),p&&x.jsx("div",{className:"message",children:p})]})]})})}const ip=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];function BT(){const[e,t]=M.useState(""),[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),[C,E]=M.useState(null),[A,R]=M.useState(""),[_,P]=M.useState(""),[U,N]=M.useState(""),[b,S]=M.useState(""),[O,V]=M.useState(""),[z,F]=M.useState([{key:"",value:1}]),[B,G]=M.useState(""),[te,we]=M.useState(""),[de,Ee]=M.useState(""),[Oe,j]=M.useState(""),[$,oe]=M.useState(!1),[J,he]=M.useState(""),[ue,Le]=M.useState("success"),ve=Zr();M.useEffect(()=>{const Se=localStorage.getItem("token");fetch("/api/user/me",{headers:{Authorization:`Bearer ${Se}`}}).then(Ae=>Ae.json()).then(Ae=>{if(Ae.status){t(Ae.data.realname||""),i(Ae.data.userid||""),l(Ae.data.blood||""),g(Ae.data.gunNumber||"");let Ge=Ae.data.major||"";Ge.startsWith("สาขาวิชา")&&(Ge=Ge.replace("สาขาวิชา","").trim());const pe=ip.find(_t=>_t.label===Ge||_t.value===Ge);if(m(pe?pe.value:""),P(Ae.data.club1||""),N(Ae.data.club2||""),S(Ae.data.club3||""),V(Ae.data.year||""),G(Ae.data.battalion||""),we(Ae.data.company||""),Ee(Ae.data.platoon||""),j(Ae.data.squad||""),Ae.data.profileImage&&R(`data:image/jpeg;base64,${Ae.data.profileImage}`),Ae.data.other)try{const _t=typeof Ae.data.other=="string"?JSON.parse(Ae.data.other):Ae.data.other;Array.isArray(_t)&&F(_t)}catch{}}}).catch(Ae=>{console.error("Error fetching user data:",Ae)})},[]);const ct=Se=>{const Ae=Se.target.files[0];Ae&&(E(Ae),R(URL.createObjectURL(Ae)))},He=(Se,Ae,Ge)=>{F(pe=>{const _t=[...pe];return _t[Se][Ae]=Ge,_t})},Bt=()=>{F(Se=>[...Se,{key:"",value:1}])},fe=Se=>{F(Ae=>Ae.filter((Ge,pe)=>pe!==Se))},Ie=(Se,Ae="success")=>{he(Se),Le(Ae),oe(!0)},nt=()=>{oe(!1),ue==="success"&&ve("/")},cn=Se=>{Se.preventDefault();const Ae=localStorage.getItem("token"),Ge=new FormData;Ge.append("realname",e),Ge.append("userid",n),Ge.append("blood",a),Ge.append("gunNumber",f),Ge.append("major",p),Ge.append("club1",_),Ge.append("club2",U),Ge.append("club3",b),Ge.append("year",O),Ge.append("other",JSON.stringify(z)),Ge.append("battalion",B),Ge.append("company",te),Ge.append("platoon",de),Ge.append("squad",Oe),C&&Ge.append("profileImage",C),fetch("/api/user/update",{method:"POST",headers:{Authorization:`Bearer ${Ae}`},body:Ge}).then(pe=>pe.json()).then(pe=>{pe.success?Ie("บันทึกข้อมูลเรียบร้อยแล้ว! 🎉","success"):Ie("ไม่สามารถบันทึกข้อมูลได้ กรุณาลองใหม่อีกครั้ง","error")}).catch(pe=>{console.error("Error:",pe),Ie("เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง","error")})};return x.jsxs("div",{className:"edit-profile-minimal",children:[x.jsxs("form",{className:"edit-profile-form",onSubmit:cn,children:[x.jsx("h2",{className:"edit-profile-title",children:"แก้ไขข้อมูลส่วนตัว"}),x.jsxs("div",{className:"section-container",children:[x.jsx("h3",{className:"section-title",children:"รูปโปรไฟล์"}),x.jsxs("div",{className:"profile-img-block",children:[A&&x.jsx("img",{src:A,alt:"Preview",className:"profile-img"}),x.jsx("input",{type:"file",accept:"image/*",onChange:ct})]})]}),x.jsxs("div",{className:"section-container",children:[x.jsx("h3",{className:"section-title",children:"ข้อมูลพื้นฐาน"}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"ชื่อ-นามสกุล"}),x.jsx("input",{type:"text",placeholder:"กรอกชื่อ-นามสกุล",value:e,onChange:Se=>t(Se.target.value),required:!0})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"รหัสประจำตัว"}),x.jsx("input",{type:"text",placeholder:"กรอกรหัสประจำตัว",value:n,onChange:Se=>i(Se.target.value),required:!0})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"กรุ๊ปเลือด"}),x.jsx("input",{type:"text",placeholder:"กรอกกรุ๊ปเลือด เช่น A, B, AB, O",value:a,onChange:Se=>l(Se.target.value),required:!0})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"เลขปืน (ไม่บังคับ)"}),x.jsx("input",{type:"text",placeholder:"กรอกเลขปืน",value:f,onChange:Se=>g(Se.target.value)})]})]}),x.jsxs("div",{className:"section-container",children:[x.jsx("h3",{className:"section-title",children:"ข้อมูลการศึกษา"}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"สาขาวิชา"}),x.jsxs("select",{value:p,onChange:Se=>m(Se.target.value),required:!0,children:[x.jsx("option",{value:"",children:"-- เลือกสาขาวิชา --"}),ip.map(Se=>x.jsx("option",{value:Se.value,children:Se.label},Se.value))]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"ชั้นปี"}),x.jsxs("select",{value:O,onChange:Se=>V(Se.target.value),required:!0,children:[x.jsx("option",{value:"",children:"-- เลือกชั้นปี --"}),x.jsx("option",{value:"1",children:"ชั้นปี 1"}),x.jsx("option",{value:"2",children:"ชั้นปี 2"}),x.jsx("option",{value:"3",children:"ชั้นปี 3"}),x.jsx("option",{value:"4",children:"ชั้นปี 4"}),x.jsx("option",{value:"5",children:"ชั้นปี 5"})]})]})]}),x.jsxs("div",{className:"section-container",children:[x.jsx("h3",{className:"section-title",children:"ข้อมูลสังกัด (ไม่บังคับ)"}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"กองพัน"}),x.jsxs("select",{value:B,onChange:Se=>G(Se.target.value),children:[x.jsx("option",{value:"",children:"-- เลือกกองพัน --"}),x.jsx("option",{value:"1",children:"กองพัน 1"}),x.jsx("option",{value:"2",children:"กองพัน 2"}),x.jsx("option",{value:"3",children:"กองพัน 3"}),x.jsx("option",{value:"4",children:"กองพัน 4"})]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"กองร้อย"}),x.jsxs("select",{value:te,onChange:Se=>we(Se.target.value),children:[x.jsx("option",{value:"",children:"-- เลือกกองร้อย --"}),x.jsx("option",{value:"1",children:"กองร้อย 1"}),x.jsx("option",{value:"2",children:"กองร้อย 2"}),x.jsx("option",{value:"3",children:"กองร้อย 3"})]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"หมู่"}),x.jsxs("select",{value:de,onChange:Se=>Ee(Se.target.value),children:[x.jsx("option",{value:"",children:"-- เลือกหมู่ --"}),x.jsx("option",{value:"1",children:"หมู่ 1"}),x.jsx("option",{value:"2",children:"หมู่ 2"}),x.jsx("option",{value:"3",children:"หมู่ 3"}),x.jsx("option",{value:"4",children:"หมู่ 4"})]})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"หมวด"}),x.jsxs("select",{value:Oe,onChange:Se=>j(Se.target.value),children:[x.jsx("option",{value:"",children:"-- เลือกหมวด --"}),x.jsx("option",{value:"1",children:"หมวด 1"}),x.jsx("option",{value:"2",children:"หมวด 2"}),x.jsx("option",{value:"3",children:"หมวด 3"})]})]})]}),x.jsxs("div",{className:"section-container",children:[x.jsx("h3",{className:"section-title",children:"ข้อมูลชมรม (ไม่บังคับ)"}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"ชมรมที่ 1"}),x.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 1",value:_,onChange:Se=>P(Se.target.value)})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"ชมรมที่ 2"}),x.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 2",value:U,onChange:Se=>N(Se.target.value)})]}),x.jsxs("div",{className:"form-group",children:[x.jsx("label",{className:"form-label",children:"ชมรมที่ 3"}),x.jsx("input",{type:"text",placeholder:"กรอกชื่อชมรมที่ 3",value:b,onChange:Se=>S(Se.target.value)})]})]}),x.jsxs("div",{className:"sale-container",children:[x.jsx("h3",{className:"section-title",children:"รายการจำหน่าย (ไม่บังคับ)"}),x.jsx("p",{className:"sale-description",children:"เพิ่มรายการที่ต้องการจำหน่าย เช่น อุปกรณ์การเรียน เครื่องแบบ หรืออื่นๆ"}),z.map((Se,Ae)=>x.jsxs("div",{className:"sale-input-row",children:[x.jsx("input",{placeholder:"ชื่อรายการ",value:Se.key,onChange:Ge=>He(Ae,"key",Ge.target.value),style:{flex:2,minWidth:0}}),x.jsx("button",{type:"button",onClick:()=>fe(Ae),style:{padding:"0 10px",height:36,background:"#e57373",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"-"})]},Ae)),x.jsx("button",{type:"button",onClick:Bt,style:{width:"100%",marginTop:4,background:"#1976d2",color:"#fff",border:"none",borderRadius:6,padding:"10px 0",fontSize:"1rem",fontWeight:500,cursor:"pointer"},children:"+ เพิ่มรายการจำหน่าย"})]}),x.jsx("button",{type:"submit",className:"save-button",children:"บันทึกข้อมูล"})]}),$&&x.jsx("div",{className:"success-popup-backdrop",children:x.jsxs("div",{className:"success-popup",children:[x.jsx("div",{className:"success-icon",children:ue==="success"?"✅":"❌"}),x.jsx("h3",{className:"success-title",children:ue==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),x.jsx("p",{className:"success-message",children:J}),x.jsx("button",{onClick:nt,className:"success-close-btn",children:"ตกลง"})]})})]})}var Js={},jT=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Dy={},Un={};let l0;const FT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Un.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Un.getSymbolTotalCodewords=function(t){return FT[t]};Un.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Un.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');l0=t};Un.isKanjiModeEnabled=function(){return typeof l0<"u"};Un.toSJIS=function(t){return l0(t)};var zc={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},e.from=function(i,a){if(e.isValid(i))return i;try{return t(i)}catch{return a}}})(zc);function _y(){this.buffer=[],this.length=0}_y.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var UT=_y;function Fa(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Fa.prototype.set=function(e,t,n,i){const a=e*this.size+t;this.data[a]=n,i&&(this.reservedBit[a]=!0)};Fa.prototype.get=function(e,t){return this.data[e*this.size+t]};Fa.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Fa.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var VT=Fa,Oy={};(function(e){const t=Un.getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,l=t(i),f=l===145?26:Math.ceil((l-13)/(2*a-2))*2,g=[l-7];for(let p=1;p<a-1;p++)g[p]=g[p-1]-f;return g.push(6),g.reverse()},e.getPositions=function(i){const a=[],l=e.getRowColCoords(i),f=l.length;for(let g=0;g<f;g++)for(let p=0;p<f;p++)g===0&&p===0||g===0&&p===f-1||g===f-1&&p===0||a.push([l[g],l[p]]);return a}})(Oy);var Py={};const zT=Un.getSymbolSize,sp=7;Py.getPositions=function(t){const n=zT(t);return[[0,0],[n-sp,0],[0,n-sp]]};var ky={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const l=a.size;let f=0,g=0,p=0,m=null,C=null;for(let E=0;E<l;E++){g=p=0,m=C=null;for(let A=0;A<l;A++){let R=a.get(E,A);R===m?g++:(g>=5&&(f+=t.N1+(g-5)),m=R,g=1),R=a.get(A,E),R===C?p++:(p>=5&&(f+=t.N1+(p-5)),C=R,p=1)}g>=5&&(f+=t.N1+(g-5)),p>=5&&(f+=t.N1+(p-5))}return f},e.getPenaltyN2=function(a){const l=a.size;let f=0;for(let g=0;g<l-1;g++)for(let p=0;p<l-1;p++){const m=a.get(g,p)+a.get(g,p+1)+a.get(g+1,p)+a.get(g+1,p+1);(m===4||m===0)&&f++}return f*t.N2},e.getPenaltyN3=function(a){const l=a.size;let f=0,g=0,p=0;for(let m=0;m<l;m++){g=p=0;for(let C=0;C<l;C++)g=g<<1&2047|a.get(m,C),C>=10&&(g===1488||g===93)&&f++,p=p<<1&2047|a.get(C,m),C>=10&&(p===1488||p===93)&&f++}return f*t.N3},e.getPenaltyN4=function(a){let l=0;const f=a.data.length;for(let p=0;p<f;p++)l+=a.data[p];return Math.abs(Math.ceil(l*100/f/5)-10)*t.N4};function n(i,a,l){switch(i){case e.Patterns.PATTERN000:return(a+l)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return l%3===0;case e.Patterns.PATTERN011:return(a+l)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2===0;case e.Patterns.PATTERN101:return a*l%2+a*l%3===0;case e.Patterns.PATTERN110:return(a*l%2+a*l%3)%2===0;case e.Patterns.PATTERN111:return(a*l%3+(a+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(a,l){const f=l.size;for(let g=0;g<f;g++)for(let p=0;p<f;p++)l.isReserved(p,g)||l.xor(p,g,n(a,p,g))},e.getBestMask=function(a,l){const f=Object.keys(e.Patterns).length;let g=0,p=1/0;for(let m=0;m<f;m++){l(m),e.applyMask(m,a);const C=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(m,a),C<p&&(p=C,g=m)}return g}})(ky);var Wc={};const mi=zc,xl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],yl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Wc.getBlocksCount=function(t,n){switch(n){case mi.L:return xl[(t-1)*4+0];case mi.M:return xl[(t-1)*4+1];case mi.Q:return xl[(t-1)*4+2];case mi.H:return xl[(t-1)*4+3];default:return}};Wc.getTotalCodewordsCount=function(t,n){switch(n){case mi.L:return yl[(t-1)*4+0];case mi.M:return yl[(t-1)*4+1];case mi.Q:return yl[(t-1)*4+2];case mi.H:return yl[(t-1)*4+3];default:return}};var Ly={},Hc={};const ea=new Uint8Array(512),gc=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)ea[n]=t,gc[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)ea[n]=ea[n-255]})();Hc.log=function(t){if(t<1)throw new Error("log("+t+")");return gc[t]};Hc.exp=function(t){return ea[t]};Hc.mul=function(t,n){return t===0||n===0?0:ea[gc[t]+gc[n]]};(function(e){const t=Hc;e.mul=function(i,a){const l=new Uint8Array(i.length+a.length-1);for(let f=0;f<i.length;f++)for(let g=0;g<a.length;g++)l[f+g]^=t.mul(i[f],a[g]);return l},e.mod=function(i,a){let l=new Uint8Array(i);for(;l.length-a.length>=0;){const f=l[0];for(let p=0;p<a.length;p++)l[p]^=t.mul(a[p],f);let g=0;for(;g<l.length&&l[g]===0;)g++;l=l.slice(g)}return l},e.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let l=0;l<i;l++)a=e.mul(a,new Uint8Array([1,t.exp(l)]));return a}})(Ly);const By=Ly;function c0(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}c0.prototype.initialize=function(t){this.degree=t,this.genPoly=By.generateECPolynomial(this.degree)};c0.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const i=By.mod(n,this.genPoly),a=this.degree-i.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(i,a),l}return i};var WT=c0,jy={},Pi={},u0={};u0.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Or={};const Fy="[0-9]+",HT="[A-Z $%*+\\-./:]+";let Ia="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ia=Ia.replace(/u/g,"\\u");const GT="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ia+`)(?:.|[\r
]))+`;Or.KANJI=new RegExp(Ia,"g");Or.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Or.BYTE=new RegExp(GT,"g");Or.NUMERIC=new RegExp(Fy,"g");Or.ALPHANUMERIC=new RegExp(HT,"g");const YT=new RegExp("^"+Ia+"$"),XT=new RegExp("^"+Fy+"$"),QT=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Or.testKanji=function(t){return YT.test(t)};Or.testNumeric=function(t){return XT.test(t)};Or.testAlphanumeric=function(t){return QT.test(t)};(function(e){const t=u0,n=Or;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},e.getBestModeForData=function(l){return n.testNumeric(l)?e.NUMERIC:n.testAlphanumeric(l)?e.ALPHANUMERIC:n.testKanji(l)?e.KANJI:e.BYTE},e.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},e.isValid=function(l){return l&&l.bit&&l.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(l,f){if(e.isValid(l))return l;try{return i(l)}catch{return f}}})(Pi);(function(e){const t=Un,n=Wc,i=zc,a=Pi,l=u0,f=7973,g=t.getBCHDigit(f);function p(A,R,_){for(let P=1;P<=40;P++)if(R<=e.getCapacity(P,_,A))return P}function m(A,R){return a.getCharCountIndicator(A,R)+4}function C(A,R){let _=0;return A.forEach(function(P){const U=m(P.mode,R);_+=U+P.getBitsLength()}),_}function E(A,R){for(let _=1;_<=40;_++)if(C(A,_)<=e.getCapacity(_,R,a.MIXED))return _}e.from=function(R,_){return l.isValid(R)?parseInt(R,10):_},e.getCapacity=function(R,_,P){if(!l.isValid(R))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=a.BYTE);const U=t.getSymbolTotalCodewords(R),N=n.getTotalCodewordsCount(R,_),b=(U-N)*8;if(P===a.MIXED)return b;const S=b-m(P,R);switch(P){case a.NUMERIC:return Math.floor(S/10*3);case a.ALPHANUMERIC:return Math.floor(S/11*2);case a.KANJI:return Math.floor(S/13);case a.BYTE:default:return Math.floor(S/8)}},e.getBestVersionForData=function(R,_){let P;const U=i.from(_,i.M);if(Array.isArray(R)){if(R.length>1)return E(R,U);if(R.length===0)return 1;P=R[0]}else P=R;return p(P.mode,P.getLength(),U)},e.getEncodedBits=function(R){if(!l.isValid(R)||R<7)throw new Error("Invalid QR Code version");let _=R<<12;for(;t.getBCHDigit(_)-g>=0;)_^=f<<t.getBCHDigit(_)-g;return R<<12|_}})(jy);var Uy={};const yf=Un,Vy=1335,KT=21522,op=yf.getBCHDigit(Vy);Uy.getEncodedBits=function(t,n){const i=t.bit<<3|n;let a=i<<10;for(;yf.getBCHDigit(a)-op>=0;)a^=Vy<<yf.getBCHDigit(a)-op;return(i<<10|a)^KT};var zy={};const ZT=Pi;function eo(e){this.mode=ZT.NUMERIC,this.data=e.toString()}eo.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};eo.prototype.getLength=function(){return this.data.length};eo.prototype.getBitsLength=function(){return eo.getBitsLength(this.data.length)};eo.prototype.write=function(t){let n,i,a;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),a=parseInt(i,10),t.put(a,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),a=parseInt(i,10),t.put(a,l*3+1))};var $T=eo;const qT=Pi,qu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function to(e){this.mode=qT.ALPHANUMERIC,this.data=e}to.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};to.prototype.getLength=function(){return this.data.length};to.prototype.getBitsLength=function(){return to.getBitsLength(this.data.length)};to.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let i=qu.indexOf(this.data[n])*45;i+=qu.indexOf(this.data[n+1]),t.put(i,11)}this.data.length%2&&t.put(qu.indexOf(this.data[n]),6)};var JT=to;const eI=Pi;function no(e){this.mode=eI.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}no.getBitsLength=function(t){return t*8};no.prototype.getLength=function(){return this.data.length};no.prototype.getBitsLength=function(){return no.getBitsLength(this.data.length)};no.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var tI=no;const nI=Pi,rI=Un;function ro(e){this.mode=nI.KANJI,this.data=e}ro.getBitsLength=function(t){return t*13};ro.prototype.getLength=function(){return this.data.length};ro.prototype.getBitsLength=function(){return ro.getBitsLength(this.data.length)};ro.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=rI.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var iI=ro,Wy={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,i,a){var l={},f={};f[i]=0;var g=t.PriorityQueue.make();g.push(i,0);for(var p,m,C,E,A,R,_,P,U;!g.empty();){p=g.pop(),m=p.value,E=p.cost,A=n[m]||{};for(C in A)A.hasOwnProperty(C)&&(R=A[C],_=E+R,P=f[C],U=typeof f[C]>"u",(U||P>_)&&(f[C]=_,g.push(C,_),l[C]=m))}if(typeof a<"u"&&typeof f[a]>"u"){var N=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(N)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var a=[],l=i;l;)a.push(l),n[l],l=n[l];return a.reverse(),a},find_path:function(n,i,a){var l=t.single_source_shortest_paths(n,i,a);return t.extract_shortest_path_from_predecessor_list(l,a)},PriorityQueue:{make:function(n){var i=t.PriorityQueue,a={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);return a.queue=[],a.sorter=n.sorter||i.default_sorter,a},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var a={value:n,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Wy);var sI=Wy.exports;(function(e){const t=Pi,n=$T,i=JT,a=tI,l=iI,f=Or,g=Un,p=sI;function m(N){return unescape(encodeURIComponent(N)).length}function C(N,b,S){const O=[];let V;for(;(V=N.exec(S))!==null;)O.push({data:V[0],index:V.index,mode:b,length:V[0].length});return O}function E(N){const b=C(f.NUMERIC,t.NUMERIC,N),S=C(f.ALPHANUMERIC,t.ALPHANUMERIC,N);let O,V;return g.isKanjiModeEnabled()?(O=C(f.BYTE,t.BYTE,N),V=C(f.KANJI,t.KANJI,N)):(O=C(f.BYTE_KANJI,t.BYTE,N),V=[]),b.concat(S,O,V).sort(function(F,B){return F.index-B.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function A(N,b){switch(b){case t.NUMERIC:return n.getBitsLength(N);case t.ALPHANUMERIC:return i.getBitsLength(N);case t.KANJI:return l.getBitsLength(N);case t.BYTE:return a.getBitsLength(N)}}function R(N){return N.reduce(function(b,S){const O=b.length-1>=0?b[b.length-1]:null;return O&&O.mode===S.mode?(b[b.length-1].data+=S.data,b):(b.push(S),b)},[])}function _(N){const b=[];for(let S=0;S<N.length;S++){const O=N[S];switch(O.mode){case t.NUMERIC:b.push([O,{data:O.data,mode:t.ALPHANUMERIC,length:O.length},{data:O.data,mode:t.BYTE,length:O.length}]);break;case t.ALPHANUMERIC:b.push([O,{data:O.data,mode:t.BYTE,length:O.length}]);break;case t.KANJI:b.push([O,{data:O.data,mode:t.BYTE,length:m(O.data)}]);break;case t.BYTE:b.push([{data:O.data,mode:t.BYTE,length:m(O.data)}])}}return b}function P(N,b){const S={},O={start:{}};let V=["start"];for(let z=0;z<N.length;z++){const F=N[z],B=[];for(let G=0;G<F.length;G++){const te=F[G],we=""+z+G;B.push(we),S[we]={node:te,lastCount:0},O[we]={};for(let de=0;de<V.length;de++){const Ee=V[de];S[Ee]&&S[Ee].node.mode===te.mode?(O[Ee][we]=A(S[Ee].lastCount+te.length,te.mode)-A(S[Ee].lastCount,te.mode),S[Ee].lastCount+=te.length):(S[Ee]&&(S[Ee].lastCount=te.length),O[Ee][we]=A(te.length,te.mode)+4+t.getCharCountIndicator(te.mode,b))}}V=B}for(let z=0;z<V.length;z++)O[V[z]].end=0;return{map:O,table:S}}function U(N,b){let S;const O=t.getBestModeForData(N);if(S=t.from(b,O),S!==t.BYTE&&S.bit<O.bit)throw new Error('"'+N+'" cannot be encoded with mode '+t.toString(S)+`.
 Suggested mode is: `+t.toString(O));switch(S===t.KANJI&&!g.isKanjiModeEnabled()&&(S=t.BYTE),S){case t.NUMERIC:return new n(N);case t.ALPHANUMERIC:return new i(N);case t.KANJI:return new l(N);case t.BYTE:return new a(N)}}e.fromArray=function(b){return b.reduce(function(S,O){return typeof O=="string"?S.push(U(O,null)):O.data&&S.push(U(O.data,O.mode)),S},[])},e.fromString=function(b,S){const O=E(b,g.isKanjiModeEnabled()),V=_(O),z=P(V,S),F=p.find_path(z.map,"start","end"),B=[];for(let G=1;G<F.length-1;G++)B.push(z.table[F[G]].node);return e.fromArray(R(B))},e.rawSplit=function(b){return e.fromArray(E(b,g.isKanjiModeEnabled()))}})(zy);const Gc=Un,Ju=zc,oI=UT,aI=VT,lI=Oy,cI=Py,wf=ky,Cf=Wc,uI=WT,pc=jy,dI=Uy,fI=Pi,ed=zy;function hI(e,t){const n=e.size,i=cI.getPositions(t);for(let a=0;a<i.length;a++){const l=i[a][0],f=i[a][1];for(let g=-1;g<=7;g++)if(!(l+g<=-1||n<=l+g))for(let p=-1;p<=7;p++)f+p<=-1||n<=f+p||(g>=0&&g<=6&&(p===0||p===6)||p>=0&&p<=6&&(g===0||g===6)||g>=2&&g<=4&&p>=2&&p<=4?e.set(l+g,f+p,!0,!0):e.set(l+g,f+p,!1,!0))}}function gI(e){const t=e.size;for(let n=8;n<t-8;n++){const i=n%2===0;e.set(n,6,i,!0),e.set(6,n,i,!0)}}function pI(e,t){const n=lI.getPositions(t);for(let i=0;i<n.length;i++){const a=n[i][0],l=n[i][1];for(let f=-2;f<=2;f++)for(let g=-2;g<=2;g++)f===-2||f===2||g===-2||g===2||f===0&&g===0?e.set(a+f,l+g,!0,!0):e.set(a+f,l+g,!1,!0)}}function mI(e,t){const n=e.size,i=pc.getEncodedBits(t);let a,l,f;for(let g=0;g<18;g++)a=Math.floor(g/3),l=g%3+n-8-3,f=(i>>g&1)===1,e.set(a,l,f,!0),e.set(l,a,f,!0)}function td(e,t,n){const i=e.size,a=dI.getEncodedBits(t,n);let l,f;for(l=0;l<15;l++)f=(a>>l&1)===1,l<6?e.set(l,8,f,!0):l<8?e.set(l+1,8,f,!0):e.set(i-15+l,8,f,!0),l<8?e.set(8,i-l-1,f,!0):l<9?e.set(8,15-l-1+1,f,!0):e.set(8,15-l-1,f,!0);e.set(i-8,8,1,!0)}function xI(e,t){const n=e.size;let i=-1,a=n-1,l=7,f=0;for(let g=n-1;g>0;g-=2)for(g===6&&g--;;){for(let p=0;p<2;p++)if(!e.isReserved(a,g-p)){let m=!1;f<t.length&&(m=(t[f]>>>l&1)===1),e.set(a,g-p,m),l--,l===-1&&(f++,l=7)}if(a+=i,a<0||n<=a){a-=i,i=-i;break}}}function yI(e,t,n){const i=new oI;n.forEach(function(p){i.put(p.mode.bit,4),i.put(p.getLength(),fI.getCharCountIndicator(p.mode,e)),p.write(i)});const a=Gc.getSymbolTotalCodewords(e),l=Cf.getTotalCodewordsCount(e,t),f=(a-l)*8;for(i.getLengthInBits()+4<=f&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const g=(f-i.getLengthInBits())/8;for(let p=0;p<g;p++)i.put(p%2?17:236,8);return wI(i,e,t)}function wI(e,t,n){const i=Gc.getSymbolTotalCodewords(t),a=Cf.getTotalCodewordsCount(t,n),l=i-a,f=Cf.getBlocksCount(t,n),g=i%f,p=f-g,m=Math.floor(i/f),C=Math.floor(l/f),E=C+1,A=m-C,R=new uI(A);let _=0;const P=new Array(f),U=new Array(f);let N=0;const b=new Uint8Array(e.buffer);for(let F=0;F<f;F++){const B=F<p?C:E;P[F]=b.slice(_,_+B),U[F]=R.encode(P[F]),_+=B,N=Math.max(N,B)}const S=new Uint8Array(i);let O=0,V,z;for(V=0;V<N;V++)for(z=0;z<f;z++)V<P[z].length&&(S[O++]=P[z][V]);for(V=0;V<A;V++)for(z=0;z<f;z++)S[O++]=U[z][V];return S}function CI(e,t,n,i){let a;if(Array.isArray(e))a=ed.fromArray(e);else if(typeof e=="string"){let m=t;if(!m){const C=ed.rawSplit(e);m=pc.getBestVersionForData(C,n)}a=ed.fromString(e,m||40)}else throw new Error("Invalid data");const l=pc.getBestVersionForData(a,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=l;else if(t<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const f=yI(t,n,a),g=Gc.getSymbolSize(t),p=new aI(g);return hI(p,t),gI(p),pI(p,t),td(p,n,0),t>=7&&mI(p,t),xI(p,f),isNaN(i)&&(i=wf.getBestMask(p,td.bind(null,p,n))),wf.applyMask(i,p),td(p,n,i),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:i,segments:a}}Dy.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let i=Ju.M,a,l;return typeof n<"u"&&(i=Ju.from(n.errorCorrectionLevel,Ju.M),a=pc.from(n.version),l=wf.from(n.maskPattern),n.toSJISFunc&&Gc.setToSJISFunction(n.toSJISFunc)),CI(t,a,i,l)};var Hy={},d0={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:l,scale:l?4:f,margin:a,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},e.getImageWidth=function(i,a){const l=e.getScale(i,a);return Math.floor((i+a.margin*2)*l)},e.qrToImageData=function(i,a,l){const f=a.modules.size,g=a.modules.data,p=e.getScale(f,l),m=Math.floor((f+l.margin*2)*p),C=l.margin*p,E=[l.color.light,l.color.dark];for(let A=0;A<m;A++)for(let R=0;R<m;R++){let _=(A*m+R)*4,P=l.color.light;if(A>=C&&R>=C&&A<m-C&&R<m-C){const U=Math.floor((A-C)/p),N=Math.floor((R-C)/p);P=E[g[U*f+N]?1:0]}i[_++]=P.r,i[_++]=P.g,i[_++]=P.b,i[_]=P.a}}})(d0);(function(e){const t=d0;function n(a,l,f){a.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(l,f,g){let p=g,m=f;typeof p>"u"&&(!f||!f.getContext)&&(p=f,f=void 0),f||(m=i()),p=t.getOptions(p);const C=t.getImageWidth(l.modules.size,p),E=m.getContext("2d"),A=E.createImageData(C,C);return t.qrToImageData(A.data,l,p),n(E,m,C),E.putImageData(A,0,0),m},e.renderToDataURL=function(l,f,g){let p=g;typeof p>"u"&&(!f||!f.getContext)&&(p=f,f=void 0),p||(p={});const m=e.render(l,f,p),C=p.type||"image/png",E=p.rendererOpts||{};return m.toDataURL(C,E.quality)}})(Hy);var Gy={};const EI=d0;function ap(e,t){const n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function nd(e,t,n){let i=e+t;return typeof n<"u"&&(i+=" "+n),i}function vI(e,t,n){let i="",a=0,l=!1,f=0;for(let g=0;g<e.length;g++){const p=Math.floor(g%t),m=Math.floor(g/t);!p&&!l&&(l=!0),e[g]?(f++,g>0&&p>0&&e[g-1]||(i+=l?nd("M",p+n,.5+m+n):nd("m",a,0),a=0,l=!1),p+1<t&&e[g+1]||(i+=nd("h",f),f=0)):a++}return i}Gy.render=function(t,n,i){const a=EI.getOptions(n),l=t.modules.size,f=t.modules.data,g=l+a.margin*2,p=a.color.light.a?"<path "+ap(a.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",m="<path "+ap(a.color.dark,"stroke")+' d="'+vI(f,l,a.margin)+'"/>',C='viewBox="0 0 '+g+" "+g+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+C+' shape-rendering="crispEdges">'+p+m+`</svg>
`;return typeof i=="function"&&i(null,A),A};const SI=jT,Ef=Dy,Yy=Hy,AI=Gy;function f0(e,t,n,i,a){const l=[].slice.call(arguments,1),f=l.length,g=typeof l[f-1]=="function";if(!g&&!SI())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(a=n,n=t,t=i=void 0):f===3&&(t.getContext&&typeof a>"u"?(a=i,i=void 0):(a=i,i=n,n=t,t=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(n=t,t=i=void 0):f===2&&!t.getContext&&(i=n,n=t,t=void 0),new Promise(function(p,m){try{const C=Ef.create(n,i);p(e(C,t,i))}catch(C){m(C)}})}try{const p=Ef.create(n,i);a(null,e(p,t,i))}catch(p){a(p)}}Js.create=Ef.create;Js.toCanvas=f0.bind(null,Yy.render);Js.toDataURL=f0.bind(null,Yy.renderToDataURL);Js.toString=f0.bind(null,function(e,t,n){return AI.render(e,n)});function TI(){const[e,t]=M.useState(""),[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),[C,E]=M.useState(""),[A,R]=M.useState(!1),[_,P]=M.useState(""),[U,N]=M.useState(""),[b,S]=M.useState(""),[O,V]=M.useState([]),[z,F]=M.useState(""),[B,G]=M.useState(""),[te,we]=M.useState(""),[de,Ee]=M.useState(""),[Oe,j]=M.useState(""),[$,oe]=M.useState(""),[J,he]=M.useState(""),ue="",Le=Zr(),ve=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];M.useEffect(()=>{const fe=localStorage.getItem("token");fe?(console.log("API URL:",ue),fetch("/api/user/me",{headers:{Authorization:`Bearer ${fe}`}}).then(Ie=>Ie.json()).then(Ie=>{t(Ie.data.realname),i(Ie.data.userid),l(Ie.data.blood),g(Ie.data.gunNumber||"N/A"),m(Ie.data.major||"-"),E(Ie.data.point??"-"),R(Ie.data.admin??!1),V(Ie.data.adjustments||[]),F(Ie.data.club1||""),G(Ie.data.club2||""),we(Ie.data.club3||""),Ee(Ie.data.battalion||""),j(Ie.data.company||""),oe(Ie.data.platoon||""),he(Ie.data.squad||""),Ie.data.profileImage&&P(`data:image/jpeg;base64,${Ie.data.profileImage}`),ct(Ie.data.userid),Ie.data.gunNumber&&He(Ie.data.gunNumber)})):Le("/login")},[Le]);const ct=async fe=>{try{const Ie=await Js.toDataURL(fe,{width:60});N(Ie)}catch(Ie){console.error("Error generating QR Code:",Ie)}},He=async fe=>{try{const Ie=`GUN-${fe}`,nt=await Js.toDataURL(Ie,{width:60});S(nt)}catch(Ie){console.error("Error generating Gun QR Code:",Ie)}},Bt=()=>{Le("/edit-profile")};return x.jsx("div",{className:"view-profile-bg",children:x.jsxs("div",{className:"view-profile-container",children:[x.jsxs("div",{className:"view-profile-header",children:[x.jsx("div",{className:"view-profile-avatar",children:_?x.jsx("img",{src:_,alt:"Profile",className:"view-profile-avatar-img"}):e?e[0]:""}),x.jsxs("div",{children:[x.jsx("div",{className:"view-profile-name",children:e}),x.jsx("div",{className:"view-profile-major",children:p}),x.jsx("button",{onClick:Bt,className:"btn",type:"button",children:"Edit profile"})]})]}),x.jsxs("div",{className:"view-profile-main-row",children:[x.jsxs("div",{className:"view-profile-card",children:[x.jsx("div",{className:"view-profile-card-title",children:"User details"}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"รหัสประจำตัว: "}),n]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"หมู่โลหิต: "}),a]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"หมายเลขปืน: "}),f]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"สาขา: "}),(()=>{const fe=ve.find(Ie=>Ie.value===p||Ie.label===p);return fe?fe.label:p&&!p.startsWith("สาขาวิชา")?`สาขาวิชา${p}`:p})()]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"คะแนนพฤติกรรม: "}),C]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"สิทธิ์ผู้ดูแล: "}),A?"ผู้ดูแลระบบ":"ทั่วไป"]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"ชมรม: "}),x.jsxs("ul",{className:"view-profile-clubs-list",children:[z&&x.jsx("li",{children:z}),B&&x.jsx("li",{children:B}),te&&x.jsx("li",{children:te}),!z&&!B&&!te&&x.jsx("li",{className:"view-profile-no-club",children:"-"})]})]}),x.jsxs("div",{className:"view-profile-row",children:[x.jsx("span",{children:"สังกัด: "}),de||Oe||J||$?x.jsxs("span",{children:[de&&`กองพัน ${de}`,de&&Oe&&" ",Oe&&`กองร้อย ${Oe}`,(de||Oe)&&J&&" ",J&&`หมวด ${J}`,(de||Oe||J)&&$&&" ",$&&`หมู่ ${$}`]}):x.jsx("span",{children:"-"})]}),x.jsx("div",{className:"view-profile-card-subtitle",children:"ประวัติการปรับคะแนน"}),x.jsxs("div",{className:"view-profile-history",children:[O.length===0&&x.jsx("div",{className:"view-profile-no-data",children:"ไม่มีข้อมูล"}),O.map(fe=>x.jsxs("div",{className:"view-profile-history-item",children:[x.jsxs("div",{children:["วันที่: ",new Date(fe.date).toLocaleDateString()]}),x.jsxs("div",{children:["เปลี่ยนแปลง: ",x.jsxs("b",{children:[fe.change>0?"+":"",fe.change]})," (",fe.reason,")"]}),x.jsxs("div",{children:["โดย: ",fe.operator]})]},fe.id))]})]}),x.jsxs("div",{className:"view-profile-card view-profile-qr-only",children:[x.jsx("div",{className:"view-profile-card-title",children:"QR Code"}),U&&x.jsx("img",{src:U,alt:"QR Code",className:"view-profile-qr-img"}),x.jsx("div",{className:"view-profile-card-title view-profile-qr-title",children:"Gun QR Code"}),b&&x.jsx("img",{src:b,alt:"Gun QR Code",className:"view-profile-qr-img"})]})]})]})})}var ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var lp=new Map([[ye.QR_CODE,"QR_CODE"],[ye.AZTEC,"AZTEC"],[ye.CODABAR,"CODABAR"],[ye.CODE_39,"CODE_39"],[ye.CODE_93,"CODE_93"],[ye.CODE_128,"CODE_128"],[ye.DATA_MATRIX,"DATA_MATRIX"],[ye.MAXICODE,"MAXICODE"],[ye.ITF,"ITF"],[ye.EAN_13,"EAN_13"],[ye.EAN_8,"EAN_8"],[ye.PDF_417,"PDF_417"],[ye.RSS_14,"RSS_14"],[ye.RSS_EXPANDED,"RSS_EXPANDED"],[ye.UPC_A,"UPC_A"],[ye.UPC_E,"UPC_E"],[ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),cp;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(cp||(cp={}));function II(e){return Object.values(ye).includes(e)}var Qr;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Qr||(Qr={}));var lr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Qr.SCAN_TYPE_CAMERA,Qr.SCAN_TYPE_FILE],e}(),Xy=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!lp.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,lp.get(t))},e}(),up=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),vf;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(vf||(vf={}));var Qy=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:vf.UNKWOWN_ERROR}},e}(),Ky=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ar(e){return typeof e>"u"||e===null}function bI(e,t,n){return e>n?n:e<t?t:e}var Ls=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),it=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),dp=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Zy=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),f=Object.keys(t),g=0,p=f;g<p.length;g++){var m=p[g];if(l.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}(),Sf={exports:{}};(function(e,t){(function(n,i){i(t)})(So,function(n){function i(T){return T==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,r){T.__proto__=r}||function(T,r){for(var s in r)r.hasOwnProperty(s)&&(T[s]=r[s])};function l(T,r){a(T,r);function s(){this.constructor=T}T.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(T,r){var s=Object.setPrototypeOf;s?s(T,r):T.__proto__=r}function g(T,r){r===void 0&&(r=T.constructor);var s=Error.captureStackTrace;s&&s(T,r)}var p=function(T){l(r,T);function r(s){var o=this.constructor,c=T.call(this,s)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),f(c,o.prototype),g(c),c}return r}(Error);class m extends p{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class C extends m{}C.kind="ArgumentException";class E extends m{}E.kind="IllegalArgumentException";class A{constructor(r){if(this.binarizer=r,r===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,c){const u=this.binarizer.getLuminanceSource().crop(r,s,o,c);return new A(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends m{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class _{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(r,s,o,c,u){for(;u--;)o[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class U extends m{}U.kind="IndexOutOfBoundsException";class N extends U{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}N.kind="ArrayIndexOutOfBoundsException";class b{static fill(r,s){for(let o=0,c=r.length;o<c;o++)r[o]=s}static fillWithin(r,s,o,c){b.rangeCheck(r.length,s,o);for(let u=s;u<o;u++)r[u]=c}static rangeCheck(r,s,o){if(s>o)throw new E("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new N(s);if(o>r)throw new N(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,c=r.length;o<c;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const c=o-s,u=new Int32Array(c);return P.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,o){o===void 0&&(o=b.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=o(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class S{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class O{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=O.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=O.makeArray(r);P.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return s;u=o[c]}const h=c*32+S.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=~o[c];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++c===d)return s;u=~o[c]}const h=c*32+S.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new E;if(s===r)return;s--;const o=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=o;d<=c;d++){const h=d>o?0:r&31,w=(2<<(d<c?31:s&31))-(1<<h);u[d]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new E;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const y=h>c?0:r&31,v=(2<<(h<u?31:s&31))-(1<<y)&4294967295;if((d[h]&v)!==(o?v:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new E("Sizes don't match");const s=this.bits;for(let o=0,c=s.length;o<c;o++)s[o]^=r.bits[o]}toBytes(r,s,o,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[o+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,c=this.bits;for(let u=0;u<o;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==o*32){const u=o*32-this.size;let d=r[0]>>>u;for(let h=1;h<o;h++){const y=r[h];d|=y<<32-u,r[h-1]=d,d=y>>>u}r[o-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof O))return!1;const s=r;return this.size===s.size&&b.equals(this.bits,s.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new O(this.size,this.bits.slice())}}var V;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(V||(V={}));var z=V;class F extends m{static getFormatInstance(){return new F}}F.kind="FormatException";var B;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(B||(B={}));class G{constructor(r,s,o,...c){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,G.VALUE_IDENTIFIER_TO_ECI.set(r,this),G.NAME_TO_ECI.set(o,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const y=u[d];G.VALUES_TO_ECI.set(y,this)}for(const d of c)G.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const s=G.VALUES_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(r){const s=G.NAME_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}equals(r){if(!(r instanceof G))return!1;const s=r;return this.getName()===s.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(B.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(B.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(B.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(B.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(B.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(B.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(B.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(B.Big5,28,"Big5"),G.GB18030=new G(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(B.EUC_KR,30,"EUC_KR","EUC-KR");class te extends m{}te.kind="UnsupportedOperationException";class we{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!we.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof G?r:G.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(we.isDecodeFallbackSupported(o)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(o.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new te(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(G.UTF8)||r.equals(G.ISO8859_1)||r.equals(G.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<o.length;u++)c.push(o[u].charCodeAt(0));return new Uint8Array(c)}}class de{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return we.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(z.CHARACTER_SET)!==void 0)return s.get(z.CHARACTER_SET).toString();const o=r.length;let c=!0,u=!0,d=!0,h=0,y=0,w=0,v=0,I=0,D=0,L=0,W=0,H=0,Y=0,K=0;const le=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ce=0;ce<o&&(c||u||d);ce++){const ie=r[ce]&255;d&&(h>0?ie&128?h--:d=!1:ie&128&&(ie&64?(h++,ie&32?(h++,ie&16?(h++,ie&8?d=!1:v++):w++):y++):d=!1)),c&&(ie>127&&ie<160?c=!1:ie>159&&(ie<192||ie===215||ie===247)&&K++),u&&(I>0?ie<64||ie===127||ie>252?u=!1:I--:ie===128||ie===160||ie>239?u=!1:ie>160&&ie<224?(D++,W=0,L++,L>H&&(H=L)):ie>127?(I++,L=0,W++,W>Y&&(Y=W)):(L=0,W=0))}return d&&h>0&&(d=!1),u&&I>0&&(u=!1),d&&(le||y+w+v>0)?de.UTF8:u&&(de.ASSUME_SHIFT_JIS||H>=3||Y>=3)?de.SHIFT_JIS:c&&u?H===2&&D===2||K*10>=o?de.SHIFT_JIS:de.ISO88591:c?de.ISO88591:u?de.SHIFT_JIS:d?de.UTF8:de.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function c(d,h,y,w,v,I){if(d==="%%")return"%";if(s[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let D=v?parseInt(v.substr(1)):void 0,L;switch(I){case"s":L=s[o];break;case"c":L=s[o][0];break;case"f":L=parseFloat(s[o]).toFixed(d);break;case"p":L=parseFloat(s[o]).toPrecision(d);break;case"e":L=parseFloat(s[o]).toExponential(d);break;case"x":L=parseInt(s[o]).toString(D||16);break;case"d":L=parseFloat(parseInt(s[o],D||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(D);let W=parseInt(y),H=y&&y[0]+""=="0"?"0":" ";for(;L.length<W;)L=h!==void 0?L+H:H+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return we.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}de.SHIFT_JIS=G.SJIS.getName(),de.GB2312="GB2312",de.ISO88591=G.ISO8859_1.getName(),de.EUC_JP="EUC_JP",de.UTF8=G.UTF8.getName(),de.PLATFORM_DEFAULT_ENCODING=de.UTF8,de.ASSUME_SHIFT_JIS=!1;class Ee{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=de.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let c=s;s<s+o;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Oe{constructor(r,s,o,c){if(this.width=r,this.height=s,this.rowSize=o,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new E("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,c=new Oe(o,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<o;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,o){if(r===null)throw new E("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,y=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new E("row lengths do not match");d=u,y++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+o.length)===o)w+=o.length,c[u]=!1,u++;else throw new E("illegal character encountered: "+r.substring(w));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new E("row lengths do not match");y++}const v=new Oe(h,y);for(let I=0;I<u;I++)c[I]&&v.set(Math.floor(I%h),Math.floor(I/h));return v}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new E("input matrix dimensions do not match");const s=new O(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*o,y=r.getRow(u,s).getBitArray();for(let w=0;w<o;w++)c[h+w]^=y[w]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,c){if(s<0||r<0)throw new E("Left and top must be nonnegative");if(c<1||o<1)throw new E("Height and width must be at least 1");const u=r+o,d=s+c;if(d>this.height||u>this.width)throw new E("The region must fit inside the matrix");const h=this.rowSize,y=this.bits;for(let w=s;w<d;w++){const v=w*h;for(let I=r;I<u;I++)y[v+Math.floor(I/32)]|=1<<(I&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new O(this.width):s.clear();const o=this.rowSize,c=this.bits,u=r*o;for(let d=0;d<o;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){P.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new O(r),c=new O(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)o=this.getRow(u,o),c=this.getRow(s-1-u,c),o.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,c=this.bits;let u=r,d=s,h=-1,y=-1;for(let w=0;w<s;w++)for(let v=0;v<o;v++){const I=c[w*o+v];if(I!==0){if(w<d&&(d=w),w>y&&(y=w),v*32<u){let D=0;for(;!(I<<31-D&4294967295);)D++;v*32+D<u&&(u=v*32+D)}if(v*32+31>h){let D=31;for(;!(I>>>D);)D--;v*32+D>h&&(h=v*32+D)}}}return h<u||y<d?null:Int32Array.from([u,d,h-u+1,y-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const c=o/r;let u=o%r*32;const d=s[o];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/r);let u=Math.floor(o%r)*32;const d=s[o];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Oe))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&b.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+b.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let c=new Ee;for(let u=0,d=this.height;u<d;u++){for(let h=0,y=this.width;h<y;h++)c.append(this.get(h,u)?r:s);c.append(o)}return c.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class j extends m{static getNotFoundInstance(){return new j}}j.kind="NotFoundException";class $ extends _{constructor(r){super(r),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),c=o.getWidth();s==null||s.getSize()<c?s=new O(c):s.clear(),this.initArrays(c);const u=o.getRow(r,this.luminances),d=this.buckets;for(let y=0;y<c;y++)d[(u[y]&255)>>$.LUMINANCE_SHIFT]++;const h=$.estimateBlackPoint(d);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<h&&s.set(y);else{let y=u[0]&255,w=u[1]&255;for(let v=1;v<c-1;v++){const I=u[v+1]&255;(w*4-y-I)/2<h&&s.set(v),y=w,w=I}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),c=new Oe(s,o);this.initArrays(s);const u=this.buckets;for(let y=1;y<5;y++){const w=Math.floor(o*y/5),v=r.getRow(w,this.luminances),I=Math.floor(s*4/5);for(let D=Math.floor(s/5);D<I;D++){const L=v[D]&255;u[L>>$.LUMINANCE_SHIFT]++}}const d=$.estimateBlackPoint(u),h=r.getMatrix();for(let y=0;y<o;y++){const w=y*s;for(let v=0;v<s;v++)(h[w+v]&255)<d&&c.set(v,y)}return c}createBinarizer(r){return new $(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<$.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,c=0,u=0;for(let v=0;v<s;v++)r[v]>u&&(c=v,u=r[v]),r[v]>o&&(o=r[v]);let d=0,h=0;for(let v=0;v<s;v++){const I=v-c,D=r[v]*I*I;D>h&&(d=v,h=D)}if(c>d){const v=c;c=d,d=v}if(d-c<=s/16)throw new j;let y=d-1,w=-1;for(let v=d-1;v>c;v--){const I=v-c,D=I*I*(d-v)*(o-r[v]);D>w&&(y=v,w=D)}return y<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class oe extends ${constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=oe.MINIMUM_DIMENSION&&o>=oe.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>oe.BLOCK_SIZE_POWER;s&oe.BLOCK_SIZE_MASK&&u++;let d=o>>oe.BLOCK_SIZE_POWER;o&oe.BLOCK_SIZE_MASK&&d++;const h=oe.calculateBlackPoints(c,u,d,s,o),y=new Oe(s,o);oe.calculateThresholdForBlock(c,u,d,s,o,h,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new oe(r)}static calculateThresholdForBlock(r,s,o,c,u,d,h){const y=u-oe.BLOCK_SIZE,w=c-oe.BLOCK_SIZE;for(let v=0;v<o;v++){let I=v<<oe.BLOCK_SIZE_POWER;I>y&&(I=y);const D=oe.cap(v,2,o-3);for(let L=0;L<s;L++){let W=L<<oe.BLOCK_SIZE_POWER;W>w&&(W=w);const H=oe.cap(L,2,s-3);let Y=0;for(let le=-2;le<=2;le++){const ce=d[D+le];Y+=ce[H-2]+ce[H-1]+ce[H]+ce[H+1]+ce[H+2]}const K=Y/25;oe.thresholdBlock(r,W,I,K,c,h)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,c,u,d){for(let h=0,y=o*u+s;h<oe.BLOCK_SIZE;h++,y+=u)for(let w=0;w<oe.BLOCK_SIZE;w++)(r[y+w]&255)<=c&&d.set(s+w,o+h)}static calculateBlackPoints(r,s,o,c,u){const d=u-oe.BLOCK_SIZE,h=c-oe.BLOCK_SIZE,y=new Array(o);for(let w=0;w<o;w++){y[w]=new Int32Array(s);let v=w<<oe.BLOCK_SIZE_POWER;v>d&&(v=d);for(let I=0;I<s;I++){let D=I<<oe.BLOCK_SIZE_POWER;D>h&&(D=h);let L=0,W=255,H=0;for(let K=0,le=v*c+D;K<oe.BLOCK_SIZE;K++,le+=c){for(let ce=0;ce<oe.BLOCK_SIZE;ce++){const ie=r[le+ce]&255;L+=ie,ie<W&&(W=ie),ie>H&&(H=ie)}if(H-W>oe.MIN_DYNAMIC_RANGE)for(K++,le+=c;K<oe.BLOCK_SIZE;K++,le+=c)for(let ce=0;ce<oe.BLOCK_SIZE;ce++)L+=r[le+ce]&255}let Y=L>>oe.BLOCK_SIZE_POWER*2;if(H-W<=oe.MIN_DYNAMIC_RANGE&&(Y=W/2,w>0&&I>0)){const K=(y[w-1][I]+2*y[w][I-1]+y[w-1][I-1])/4;W<K&&(Y=K)}y[w][I]=Y}}return y}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class J{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,c){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new Ee;for(let o=0;o<this.height;o++){const c=this.getRow(o,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class he extends J{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let c=0;c<s;c++)o[c]=255-(r[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,c){return new he(this.delegate.crop(r,s,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new he(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new he(this.delegate.rotateCounterClockwise45())}}class ue extends J{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ue.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const c=new Uint8ClampedArray(s*o);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let y;if(r[u+3]===0)y=255;else{const v=r[u],I=r[u+1],D=r[u+2];y=306*v+601*I+117*D+512>>10}c[d]=y}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth(),c=r*o;return s===null?s=this.buffer.slice(c,c+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(c,c+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,c){return super.crop(r,s,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),c=r*ue.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=y,o.translate(h/2,y/2),o.rotate(c),o.drawImage(this.canvas,u/-2,d/-2),this.buffer=ue.makeBufferFromCanvasImageData(s),this}invert(){return new he(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class Le{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ve=(globalThis||So||self||window||void 0)&&(globalThis||So||self||window||void 0).__awaiter||function(T,r,s,o){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(v){try{w(o.next(v))}catch(I){d(I)}}function y(v){try{w(o.throw(v))}catch(I){d(I)}}function w(v){v.done?u(v.value):c(v.value).then(h,y)}w((o=o.apply(T,r||[])).next())})};class ct{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return ve(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const u=o.deviceId||o.id,d=o.label||`Video device ${s.length+1}`,h=o.groupId,y={deviceId:u,label:d,kind:c,groupId:h};s.push(y)}return s})}getVideoInputDevices(){return ve(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Le(s.deviceId,s.label))})}findDeviceById(r){return ve(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return ve(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return ve(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return ve(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return ve(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return ve(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return ve(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(r,s,o){return ve(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,o)})}decodeFromStream(r,s,o){return ve(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return ve(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return ve(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new C(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,s);return o.src=r,c}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return ve(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return ve(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new j("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const y=s&&h instanceof j,v=(h instanceof R||h instanceof F)&&o;if(y||v)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof R||c instanceof F,d=c instanceof j;(u||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new ue(s),c=new oe(o);return new A(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=c+"px",s.width=o,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class He{constructor(r,s,o=s==null?0:8*s.length,c,u,d=P.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=P.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);P.arraycopy(s,0,o,0,s.length),P.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Bt;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Bt||(Bt={}));var fe=Bt,Ie;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ie||(Ie={}));var nt=Ie;class cn{constructor(r,s,o,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Se{exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Ae{constructor(r,s){if(s.length===0)throw new E;this.field=r;const o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),P.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let d=0,h=s.length;d!==h;d++){const y=s[d];o=Se.addOrSubtract(o,y)}return o}o=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)o=Se.addOrSubtract(u.multiply(r,o),s[d]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const d=s;s=o,o=d}let c=new Int32Array(o.length);const u=o.length-s.length;P.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=Se.addOrSubtract(s[d-u],o[d]);return new Ae(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1),h=this.field;for(let y=0;y<o;y++){const w=s[y];for(let v=0;v<u;v++)d[y+v]=Se.addOrSubtract(d[y+v],h.multiply(w,c[v]))}return new Ae(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=o.multiply(u[d],r);return new Ae(o,c)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return this.field.getZero();const o=this.coefficients,c=o.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(o[h],s);return new Ae(d,u)}divide(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new E("Divide by 0");const s=this.field;let o=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),y=s.multiply(c.getCoefficient(c.getDegree()),d),w=r.multiplyByMonomial(h,y),v=s.buildMonomial(h,y);o=o.addOrSubtract(v),c=c.addOrSubtract(w)}return[o,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const c=this.field.log(o);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Ge extends m{}Ge.kind="ArithmeticException";class pe extends Se{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new Ae(this,Int32Array.from([0])),this.one=new Ae(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new Ae(this,o)}inverse(r){if(r===0)throw new Ge;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class _t extends m{}_t.kind="ReedSolomonException";class Ot extends m{}Ot.kind="IllegalStateException";class tr{constructor(r){this.field=r}decode(r,s){const o=this.field,c=new Ae(o,r),u=new Int32Array(s);let d=!0;for(let L=0;L<s;L++){const W=c.evaluateAt(o.exp(L+o.getGeneratorBase()));u[u.length-1-L]=W,W!==0&&(d=!1)}if(d)return;const h=new Ae(o,u),y=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),w=y[0],v=y[1],I=this.findErrorLocations(w),D=this.findErrorMagnitudes(v,I);for(let L=0;L<I.length;L++){const W=r.length-1-o.log(I[L]);if(W<0)throw new _t("Bad error location");r[W]=pe.addOrSubtract(r[W],D[L])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const L=r;r=s,s=L}const c=this.field;let u=r,d=s,h=c.getZero(),y=c.getOne();for(;d.getDegree()>=(o/2|0);){let L=u,W=h;if(u=d,h=y,u.isZero())throw new _t("r_{i-1} was zero");d=L;let H=c.getZero();const Y=u.getCoefficient(u.getDegree()),K=c.inverse(Y);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const le=d.getDegree()-u.getDegree(),ce=c.multiply(d.getCoefficient(d.getDegree()),K);H=H.addOrSubtract(c.buildMonomial(le,ce)),d=d.addOrSubtract(u.multiplyByMonomial(le,ce))}if(y=H.multiply(h).addOrSubtract(W),d.getDegree()>=u.getDegree())throw new Ot("Division algorithm failed to reduce polynomial?")}const w=y.getCoefficient(0);if(w===0)throw new _t("sigmaTilde(0) was zero");const v=c.inverse(w),I=y.multiplyScalar(v),D=d.multiplyScalar(v);return[I,D]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(o[c]=u.inverse(d),c++);if(c!==s)throw new _t("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,c=new Int32Array(o),u=this.field;for(let d=0;d<o;d++){const h=u.inverse(s[d]);let y=1;for(let w=0;w<o;w++)if(d!==w){const v=u.multiply(s[w],h),I=v&1?v&-2:v|1;y=u.multiply(y,I)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(y)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var se;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(se||(se={}));class Te{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),c=this.correctBits(o),u=Te.convertBoolArrayToByteArray(c),d=Te.getEncodedData(c),h=new cn(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=se.UPPER,c=se.UPPER,u="",d=0;for(;d<s;)if(c===se.BINARY){if(s-d<5)break;let h=Te.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=Te.readCode(r,d,11)+31,d+=11}for(let y=0;y<h;y++){if(s-d<8){d=s;break}const w=Te.readCode(r,d,8);u+=de.castAsNonUtf8Char(w),d+=8}c=o}else{let h=c===se.DIGIT?4:5;if(s-d<h)break;let y=Te.readCode(r,d,h);d+=h;let w=Te.getCharacter(c,y);w.startsWith("CTRL_")?(o=c,c=Te.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=c)):(u+=w,c=o)}return u}static getTable(r){switch(r){case"L":return se.LOWER;case"P":return se.PUNCT;case"M":return se.MIXED;case"D":return se.DIGIT;case"B":return se.BINARY;case"U":default:return se.UPPER}}static getCharacter(r,s){switch(r){case se.UPPER:return Te.UPPER_TABLE[s];case se.LOWER:return Te.LOWER_TABLE[s];case se.MIXED:return Te.MIXED_TABLE[s];case se.PUNCT:return Te.PUNCT_TABLE[s];case se.DIGIT:return Te.DIGIT_TABLE[s];default:throw new Ot("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=pe.AZTEC_DATA_10):(o=12,s=pe.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/o;if(u<c)throw new F;let d=r.length%o,h=new Int32Array(u);for(let D=0;D<u;D++,d+=o)h[D]=Te.readCode(r,d,o);try{new tr(s).decode(h,u-c)}catch(D){throw new F(D)}let y=(1<<o)-1,w=0;for(let D=0;D<c;D++){let L=h[D];if(L===0||L===y)throw new F;(L===1||L===y-1)&&w++}let v=new Array(c*o-w),I=0;for(let D=0;D<c;D++){let L=h[D];if(L===1||L===y-1)v.fill(L>1,I,I+o-1),I+=o-1;else for(let W=o-1;W>=0;--W)v[I++]=(L&1<<W)!==0}return v}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(s?11:14)+o*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(o,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*S.truncDivision(S.truncDivision(c,2)-1,15),y=c/2,w=S.truncDivision(h,2);for(let v=0;v<y;v++){let I=v+S.truncDivision(v,15);u[y-v-1]=w-I-1,u[y+v]=w+I+1}}for(let h=0,y=0;h<o;h++){let w=(o-h)*4+(s?9:12),v=h*2,I=c-1-v;for(let D=0;D<w;D++){let L=D*2;for(let W=0;W<2;W++)d[y+L+W]=r.get(u[v+W],u[v+D]),d[y+2*w+L+W]=r.get(u[v+D],u[I-W]),d[y+4*w+L+W]=r.get(u[I-W],u[I-D]),d[y+6*w+L+W]=r.get(u[I-D],u[v+W])}y+=w*8}return d}static readCode(r,s,o){let c=0;for(let u=s;u<s+o;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let o=r.length-s;return o>=8?Te.readCode(r,s,8):Te.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=Te.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Me{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,c){const u=r-o,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let o=0,c=r.length;o!==c;o++){const u=r[o];s+=u}return s}}class Ue{static floatToIntBits(r){return r}}Ue.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ge){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ue.floatToIntBits(this.x)+Ue.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(o>=s&&o>=c?(d=r[0],u=r[1],h=r[2]):c>=o&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const y=u;u=h,h=y}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return Me.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const c=s.x,u=s.y;return(o.x-c)*(r.y-u)-(o.y-u)*(r.x-c)}}class Vn{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ki extends Vn{constructor(r,s,o,c,u){super(r,s),this.compact=o,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(r,s,o,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=mn.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,y=!1,w=!1,v=!1,I=!1;const D=this.width,L=this.height;for(;d;){d=!1;let W=!0;for(;(W||!y)&&s<D;)W=this.containsBlackPoint(o,c,s,!1),W?(s++,d=!0,y=!0):y||s++;if(s>=D){u=!0;break}let H=!0;for(;(H||!w)&&c<L;)H=this.containsBlackPoint(r,s,c,!0),H?(c++,d=!0,w=!0):w||c++;if(c>=L){u=!0;break}let Y=!0;for(;(Y||!v)&&r>=0;)Y=this.containsBlackPoint(o,c,r,!1),Y?(r--,d=!0,v=!0):v||r--;if(r<0){u=!0;break}let K=!0;for(;(K||!I)&&o>=0;)K=this.containsBlackPoint(r,s,o,!0),K?(o--,d=!0,I=!0):I||o--;if(o<0){u=!0;break}d&&(h=!0)}if(!u&&h){const W=s-r;let H=null;for(let ce=1;H===null&&ce<W;ce++)H=this.getBlackPointOnSegment(r,c-ce,r+ce,c);if(H==null)throw new j;let Y=null;for(let ce=1;Y===null&&ce<W;ce++)Y=this.getBlackPointOnSegment(r,o+ce,r+ce,o);if(Y==null)throw new j;let K=null;for(let ce=1;K===null&&ce<W;ce++)K=this.getBlackPointOnSegment(s,o+ce,s-ce,o);if(K==null)throw new j;let le=null;for(let ce=1;le===null&&ce<W;ce++)le=this.getBlackPointOnSegment(s,c-ce,s-ce,c);if(le==null)throw new j;return this.centerEdges(le,H,K,Y)}else throw new j}getBlackPointOnSegment(r,s,o,c){const u=Me.round(Me.distance(r,s,o,c)),d=(o-r)/u,h=(c-s)/u,y=this.image;for(let w=0;w<u;w++){const v=Me.round(r+w*d),I=Me.round(s+w*h);if(y.get(v,I))return new ge(v,I)}return null}centerEdges(r,s,o,c){const u=r.getX(),d=r.getY(),h=s.getX(),y=s.getY(),w=o.getX(),v=o.getY(),I=c.getX(),D=c.getY(),L=mn.CORR;return u<this.width/2?[new ge(I-L,D+L),new ge(h+L,y+L),new ge(w-L,v-L),new ge(u+L,d-L)]:[new ge(I+L,D+L),new ge(h+L,y-L),new ge(w-L,v+L),new ge(u-L,d-L)]}containsBlackPoint(r,s,o,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,o))return!0}else for(let d=r;d<=s;d++)if(u.get(o,d))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class $r{static checkAndNudgePoints(r,s){const o=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),y=Math.floor(s[d+1]);if(h<-1||h>o||y<-1||y>c)throw new j;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),y===-1?(s[d+1]=0,u=!0):y===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),y=Math.floor(s[d+1]);if(h<-1||h>o||y<-1||y>c)throw new j;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),y===-1?(s[d+1]=0,u=!0):y===c&&(s[d+1]=c-1,u=!0)}}}class ee{constructor(r,s,o,c,u,d,h,y,w){this.a11=r,this.a21=s,this.a31=o,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=y,this.a33=w}static quadrilateralToQuadrilateral(r,s,o,c,u,d,h,y,w,v,I,D,L,W,H,Y){const K=ee.quadrilateralToSquare(r,s,o,c,u,d,h,y);return ee.squareToQuadrilateral(w,v,I,D,L,W,H,Y).times(K)}transformPoints(r){const s=r.length,o=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,y=this.a23,w=this.a31,v=this.a32,I=this.a33;for(let D=0;D<s;D+=2){const L=r[D],W=r[D+1],H=u*L+y*W+I;r[D]=(o*L+d*W+w)/H,r[D+1]=(c*L+h*W+v)/H}}transformPointsWithValues(r,s){const o=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,y=this.a23,w=this.a31,v=this.a32,I=this.a33,D=r.length;for(let L=0;L<D;L++){const W=r[L],H=s[L],Y=u*W+y*H+I;r[L]=(o*W+d*H+w)/Y,s[L]=(c*W+h*H+v)/Y}}static squareToQuadrilateral(r,s,o,c,u,d,h,y){const w=r-o+u-h,v=s-c+d-y;if(w===0&&v===0)return new ee(o-r,u-o,r,c-s,d-c,s,0,0,1);{const I=o-u,D=h-u,L=c-d,W=y-d,H=I*W-D*L,Y=(w*W-D*v)/H,K=(I*v-w*L)/H;return new ee(o-r+Y*o,h-r+K*h,r,c-s+Y*c,y-s+K*y,s,Y,K,1)}}static quadrilateralToSquare(r,s,o,c,u,d,h,y){return ee.squareToQuadrilateral(r,s,o,c,u,d,h,y).buildAdjoint()}buildAdjoint(){return new ee(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ee(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Be extends $r{sampleGrid(r,s,o,c,u,d,h,y,w,v,I,D,L,W,H,Y,K,le,ce){const ie=ee.quadrilateralToQuadrilateral(c,u,d,h,y,w,v,I,D,L,W,H,Y,K,le,ce);return this.sampleGridWithTransform(r,s,o,ie)}sampleGridWithTransform(r,s,o,c){if(s<=0||o<=0)throw new j;const u=new Oe(s,o),d=new Float32Array(2*s);for(let h=0;h<o;h++){const y=d.length,w=h+.5;for(let v=0;v<y;v+=2)d[v]=v/2+.5,d[v+1]=w;c.transformPoints(d),$r.checkAndNudgePoints(r,d);try{for(let v=0;v<y;v+=2)r.get(Math.floor(d[v]),Math.floor(d[v+1]))&&u.set(v/2,h)}catch{throw new j}}return u}}class Xe{static setGridSampler(r){Xe.gridSampler=r}static getInstance(){return Xe.gridSampler}}Xe.gridSampler=new Be;class Pe{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ft{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new ki(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new j;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let c=0;for(let d=0;d<4;d++){let h=o[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let o=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(S.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new j}getCorrectedParameterData(r,s){let o,c;s?(o=7,c=2):(o=10,c=4);let u=o-c,d=new Int32Array(o);for(let y=o-1;y>=0;--y)d[y]=r&15,r>>=4;try{new tr(pe.AZTEC_PARAM).decode(d,u)}catch{throw new j}let h=0;for(let y=0;y<c;y++)h=(h<<4)+d[y];return h}getBullsEyeCorners(r){let s=r,o=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let I=this.getFirstDifferent(s,d,1,-1),D=this.getFirstDifferent(o,d,1,1),L=this.getFirstDifferent(c,d,-1,1),W=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let H=this.distancePoint(W,I)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(H<.75||H>1.25||!this.isWhiteOrBlackRectangle(I,D,L,W))break}s=I,o=D,c=L,u=W,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;let h=new ge(s.getX()+.5,s.getY()-.5),y=new ge(o.getX()+.5,o.getY()+.5),w=new ge(c.getX()-.5,c.getY()+.5),v=new ge(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,y,w,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,c;try{let h=new mn(this.image).detect();r=h[0],s=h[1],o=h[2],c=h[3]}catch{let y=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new Pe(y+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pe(y+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Pe(y-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pe(y-7,w-7),!1,-1,-1).toResultPoint()}let u=Me.round((r.getX()+c.getX()+s.getX()+o.getX())/4),d=Me.round((r.getY()+c.getY()+s.getY()+o.getY())/4);try{let h=new mn(this.image,15,u,d).detect();r=h[0],s=h[1],o=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Pe(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pe(u+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Pe(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pe(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Me.round((r.getX()+c.getX()+s.getX()+o.getX())/4),d=Me.round((r.getY()+c.getY()+s.getY()+o.getY())/4),new Pe(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,c,u){let d=Xe.getInstance(),h=this.getDimension(),y=h/2-this.nbCenterLayers,w=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,y,y,w,y,w,w,y,w,s.getX(),s.getY(),o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,o){let c=0,u=this.distanceResultPoint(r,s),d=u/o,h=r.getX(),y=r.getY(),w=d*(s.getX()-r.getX())/u,v=d*(s.getY()-r.getY())/u;for(let I=0;I<o;I++)this.image.get(Me.round(h+I*w),Me.round(y+I*v))&&(c|=1<<o-I-1);return c}isWhiteOrBlackRectangle(r,s,o,c){let u=3;r=new Pe(r.getX()-u,r.getY()+u),s=new Pe(s.getX()-u,s.getY()-u),o=new Pe(o.getX()+u,o.getY()-u),c=new Pe(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,o),h!==d)?!1:(h=this.getColor(o,c),h===d)}getColor(r,s){let o=this.distancePoint(r,s),c=(s.getX()-r.getX())/o,u=(s.getY()-r.getY())/o,d=0,h=r.getX(),y=r.getY(),w=this.image.get(r.getX(),r.getY()),v=Math.ceil(o);for(let D=0;D<v;D++)h+=c,y+=u,this.image.get(Me.round(h),Me.round(y))!==w&&d++;let I=d/o;return I>.1&&I<.9?0:I<=.1===w?1:-1}getFirstDifferent(r,s,o,c){let u=r.getX()+o,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o,d+=c;for(u-=o,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o;for(u-=o;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Pe(u,d)}expandSquare(r,s,o){let c=o/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,y=(r[0].getY()+r[2].getY())/2,w=new ge(h+c*u,y+c*d),v=new ge(h-c*u,y-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,y=(r[1].getY()+r[3].getY())/2;let I=new ge(h+c*u,y+c*d),D=new ge(h-c*u,y-c*d);return[w,I,v,D]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Me.round(r.getX()),o=Me.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return Me.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Me.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class Z{decode(r,s=null){let o=null,c=new ft(r.getBlackMatrix()),u=null,d=null;try{let v=c.detectMirror(!1);u=v.getPoints(),this.reportFoundResultPoints(s,u),d=new Te().decode(v)}catch(v){o=v}if(d==null)try{let v=c.detectMirror(!0);u=v.getPoints(),this.reportFoundResultPoints(s,u),d=new Te().decode(v)}catch(v){throw o??v}let h=new He(d.getText(),d.getRawBytes(),d.getNumBits(),u,fe.AZTEC,P.currentTimeMillis()),y=d.getByteSegments();y!=null&&h.putMetadata(nt.BYTE_SEGMENTS,y);let w=d.getECLevel();return w!=null&&h.putMetadata(nt.ERROR_CORRECTION_LEVEL,w),h}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(z.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((c,u,d)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class re extends ct{constructor(r=500){super(new Z,r)}}class me{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let y=270;h!==null&&h.get(nt.ORIENTATION)===!0&&(y=y+h.get(nt.ORIENTATION)%360),d.putMetadata(nt.ORIENTATION,y);const w=d.getResultPoints();if(w!==null){const v=u.getHeight();for(let I=0;I<w.length;I++)w[I]=new ge(v-w[I].getY()-1,w[I].getX())}return d}else throw new j}}reset(){}doDecode(r,s){const o=r.getWidth(),c=r.getHeight();let u=new O(o);const d=s&&s.get(z.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let y;d?y=c:y=15;const w=Math.trunc(c/2);for(let v=0;v<y;v++){const I=Math.trunc((v+1)/2),D=(v&1)===0,L=w+h*(D?I:-I);if(L<0||L>=c)break;try{u=r.getBlackRow(L,u)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(u.reverse(),s&&s.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const H=new Map;s.forEach((Y,K)=>H.set(K,Y)),H.delete(z.NEED_RESULT_POINT_CALLBACK),s=H}try{const H=this.decodeRow(L,u,s);if(W===1){H.putMetadata(nt.ORIENTATION,180);const Y=H.getResultPoints();Y!==null&&(Y[0]=new ge(o-Y[0].getX()-1,Y[0].getY()),Y[1]=new ge(o-Y[1].getX()-1,Y[1].getY()))}return H}catch{}}}throw new j}static recordPattern(r,s,o){const c=o.length;for(let w=0;w<c;w++)o[w]=0;const u=r.getSize();if(s>=u)throw new j;let d=!r.get(s),h=0,y=s;for(;y<u;){if(r.get(y)!==d)o[h]++;else{if(++h===c)break;o[h]=1,d=!d}y++}if(!(h===c||h===c-1&&y===u))throw new j}static recordPatternInReverse(r,s,o){let c=o.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new j;me.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const c=r.length;let u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;o*=h;let y=0;for(let w=0;w<c;w++){const v=r[w],I=s[w]*h,D=v>I?v-I:I-v;if(D>o)return Number.POSITIVE_INFINITY;y+=D}return y/u}}class q extends me{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=o,h=!1;const y=6;for(let w=o;w<s;w++)if(r.get(w)!==h)u[c]++;else{if(c===y-1){let v=q.MAX_AVG_VARIANCE,I=-1;for(let D=q.CODE_START_A;D<=q.CODE_START_C;D++){const L=me.patternMatchVariance(u,q.CODE_PATTERNS[D],q.MAX_INDIVIDUAL_VARIANCE);L<v&&(v=L,I=D)}if(I>=0&&r.isRange(Math.max(0,d-(w-d)/2),d,!1))return Int32Array.from([d,w,I]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new j}static decodeCode(r,s,o){me.recordPattern(r,o,s);let c=q.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<q.CODE_PATTERNS.length;d++){const h=q.CODE_PATTERNS[d],y=this.patternMatchVariance(s,h,q.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=d)}if(u>=0)return u;throw new j}decodeRow(r,s,o){const c=o&&o.get(z.ASSUME_GS1)===!0,u=q.findStartPattern(s),d=u[2];let h=0;const y=new Uint8Array(20);y[h++]=d;let w;switch(d){case q.CODE_START_A:w=q.CODE_CODE_A;break;case q.CODE_START_B:w=q.CODE_CODE_B;break;case q.CODE_START_C:w=q.CODE_CODE_C;break;default:throw new F}let v=!1,I=!1,D="",L=u[0],W=u[1];const H=Int32Array.from([0,0,0,0,0,0]);let Y=0,K=0,le=d,ce=0,ie=!0,Ke=!1,Ve=!1;for(;!v;){const xs=I;switch(I=!1,Y=K,K=q.decodeCode(s,H,W),y[h++]=K,K!==q.CODE_STOP&&(ie=!0),K!==q.CODE_STOP&&(ce++,le+=ce*K),L=W,W+=H.reduce((Dw,_w)=>Dw+_w,0),K){case q.CODE_START_A:case q.CODE_START_B:case q.CODE_START_C:throw new F}switch(w){case q.CODE_CODE_A:if(K<64)Ve===Ke?D+=String.fromCharCode(" ".charCodeAt(0)+K):D+=String.fromCharCode(" ".charCodeAt(0)+K+128),Ve=!1;else if(K<96)Ve===Ke?D+=String.fromCharCode(K-64):D+=String.fromCharCode(K+64),Ve=!1;else switch(K!==q.CODE_STOP&&(ie=!1),K){case q.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+=String.fromCharCode(29));break;case q.CODE_FNC_2:case q.CODE_FNC_3:break;case q.CODE_FNC_4_A:!Ke&&Ve?(Ke=!0,Ve=!1):Ke&&Ve?(Ke=!1,Ve=!1):Ve=!0;break;case q.CODE_SHIFT:I=!0,w=q.CODE_CODE_B;break;case q.CODE_CODE_B:w=q.CODE_CODE_B;break;case q.CODE_CODE_C:w=q.CODE_CODE_C;break;case q.CODE_STOP:v=!0;break}break;case q.CODE_CODE_B:if(K<96)Ve===Ke?D+=String.fromCharCode(" ".charCodeAt(0)+K):D+=String.fromCharCode(" ".charCodeAt(0)+K+128),Ve=!1;else switch(K!==q.CODE_STOP&&(ie=!1),K){case q.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+=String.fromCharCode(29));break;case q.CODE_FNC_2:case q.CODE_FNC_3:break;case q.CODE_FNC_4_B:!Ke&&Ve?(Ke=!0,Ve=!1):Ke&&Ve?(Ke=!1,Ve=!1):Ve=!0;break;case q.CODE_SHIFT:I=!0,w=q.CODE_CODE_A;break;case q.CODE_CODE_A:w=q.CODE_CODE_A;break;case q.CODE_CODE_C:w=q.CODE_CODE_C;break;case q.CODE_STOP:v=!0;break}break;case q.CODE_CODE_C:if(K<100)K<10&&(D+="0"),D+=K;else switch(K!==q.CODE_STOP&&(ie=!1),K){case q.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+=String.fromCharCode(29));break;case q.CODE_CODE_A:w=q.CODE_CODE_A;break;case q.CODE_CODE_B:w=q.CODE_CODE_B;break;case q.CODE_STOP:v=!0;break}break}xs&&(w=w===q.CODE_CODE_A?q.CODE_CODE_B:q.CODE_CODE_A)}const En=W-L;if(W=s.getNextUnset(W),!s.isRange(W,Math.min(s.getSize(),W+(W-L)/2),!1))throw new j;if(le-=ce*Y,le%103!==Y)throw new R;const rr=D.length;if(rr===0)throw new j;rr>0&&ie&&(w===q.CODE_CODE_C?D=D.substring(0,rr-2):D=D.substring(0,rr-1));const vn=(u[1]+u[0])/2,lt=L+En/2,Zt=y.length,Mn=new Uint8Array(Zt);for(let xs=0;xs<Zt;xs++)Mn[xs]=y[xs];const ms=[new ge(vn,r),new ge(lt,r)];return new He(D,Mn,0,ms,fe.CODE_128,new Date().getTime())}}q.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],q.MAX_AVG_VARIANCE=.25,q.MAX_INDIVIDUAL_VARIANCE=.7,q.CODE_SHIFT=98,q.CODE_CODE_C=99,q.CODE_CODE_B=100,q.CODE_CODE_A=101,q.CODE_FNC_1=102,q.CODE_FNC_2=97,q.CODE_FNC_3=96,q.CODE_FNC_4_A=101,q.CODE_FNC_4_B=100,q.CODE_START_A=103,q.CODE_START_B=104,q.CODE_START_C=105,q.CODE_STOP=106;class be extends me{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=be.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),y,w;do{be.recordPattern(s,d,c);let H=be.toNarrowWidePattern(c);if(H<0)throw new j;y=be.patternToChar(H),this.decodeRowResult+=y,w=d;for(let Y of c)d+=Y;d=s.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let H of c)v+=H;let I=d-w-v;if(d!==h&&I*2<v)throw new j;if(this.usingCheckDigit){let H=this.decodeRowResult.length-1,Y=0;for(let K=0;K<H;K++)Y+=be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(K));if(this.decodeRowResult.charAt(H)!==be.ALPHABET_STRING.charAt(Y%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,H)}if(this.decodeRowResult.length===0)throw new j;let D;this.extendedMode?D=be.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let L=(u[1]+u[0])/2,W=w+v/2;return new He(D,null,0,[new ge(L,r),new ge(W,r)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,y=s.length;for(let w=c;w<o;w++)if(r.get(w)!==h)s[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(s)===be.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((w-d)/2)),d,!1))return[d,w];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new j}static toNarrowWidePattern(r){let s=r.length,o=0,c;do{let u=2147483647;for(let y of r)y<u&&y>o&&(u=y);o=u,c=0;let d=0,h=0;for(let y=0;y<s;y++){let w=r[y];w>o&&(h|=1<<s-1-y,c++,d+=w)}if(c===3){for(let y=0;y<s&&c>0;y++){let w=r[y];if(w>o&&(c--,w*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<be.CHARACTER_ENCODINGS.length;s++)if(be.CHARACTER_ENCODINGS[s]===r)return be.ALPHABET_STRING.charAt(s);if(r===be.ASTERISK_ENCODING)return"*";throw new j}static decodeExtended(r){let s=r.length,o="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new F;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new F;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new F;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new F;break}o+=h,c++}else o+=u}return o}}be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],be.ASTERISK_ENCODING=148;class Ne extends me{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new Ee;Ne.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),y=null;o!=null&&(y=o.get(z.ALLOWED_LENGTHS)),y==null&&(y=Ne.DEFAULT_ALLOWED_LENGTHS);let w=h.length,v=!1,I=0;for(let W of y){if(w===W){v=!0;break}W>I&&(I=W)}if(!v&&w>I&&(v=!0),!v)throw new F;const D=[new ge(c[1],r),new ge(u[0],r)];return new He(h,null,0,D,fe.ITF,new Date().getTime())}static decodeMiddle(r,s,o,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<o;){me.recordPattern(r,s,u);for(let w=0;w<5;w++){let v=2*w;d[w]=u[v],h[w]=u[v+1]}let y=Ne.decodeDigit(d);c.append(y.toString()),y=this.decodeDigit(h),c.append(y.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=Ne.skipWhiteSpace(r),o=Ne.findGuardPattern(r,s,Ne.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let c=s-1;o>0&&c>=0&&!r.get(c);c--)o--;if(o!==0)throw new j}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new j;return o}decodeEnd(r){r.reverse();try{let s=Ne.skipWhiteSpace(r),o;try{o=Ne.findGuardPattern(r,s,Ne.END_PATTERN_REVERSED[0])}catch(u){u instanceof j&&(o=Ne.findGuardPattern(r,s,Ne.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let c=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-c,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let c=o.length,u=new Int32Array(c),d=r.getSize(),h=!1,y=0,w=s;u.fill(0);for(let v=s;v<d;v++)if(r.get(v)!==h)u[y]++;else{if(y===c-1){if(me.patternMatchVariance(u,o,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return[w,v];w+=u[0]+u[1],P.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,h=!h}throw new j}static decodeDigit(r){let s=Ne.MAX_AVG_VARIANCE,o=-1,c=Ne.PATTERNS.length;for(let u=0;u<c;u++){let d=Ne.PATTERNS[u],h=me.patternMatchVariance(r,d,Ne.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=u):h===s&&(o=-1)}if(o>=0)return o%10;throw new j}}Ne.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ne.MAX_AVG_VARIANCE=.38,Ne.MAX_INDIVIDUAL_VARIANCE=.5,Ne.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ne.START_PATTERN=Int32Array.from([1,1,1,1]),Ne.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ye extends me{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=Ye.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=o[0];c=o[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return o}static checkChecksum(r){return Ye.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return Ye.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new F;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new F;o+=u}return(1e3-o)%10}static decodeEnd(r,s){return Ye.findGuardPattern(r,s,!1,Ye.START_END_PATTERN,new Int32Array(Ye.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,c){return this.findGuardPattern(r,s,o,c,new Int32Array(c.length))}static findGuardPattern(r,s,o,c,u){let d=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let h=0,y=s,w=c.length,v=o;for(let I=s;I<d;I++)if(r.get(I)!==v)u[h]++;else{if(h===w-1){if(me.patternMatchVariance(u,c,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return Int32Array.from([y,I]);y+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let L=0;L<h-1;L++)u[L]=D[L];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,v=!v}throw new j}static decodeDigit(r,s,o,c){this.recordPattern(r,o,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let y=0;y<h;y++){let w=c[y],v=me.patternMatchVariance(s,w,Ye.MAX_INDIVIDUAL_VARIANCE);v<u&&(u=v,d=y)}if(d>=0)return d;throw new j}}Ye.MAX_AVG_VARIANCE=.48,Ye.MAX_INDIVIDUAL_VARIANCE=.7,Ye.START_END_PATTERN=Int32Array.from([1,1,1]),Ye.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ye.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ye.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Wt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),d=c.toString(),h=Wt.parseExtensionString(d),y=[new ge((o[0]+o[1])/2,r),new ge(u,r)],w=new He(d,null,0,y,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<5&&d<u;w++){let v=Ye.decodeDigit(r,c,d,Ye.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let I of c)d+=I;v>=10&&(h|=1<<4-w),w!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==5)throw new j;let y=this.determineCheckDigit(h);if(Wt.extensionChecksum(o.toString())!==y)throw new j;return d}static extensionChecksum(r){let s=r.length,o=0;for(let c=s-2;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);o*=3;for(let c=s-1;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new j}static parseExtensionString(r){if(r.length!==5)return null;let s=Wt.parseExtension5String(r);return s==null?null:new Map([[nt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),c=(o/100).toString(),u=o%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class qr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),d=c.toString(),h=qr.parseExtensionString(d),y=[new ge((o[0]+o[1])/2,r),new ge(u,r)],w=new He(d,null,0,y,fe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let y=0;y<2&&d<u;y++){let w=Ye.decodeDigit(r,c,d,Ye.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let v of c)d+=v;w>=10&&(h|=1<<1-y),y!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==2)throw new j;if(parseInt(o.toString())%4!==h)throw new j;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[nt.ISSUE_NUMBER,parseInt(r)]])}}class Ua{static decodeRow(r,s,o){let c=Ye.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Wt().decodeRow(r,s,c)}catch{return new qr().decodeRow(r,s,c)}}}Ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends Ye{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=qe.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[s.length-c-1];qe.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let c=qe.findStartGuardPattern(s),u=o==null?null:o.get(z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ie=new ge((c[0]+c[1])/2,r);u.foundPossibleResultPoint(ie)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,y=d.resultString;if(u!=null){const ie=new ge(h,r);u.foundPossibleResultPoint(ie)}let w=this.decodeEnd(s,h);if(u!=null){const ie=new ge((w[0]+w[1])/2,r);u.foundPossibleResultPoint(ie)}let v=w[1],I=v+(v-w[0]);if(I>=s.getSize()||!s.isRange(v,I,!1))throw new j;let D=y.toString();if(D.length<8)throw new F;if(!qe.checkChecksum(D))throw new R;let L=(c[1]+c[0])/2,W=(w[1]+w[0])/2,H=this.getBarcodeFormat(),Y=[new ge(L,r),new ge(W,r)],K=new He(D,null,0,Y,H,new Date().getTime()),le=0;try{let ie=Ua.decodeRow(r,s,w[1]);K.putMetadata(nt.UPC_EAN_EXTENSION,ie.getText()),K.putAllMetadata(ie.getResultMetadata()),K.addResultPoints(ie.getResultPoints()),le=ie.getText().length}catch{}let ce=o==null?null:o.get(z.ALLOWED_EAN_EXTENSIONS);if(ce!=null){let ie=!1;for(let Ke in ce)if(le.toString()===Ke){ie=!0;break}if(!ie)throw new j}return K}decodeEnd(r,s){return qe.findGuardPattern(r,s,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return qe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return qe.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new F;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new F;o+=u}return(1e3-o)%10}}class pr extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<6&&d<u;w++){let v=qe.decodeDigit(r,c,d,qe.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let I of c)d+=I;v>=10&&(h|=1<<5-w)}o=pr.determineFirstDigit(o,h),d=qe.findGuardPattern(r,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&d<u;w++){let v=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v);for(let I of c)d+=I}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode("0".charCodeAt(0)+o)+r,r;throw new j}}pr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class go extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let y=0;y<4&&d<u;y++){let w=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w);for(let v of c)d+=v}d=qe.findGuardPattern(r,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<u;y++){let w=qe.decodeDigit(r,c,d,qe.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+w);for(let v of c)d+=v}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return fe.EAN_8}}class nr extends qe{constructor(){super(...arguments),this.ean13Reader=new pr}getBarcodeFormat(){return fe.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new He(s.substring(1),null,null,r.getResultPoints(),fe.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new j}reset(){this.ean13Reader.reset()}}class xn extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let w=0;w<6&&d<u;w++){const v=xn.decodeDigit(r,c,d,xn.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let I of c)d+=I;v>=10&&(h|=1<<5-w)}let y=xn.determineNumSysAndCheckDigit(o,h);return{rowOffset:d,resultString:y}}decodeEnd(r,s){return xn.findGuardPatternWithoutCounters(r,s,!0,xn.MIDDLE_END_PATTERN)}checkChecksum(r){return qe.checkChecksum(xn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let u=String.fromCharCode("0".charCodeAt(0)+o),d=String.fromCharCode("0".charCodeAt(0)+c);return u+r+d}throw j.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new Ee;o.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(c),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(c);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Li extends me{constructor(r){super();let s=r==null?null:r.get(z.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new pr),o.push(new nr),o.push(new go),o.push(new xn)):(s.indexOf(fe.EAN_13)>-1&&o.push(new pr),s.indexOf(fe.UPC_A)>-1&&o.push(new nr),s.indexOf(fe.EAN_8)>-1&&o.push(new go),s.indexOf(fe.UPC_E)>-1&&o.push(new xn)),this.readers=o}decodeRow(r,s,o){for(let c of this.readers)try{const u=c.decodeRow(r,s,o),d=u.getBarcodeFormat()===fe.EAN_13&&u.getText().charAt(0)==="0",h=o==null?null:o.get(z.POSSIBLE_FORMATS),y=h==null||h.includes(fe.UPC_A);if(d&&y){const w=u.getRawBytes(),v=new He(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),fe.UPC_A);return v.putAllMetadata(u.getResultMetadata()),v}return u}catch{}throw new j}reset(){for(let r of this.readers)r.reset()}}class It extends me{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(me.patternMatchVariance(r,s[o],It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return o;throw new j}static count(r){return Me.sum(new Int32Array(r))}static increment(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],o=u);r[o]++}static decrement(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],o=u);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],c=s/o;if(c>=It.MIN_FINDER_PATTERN_RATIO&&c<=It.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}It.MAX_AVG_VARIANCE=.2,It.MAX_INDIVIDUAL_VARIANCE=.45,It.MIN_FINDER_PATTERN_RATIO=9.5/12,It.MAX_FINDER_PATTERN_RATIO=12.5/14;class Jr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Jr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Bi{constructor(r,s,o,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ge(o,u)),this.resultPoints.push(new ge(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Bi))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class mr{constructor(){}static getRSSvalue(r,s,o){let c=0;for(let y of r)c+=y;let u=0,d=0,h=r.length;for(let y=0;y<h-1;y++){let w;for(w=1,d|=1<<y;w<r[y];w++,d&=~(1<<y)){let v=mr.combins(c-w-1,h-y-2);if(o&&d===0&&c-w-(h-y-1)>=h-y-1&&(v-=mr.combins(c-w-(h-y),h-y-2)),h-y-1>1){let I=0;for(let D=c-w-(h-y-2);D>s;D--)I+=mr.combins(c-w-D-1,h-y-3);v-=I*(h-1-y)}else c-w>s&&v--;u+=v}c-=w}return u}static combins(r,s){let o,c;r-s>s?(c=s,o=r-s):(c=r-s,o=s);let u=1,d=1;for(let h=r;h>o;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class rw{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,c=new O(o),u=0,h=r[0].getRightChar().getValue();for(let y=11;y>=0;--y)h&1<<y&&c.set(u),u++;for(let y=1;y<r.length;++y){let w=r[y],v=w.getLeftChar().getValue();for(let I=11;I>=0;--I)v&1<<I&&c.set(u),u++;if(w.getRightChar()!=null){let I=w.getRightChar().getValue();for(let D=11;D>=0;--D)I&1<<D&&c.set(u),u++}}return c}}class ji{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Qc{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class yn extends Qc{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===yn.FNC1}}yn.FNC1="$";class Fi extends Qc{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class zn extends Qc{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new F;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===zn.FNC1}isAnyFNC1(){return this.firstDigit===zn.FNC1||this.secondDigit===zn.FNC1}}zn.FNC1=10;class xe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new j;let s=r.substring(0,2);for(let u of xe.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(2,u[2],r):xe.processFixedAI(2,u[1],r);if(r.length<3)throw new j;let o=r.substring(0,3);for(let u of xe.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(3,u[2],r):xe.processFixedAI(3,u[1],r);for(let u of xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,u[2],r):xe.processFixedAI(4,u[1],r);if(r.length<4)throw new j;let c=r.substring(0,4);for(let u of xe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,u[2],r):xe.processFixedAI(4,u[1],r);throw new j}static processFixedAI(r,s,o){if(o.length<r)throw new j;let c=o.substring(0,r);if(o.length<r+s)throw new j;let u=o.substring(r,r+s),d=o.substring(r+s),h="("+c+")"+u,y=xe.parseFieldsInGeneralPurpose(d);return y==null?h:h+y}static processVariableAI(r,s,o){let c=o.substring(0,r),u;o.length<r+s?u=o.length:u=r+s;let d=o.substring(r,u),h=o.substring(u),y="("+c+")"+d,w=xe.parseFieldsInGeneralPurpose(h);return w==null?y:y+w}}xe.VARIABLE_LENGTH=[],xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xe.VARIABLE_LENGTH,20],["22",xe.VARIABLE_LENGTH,29],["30",xe.VARIABLE_LENGTH,8],["37",xe.VARIABLE_LENGTH,8],["90",xe.VARIABLE_LENGTH,30],["91",xe.VARIABLE_LENGTH,30],["92",xe.VARIABLE_LENGTH,30],["93",xe.VARIABLE_LENGTH,30],["94",xe.VARIABLE_LENGTH,30],["95",xe.VARIABLE_LENGTH,30],["96",xe.VARIABLE_LENGTH,30],["97",xe.VARIABLE_LENGTH,3],["98",xe.VARIABLE_LENGTH,30],["99",xe.VARIABLE_LENGTH,30]],xe.THREE_DIGIT_DATA_LENGTH=[["240",xe.VARIABLE_LENGTH,30],["241",xe.VARIABLE_LENGTH,30],["242",xe.VARIABLE_LENGTH,6],["250",xe.VARIABLE_LENGTH,30],["251",xe.VARIABLE_LENGTH,30],["253",xe.VARIABLE_LENGTH,17],["254",xe.VARIABLE_LENGTH,20],["400",xe.VARIABLE_LENGTH,30],["401",xe.VARIABLE_LENGTH,30],["402",17],["403",xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xe.VARIABLE_LENGTH,20],["421",xe.VARIABLE_LENGTH,15],["422",3],["423",xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xe.VARIABLE_LENGTH,15],["391",xe.VARIABLE_LENGTH,18],["392",xe.VARIABLE_LENGTH,15],["393",xe.VARIABLE_LENGTH,18],["703",xe.VARIABLE_LENGTH,30]],xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xe.VARIABLE_LENGTH,20],["8003",xe.VARIABLE_LENGTH,30],["8004",xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xe.VARIABLE_LENGTH,30],["8008",xe.VARIABLE_LENGTH,12],["8018",18],["8020",xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xe.VARIABLE_LENGTH,70],["8200",xe.VARIABLE_LENGTH,70]];class us{constructor(r){this.buffer=new Ee,this.information=r}decodeAllCodes(r,s){let o=s,c=null;do{let u=this.decodeGeneralPurposeField(o,c),d=xe.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new zn(this.information.getSize(),zn.FNC1,zn.FNC1):new zn(this.information.getSize(),u-1,zn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,c=(s-8)%11;return new zn(r+7,o,c)}extractNumericValueFromBitArray(r,s){return us.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let c=0;for(let u=0;u<o;++u)r.get(s+u)&&(c|=1<<o-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Fi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Fi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Fi(this.current.getPosition(),this.buffer.toString()):s=new Fi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new ji(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Fi(this.current.getPosition(),this.buffer.toString());return new ji(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ji(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Fi(this.current.getPosition(),this.buffer.toString());return new ji(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ji(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Fi(this.current.getPosition(),this.buffer.toString());return new ji(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ji(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new yn(r+5,yn.FNC1);if(s>=5&&s<15)return new yn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new yn(r+7,""+(o+1));if(o>=90&&o<116)return new yn(r+7,""+(o+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new F}return new yn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new yn(r+5,yn.FNC1);if(s>=5&&s<15)return new yn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new yn(r+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Ot("Decoding invalid alphanumeric value: "+o)}return new yn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Kc{constructor(r){this.information=r,this.generalDecoder=new us(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends Kc{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}wn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-"0".charCodeAt(0);o+=c&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}wn.GTIN_SIZE=40;class ds extends wn{constructor(r){super(r)}parseInformation(){let r=new Ee;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ds.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,ds.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,ds.HEADER_SIZE+44)}}ds.HEADER_SIZE=1+1+2;class Va extends Kc{constructor(r){super(r)}parseInformation(){let r=new Ee;return this.getGeneralDecoder().decodeAllCodes(r,Va.HEADER_SIZE)}}Va.HEADER_SIZE=2+1+2;class za extends wn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class xr extends za{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=xr.HEADER_SIZE+za.GTIN_SIZE+xr.WEIGHT_SIZE)throw new j;let r=new Ee;return this.encodeCompressedGtin(r,xr.HEADER_SIZE),this.encodeCompressedWeight(r,xr.HEADER_SIZE+za.GTIN_SIZE,xr.WEIGHT_SIZE),r.toString()}}xr.HEADER_SIZE=4+1,xr.WEIGHT_SIZE=15;class iw extends xr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class sw extends xr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class yr extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<yr.HEADER_SIZE+wn.GTIN_SIZE)throw new j;let r=new Ee;this.encodeCompressedGtin(r,yr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yr.HEADER_SIZE+wn.GTIN_SIZE,yr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(yr.HEADER_SIZE+wn.GTIN_SIZE+yr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}yr.HEADER_SIZE=5+1+2,yr.LAST_DIGIT_SIZE=2;class un extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+wn.GTIN_SIZE)throw new j;let r=new Ee;this.encodeCompressedGtin(r,un.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+wn.GTIN_SIZE,un.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+wn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+wn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}un.HEADER_SIZE=5+1+2,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class xt extends za{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE+xt.DATE_SIZE)throw new j;let r=new Ee;return this.encodeCompressedGtin(r,xt.HEADER_SIZE),this.encodeCompressedWeight(r,xt.HEADER_SIZE+xt.GTIN_SIZE,xt.WEIGHT_SIZE),this.encodeCompressedDate(r,xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,xt.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=o%32;o/=32;let u=o%12+1;o/=12;let d=o;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}xt.HEADER_SIZE=7+1,xt.WEIGHT_SIZE=20,xt.DATE_SIZE=16;function p0(T){try{if(T.get(1))return new ds(T);if(!T.get(2))return new Va(T);switch(us.extractNumericValueFromBitArray(T,1,4)){case 4:return new iw(T);case 5:return new sw(T)}switch(us.extractNumericValueFromBitArray(T,1,5)){case 12:return new yr(T);case 13:return new un(T)}switch(us.extractNumericValueFromBitArray(T,1,7)){case 56:return new xt(T,"310","11");case 57:return new xt(T,"320","11");case 58:return new xt(T,"310","13");case 59:return new xt(T,"320","13");case 60:return new xt(T,"310","15");case 61:return new xt(T,"320","15");case 62:return new xt(T,"310","17");case 63:return new xt(T,"320","17")}}catch(r){throw console.log(r),new Ot("unknown decoder: "+T)}}class ei{constructor(r,s,o,c){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof ei?ei.equalsOrNull(r.leftchar,s.leftchar)&&ei.equalsOrNull(r.rightchar,s.rightchar)&&ei.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:ei.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zc{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Zc?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class ne extends It{constructor(r){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof j){if(!this.pairs.length)throw new j;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new j}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,o+1)}catch(d){this.verbose&&console.log(d)}}throw new j}static isValidSequence(r){for(let s of ne.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,c=!1,u=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),o++}u||c||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Zc(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let c of o.getPairs())for(let u of r)if(ei.equals(c,u))break}}static isPartialRow(r,s){for(let o of s){let c=!0;for(let u of r){let d=!1;for(let h of o.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=rw.buildBitArray(r),c=p0(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new He(c,null,null,h,fe.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let y=this.pairs.get(h);c+=y.getLeftChar().getChecksumPortion(),u++;let w=y.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,o,c),u==null?h=ne.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new j;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(v){w=null,this.verbose&&console.log(v)}return new ei(y,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;o>=0?d=o:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let y=!1;for(;d<u&&(y=!r.get(d),!!y);)d++;let w=0,v=d;for(let I=d;I<u;I++)if(r.get(I)!=y)c[w]++;else{if(w==3){if(h&&ne.reverseCounters(c),ne.isFinderPattern(c)){this.startEnd[0]=v,this.startEnd[1]=I;return}h&&ne.reverseCounters(c),v+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,y=!y}throw new j}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let c=r[o];r[o]=r[s-o-1],r[s-o-1]=c}}parseFoundFinderPattern(r,s,o){let c,u,d;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();P.arraycopy(h,0,h,1,h.length-1),h[0]=c;let y;try{y=this.parseFinderValue(h,ne.FINDER_PATTERNS)}catch{return null}return new Bi(y,[u,d],u,d,s)}decodeDataCharacter(r,s,o,c){let u=this.getDataCharacterCounters();for(let lt=0;lt<u.length;lt++)u[lt]=0;if(c)ne.recordPatternInReverse(r,s.getStartEnd()[0],u);else{ne.recordPattern(r,s.getStartEnd()[1],u);for(let lt=0,Zt=u.length-1;lt<Zt;lt++,Zt--){let Mn=u[lt];u[lt]=u[Zt],u[Zt]=Mn}}let d=17,h=Me.sum(new Int32Array(u))/d,y=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-y)/y>.3)throw new j;let w=this.getOddCounts(),v=this.getEvenCounts(),I=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let lt=0;lt<u.length;lt++){let Zt=1*u[lt]/h,Mn=Zt+.5;if(Mn<1){if(Zt<.3)throw new j;Mn=1}else if(Mn>8){if(Zt>8.7)throw new j;Mn=8}let ms=lt/2;lt&1?(v[ms]=Mn,D[ms]=Zt-Mn):(w[ms]=Mn,I[ms]=Zt-Mn)}this.adjustOddEvenCounts(d);let L=4*s.getValue()+(o?0:2)+(c?0:1)-1,W=0,H=0;for(let lt=w.length-1;lt>=0;lt--){if(ne.isNotA1left(s,o,c)){let Zt=ne.WEIGHTS[L][2*lt];H+=w[lt]*Zt}W+=w[lt]}let Y=0;for(let lt=v.length-1;lt>=0;lt--)if(ne.isNotA1left(s,o,c)){let Zt=ne.WEIGHTS[L][2*lt+1];Y+=v[lt]*Zt}let K=H+Y;if(W&1||W>13||W<4)throw new j;let le=(13-W)/2,ce=ne.SYMBOL_WIDEST[le],ie=9-ce,Ke=mr.getRSSvalue(w,ce,!0),Ve=mr.getRSSvalue(v,ie,!1),En=ne.EVEN_TOTAL_SUBSET[le],rr=ne.GSUM[le],vn=Ke*En+Ve+rr;return new Jr(vn,K)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=Me.sum(new Int32Array(this.getOddCounts())),o=Me.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;o>13?h=!0:o<4&&(d=!0);let y=s+o-r,w=(s&1)==1,v=(o&1)==0;if(y==1)if(w){if(v)throw new j;u=!0}else{if(!v)throw new j;h=!0}else if(y==-1)if(w){if(v)throw new j;c=!0}else{if(!v)throw new j;d=!0}else if(y==0){if(w){if(!v)throw new j;s<o?(c=!0,h=!0):(u=!0,d=!0)}else if(v)throw new j}else throw new j;if(c){if(u)throw new j;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new j;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class ow extends Jr{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bt extends It{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const c=this.decodePair(s,!1,r,o);bt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,o);bt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&bt.checkChecksum(d,h))return bt.constructResult(d,h)}throw new j}static addOrTally(r,s){if(s==null)return;let o=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),c=new String(o).toString(),u=new Ee;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let d=0;for(let w=0;w<13;w++){let v=u.charAt(w).charCodeAt(0)-"0".charCodeAt(0);d+=w&1?v:3*v}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),y=s.getFinderPattern().getResultPoints();return new He(u.toString(),null,0,[h[0],h[1],y[0],y[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(r,s,o,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,o,s,u),h=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(h!=null){let v=(u[0]+u[1])/2;s&&(v=r.getSize()-1-v),h.foundPossibleResultPoint(new ge(v,o))}let y=this.decodeDataCharacter(r,d,!0),w=this.decodeDataCharacter(r,d,!1);return new ow(1597*y.getValue()+w.getValue(),y.getChecksumPortion()+4*w.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,o){let c=this.getDataCharacterCounters();for(let Y=0;Y<c.length;Y++)c[Y]=0;if(o)me.recordPatternInReverse(r,s.getStartEnd()[0],c);else{me.recordPattern(r,s.getStartEnd()[1]+1,c);for(let Y=0,K=c.length-1;Y<K;Y++,K--){let le=c[Y];c[Y]=c[K],c[K]=le}}let u=o?16:15,d=Me.sum(new Int32Array(c))/u,h=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let Y=0;Y<c.length;Y++){let K=c[Y]/d,le=Math.floor(K+.5);le<1?le=1:le>8&&(le=8);let ce=Math.floor(Y/2);Y&1?(y[ce]=le,v[ce]=K-le):(h[ce]=le,w[ce]=K-le)}this.adjustOddEvenCounts(o,u);let I=0,D=0;for(let Y=h.length-1;Y>=0;Y--)D*=9,D+=h[Y],I+=h[Y];let L=0,W=0;for(let Y=y.length-1;Y>=0;Y--)L*=9,L+=y[Y],W+=y[Y];let H=D+3*L;if(o){if(I&1||I>12||I<4)throw new j;let Y=(12-I)/2,K=bt.OUTSIDE_ODD_WIDEST[Y],le=9-K,ce=mr.getRSSvalue(h,K,!1),ie=mr.getRSSvalue(y,le,!0),Ke=bt.OUTSIDE_EVEN_TOTAL_SUBSET[Y],Ve=bt.OUTSIDE_GSUM[Y];return new Jr(ce*Ke+ie+Ve,H)}else{if(W&1||W>10||W<4)throw new j;let Y=(10-W)/2,K=bt.INSIDE_ODD_WIDEST[Y],le=9-K,ce=mr.getRSSvalue(h,K,!0),ie=mr.getRSSvalue(y,le,!1),Ke=bt.INSIDE_ODD_TOTAL_SUBSET[Y],Ve=bt.INSIDE_GSUM[Y];return new Jr(ie*Ke+ce+Ve,H)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,y=d;for(let w=d;w<c;w++)if(r.get(w)!==u)o[h]++;else{if(h===3){if(It.isFinderPattern(o))return[y,w];y+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,u=!u}throw new j}parseFoundFinderPattern(r,s,o,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,y=this.getDecodeFinderCounters(),w=new Int32Array(y.length);P.arraycopy(y,0,w,1,y.length-1),w[0]=h;const v=this.parseFinderValue(w,bt.FINDER_PATTERNS);let I=d,D=c[1];return o&&(I=r.getSize()-1-I,D=r.getSize()-1-D),new Bi(v,[d,c[1]],I,D,s)}adjustOddEvenCounts(r,s){let o=Me.sum(new Int32Array(this.getOddCounts())),c=Me.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,y=!1;r?(o>12?d=!0:o<4&&(u=!0),c>12?y=!0:c<4&&(h=!0)):(o>11?d=!0:o<5&&(u=!0),c>10?y=!0:c<4&&(h=!0));let w=o+c-s,v=(o&1)===(r?1:0),I=(c&1)===1;if(w===1)if(v){if(I)throw new j;d=!0}else{if(!I)throw new j;y=!0}else if(w===-1)if(v){if(I)throw new j;u=!0}else{if(!I)throw new j;h=!0}else if(w===0){if(v){if(!I)throw new j;o<c?(u=!0,y=!0):(d=!0,h=!0)}else if(I)throw new j}else throw new j;if(u){if(d)throw new j;It.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&It.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(y)throw new j;It.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&It.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bt.OUTSIDE_GSUM=[0,161,961,2015,2715],bt.INSIDE_GSUM=[0,336,1036,1516],bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bt.INSIDE_ODD_WIDEST=[2,4,6,8],bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class fs extends me{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(z.POSSIBLE_FORMATS):null,c=r&&r.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(fe.EAN_13)||o.includes(fe.UPC_A)||o.includes(fe.EAN_8)||o.includes(fe.UPC_E))&&this.readers.push(new Li(r)),o.includes(fe.CODE_39)&&this.readers.push(new be(c)),o.includes(fe.CODE_128)&&this.readers.push(new q),o.includes(fe.ITF)&&this.readers.push(new Ne),o.includes(fe.RSS_14)&&this.readers.push(new bt),o.includes(fe.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new Li(r)),this.readers.push(new be),this.readers.push(new Li(r)),this.readers.push(new q),this.readers.push(new Ne),this.readers.push(new bt),this.readers.push(new ne(this.verbose)))}decodeRow(r,s,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,o)}catch{}throw new j}reset(){this.readers.forEach(r=>r.reset())}}class aw extends ct{constructor(r=500,s){super(new fs(s),r,s)}}class rt{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(r,s,o,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const y=d.getECCodewords(),w=d.getECBlocks();for(let v of w)h+=v.getCount()*(v.getDataCodewords()+y);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new F;for(let o of Ze.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new rt(5,new tt(1,3))),new Ze(2,12,12,10,10,new rt(7,new tt(1,5))),new Ze(3,14,14,12,12,new rt(10,new tt(1,8))),new Ze(4,16,16,14,14,new rt(12,new tt(1,12))),new Ze(5,18,18,16,16,new rt(14,new tt(1,18))),new Ze(6,20,20,18,18,new rt(18,new tt(1,22))),new Ze(7,22,22,20,20,new rt(20,new tt(1,30))),new Ze(8,24,24,22,22,new rt(24,new tt(1,36))),new Ze(9,26,26,24,24,new rt(28,new tt(1,44))),new Ze(10,32,32,14,14,new rt(36,new tt(1,62))),new Ze(11,36,36,16,16,new rt(42,new tt(1,86))),new Ze(12,40,40,18,18,new rt(48,new tt(1,114))),new Ze(13,44,44,20,20,new rt(56,new tt(1,144))),new Ze(14,48,48,22,22,new rt(68,new tt(1,174))),new Ze(15,52,52,24,24,new rt(42,new tt(2,102))),new Ze(16,64,64,14,14,new rt(56,new tt(2,140))),new Ze(17,72,72,16,16,new rt(36,new tt(4,92))),new Ze(18,80,80,18,18,new rt(48,new tt(4,114))),new Ze(19,88,88,20,20,new rt(56,new tt(4,144))),new Ze(20,96,96,22,22,new rt(68,new tt(4,174))),new Ze(21,104,104,24,24,new rt(56,new tt(6,136))),new Ze(22,120,120,18,18,new rt(68,new tt(6,175))),new Ze(23,132,132,20,20,new rt(62,new tt(8,163))),new Ze(24,144,144,22,22,new rt(62,new tt(8,156),new tt(2,155))),new Ze(25,8,18,6,16,new rt(7,new tt(1,5))),new Ze(26,8,32,6,14,new rt(11,new tt(1,10))),new Ze(27,12,26,10,24,new rt(14,new tt(1,16))),new Ze(28,12,36,10,16,new rt(18,new tt(1,22))),new Ze(29,16,36,14,16,new rt(24,new tt(1,32))),new Ze(30,16,48,14,22,new rt(28,new tt(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class $c{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new F;this.version=$c.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return Ze.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,y=!1,w=!1,v=!1;do if(o===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,o-=2,c+=2,h=!0;else if(o===u-2&&c===0&&d&3&&!y)r[s++]=this.readCorner2(u,d)&255,o-=2,c+=2,y=!0;else if(o===u+4&&c===2&&!(d&7)&&!w)r[s++]=this.readCorner3(u,d)&255,o-=2,c+=2,w=!0;else if(o===u-2&&c===0&&(d&7)===4&&!v)r[s++]=this.readCorner4(u,d)&255,o-=2,c+=2,v=!0;else{do o<u&&c>=0&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,d)&255),o-=2,c+=2;while(o>=0&&c<d);o+=1,c+=3;do o>=0&&c<d&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,d)&255),o+=2,c-=2;while(o<u&&c>=0);o+=3,c+=1}while(o<u||c<d);if(s!==this.version.getTotalCodewords())throw new F;return r}readModule(r,s,o,c){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,c){let u=0;return this.readModule(r-2,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s,o,c)&&(u|=1),u<<=1,this.readModule(r,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r,s,o,c)&&(u|=1),u}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=o/u|0,y=d*c,w=h*u,v=new Oe(w,y);for(let I=0;I<d;++I){const D=I*c;for(let L=0;L<h;++L){const W=L*u;for(let H=0;H<c;++H){const Y=I*(c+2)+1+H,K=D+H;for(let le=0;le<u;++le){const ce=L*(u+2)+1+le;if(r.get(ce,Y)){const ie=W+le;v.set(ie,K)}}}}}return v}}class qc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let c=0;const u=o.getECBlocks();for(let H of u)c+=H.getCount();const d=new Array(c);let h=0;for(let H of u)for(let Y=0;Y<H.getCount();Y++){const K=H.getDataCodewords(),le=o.getECCodewords()+K;d[h++]=new qc(K,new Uint8Array(le))}const w=d[0].codewords.length-o.getECCodewords(),v=w-1;let I=0;for(let H=0;H<v;H++)for(let Y=0;Y<h;Y++)d[Y].codewords[H]=r[I++];const D=s.getVersionNumber()===24,L=D?8:h;for(let H=0;H<L;H++)d[H].codewords[w-1]=r[I++];const W=d[0].codewords.length;for(let H=w;H<W;H++)for(let Y=0;Y<h;Y++){const K=D?(Y+8)%h:Y,le=D&&K>7?H-1:H;d[K].codewords[le]=r[I++]}if(I!==r.length)throw new E;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Jc{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new E(""+r);let s=0,o=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(o>0){const d=8-o,h=r<d?r:d,y=d-h,w=255>>8-h<<y;s=(u[c]&w)>>y,r-=h,o+=h,o===8&&(o=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,o+=r}}return this.bitOffset=o,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ft;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));class ti{static decode(r){const s=new Jc(r),o=new Ee,c=new Ee,u=new Array;let d=Ft.ASCII_ENCODE;do if(d===Ft.ASCII_ENCODE)d=this.decodeAsciiSegment(s,o,c);else{switch(d){case Ft.C40_ENCODE:this.decodeC40Segment(s,o);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new F}d=Ft.ASCII_ENCODE}while(d!==Ft.PAD_ENCODE&&s.available()>0);return c.length()>0&&o.append(c.toString()),new cn(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,o){let c=!1;do{let u=r.readBits(8);if(u===0)throw new F;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Ft.ASCII_ENCODE;if(u===129)return Ft.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return Ft.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const y=c[h];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[y];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new F;break;case 1:o?(s.append(String.fromCharCode(y+128)),o=!1):s.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[y];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new F}u=0;break;case 3:o?(s.append(String.fromCharCode(y+224)),o=!1):s.append(String.fromCharCode(y+96)),u=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const y=c[h];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[y];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new F;break;case 1:o?(s.append(String.fromCharCode(y+128)),o=!1):s.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[y];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new F}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[y];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w),u=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),o);for(let u=0;u<3;u++){const d=o[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let c=(r<<8)+s-1,u=Math.floor(c/1600);o[0]=u,c-=u*1600,u=Math.floor(c/40),o[1]=u,o[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new F;const h=new Uint8Array(d);for(let y=0;y<d;y++){if(r.available()<8)throw new F;h[y]=this.unrandomize255State(r.readBits(8),c++)}o.push(h);try{s.append(we.decode(h,de.ISO88591))}catch(y){throw new Ot("Platform does not support required encoding: "+y.message)}}static unrandomize255State(r,s){const o=149*s%255+1,c=r-o;return c>=0?c:c+256}}ti.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ti.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ti.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ti.TEXT_SHIFT2_SET_CHARS=ti.C40_SHIFT2_SET_CHARS,ti.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class lw{constructor(){this.rsDecoder=new tr(pe.DATA_MATRIX_FIELD_256)}decode(r){const s=new $c(r),o=s.getVersion(),c=s.readCodewords(),u=qc.getDataBlocks(c,o);let d=0;for(let w of u)d+=w.getNumDataCodewords();const h=new Uint8Array(d),y=u.length;for(let w=0;w<y;w++){const v=u[w],I=v.getCodewords(),D=v.getNumDataCodewords();this.correctErrors(I,D);for(let L=0;L<D;L++)h[L*y+w]=I[L]}return ti.decode(h)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class Pt{constructor(r){this.image=r,this.rectangleDetector=new mn(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new j;s=this.shiftToModuleCenter(s);const o=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(y&1)===1&&(y+=1),4*h<7*y&&4*y<7*h&&(h=y=Math.max(h,y));let w=Pt.sampleGrid(this.image,o,c,u,d,h,y);return new Vn(w,[o,c,u,d])}static shiftPoint(r,s,o){let c=(s.getX()-r.getX())/(o+1),u=(s.getY()-r.getY())/(o+1);return new ge(r.getX()+c,r.getY()+u)}static moveAway(r,s,o){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<o?u-=1:u+=1,new ge(c,u)}detectSolid1(r){let s=r[0],o=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,o),h=this.transitionsBetween(o,c),y=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),v=d,I=[u,s,o,c];return v>h&&(v=h,I[0]=s,I[1]=o,I[2]=c,I[3]=u),v>y&&(v=y,I[0]=o,I[1]=c,I[2]=u,I[3]=s),v>w&&(I[0]=c,I[1]=u,I[2]=s,I[3]=o),I}detectSolid2(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=Pt.shiftPoint(o,c,(d+1)*4),y=Pt.shiftPoint(c,o,(d+1)*4),w=this.transitionsBetween(h,s),v=this.transitionsBetween(y,u);return w<v?(r[0]=s,r[1]=o,r[2]=c,r[3]=u):(r[0]=o,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(o,u),y=Pt.shiftPoint(s,o,(h+1)*4),w=Pt.shiftPoint(c,o,(d+1)*4);d=this.transitionsBetween(y,u),h=this.transitionsBetween(w,u);let v=new ge(u.getX()+(c.getX()-o.getX())/(d+1),u.getY()+(c.getY()-o.getY())/(d+1)),I=new ge(u.getX()+(s.getX()-o.getX())/(h+1),u.getY()+(s.getY()-o.getY())/(h+1));if(!this.isValid(v))return this.isValid(I)?I:null;if(!this.isValid(I))return v;let D=this.transitionsBetween(y,v)+this.transitionsBetween(w,v),L=this.transitionsBetween(y,I)+this.transitionsBetween(w,I);return D>L?v:I}shiftToModuleCenter(r){let s=r[0],o=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,y=Pt.shiftPoint(s,o,h*4),w=Pt.shiftPoint(c,o,d*4);d=this.transitionsBetween(y,u)+1,h=this.transitionsBetween(w,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let v=(s.getX()+o.getX()+c.getX()+u.getX())/4,I=(s.getY()+o.getY()+c.getY()+u.getY())/4;s=Pt.moveAway(s,v,I),o=Pt.moveAway(o,v,I),c=Pt.moveAway(c,v,I),u=Pt.moveAway(u,v,I);let D,L;return y=Pt.shiftPoint(s,o,h*4),y=Pt.shiftPoint(y,u,d*4),D=Pt.shiftPoint(o,s,h*4),D=Pt.shiftPoint(D,c,d*4),w=Pt.shiftPoint(c,u,h*4),w=Pt.shiftPoint(w,o,d*4),L=Pt.shiftPoint(u,c,h*4),L=Pt.shiftPoint(L,s,d*4),[y,D,w,L]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,c,u,d,h){return Xe.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-o);if(h){let H=o;o=c,c=H,H=u,u=d,d=H}let y=Math.abs(u-o),w=Math.abs(d-c),v=-y/2,I=c<d?1:-1,D=o<u?1:-1,L=0,W=this.image.get(h?c:o,h?o:c);for(let H=o,Y=c;H!==u;H+=D){let K=this.image.get(h?Y:H,h?H:Y);if(K!==W&&(L++,W=K),v+=w,v>0){if(Y===d)break;Y+=I,v-=y}}return L}}class ni{constructor(){this.decoder=new lw}decode(r,s=null){let o,c;if(s!=null&&s.has(z.PURE_BARCODE)){const w=ni.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(w),c=ni.NO_POINTS}else{const w=new Pt(r.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=o.getRawBytes(),d=new He(o.getText(),u,8*u.length,c,fe.DATA_MATRIX,P.currentTimeMillis()),h=o.getByteSegments();h!=null&&d.putMetadata(nt.BYTE_SEGMENTS,h);const y=o.getECLevel();return y!=null&&d.putMetadata(nt.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new j;const c=this.moduleSize(s,r);let u=s[1];const d=o[1];let h=s[0];const w=(o[0]-h+1)/c,v=(d-u+1)/c;if(w<=0||v<=0)throw new j;const I=c/2;u+=I,h+=I;const D=new Oe(w,v);for(let L=0;L<v;L++){const W=u+L*c;for(let H=0;H<w;H++)r.get(h+H*c,W)&&D.set(H,L)}return D}static moduleSize(r,s){const o=s.getWidth();let c=r[0];const u=r[1];for(;c<o&&s.get(c,u);)c++;if(c===o)throw new j;const d=c-r[0];if(d===0)throw new j;return d}}ni.NO_POINTS=[];class cw extends ct{constructor(r=500){super(new ni,r)}}var hs;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(hs||(hs={}));class ut{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,ut.FOR_BITS.set(o,this),ut.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return ut.L;case"M":return ut.M;case"Q":return ut.Q;case"H":return ut.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof ut))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=ut.FOR_BITS.size)throw new E;return ut.FOR_BITS.get(r)}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.L=new ut(hs.L,"L",1),ut.M=new ut(hs.M,"M",0),ut.Q=new ut(hs.Q,"Q",3),ut.H=new ut(hs.H,"H",2);class tn{constructor(r){this.errorCorrectionLevel=ut.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return S.bitCount(r^s)}static decodeFormatInformation(r,s){const o=tn.doDecodeFormatInformation(r,s);return o!==null?o:tn.doDecodeFormatInformation(r^tn.FORMAT_INFO_MASK_QR,s^tn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,c=0;for(const u of tn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new tn(u[1]);let h=tn.numBitsDiffering(r,d);h<o&&(c=u[1],o=h),r!==s&&(h=tn.numBitsDiffering(s,d),h<o&&(c=u[1],o=h))}return o<=3?new tn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof tn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}tn.FORMAT_INFO_MASK_QR=21522,tn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class X{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Re{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let c=0;const u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new E;return Re.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<Re.VERSION_DECODE_INFO.length;c++){const u=Re.VERSION_DECODE_INFO[c];if(u===r)return Re.getVersionForNumber(c+7);const d=tn.numBitsDiffering(r,u);d<s&&(o=c+7,s=d)}return s<=3?Re.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Oe(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<o;d++)c===0&&(d===0||d===o-1)||c===o-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Re.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Re.VERSIONS=[new Re(1,new Int32Array(0),new X(7,new k(1,19)),new X(10,new k(1,16)),new X(13,new k(1,13)),new X(17,new k(1,9))),new Re(2,Int32Array.from([6,18]),new X(10,new k(1,34)),new X(16,new k(1,28)),new X(22,new k(1,22)),new X(28,new k(1,16))),new Re(3,Int32Array.from([6,22]),new X(15,new k(1,55)),new X(26,new k(1,44)),new X(18,new k(2,17)),new X(22,new k(2,13))),new Re(4,Int32Array.from([6,26]),new X(20,new k(1,80)),new X(18,new k(2,32)),new X(26,new k(2,24)),new X(16,new k(4,9))),new Re(5,Int32Array.from([6,30]),new X(26,new k(1,108)),new X(24,new k(2,43)),new X(18,new k(2,15),new k(2,16)),new X(22,new k(2,11),new k(2,12))),new Re(6,Int32Array.from([6,34]),new X(18,new k(2,68)),new X(16,new k(4,27)),new X(24,new k(4,19)),new X(28,new k(4,15))),new Re(7,Int32Array.from([6,22,38]),new X(20,new k(2,78)),new X(18,new k(4,31)),new X(18,new k(2,14),new k(4,15)),new X(26,new k(4,13),new k(1,14))),new Re(8,Int32Array.from([6,24,42]),new X(24,new k(2,97)),new X(22,new k(2,38),new k(2,39)),new X(22,new k(4,18),new k(2,19)),new X(26,new k(4,14),new k(2,15))),new Re(9,Int32Array.from([6,26,46]),new X(30,new k(2,116)),new X(22,new k(3,36),new k(2,37)),new X(20,new k(4,16),new k(4,17)),new X(24,new k(4,12),new k(4,13))),new Re(10,Int32Array.from([6,28,50]),new X(18,new k(2,68),new k(2,69)),new X(26,new k(4,43),new k(1,44)),new X(24,new k(6,19),new k(2,20)),new X(28,new k(6,15),new k(2,16))),new Re(11,Int32Array.from([6,30,54]),new X(20,new k(4,81)),new X(30,new k(1,50),new k(4,51)),new X(28,new k(4,22),new k(4,23)),new X(24,new k(3,12),new k(8,13))),new Re(12,Int32Array.from([6,32,58]),new X(24,new k(2,92),new k(2,93)),new X(22,new k(6,36),new k(2,37)),new X(26,new k(4,20),new k(6,21)),new X(28,new k(7,14),new k(4,15))),new Re(13,Int32Array.from([6,34,62]),new X(26,new k(4,107)),new X(22,new k(8,37),new k(1,38)),new X(24,new k(8,20),new k(4,21)),new X(22,new k(12,11),new k(4,12))),new Re(14,Int32Array.from([6,26,46,66]),new X(30,new k(3,115),new k(1,116)),new X(24,new k(4,40),new k(5,41)),new X(20,new k(11,16),new k(5,17)),new X(24,new k(11,12),new k(5,13))),new Re(15,Int32Array.from([6,26,48,70]),new X(22,new k(5,87),new k(1,88)),new X(24,new k(5,41),new k(5,42)),new X(30,new k(5,24),new k(7,25)),new X(24,new k(11,12),new k(7,13))),new Re(16,Int32Array.from([6,26,50,74]),new X(24,new k(5,98),new k(1,99)),new X(28,new k(7,45),new k(3,46)),new X(24,new k(15,19),new k(2,20)),new X(30,new k(3,15),new k(13,16))),new Re(17,Int32Array.from([6,30,54,78]),new X(28,new k(1,107),new k(5,108)),new X(28,new k(10,46),new k(1,47)),new X(28,new k(1,22),new k(15,23)),new X(28,new k(2,14),new k(17,15))),new Re(18,Int32Array.from([6,30,56,82]),new X(30,new k(5,120),new k(1,121)),new X(26,new k(9,43),new k(4,44)),new X(28,new k(17,22),new k(1,23)),new X(28,new k(2,14),new k(19,15))),new Re(19,Int32Array.from([6,30,58,86]),new X(28,new k(3,113),new k(4,114)),new X(26,new k(3,44),new k(11,45)),new X(26,new k(17,21),new k(4,22)),new X(26,new k(9,13),new k(16,14))),new Re(20,Int32Array.from([6,34,62,90]),new X(28,new k(3,107),new k(5,108)),new X(26,new k(3,41),new k(13,42)),new X(30,new k(15,24),new k(5,25)),new X(28,new k(15,15),new k(10,16))),new Re(21,Int32Array.from([6,28,50,72,94]),new X(28,new k(4,116),new k(4,117)),new X(26,new k(17,42)),new X(28,new k(17,22),new k(6,23)),new X(30,new k(19,16),new k(6,17))),new Re(22,Int32Array.from([6,26,50,74,98]),new X(28,new k(2,111),new k(7,112)),new X(28,new k(17,46)),new X(30,new k(7,24),new k(16,25)),new X(24,new k(34,13))),new Re(23,Int32Array.from([6,30,54,78,102]),new X(30,new k(4,121),new k(5,122)),new X(28,new k(4,47),new k(14,48)),new X(30,new k(11,24),new k(14,25)),new X(30,new k(16,15),new k(14,16))),new Re(24,Int32Array.from([6,28,54,80,106]),new X(30,new k(6,117),new k(4,118)),new X(28,new k(6,45),new k(14,46)),new X(30,new k(11,24),new k(16,25)),new X(30,new k(30,16),new k(2,17))),new Re(25,Int32Array.from([6,32,58,84,110]),new X(26,new k(8,106),new k(4,107)),new X(28,new k(8,47),new k(13,48)),new X(30,new k(7,24),new k(22,25)),new X(30,new k(22,15),new k(13,16))),new Re(26,Int32Array.from([6,30,58,86,114]),new X(28,new k(10,114),new k(2,115)),new X(28,new k(19,46),new k(4,47)),new X(28,new k(28,22),new k(6,23)),new X(30,new k(33,16),new k(4,17))),new Re(27,Int32Array.from([6,34,62,90,118]),new X(30,new k(8,122),new k(4,123)),new X(28,new k(22,45),new k(3,46)),new X(30,new k(8,23),new k(26,24)),new X(30,new k(12,15),new k(28,16))),new Re(28,Int32Array.from([6,26,50,74,98,122]),new X(30,new k(3,117),new k(10,118)),new X(28,new k(3,45),new k(23,46)),new X(30,new k(4,24),new k(31,25)),new X(30,new k(11,15),new k(31,16))),new Re(29,Int32Array.from([6,30,54,78,102,126]),new X(30,new k(7,116),new k(7,117)),new X(28,new k(21,45),new k(7,46)),new X(30,new k(1,23),new k(37,24)),new X(30,new k(19,15),new k(26,16))),new Re(30,Int32Array.from([6,26,52,78,104,130]),new X(30,new k(5,115),new k(10,116)),new X(28,new k(19,47),new k(10,48)),new X(30,new k(15,24),new k(25,25)),new X(30,new k(23,15),new k(25,16))),new Re(31,Int32Array.from([6,30,56,82,108,134]),new X(30,new k(13,115),new k(3,116)),new X(28,new k(2,46),new k(29,47)),new X(30,new k(42,24),new k(1,25)),new X(30,new k(23,15),new k(28,16))),new Re(32,Int32Array.from([6,34,60,86,112,138]),new X(30,new k(17,115)),new X(28,new k(10,46),new k(23,47)),new X(30,new k(10,24),new k(35,25)),new X(30,new k(19,15),new k(35,16))),new Re(33,Int32Array.from([6,30,58,86,114,142]),new X(30,new k(17,115),new k(1,116)),new X(28,new k(14,46),new k(21,47)),new X(30,new k(29,24),new k(19,25)),new X(30,new k(11,15),new k(46,16))),new Re(34,Int32Array.from([6,34,62,90,118,146]),new X(30,new k(13,115),new k(6,116)),new X(28,new k(14,46),new k(23,47)),new X(30,new k(44,24),new k(7,25)),new X(30,new k(59,16),new k(1,17))),new Re(35,Int32Array.from([6,30,54,78,102,126,150]),new X(30,new k(12,121),new k(7,122)),new X(28,new k(12,47),new k(26,48)),new X(30,new k(39,24),new k(14,25)),new X(30,new k(22,15),new k(41,16))),new Re(36,Int32Array.from([6,24,50,76,102,128,154]),new X(30,new k(6,121),new k(14,122)),new X(28,new k(6,47),new k(34,48)),new X(30,new k(46,24),new k(10,25)),new X(30,new k(2,15),new k(64,16))),new Re(37,Int32Array.from([6,28,54,80,106,132,158]),new X(30,new k(17,122),new k(4,123)),new X(28,new k(29,46),new k(14,47)),new X(30,new k(49,24),new k(10,25)),new X(30,new k(24,15),new k(46,16))),new Re(38,Int32Array.from([6,32,58,84,110,136,162]),new X(30,new k(4,122),new k(18,123)),new X(28,new k(13,46),new k(32,47)),new X(30,new k(48,24),new k(14,25)),new X(30,new k(42,15),new k(32,16))),new Re(39,Int32Array.from([6,26,54,82,110,138,166]),new X(30,new k(20,117),new k(4,118)),new X(28,new k(40,47),new k(7,48)),new X(30,new k(43,24),new k(22,25)),new X(30,new k(10,15),new k(67,16))),new Re(40,Int32Array.from([6,30,58,86,114,142,170]),new X(30,new k(19,118),new k(6,119)),new X(28,new k(18,47),new k(31,48)),new X(30,new k(34,24),new k(34,25)),new X(30,new k(20,15),new k(61,16)))];var Ht;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(Ht||(Ht={}));class Wn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let c=0;c<s;c++)this.isMasked(o,c)&&r.flip(c,o)}}Wn.values=new Map([[Ht.DATA_MASK_000,new Wn(Ht.DATA_MASK_000,(T,r)=>(T+r&1)===0)],[Ht.DATA_MASK_001,new Wn(Ht.DATA_MASK_001,(T,r)=>(T&1)===0)],[Ht.DATA_MASK_010,new Wn(Ht.DATA_MASK_010,(T,r)=>r%3===0)],[Ht.DATA_MASK_011,new Wn(Ht.DATA_MASK_011,(T,r)=>(T+r)%3===0)],[Ht.DATA_MASK_100,new Wn(Ht.DATA_MASK_100,(T,r)=>(Math.floor(T/2)+Math.floor(r/3)&1)===0)],[Ht.DATA_MASK_101,new Wn(Ht.DATA_MASK_101,(T,r)=>T*r%6===0)],[Ht.DATA_MASK_110,new Wn(Ht.DATA_MASK_110,(T,r)=>T*r%6<3)],[Ht.DATA_MASK_111,new Wn(Ht.DATA_MASK_111,(T,r)=>(T+r+T*r%3&1)===0)]]);class uw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let o=0;const c=s-7;for(let u=s-1;u>=c;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=tn.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Re.getVersionForNumber(s);let o=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)o=this.copyBit(h,d,o);let u=Re.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)o=this.copyBit(d,h,o);if(u=Re.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new F}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=Wn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let y=0,w=0,v=0;for(let I=c-1;I>0;I-=2){I===6&&I--;for(let D=0;D<c;D++){const L=d?c-1-D:D;for(let W=0;W<2;W++)u.get(I-W,L)||(v++,w<<=1,this.bitMatrix.get(I-W,L)&&(w|=1),v===8&&(h[y++]=w,v=0,w=0))}d=!d}if(y!==s.getTotalCodewords())throw new F;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Wn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class eu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new E;const c=s.getECBlocksForLevel(o);let u=0;const d=c.getECBlocks();for(const W of d)u+=W.getCount();const h=new Array(u);let y=0;for(const W of d)for(let H=0;H<W.getCount();H++){const Y=W.getDataCodewords(),K=c.getECCodewordsPerBlock()+Y;h[y++]=new eu(Y,new Uint8Array(K))}const w=h[0].codewords.length;let v=h.length-1;for(;v>=0&&h[v].codewords.length!==w;)v--;v++;const I=w-c.getECCodewordsPerBlock();let D=0;for(let W=0;W<I;W++)for(let H=0;H<y;H++)h[H].codewords[W]=r[D++];for(let W=v;W<y;W++)h[W].codewords[I]=r[D++];const L=h[0].codewords.length;for(let W=I;W<L;W++)for(let H=0;H<y;H++){const Y=H<v?W:W+1;h[H].codewords[Y]=r[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Hn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Hn||(Hn={}));class De{constructor(r,s,o,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=c,De.FOR_BITS.set(c,this),De.FOR_VALUE.set(r,this)}static forBits(r){const s=De.FOR_BITS.get(r);if(s===void 0)throw new E;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof De))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}De.FOR_BITS=new Map,De.FOR_VALUE=new Map,De.TERMINATOR=new De(Hn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),De.NUMERIC=new De(Hn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),De.ALPHANUMERIC=new De(Hn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),De.STRUCTURED_APPEND=new De(Hn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),De.BYTE=new De(Hn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),De.ECI=new De(Hn.ECI,"ECI",Int32Array.from([0,0,0]),7),De.KANJI=new De(Hn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),De.FNC1_FIRST_POSITION=new De(Hn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),De.FNC1_SECOND_POSITION=new De(Hn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),De.HANZI=new De(Hn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ct{static decode(r,s,o,c){const u=new Jc(r);let d=new Ee;const h=new Array;let y=-1,w=-1;try{let v=null,I=!1,D;do{if(u.available()<4)D=De.TERMINATOR;else{const L=u.readBits(4);D=De.forBits(L)}switch(D){case De.TERMINATOR:break;case De.FNC1_FIRST_POSITION:case De.FNC1_SECOND_POSITION:I=!0;break;case De.STRUCTURED_APPEND:if(u.available()<16)throw new F;y=u.readBits(8),w=u.readBits(8);break;case De.ECI:const L=Ct.parseECIValue(u);if(v=G.getCharacterSetECIByValue(L),v===null)throw new F;break;case De.HANZI:const W=u.readBits(4),H=u.readBits(D.getCharacterCountBits(s));W===Ct.GB2312_SUBSET&&Ct.decodeHanziSegment(u,d,H);break;default:const Y=u.readBits(D.getCharacterCountBits(s));switch(D){case De.NUMERIC:Ct.decodeNumericSegment(u,d,Y);break;case De.ALPHANUMERIC:Ct.decodeAlphanumericSegment(u,d,Y,I);break;case De.BYTE:Ct.decodeByteSegment(u,d,Y,v,h,c);break;case De.KANJI:Ct.decodeKanjiSegment(u,d,Y);break;default:throw new F}break}}while(D!==De.TERMINATOR)}catch{throw new F}return new cn(r,d.toString(),h.length===0?null:h,o===null?null:o.toString(),y,w)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new F;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,o--}try{s.append(we.decode(c,de.GB2312))}catch(d){throw new F(d)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new F;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,o--}try{s.append(we.decode(c,de.SHIFT_JIS))}catch(d){throw new F(d)}}static decodeByteSegment(r,s,o,c,u,d){if(8*o>r.available())throw new F;const h=new Uint8Array(o);for(let w=0;w<o;w++)h[w]=r.readBits(8);let y;c===null?y=de.guessEncoding(h,d):y=c.getName();try{s.append(we.decode(h,y))}catch(w){throw new F(w)}u.push(h)}static toAlphaNumericChar(r){if(r>=Ct.ALPHANUMERIC_CHARS.length)throw new F;return Ct.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,c){const u=s.length();for(;o>1;){if(r.available()<11)throw new F;const d=r.readBits(11);s.append(Ct.toAlphaNumericChar(Math.floor(d/45))),s.append(Ct.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(r.available()<6)throw new F;s.append(Ct.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,String.fromCharCode(29)))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new F;const c=r.readBits(10);if(c>=1e3)throw new F;s.append(Ct.toAlphaNumericChar(Math.floor(c/100))),s.append(Ct.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(Ct.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(r.available()<7)throw new F;const c=r.readBits(7);if(c>=100)throw new F;s.append(Ct.toAlphaNumericChar(Math.floor(c/10))),s.append(Ct.toAlphaNumericChar(c%10))}else if(o===1){if(r.available()<4)throw new F;const c=r.readBits(4);if(c>=10)throw new F;s.append(Ct.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new F}}Ct.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ct.GB2312_SUBSET=1;class m0{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class dw{constructor(){this.rsDecoder=new tr(pe.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Oe.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new uw(r);let c=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){c=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new m0(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const o=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=eu.getDataBlocks(u,o,c);let h=0;for(const v of d)h+=v.getNumDataCodewords();const y=new Uint8Array(h);let w=0;for(const v of d){const I=v.getCodewords(),D=v.getNumDataCodewords();this.correctErrors(I,D);for(let L=0;L<D;L++)y[w++]=I[L]}return Ct.decode(y,o,c,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class tu extends ge{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+o)/2;return new tu(c,u,d)}}class Wa{constructor(r,s,o,c,u,d,h){this.image=r,this.startX=s,this.startY=o,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,c=r+o,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let y=0;y<s;y++){const w=u+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let v=r;for(;v<c&&!h.get(v,w);)v++;let I=0;for(;v<c;){if(h.get(v,w))if(I===1)d[1]++;else if(I===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,w,v);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,I=1}else d[++I]++;else I===1&&I++,d[I]++;v++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,w,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=o)return!1;return!0}crossCheckVertical(r,s,o,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let y=r;for(;y>=0&&u.get(s,y)&&h[1]<=o;)h[1]++,y--;if(y<0||h[1]>o)return NaN;for(;y>=0&&!u.get(s,y)&&h[0]<=o;)h[0]++,y--;if(h[0]>o)return NaN;for(y=r+1;y<d&&u.get(s,y)&&h[1]<=o;)h[1]++,y++;if(y===d||h[1]>o)return NaN;for(;y<d&&!u.get(s,y)&&h[2]<=o;)h[2]++,y++;if(h[2]>o)return NaN;const w=h[0]+h[1]+h[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(h)?Wa.centerFromEnd(h,y):NaN}handlePossibleCenter(r,s,o){const c=r[0]+r[1]+r[2],u=Wa.centerFromEnd(r,o),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(h,d,u))return w.combineEstimate(d,u,h);const y=new tu(u,d,h);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class nu extends ge{constructor(r,s,o,c){super(r,s),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+o)/c;return new nu(u,d,h,c)}}class fw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Gt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(z.TRY_HARDER)!==void 0,o=r!=null&&r.get(z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*Gt.MAX_MODULES));(h<Gt.MIN_SKIP||s)&&(h=Gt.MIN_SKIP);let y=!1;const w=new Int32Array(5);for(let I=h-1;I<u&&!y;I+=h){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let D=0;for(let L=0;L<d;L++)if(c.get(L,I))(D&1)===1&&D++,w[D]++;else if(D&1)w[D]++;else if(D===4)if(Gt.foundPatternCross(w)){if(this.handlePossibleCenter(w,I,L,o)===!0)if(h=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const H=this.findRowSkip();H>w[2]&&(I+=H-w[2]-h,L=d-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;continue}D=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;else w[++D]++;Gt.foundPatternCross(w)&&this.handlePossibleCenter(w,I,d,o)===!0&&(h=w[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return ge.orderBestPatterns(v),new fw(v)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const o=s/7,c=o/2;return Math.abs(o-r[0])<c&&Math.abs(o-r[1])<c&&Math.abs(3*o-r[2])<3*c&&Math.abs(o-r[3])<c&&Math.abs(o-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=o;)u[1]++,d++;if(r<d||s<d||u[1]>o)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=o;)u[0]++,d++;if(u[0]>o)return!1;const y=h.getHeight(),w=h.getWidth();for(d=1;r+d<y&&s+d<w&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=y||s+d>=w)return!1;for(;r+d<y&&s+d<w&&!h.get(s+d,r+d)&&u[3]<o;)u[3]++,d++;if(r+d>=y||s+d>=w||u[3]>=o)return!1;for(;r+d<y&&s+d<w&&h.get(s+d,r+d)&&u[4]<o;)u[4]++,d++;if(u[4]>=o)return!1;const v=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(v-c)<2*c&&Gt.foundPatternCross(u)}crossCheckVertical(r,s,o,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let y=r;for(;y>=0&&u.get(s,y);)h[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(s,y)&&h[1]<=o;)h[1]++,y--;if(y<0||h[1]>o)return NaN;for(;y>=0&&u.get(s,y)&&h[0]<=o;)h[0]++,y--;if(h[0]>o)return NaN;for(y=r+1;y<d&&u.get(s,y);)h[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(s,y)&&h[3]<o;)h[3]++,y++;if(y===d||h[3]>=o)return NaN;for(;y<d&&u.get(s,y)&&h[4]<o;)h[4]++,y++;if(h[4]>=o)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=2*c?NaN:Gt.foundPatternCross(h)?Gt.centerFromEnd(h,y):NaN}crossCheckHorizontal(r,s,o,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let y=r;for(;y>=0&&u.get(y,s);)h[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,s)&&h[1]<=o;)h[1]++,y--;if(y<0||h[1]>o)return NaN;for(;y>=0&&u.get(y,s)&&h[0]<=o;)h[0]++,y--;if(h[0]>o)return NaN;for(y=r+1;y<d&&u.get(y,s);)h[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(y,s)&&h[3]<o;)h[3]++,y++;if(y===d||h[3]>=o)return NaN;for(;y<d&&u.get(y,s)&&h[4]<o;)h[4]++,y++;if(h[4]>=o)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=c?NaN:Gt.foundPatternCross(h)?Gt.centerFromEnd(h,y):NaN}handlePossibleCenter(r,s,o,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Gt.centerFromEnd(r,o),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const y=u/7;let w=!1;const v=this.possibleCenters;for(let I=0,D=v.length;I<D;I++){const L=v[I];if(L.aboutEquals(y,h,d)){v[I]=L.combineEstimate(h,d,y),w=!0;break}}if(!w){const I=new nu(d,h,y);v.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Gt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Gt.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/o;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new j;const s=this.possibleCenters;let o;if(r>3){let c=0,u=0;for(const y of this.possibleCenters){const w=y.getEstimatedModuleSize();c+=w,u+=w*w}o=c/r;let d=Math.sqrt(u/r-o*o);s.sort((y,w)=>{const v=Math.abs(w.getEstimatedModuleSize()-o),I=Math.abs(y.getEstimatedModuleSize()-o);return v<I?-1:v>I?1:0});const h=Math.max(.2*o,d);for(let y=0;y<s.length&&s.length>3;y++){const w=s[y];Math.abs(w.getEstimatedModuleSize()-o)>h&&(s.splice(y,1),y--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();o=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-o),y=Math.abs(u.getEstimatedModuleSize()-o);return h<y?1:h>y?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Gt.CENTER_QUORUM=2,Gt.MIN_SKIP=3,Gt.MAX_MODULES=57;class po{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(z.NEED_RESULT_POINT_CALLBACK);const o=new Gt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,o,c);if(u<1)throw new j("No pattern found in proccess finder.");const d=po.computeDimension(s,o,c,u),h=Re.getProvisionalVersionForDimension(d),y=h.getDimensionForVersion()-7;let w=null;if(h.getAlignmentPatternCenters().length>0){const L=o.getX()-s.getX()+c.getX(),W=o.getY()-s.getY()+c.getY(),H=1-3/y,Y=Math.floor(s.getX()+H*(L-s.getX())),K=Math.floor(s.getY()+H*(W-s.getY()));for(let le=4;le<=16;le<<=1)try{w=this.findAlignmentInRegion(u,Y,K,le);break}catch(ce){if(!(ce instanceof j))throw ce}}const v=po.createTransform(s,o,c,w,d),I=po.sampleGrid(this.image,v,d);let D;return w===null?D=[c,s,o]:D=[c,s,o,w],new Vn(I,D)}static createTransform(r,s,o,c,u){const d=u-3.5;let h,y,w,v;return c!==null?(h=c.getX(),y=c.getY(),w=d-3,v=w):(h=s.getX()-r.getX()+o.getX(),y=s.getY()-r.getY()+o.getY(),w=d,v=d),ee.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,w,v,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,y,o.getX(),o.getY())}static sampleGrid(r,s,o){return Xe.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,c){const u=Me.round(ge.distance(r,s)/c),d=Me.round(ge.distance(r,o)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new j("Dimensions could be not found.")}return h}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,o,c),d=1,h=r-(o-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let y=Math.floor(s-(c-s)*d);return d=1,y<0?(d=s/(s-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(y-s),y=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,y),u-1}sizeOfBlackWhiteBlackRun(r,s,o,c){const u=Math.abs(c-s)>Math.abs(o-r);if(u){let L=r;r=s,s=L,L=o,o=c,c=L}const d=Math.abs(o-r),h=Math.abs(c-s);let y=-d/2;const w=r<o?1:-1,v=s<c?1:-1;let I=0;const D=o+w;for(let L=r,W=s;L!==D;L+=w){const H=u?W:L,Y=u?L:W;if(I===1===this.image.get(H,Y)){if(I===2)return Me.distance(L,W,r,s);I++}if(y+=h,y>0){if(W===c)break;W+=v,y-=d}}return I===2?Me.distance(o+w,c,r,s):NaN}findAlignmentInRegion(r,s,o,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new j("Alignment top exceeds estimated module size.");const y=Math.max(0,o-u),w=Math.min(this.image.getHeight()-1,o+u);if(w-y<r*3)throw new j("Alignment bottom exceeds estimated module size.");return new Wa(this.image,d,y,h-d,w-y,r,this.resultPointCallback).find()}}class ri{constructor(){this.decoder=new dw}getDecoder(){return this.decoder}decode(r,s){let o,c;if(s!=null&&s.get(z.PURE_BARCODE)!==void 0){const y=ri.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(y,s),c=ri.NO_POINTS}else{const y=new po(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(y.getBits(),s),c=y.getPoints()}o.getOther()instanceof m0&&o.getOther().applyMirroredCorrection(c);const u=new He(o.getText(),o.getRawBytes(),void 0,c,fe.QR_CODE,void 0),d=o.getByteSegments();d!==null&&u.putMetadata(nt.BYTE_SEGMENTS,d);const h=o.getECLevel();return h!==null&&u.putMetadata(nt.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(u.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(nt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new j;const c=this.moduleSize(s,r);let u=s[1],d=o[1],h=s[0],y=o[0];if(h>=y||u>=d)throw new j;if(d-u!==y-h&&(y=h+(d-u),y>=r.getWidth()))throw new j;const w=Math.round((y-h+1)/c),v=Math.round((d-u+1)/c);if(w<=0||v<=0)throw new j;if(v!==w)throw new j;const I=Math.floor(c/2);u+=I,h+=I;const D=h+Math.floor((w-1)*c)-y;if(D>0){if(D>I)throw new j;h-=D}const L=u+Math.floor((v-1)*c)-d;if(L>0){if(L>I)throw new j;u-=L}const W=new Oe(w,v);for(let H=0;H<v;H++){const Y=u+Math.floor(H*c);for(let K=0;K<w;K++)r.get(h+Math.floor(K*c),Y)&&W.set(K,H)}return W}static moduleSize(r,s){const o=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,y=0;for(;u<c&&d<o;){if(h!==s.get(u,d)){if(++y===5)break;h=!h}u++,d++}if(u===c||d===o)throw new j;return(u-r[0])/7}}ri.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(r){return Me.sum(r)}static toIntArray(r){if(r==null||!r.length)return ke.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const c of r)s[o++]=c;return s}static getCodeword(r){const s=b.binarySearch(ke.SYMBOL_TABLE,r&262143);return s<0?-1:(ke.CODEWORD_TABLE[s]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class hw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ze{static detectMultiple(r,s,o){let c=r.getBlackMatrix(),u=ze.detect(o,c);return u.length||(c=c.clone(),c.rotate180(),u=ze.detect(o,c)),new hw(c,u)}static detect(r,s){const o=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=ze.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const y of o)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=ze.ROW_STEP;continue}if(d=!0,o.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return o}static findVertices(r,s,o){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return ze.copyToResult(d,ze.findRowsWithPattern(r,c,u,s,o,ze.START_PATTERN),ze.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),ze.copyToResult(d,ze.findRowsWithPattern(r,c,u,s,o,ze.STOP_PATTERN),ze.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,o){for(let c=0;c<o.length;c++)r[o[c]]=s[c]}static findRowsWithPattern(r,s,o,c,u,d){const h=new Array(4);let y=!1;const w=new Int32Array(d.length);for(;c<s;c+=ze.ROW_STEP){let I=ze.findGuardPattern(r,u,c,o,!1,d,w);if(I!=null){for(;c>0;){const D=ze.findGuardPattern(r,u,--c,o,!1,d,w);if(D!=null)I=D;else{c++;break}}h[0]=new ge(I[0],c),h[1]=new ge(I[1],c),y=!0;break}}let v=c+1;if(y){let I=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;v<s;v++){const L=ze.findGuardPattern(r,D[0],v,o,!1,d,w);if(L!=null&&Math.abs(D[0]-L[0])<ze.MAX_PATTERN_DRIFT&&Math.abs(D[1]-L[1])<ze.MAX_PATTERN_DRIFT)D=L,I=0;else{if(I>ze.SKIPPED_ROW_COUNT_MAX)break;I++}}v-=I+1,h[2]=new ge(D[0],v),h[3]=new ge(D[1],v)}return v-c<ze.BARCODE_MIN_HEIGHT&&b.fill(h,null),h}static findGuardPattern(r,s,o,c,u,d,h){b.fillWithin(h,0,h.length,0);let y=s,w=0;for(;r.get(y,o)&&y>0&&w++<ze.MAX_PIXEL_DRIFT;)y--;let v=y,I=0,D=d.length;for(let L=u;v<c;v++)if(r.get(v,o)!==L)h[I]++;else{if(I===D-1){if(ze.patternMatchVariance(h,d,ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE)return new Int32Array([y,v]);y+=h[0]+h[1],P.arraycopy(h,2,h,0,I-1),h[I-1]=0,h[I]=0,I--}else I++;h[I]=1,L=!L}return I===D-1&&ze.patternMatchVariance(h,d,ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE?new Int32Array([y,v-1]):null}static patternMatchVariance(r,s,o){let c=r.length,u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return 1/0;let h=u/d;o*=h;let y=0;for(let w=0;w<c;w++){let v=r[w],I=s[w]*h,D=v>I?v-I:I-v;if(D>o)return 1/0;y+=D}return y/u}}ze.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ze.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ze.MAX_AVG_VARIANCE=.42,ze.MAX_INDIVIDUAL_VARIANCE=.8,ze.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ze.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ze.MAX_PIXEL_DRIFT=3,ze.MAX_PATTERN_DRIFT=5,ze.SKIPPED_ROW_COUNT_MAX=25,ze.ROW_STEP=5,ze.BARCODE_MIN_HEIGHT=10;class Qt{constructor(r,s){if(s.length===0)throw new E;this.field=r;let o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),P.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let d=s;s=o,o=d}let c=new Int32Array(o.length),u=o.length-s.length;P.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=this.field.add(s[d-u],o[d]);return new Qt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Qt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Qt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,d=new Int32Array(o+u-1);for(let h=0;h<o;h++){let y=s[h];for(let w=0;w<u;w++)d[h+w]=this.field.add(d[h+w],this.field.multiply(y,c[w]))}return new Qt(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new Qt(this.field,s)}multiplyScalar(r){if(r===0)return new Qt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.multiply(this.coefficients[c],r);return new Qt(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return new Qt(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+r);for(let u=0;u<o;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Qt(this.field,c)}toString(){let r=new Ee;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class gw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}inverse(r){if(r===0)throw new Ge;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class ru extends gw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let c=0;c<r;c++)this.expTable[c]=o,o=o*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Qt(this,new Int32Array([0])),this.one=new Qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new Qt(this,o)}}ru.PDF417_GF=new ru(ke.NUMBER_OF_CODEWORDS,3);class x0{constructor(){this.field=ru.PDF417_GF}decode(r,s,o){let c=new Qt(this.field,r),u=new Int32Array(s),d=!1;for(let W=s;W>0;W--){let H=c.evaluateAt(this.field.exp(W));u[s-W]=H,H!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(o!=null)for(const W of o){let H=this.field.exp(r.length-1-W),Y=new Qt(this.field,new Int32Array([this.field.subtract(0,H),1]));h=h.multiply(Y)}let y=new Qt(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),y,s),v=w[0],I=w[1],D=this.findErrorLocations(v),L=this.findErrorMagnitudes(I,v,D);for(let W=0;W<D.length;W++){let H=r.length-1-this.field.log(D[W]);if(H<0)throw R.getChecksumInstance();r[H]=this.field.subtract(r[H],L[W])}return D.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let D=r;r=s,s=D}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let D=c,L=d;if(c=u,d=h,c.isZero())throw R.getChecksumInstance();u=D;let W=this.field.getZero(),H=c.getCoefficient(c.getDegree()),Y=this.field.inverse(H);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let K=u.getDegree()-c.getDegree(),le=this.field.multiply(u.getCoefficient(u.getDegree()),Y);W=W.add(this.field.buildMonomial(K,le)),u=u.subtract(c.multiplyByMonomial(K,le))}h=W.multiply(d).subtract(L).negative()}let y=h.getCoefficient(0);if(y===0)throw R.getChecksumInstance();let w=this.field.inverse(y),v=h.multiply(w),I=u.multiply(w);return[v,I]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(o[c]=this.field.inverse(u),c++);if(c!==s)throw R.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let d=new Qt(this.field,u),h=o.length,y=new Int32Array(h);for(let w=0;w<h;w++){let v=this.field.inverse(o[w]),I=this.field.subtract(0,r.evaluateAt(v)),D=this.field.inverse(d.evaluateAt(v));y[w]=this.field.multiply(I,D)}return y}}class Ui{constructor(r,s,o,c,u){r instanceof Ui?this.constructor_2(r):this.constructor_1(r,s,o,c,u)}constructor_1(r,s,o,c,u){const d=s==null||o==null,h=c==null||u==null;if(d&&h)throw new j;d?(s=new ge(0,c.getY()),o=new ge(0,u.getY())):h&&(c=new ge(r.getWidth()-1,s.getY()),u=new ge(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Ui(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let y=o?this.topLeft:this.topRight,w=Math.trunc(y.getY()-r);w<0&&(w=0);let v=new ge(y.getX(),w);o?c=v:d=v}if(s>0){let y=o?this.bottomLeft:this.bottomRight,w=Math.trunc(y.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let v=new ge(y.getX(),w);o?u=v:h=v}return new Ui(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class pw{constructor(r,s,o,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class mo{constructor(){this.buffer=""}static form(r,s){let o=-1;function c(d,h,y,w,v,I){if(d==="%%")return"%";if(s[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let D=v?parseInt(v.substr(1)):void 0,L;switch(I){case"s":L=s[o];break;case"c":L=s[o][0];break;case"f":L=parseFloat(s[o]).toFixed(d);break;case"p":L=parseFloat(s[o]).toPrecision(d);break;case"e":L=parseFloat(s[o]).toExponential(d);break;case"x":L=parseInt(s[o]).toString(D||16);break;case"d":L=parseFloat(parseInt(s[o],D||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(D);let W=parseInt(y),H=y&&y[0]+""=="0"?"0":" ";for(;L.length<W;)L=h!==void 0?L+H:H+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=mo.form(r,s)}toString(){return this.buffer}}class xo{constructor(r){this.boundingBox=new Ui(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<xo.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(r)-o;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+o,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new mo;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}xo.MAX_NEARBY_DISTANCE=5;class yo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,c]of this.values.entries()){const u={getKey:()=>o,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return ke.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class y0 extends xo{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,w=1,v=0;for(let I=d;I<h;I++){if(s[I]==null)continue;let D=s[I],L=D.getRowNumber()-y;if(L===0)v++;else if(L===1)w=Math.max(w,v),v=1,y=D.getRowNumber();else if(L<0||D.getRowNumber()>=r.getRowCount()||L>I)s[I]=null;else{let W;w>2?W=(w-2)*L:W=L;let H=W>=I;for(let Y=1;Y<=W&&!H;Y++)H=s[I-Y]!=null;H?s[I]=null:(y=D.getRowNumber(),v=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),y=-1;for(let w=u;w<d;w++){if(h[w]==null)continue;let v=h[w];v.setRowNumberAsRowIndicatorColumn();let I=v.getRowNumber()-y;I===0||(I===1?y=v.getRowNumber():v.getRowNumber()>=r.getRowCount()?h[w]=null:y=v.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new yo,o=new yo,c=new yo,u=new yo;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let y=h.getValue()%30,w=h.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:s.setValue(y+1);break}}if(s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let d=new pw(s.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let c=r[o];if(r[o]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class wo{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ke.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=wo.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=wo.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let c=o[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=o[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=o[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let y of h)if(wo.adjustRowNumber(c,y))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new mo;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[o];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class Co{constructor(r,s,o,c){this.rowNumber=Co.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Co.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Co.BARCODE_ROW_UNKNOWN=-1;class Cn{static initialize(){for(let r=0;r<ke.SYMBOL_TABLE.length;r++){let s=ke.SYMBOL_TABLE[r],o=s&1;for(let c=0;c<ke.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===o;)u+=1,s>>=1;o=s&1,Cn.RATIOS_TABLE[r]||(Cn.RATIOS_TABLE[r]=new Array(ke.BARS_IN_MODULE)),Cn.RATIOS_TABLE[r][ke.BARS_IN_MODULE-c-1]=Math.fround(u/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Cn.getDecodedCodewordValue(Cn.sampleBitCounts(r));return s!==-1?s:Cn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Me.sum(r),o=new Int32Array(ke.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<ke.MODULES_IN_CODEWORD;d++){let h=s/(2*ke.MODULES_IN_CODEWORD)+d*s/ke.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),o[c]++}return o}static getDecodedCodewordValue(r){let s=Cn.getBitValue(r);return ke.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let c=0;c<r[o];c++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Me.sum(r),o=new Array(ke.BARS_IN_MODULE);if(s>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(r[d]/s);let c=Ue.MAX_VALUE,u=-1;this.bSymbolTableReady||Cn.initialize();for(let d=0;d<Cn.RATIOS_TABLE.length;d++){let h=0,y=Cn.RATIOS_TABLE[d];for(let w=0;w<ke.BARS_IN_MODULE;w++){let v=Math.fround(y[w]-o[w]);if(h+=Math.fround(v*v),h>=c)break}h<c&&(c=h,u=ke.SYMBOL_TABLE[d])}return u}}Cn.bSymbolTableReady=!1,Cn.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(T=>new Array(ke.BARS_IN_MODULE));class w0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class C0{static parseLong(r,s=void 0){return parseInt(r,s)}}class E0 extends m{}E0.kind="NullPointerException";class mw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new E0;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new U;if(o===0)return;for(let c=0;c<o;c++)this.write(r[s+c])}flush(){}close(){}}class xw extends m{}class yw extends mw{constructor(r=32){if(super(),this.count=0,r<0)throw new E("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new xw;o=S.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new U;this.ensureCapacity(this.count+o),P.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ot;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ot||(ot={}));function v0(){if(typeof window<"u")return window.BigInt||null;if(typeof So<"u")return So.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ha;function ii(T){if(typeof Ha>"u"&&(Ha=v0()),Ha===null)throw new Error("BigInt is not supported!");return Ha(T)}function ww(){let T=[];T[0]=ii(1);let r=ii(900);T[1]=r;for(let s=2;s<16;s++)T[s]=T[s-1]*r;return T}class Q{static decode(r,s){let o=new Ee(""),c=G.ISO8859_1;o.enableDecoding(c);let u=1,d=r[u++],h=new w0;for(;u<r[0];){switch(d){case Q.TEXT_COMPACTION_MODE_LATCH:u=Q.textCompaction(r,u,o);break;case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:u=Q.byteCompaction(d,r,c,u,o);break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case Q.NUMERIC_COMPACTION_MODE_LATCH:u=Q.numericCompaction(r,u,o);break;case Q.ECI_CHARSET:G.getCharacterSetECIByValue(r[u++]);break;case Q.ECI_GENERAL_PURPOSE:u+=2;break;case Q.ECI_USER_DEFINED:u++;break;case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Q.decodeMacroBlock(r,u,h);break;case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:throw new F;default:u--,u=Q.textCompaction(r,u,o);break}if(u<r.length)d=r[u++];else throw F.getFormatInstance()}if(o.length()===0)throw F.getFormatInstance();let y=new cn(null,o.toString(),null,s);return y.setOther(h),y}static decodeMacroBlock(r,s,o){if(s+Q.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let c=new Int32Array(Q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<Q.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];o.setSegmentIndex(S.parseInt(Q.decodeBase900toBase10(c,Q.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ee;s=Q.textCompaction(r,s,u),o.setFileId(u.toString());let d=-1;for(r[s]===Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Ee;s=Q.textCompaction(r,s+1,h),o.setFileName(h.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new Ee;s=Q.textCompaction(r,s+1,y),o.setSender(y.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new Ee;s=Q.textCompaction(r,s+1,w),o.setAddressee(w.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new Ee;s=Q.numericCompaction(r,s+1,v),o.setSegmentCount(S.parseInt(v.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let I=new Ee;s=Q.numericCompaction(r,s+1,I),o.setTimestamp(C0.parseLong(I.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Ee;s=Q.numericCompaction(r,s+1,D),o.setChecksum(S.parseInt(D.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new Ee;s=Q.numericCompaction(r,s+1,L),o.setFileSize(C0.parseLong(L.toString()));break;default:throw F.getFormatInstance()}break;case Q.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(d!==-1){let h=s-d;o.isLastSegment()&&h--,o.setOptionalData(b.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,o){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let y=r[s++];if(y<Q.TEXT_COMPACTION_MODE_LATCH)c[d]=y/30,c[d+1]=y%30,d+=2;else switch(y){case Q.TEXT_COMPACTION_MODE_LATCH:c[d++]=Q.TEXT_COMPACTION_MODE_LATCH;break;case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=r[s++],u[d]=y,d++;break}}return Q.decodeTextCompaction(c,u,d,o),s}static decodeTextCompaction(r,s,o,c){let u=ot.ALPHA,d=ot.ALPHA,h=0;for(;h<o;){let y=r[h],w="";switch(u){case ot.ALPHA:if(y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case Q.LL:u=ot.LOWER;break;case Q.ML:u=ot.MIXED;break;case Q.PS:d=u,u=ot.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.LOWER:if(y<26)w=String.fromCharCode(97+y);else switch(y){case 26:w=" ";break;case Q.AS:d=u,u=ot.ALPHA_SHIFT;break;case Q.ML:u=ot.MIXED;break;case Q.PS:d=u,u=ot.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.MIXED:if(y<Q.PL)w=Q.MIXED_CHARS[y];else switch(y){case Q.PL:u=ot.PUNCT;break;case 26:w=" ";break;case Q.LL:u=ot.LOWER;break;case Q.AL:u=ot.ALPHA;break;case Q.PS:d=u,u=ot.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT:if(y<Q.PAL)w=Q.PUNCT_CHARS[y];else switch(y){case Q.PAL:u=ot.ALPHA;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.ALPHA_SHIFT:if(u=d,y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT_SHIFT:if(u=d,y<Q.PAL)w=Q.PUNCT_CHARS[y];else switch(y){case Q.PAL:u=ot.ALPHA;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case Q.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break}w!==""&&c.append(w),h++}}static byteCompaction(r,s,o,c,u){let d=new yw,h=0,y=0,w=!1;switch(r){case Q.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),I=s[c++];for(;c<s[0]&&!w;)switch(v[h++]=I,y=900*y+I,I=s[c++],I){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)d.write(Number(ii(y)>>ii(8*(5-D))));y=0,h=0}break}c===s[0]&&I<Q.TEXT_COMPACTION_MODE_LATCH&&(v[h++]=I);for(let D=0;D<h;D++)d.write(v[D]);break;case Q.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let D=s[c++];if(D<Q.TEXT_COMPACTION_MODE_LATCH)h++,y=900*y+D;else switch(D){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(h%5===0&&h>0){for(let L=0;L<6;++L)d.write(Number(ii(y)>>ii(8*(5-L))));y=0,h=0}}break}return u.append(we.decode(d.toByteArray(),o)),c}static numericCompaction(r,s,o){let c=0,u=!1,d=new Int32Array(Q.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<Q.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%Q.MAX_NUMERIC_CODEWORDS===0||h===Q.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(o.append(Q.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let o=ii(0);for(let u=0;u<s;u++)o+=Q.EXP900[s-u-1]*ii(r[u]);let c=o.toString();if(c.charAt(0)!=="1")throw new F;return c.substring(1)}}Q.TEXT_COMPACTION_MODE_LATCH=900,Q.BYTE_COMPACTION_MODE_LATCH=901,Q.NUMERIC_COMPACTION_MODE_LATCH=902,Q.BYTE_COMPACTION_MODE_LATCH_6=924,Q.ECI_USER_DEFINED=925,Q.ECI_GENERAL_PURPOSE=926,Q.ECI_CHARSET=927,Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Q.MACRO_PDF417_TERMINATOR=922,Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Q.MAX_NUMERIC_CODEWORDS=15,Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Q.PL=25,Q.LL=27,Q.AS=27,Q.ML=28,Q.AL=28,Q.PS=29,Q.PAL=29,Q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Q.EXP900=v0()?ww():[],Q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class We{constructor(){}static decode(r,s,o,c,u,d,h){let y=new Ui(r,s,o,c,u),w=null,v=null,I;for(let W=!0;;W=!1){if(s!=null&&(w=We.getRowIndicatorColumn(r,y,s,!0,d,h)),c!=null&&(v=We.getRowIndicatorColumn(r,y,c,!1,d,h)),I=We.merge(w,v),I==null)throw j.getNotFoundInstance();let H=I.getBoundingBox();if(W&&H!=null&&(H.getMinY()<y.getMinY()||H.getMaxY()>y.getMaxY()))y=H;else break}I.setBoundingBox(y);let D=I.getBarcodeColumnCount()+1;I.setDetectionResultColumn(0,w),I.setDetectionResultColumn(D,v);let L=w!=null;for(let W=1;W<=D;W++){let H=L?W:D-W;if(I.getDetectionResultColumn(H)!==void 0)continue;let Y;H===0||H===D?Y=new y0(y,H===0):Y=new xo(y),I.setDetectionResultColumn(H,Y);let K=-1,le=K;for(let ce=y.getMinY();ce<=y.getMaxY();ce++){if(K=We.getStartColumn(I,H,ce,L),K<0||K>y.getMaxX()){if(le===-1)continue;K=le}let ie=We.detectCodeword(r,y.getMinX(),y.getMaxX(),L,K,ce,d,h);ie!=null&&(Y.setCodeword(ce,ie),le=K,d=Math.min(d,ie.getWidth()),h=Math.max(h,ie.getWidth()))}}return We.createDecoderResult(I)}static merge(r,s){if(r==null&&s==null)return null;let o=We.getBarcodeMetadata(r,s);if(o==null)return null;let c=Ui.merge(We.adjustBoundingBox(r),We.adjustBoundingBox(s));return new wo(o,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=We.getMax(s),c=0;for(let h of s)if(c+=o-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=o-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,c,u,d){let h=new y0(s,c);for(let y=0;y<2;y++){let w=y===0?1:-1,v=Math.trunc(Math.trunc(o.getX()));for(let I=Math.trunc(Math.trunc(o.getY()));I<=s.getMaxY()&&I>=s.getMinY();I+=w){let D=We.detectCodeword(r,0,r.getWidth(),c,v,I,u,d);D!=null&&(h.setCodeword(I,D),c?v=D.getStartX():v=D.getEndX())}}return h}static adjustCodewordCount(r,s){let o=s[0][1],c=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-We.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>ke.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();o.setValue(u)}else c[0]!==u&&o.setValue(u)}static createDecoderResult(r){let s=We.createBarcodeMatrix(r);We.adjustCodewordCount(r,s);let o=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let y=0;y<r.getBarcodeRowCount();y++)for(let w=0;w<r.getBarcodeColumnCount();w++){let v=s[y][w+1].getValue(),I=y*r.getBarcodeColumnCount()+w;v.length===0?o.push(I):v.length===1?c[I]=v[0]:(d.push(I),u.push(v))}let h=new Array(u.length);for(let y=0;y<h.length;y++)h[y]=u[y];return We.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,ke.toIntArray(o),ke.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,o,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let y=0;y<d.length;y++)s[c[y]]=u[y][d[y]];try{return We.decodeCodewords(s,r,o)}catch(y){if(!(y instanceof R))throw y}if(d.length===0)throw R.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<u[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new yo;let o=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][o].setValue(u.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,c){let u=c?1:-1,d=null;if(We.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(o)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(o),d!=null)return c?d.getStartX():d.getEndX();if(We.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(o)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;We.isValidBarcodeColumn(r,s-u);){s-=u;for(let y of r.getDetectionResultColumn(s).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*h*(y.getEndX()-y.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,c,u,d,h,y){u=We.adjustCodewordStartColumn(r,s,o,c,u,d);let w=We.getModuleBitCount(r,s,o,c,u,d);if(w==null)return null;let v,I=Me.sum(w);if(c)v=u+I;else{for(let W=0;W<w.length/2;W++){let H=w[W];w[W]=w[w.length-1-W],w[w.length-1-W]=H}v=u,u=v-I}if(!We.checkCodewordSkew(I,h,y))return null;let D=Cn.getDecodedValue(w),L=ke.getCodeword(D);return L===-1?null:new Co(u,v,We.getCodewordBucketNumber(D),L)}static getModuleBitCount(r,s,o,c,u,d){let h=u,y=new Int32Array(8),w=0,v=c?1:-1,I=c;for(;(c?h<o:h>=s)&&w<y.length;)r.get(h,d)===I?(y[w]++,h+=v):(w++,I=!I);return w===y.length||h===(c?o:s)&&w===y.length-1?y:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,c,u,d){let h=u,y=c?-1:1;for(let w=0;w<2;w++){for(;(c?h>=s:h<o)&&c===r.get(h,d);){if(Math.abs(u-h)>We.CODEWORD_SKEW_SIZE)return u;h+=y}y=-y,c=!c}return h}static checkCodewordSkew(r,s,o){return s-We.CODEWORD_SKEW_SIZE<=r&&r<=o+We.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw F.getFormatInstance();let c=1<<s+1,u=We.correctErrors(r,o,c);We.verifyCodewordCount(r,c);let d=Q.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(o.length),d}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+We.MAX_ERRORS||o<0||o>We.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return We.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw F.getFormatInstance();let o=r[0];if(o>r.length)throw F.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,c=s.length-1;for(;!((r&1)!==o&&(o=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return We.getCodewordBucketNumber(We.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new mo;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let c=0;c<r[o].length;c++){let u=r[o][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}We.CODEWORD_SKEW_SIZE=2,We.MAX_ERRORS=3,We.MAX_EC_CODEWORDS=512,We.errorCorrection=new x0;class Kt{decode(r,s=null){let o=Kt.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw j.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return Kt.decode(r,s,!0)}catch(o){throw o instanceof F||o instanceof R?j.getNotFoundInstance():o}}static decode(r,s,o){const c=new Array,u=ze.detectMultiple(r,s,o);for(const d of u.getPoints()){const h=We.decode(u.getBits(),d[4],d[5],d[6],d[7],Kt.getMinCodewordWidth(d),Kt.getMaxCodewordWidth(d)),y=new He(h.getText(),h.getRawBytes(),void 0,d,fe.PDF_417);y.putMetadata(nt.ERROR_CORRECTION_LEVEL,h.getECLevel());const w=h.getOther();w!=null&&y.putMetadata(nt.PDF417_EXTRA_METADATA,w),c.push(y)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?S.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(r[0],r[4]),Kt.getMaxWidth(r[6],r[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(r[1],r[5]),Kt.getMaxWidth(r[7],r[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Kt.getMinWidth(r[0],r[4]),Kt.getMinWidth(r[6],r[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(r[1],r[5]),Kt.getMinWidth(r[7],r[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ga extends m{}Ga.kind="ReaderException";class S0{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(z.TRY_HARDER)===!0,o=i(r)?null:r.get(z.POSSIBLE_FORMATS),c=new Array;if(!i(o)){const u=o.some(d=>d===fe.UPC_A||d===fe.UPC_E||d===fe.EAN_13||d===fe.EAN_8||d===fe.CODABAR||d===fe.CODE_39||d===fe.CODE_93||d===fe.CODE_128||d===fe.ITF||d===fe.RSS_14||d===fe.RSS_EXPANDED);u&&!s&&c.push(new fs(r,this.verbose)),o.includes(fe.QR_CODE)&&c.push(new ri),o.includes(fe.DATA_MATRIX)&&c.push(new ni),o.includes(fe.AZTEC)&&c.push(new Z),o.includes(fe.PDF_417)&&c.push(new Kt),u&&s&&c.push(new fs(r,this.verbose))}c.length===0&&(s||c.push(new fs(r,this.verbose)),c.push(new ri),c.push(new ni),c.push(new Z),c.push(new Kt),s&&c.push(new fs(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ga("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof Ga)continue}throw new j("No MultiFormat Readers were able to detect the code.")}}class Cw extends ct{constructor(r=null,s=500){const o=new S0;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Ew extends ct{constructor(r=500){super(new Kt,r)}}class vw extends ct{constructor(r=500){super(new ri,r)}}var iu;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(iu||(iu={}));var Ut=iu;class su{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Ae(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=o.multiply(new Ae(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),o=d}}return s[r]}encode(r,s){if(s===0)throw new E("No error correction bytes");const o=r.length-s;if(o<=0)throw new E("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(o);P.arraycopy(r,0,u,0,o);let d=new Ae(this.field,u);d=d.multiplyByMonomial(s,1);const y=d.divide(c)[1].getCoefficients(),w=s-y.length;for(let v=0;v<w;v++)r[o+v]=0;P.arraycopy(y,0,r,o+w,y.length)}}class Nt{constructor(){}static applyMaskPenaltyRule1(r){return Nt.applyMaskPenaltyRule1Internal(r,!0)+Nt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=o[d];for(let y=0;y<c-1;y++){const w=h[y];w===h[y+1]&&w===o[d+1][y]&&w===o[d+1][y+1]&&s++}}return Nt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const y=o[d];h+6<c&&y[h]===1&&y[h+1]===0&&y[h+2]===1&&y[h+3]===1&&y[h+4]===1&&y[h+5]===0&&y[h+6]===1&&(Nt.isWhiteHorizontal(y,h-4,h)||Nt.isWhiteHorizontal(y,h+7,h+11))&&s++,d+6<u&&o[d][h]===1&&o[d+1][h]===0&&o[d+2][h]===1&&o[d+3][h]===1&&o[d+4][h]===1&&o[d+5][h]===0&&o[d+6][h]===1&&(Nt.isWhiteVertical(o,h,d-4,d)||Nt.isWhiteVertical(o,h,d+7,d+11))&&s++}return s*Nt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let c=s;c<o;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,o,c){o=Math.max(o,0),c=Math.min(c,r.length);for(let u=o;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let y=0;y<u;y++){const w=o[y];for(let v=0;v<c;v++)w[v]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*Nt.N4}static getDataMaskBit(r,s,o){let c,u;switch(r){case 0:c=o+s&1;break;case 1:c=o&1;break;case 2:c=s%3;break;case 3:c=(o+s)%3;break;case 4:c=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:u=o*s,c=(u&1)+u%3;break;case 6:u=o*s,c=(u&1)+u%3&1;break;case 7:u=o*s,c=u%3+(o+s&1)&1;break;default:throw new E("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let y=0,w=-1;for(let v=0;v<u;v++){const I=s?d[h][v]:d[v][h];I===w?y++:(y>=5&&(o+=Nt.N1+(y-5)),y=1,w=I)}y>=5&&(o+=Nt.N1+(y-5))}return o}}Nt.N1=3,Nt.N2=3,Nt.N3=40,Nt.N4=10;class Ya{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let c=0;c!==s;c++)o[c]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)b.fill(s,r)}equals(r){if(!(r instanceof Ya))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,c=this.height;o<c;++o){const u=this.bytes[o],d=s.bytes[o];for(let h=0,y=this.width;h<y;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new Ee;for(let s=0,o=this.height;s<o;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Vi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Ee;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Vi.NUM_MASK_PATTERNS}}Vi.NUM_MASK_PATTERNS=8;class at extends m{}at.kind="WriterException";class _e{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,c,u){_e.clearMatrix(u),_e.embedBasicPatterns(o,u),_e.embedTypeInfo(s,c,u),_e.maybeEmbedVersionInfo(o,u),_e.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){_e.embedPositionDetectionPatternsAndSeparators(s),_e.embedDarkDotAtLeftBottomCorner(s),_e.maybeEmbedPositionAdjustmentPatterns(r,s),_e.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const c=new O;_e.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),y=_e.TYPE_INFO_COORDINATES[u],w=y[0],v=y[1];if(o.setBoolean(w,v,h),u<8){const I=o.getWidth()-u-1,D=8;o.setBoolean(I,D,h)}else{const D=o.getHeight()-7+(u-8);o.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new O;_e.makeVersionInfoBits(r,o);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=o.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,o){let c=0,u=-1,d=o.getWidth()-1,h=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<o.getHeight();){for(let y=0;y<2;++y){const w=d-y;if(!_e.isEmpty(o.get(w,h)))continue;let v;c<r.getSize()?(v=r.get(c),++c):v=!1,s!==255&&Nt.getDataMaskBit(s,w,h)&&(v=!v),o.setBoolean(w,h,v)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new at("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-S.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new E("0 polynomial");const o=_e.findMSBSet(s);for(r<<=o-1;_e.findMSBSet(r)>=o;)r^=s<<_e.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!Vi.isValidMaskPattern(s))throw new at("Invalid mask pattern");const c=r.getBits()<<3|s;o.appendBits(c,5);const u=_e.calculateBCHCode(c,_e.TYPE_INFO_POLY);o.appendBits(u,10);const d=new O;if(d.appendBits(_e.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new at("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=_e.calculateBCHCode(r.getVersionNumber(),_e.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new at("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;_e.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),_e.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new at;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let c=0;c<8;++c){if(!_e.isEmpty(o.get(r+c,s)))throw new at;o.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let c=0;c<7;++c){if(!_e.isEmpty(o.get(r,s+c)))throw new at;o.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let c=0;c<5;++c){const u=_e.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)o.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,o){for(let c=0;c<7;++c){const u=_e.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)o.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=_e.POSITION_DETECTION_PATTERN[0].length;_e.embedPositionDetectionPattern(0,0,r),_e.embedPositionDetectionPattern(r.getWidth()-s,0,r),_e.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;_e.embedHorizontalSeparationPattern(0,o-1,r),_e.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),_e.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const c=7;_e.embedVerticalSeparationPattern(c,0,r),_e.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),_e.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,c=_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let y=0;y!==d;y++){const w=c[y];w>=0&&_e.isEmpty(s.get(w,h))&&_e.embedPositionAdjustmentPattern(w-2,h-2,s)}}}}_e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_e.VERSION_INFO_POLY=7973,_e.TYPE_INFO_POLY=1335,_e.TYPE_INFO_MASK_PATTERN=21522;class Sw{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ht{constructor(){}static calculateMaskPenalty(r){return Nt.applyMaskPenaltyRule1(r)+Nt.applyMaskPenaltyRule2(r)+Nt.applyMaskPenaltyRule3(r)+Nt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let c=ht.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(Ut.CHARACTER_SET)!==void 0;u&&(c=o.get(Ut.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new O;if(d===De.BYTE&&(u||ht.DEFAULT_BYTE_MODE_ENCODING!==c)){const ce=G.getCharacterSetECIByName(c);ce!==void 0&&this.appendECI(ce,h)}this.appendModeInfo(d,h);const y=new O;this.appendBytes(r,d,y,c);let w;if(o!==null&&o.get(Ut.QR_VERSION)!==void 0){const ce=Number.parseInt(o.get(Ut.QR_VERSION).toString(),10);w=Re.getVersionForNumber(ce);const ie=this.calculateBitsNeeded(d,h,y,w);if(!this.willFit(ie,w,s))throw new at("Data too big for requested version")}else w=this.recommendVersion(s,d,h,y);const v=new O;v.appendBitArray(h);const I=d===De.BYTE?y.getSizeInBytes():r.length;this.appendLengthInfo(I,w,d,v),v.appendBitArray(y);const D=w.getECBlocksForLevel(s),L=w.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(L,v);const W=this.interleaveWithECBytes(v,w.getTotalCodewords(),L,D.getNumBlocks()),H=new Vi;H.setECLevel(s),H.setMode(d),H.setVersion(w);const Y=w.getDimensionForVersion(),K=new Ya(Y,Y),le=this.chooseMaskPattern(W,s,w,K);return H.setMaskPattern(le),_e.buildMatrix(W,s,w,le,K),H.setMatrix(K),H}static recommendVersion(r,s,o,c){const u=this.calculateBitsNeeded(s,o,c,Re.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,o,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,o,c){return s.getSize()+r.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(r){return r<ht.ALPHANUMERIC_TABLE.length?ht.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(G.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return De.KANJI;let o=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(ht.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return De.BYTE}return c?De.ALPHANUMERIC:o?De.NUMERIC:De.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=we.encode(r,G.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,o,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<Vi.NUM_MASK_PATTERNS;h++){_e.buildMatrix(r,s,o,h,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,d=h)}return d}static chooseVersion(r,s){for(let o=1;o<=40;o++){const c=Re.getVersionForNumber(o);if(ht.willFit(r,c,s))return c}throw new at("Data too big")}static willFit(r,s,o){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(o).getTotalECCodewords(),h=c-d,y=(r+7)/8;return h>=y}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new at("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let d=0;d<4&&s.getSize()<o;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==o)throw new at("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,c,u,d){if(c>=o)throw new at("Block ID too large");const h=r%o,y=o-h,w=Math.floor(r/o),v=w+1,I=Math.floor(s/o),D=I+1,L=w-I,W=v-D;if(L!==W)throw new at("EC bytes mismatch");if(o!==y+h)throw new at("RS blocks mismatch");if(r!==(I+L)*y+(D+W)*h)throw new at("Total bytes mismatch");c<y?(u[0]=I,d[0]=L):(u[0]=D,d[0]=W)}static interleaveWithECBytes(r,s,o,c){if(r.getSizeInBytes()!==o)throw new at("Number of bits and data bytes does not match");let u=0,d=0,h=0;const y=new Array;for(let v=0;v<c;++v){const I=new Int32Array(1),D=new Int32Array(1);ht.getNumDataBytesAndNumECBytesForBlockID(s,o,c,v,I,D);const L=I[0],W=new Uint8Array(L);r.toBytes(8*u,W,0,L);const H=ht.generateECBytes(W,D[0]);y.push(new Sw(W,H)),d=Math.max(d,L),h=Math.max(h,H.length),u+=I[0]}if(o!==u)throw new at("Data bytes does not match offset");const w=new O;for(let v=0;v<d;++v)for(const I of y){const D=I.getDataBytes();v<D.length&&w.appendBits(D[v],8)}for(let v=0;v<h;++v)for(const I of y){const D=I.getErrorCorrectionBytes();v<D.length&&w.appendBits(D[v],8)}if(s!==w.getSizeInBytes())throw new at("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const o=r.length,c=new Int32Array(o+s);for(let d=0;d<o;d++)c[d]=r[d]&255;new su(pe.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[o+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,c){const u=o.getCharacterCountBits(s);if(r>=1<<u)throw new at(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,o,c){switch(s){case De.NUMERIC:ht.appendNumericBytes(r,o);break;case De.ALPHANUMERIC:ht.appendAlphanumericBytes(r,o);break;case De.BYTE:ht.append8BitBytes(r,o,c);break;case De.KANJI:ht.appendKanjiBytes(r,o);break;default:throw new at("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ht.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=ht.getDigit(r.charAt(c));if(c+2<o){const d=ht.getDigit(r.charAt(c+1)),h=ht.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<o){const d=ht.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=ht.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new at;if(c+1<o){const d=ht.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new at;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,o){let c;try{c=we.encode(r,o)}catch(u){throw new at(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let o;try{o=we.encode(r,G.SJIS)}catch(u){throw new at(u)}const c=o.length;for(let u=0;u<c;u+=2){const d=o[u]&255,h=o[u+1]&255,y=d<<8&4294967295|h;let w=-1;if(y>=33088&&y<=40956?w=y-33088:y>=57408&&y<=60351&&(w=y-49472),w===-1)throw new at("Invalid byte sequence");const v=(w>>8)*192+(w&255);s.appendBits(v,13)}}static appendECI(r,s){s.appendBits(De.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ht.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class zi{write(r,s,o,c=null){if(r.length===0)throw new E("Found empty contents");if(s<0||o<0)throw new E("Requested dimensions are too small: "+s+"x"+o);let u=ut.L,d=zi.QUIET_ZONE_SIZE;c!==null&&(c.get(Ut.ERROR_CORRECTION)!==void 0&&(u=ut.fromString(c.get(Ut.ERROR_CORRECTION).toString())),c.get(Ut.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Ut.MARGIN).toString(),10)));const h=ht.encode(r,u,c);return this.renderResult(h,s,o,d)}writeToDom(r,s,o,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,o,c,u);r&&r.appendChild(d)}renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new Ot;const d=u.getWidth(),h=u.getHeight(),y=d+c*2,w=h+c*2,v=Math.max(s,y),I=Math.max(o,w),D=Math.min(Math.floor(v/y),Math.floor(I/w)),L=Math.floor((v-d*D)/2),W=Math.floor((I-h*D)/2),H=this.createSVGElement(v,I);for(let Y=0,K=W;Y<h;Y++,K+=D)for(let le=0,ce=L;le<d;le++,ce+=D)if(u.get(le,Y)===1){const ie=this.createSvgRectElement(ce,K,D,D);H.appendChild(ie)}return H}createSVGElement(r,s){const o=document.createElementNS(zi.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,c){const u=document.createElementNS(zi.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}zi.QUIET_ZONE_SIZE=4,zi.SVG_NS="http://www.w3.org/2000/svg";class gs{encode(r,s,o,c,u){if(r.length===0)throw new E("Found empty contents");if(s!==fe.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(o<0||c<0)throw new E(`Requested dimensions are too small: ${o}x${c}`);let d=ut.L,h=gs.QUIET_ZONE_SIZE;u!==null&&(u.get(Ut.ERROR_CORRECTION)!==void 0&&(d=ut.fromString(u.get(Ut.ERROR_CORRECTION).toString())),u.get(Ut.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Ut.MARGIN).toString(),10)));const y=ht.encode(r,d,u);return gs.renderResult(y,o,c,h)}static renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new Ot;const d=u.getWidth(),h=u.getHeight(),y=d+c*2,w=h+c*2,v=Math.max(s,y),I=Math.max(o,w),D=Math.min(Math.floor(v/y),Math.floor(I/w)),L=Math.floor((v-d*D)/2),W=Math.floor((I-h*D)/2),H=new Oe(v,I);for(let Y=0,K=W;Y<h;Y++,K+=D)for(let le=0,ce=L;le<d;le++,ce+=D)u.get(le,Y)===1&&H.setRegion(ce,K,D,D);return H}}gs.QUIET_ZONE_SIZE=4;class Aw{encode(r,s,o,c,u){let d;switch(s){case fe.QR_CODE:d=new gs;break;default:throw new E("No encoder available for format "+s)}return d.encode(r,s,o,c,u)}}class wr extends J{constructor(r,s,o,c,u,d,h,y){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=c,this.top=u,c+d>s||u+h>o)throw new E("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.yuvData,u,c,0,o),c;for(let d=0;d<s;d++){const h=d*r;P.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,c,!1)}renderThumbnail(){const r=this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let y=0;y<r;y++){const w=c[u+y*wr.THUMBNAIL_SCALE_FACTOR]&255;o[h+y]=4278190080|w*65793}u+=this.dataWidth*wr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,y=u+r-1;h<d;h++,y--){const w=o[h];o[h]=o[y],o[y]=w}}}invert(){return new he(this)}}wr.THUMBNAIL_SCALE_FACTOR=2;class ou extends J{constructor(r,s,o,c,u,d,h){if(super(s,o),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const y=s*o,w=new Uint8ClampedArray(y);for(let v=0;v<y;v++){const I=r[v],D=I>>16&255,L=I>>7&510,W=I&255;w[v]=(D+L+W)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.luminances,u,c,0,o),c;for(let d=0;d<s;d++){const h=d*r;P.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new ou(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new he(this)}}class A0 extends G{static forName(r){return this.getCharacterSetECIByName(r)}}class au{}au.ISO_8859_1=G.ISO8859_1;class T0{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class I0{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Tw{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ps extends Tw{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ps(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ps(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+S.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class lu extends ps{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new lu(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Iw(T,r,s){return new lu(T,r,s)}function Eo(T,r,s){return new ps(T,r,s)}const bw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],si=0,Xa=1,Gn=2,b0=3,Cr=4,Nw=new ps(null,0,0),cu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Rw(T){for(let r of T)b.fill(r,-1);return T[si][Cr]=0,T[Xa][Cr]=0,T[Xa][si]=28,T[b0][Cr]=0,T[Gn][Cr]=0,T[Gn][si]=15,T}const N0=Rw(b.createInt32Array(6,6));class Er{constructor(r,s,o,c){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,c=this.token;if(r!==this.mode){let d=cu[this.mode][r];c=Eo(c,d&65535,d>>16),o+=d>>16}let u=r===Gn?4:5;return c=Eo(c,s,u),new Er(c,r,0,o+u)}shiftAndAppend(r,s){let o=this.token,c=this.mode===Gn?4:5;return o=Eo(o,N0[this.mode][r],c),o=Eo(o,s,5),new Er(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,c=this.bitCount;if(this.mode===Cr||this.mode===Gn){let h=cu[o][si];s=Eo(s,h&65535,h>>16),c+=h>>16,o=si}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Er(s,o,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2047+31&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Iw(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Er(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(cu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Er.calculateBinaryShiftCost(r)-Er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let o=new O;for(const c of s)c.appendTo(o,r);return o}toString(){return de.format("%s bits=%d bytes=%d",bw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Er.INITIAL_STATE=new Er(Nw,si,0,0);function Mw(T){const r=de.getCharCode(" "),s=de.getCharCode("."),o=de.getCharCode(",");T[si][r]=1;const c=de.getCharCode("Z"),u=de.getCharCode("A");for(let D=u;D<=c;D++)T[si][D]=D-u+2;T[Xa][r]=1;const d=de.getCharCode("z"),h=de.getCharCode("a");for(let D=h;D<=d;D++)T[Xa][D]=D-h+2;T[Gn][r]=1;const y=de.getCharCode("9"),w=de.getCharCode("0");for(let D=w;D<=y;D++)T[Gn][D]=D-w+2;T[Gn][o]=12,T[Gn][s]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<v.length;D++)T[b0][de.getCharCode(v[D])]=D;const I=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<I.length;D++)de.getCharCode(I[D])>0&&(T[Cr][de.getCharCode(I[D])]=D);return T}const uu=Mw(b.createInt32Array(5,256));class vo{constructor(r){this.text=r}encode(){const r=de.getCharCode(" "),s=de.getCharCode(`
`);let o=I0.singletonList(Er.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case de.getCharCode("\r"):d=h===s?2:0;break;case de.getCharCode("."):d=h===r?3:0;break;case de.getCharCode(","):d=h===r?4:0;break;case de.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(o=vo.updateStateListForPair(o,u,d),u++):o=this.updateStateListForChar(o,u)}return I0.min(o,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let c of r)this.updateStateForChar(c,s,o);return vo.simplifyStates(o)}updateStateForChar(r,s,o){let c=this.text[s]&255,u=uu[r.getMode()][c]>0,d=null;for(let h=0;h<=Cr;h++){let y=uu[h][c];if(y>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===Gn){const w=d.latchAndAppend(h,y);o.push(w)}if(!u&&N0[r.getMode()][h]>=0){const w=d.shiftAndAppend(h,y);o.push(w)}}}if(r.getBinaryShiftByteCount()>0||uu[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(r,s,o){const c=[];for(let u of r)this.updateStateForPair(u,s,o,c);return this.simplifyStates(c)}static updateStateForPair(r,s,o,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(Cr,o)),r.getMode()!==Cr&&c.push(u.shiftAndAppend(Cr,o)),o===3||o===4){let d=u.latchAndAppend(Gn,16-o).latchAndAppend(Gn,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const o of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(o)}return s}}class Je{constructor(){}static encodeBytes(r){return Je.encode(r,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let c=new vo(r).encode(),u=S.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,y,w,v,I;if(o!==Je.DEFAULT_AZTEC_LAYERS){if(h=o<0,y=Math.abs(o),y>(h?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new E(de.format("Illegal value %s for layers",o));w=Je.totalBitsInLayer(y,h),v=Je.WORD_SIZE[y];let ie=w-w%v;if(I=Je.stuffBits(c,v),I.getSize()+u>ie)throw new E("Data to large for user specified layer");if(h&&I.getSize()>v*64)throw new E("Data to large for user specified layer")}else{v=0,I=null;for(let ie=0;;ie++){if(ie>Je.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(h=ie<=3,y=h?ie+1:ie,w=Je.totalBitsInLayer(y,h),d>w)continue;(I==null||v!==Je.WORD_SIZE[y])&&(v=Je.WORD_SIZE[y],I=Je.stuffBits(c,v));let Ke=w-w%v;if(!(h&&I.getSize()>v*64)&&I.getSize()+u<=Ke)break}}let D=Je.generateCheckWords(I,w,v),L=I.getSize()/v,W=Je.generateModeMessage(h,y,L),H=(h?11:14)+y*4,Y=new Int32Array(H),K;if(h){K=H;for(let ie=0;ie<Y.length;ie++)Y[ie]=ie}else{K=H+1+2*S.truncDivision(S.truncDivision(H,2)-1,15);let ie=S.truncDivision(H,2),Ke=S.truncDivision(K,2);for(let Ve=0;Ve<ie;Ve++){let En=Ve+S.truncDivision(Ve,15);Y[ie-Ve-1]=Ke-En-1,Y[ie+Ve]=Ke+En+1}}let le=new Oe(K);for(let ie=0,Ke=0;ie<y;ie++){let Ve=(y-ie)*4+(h?9:12);for(let En=0;En<Ve;En++){let rr=En*2;for(let vn=0;vn<2;vn++)D.get(Ke+rr+vn)&&le.set(Y[ie*2+vn],Y[ie*2+En]),D.get(Ke+Ve*2+rr+vn)&&le.set(Y[ie*2+En],Y[H-1-ie*2-vn]),D.get(Ke+Ve*4+rr+vn)&&le.set(Y[H-1-ie*2-vn],Y[H-1-ie*2-En]),D.get(Ke+Ve*6+rr+vn)&&le.set(Y[H-1-ie*2-En],Y[ie*2+vn])}Ke+=Ve*8}if(Je.drawModeMessage(le,h,K,W),h)Je.drawBullsEye(le,S.truncDivision(K,2),5);else{Je.drawBullsEye(le,S.truncDivision(K,2),7);for(let ie=0,Ke=0;ie<S.truncDivision(H,2)-1;ie+=15,Ke+=16)for(let Ve=S.truncDivision(K,2)&1;Ve<K;Ve+=2)le.set(S.truncDivision(K,2)-Ke,Ve),le.set(S.truncDivision(K,2)+Ke,Ve),le.set(Ve,S.truncDivision(K,2)-Ke),le.set(Ve,S.truncDivision(K,2)+Ke)}let ce=new T0;return ce.setCompact(h),ce.setSize(K),ce.setLayers(y),ce.setCodeWords(L),ce.setMatrix(le),ce}static drawBullsEye(r,s,o){for(let c=0;c<o;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let c=new O;return r?(c.appendBits(s-1,2),c.appendBits(o-1,6),c=Je.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(o-1,11),c=Je.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,o,c){let u=S.truncDivision(o,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+S.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,o){let c=r.getSize()/o,u=new su(Je.getGF(o)),d=S.truncDivision(s,o),h=Je.bitsToWords(r,o,d);u.encode(h,d-c);let y=s%o,w=new O;w.appendBits(0,y);for(const v of Array.from(h))w.appendBits(v,o);return w}static bitsToWords(r,s,o){let c=new Int32Array(o),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let y=0;y<s;y++)h|=r.get(u*s+y)?1<<s-y-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new E("Unsupported word size "+r)}}static stuffBits(r,s){let o=new O,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let y=0;y<s;y++)(d+y>=c||r.get(d+y))&&(h|=1<<s-1-y);(h&u)===u?(o.appendBits(h&u,s),d--):h&u?o.appendBits(h,s):(o.appendBits(h|1,s),d--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qa{encode(r,s,o,c){return this.encodeWithHints(r,s,o,c,null)}encodeWithHints(r,s,o,c,u){let d=au.ISO_8859_1,h=Je.DEFAULT_EC_PERCENT,y=Je.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ut.CHARACTER_SET)&&(d=A0.forName(u.get(Ut.CHARACTER_SET).toString())),u.has(Ut.ERROR_CORRECTION)&&(h=S.parseInt(u.get(Ut.ERROR_CORRECTION).toString())),u.has(Ut.AZTEC_LAYERS)&&(y=S.parseInt(u.get(Ut.AZTEC_LAYERS).toString()))),Qa.encodeLayers(r,s,o,c,d,h,y)}static encodeLayers(r,s,o,c,u,d,h){if(s!==fe.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let y=Je.encode(de.getBytes(r,u),d,h);return Qa.renderResult(y,o,c)}static renderResult(r,s,o){let c=r.getMatrix();if(c==null)throw new Ot;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),y=Math.max(o,d),w=Math.min(h/u,y/d),v=(h-u*w)/2,I=(y-d*w)/2,D=new Oe(h,y);for(let L=0,W=I;L<d;L++,W+=w)for(let H=0,Y=v;H<u;H++,Y+=w)c.get(H,L)&&D.setRegion(Y,W,w,w);return D}}n.AbstractExpandedDecoder=Kc,n.ArgumentException=C,n.ArithmeticException=Ge,n.AztecCode=T0,n.AztecCodeReader=Z,n.AztecCodeWriter=Qa,n.AztecDecoder=Te,n.AztecDetector=ft,n.AztecDetectorResult=ki,n.AztecEncoder=Je,n.AztecHighLevelEncoder=vo,n.AztecPoint=Pe,n.BarcodeFormat=fe,n.Binarizer=_,n.BinaryBitmap=A,n.BitArray=O,n.BitMatrix=Oe,n.BitSource=Jc,n.BrowserAztecCodeReader=re,n.BrowserBarcodeReader=aw,n.BrowserCodeReader=ct,n.BrowserDatamatrixCodeReader=cw,n.BrowserMultiFormatReader=Cw,n.BrowserPDF417Reader=Ew,n.BrowserQRCodeReader=vw,n.BrowserQRCodeSvgWriter=zi,n.CharacterSetECI=G,n.ChecksumException=R,n.Code128Reader=q,n.Code39Reader=be,n.DataMatrixDecodedBitStreamParser=ti,n.DataMatrixReader=ni,n.DecodeHintType=z,n.DecoderResult=cn,n.DefaultGridSampler=Be,n.DetectorResult=Vn,n.EAN13Reader=pr,n.EncodeHintType=Ut,n.Exception=m,n.FormatException=F,n.GenericGF=pe,n.GenericGFPoly=Ae,n.GlobalHistogramBinarizer=$,n.GridSampler=$r,n.GridSamplerInstance=Xe,n.HTMLCanvasElementLuminanceSource=ue,n.HybridBinarizer=oe,n.ITFReader=Ne,n.IllegalArgumentException=E,n.IllegalStateException=Ot,n.InvertedLuminanceSource=he,n.LuminanceSource=J,n.MathUtils=Me,n.MultiFormatOneDReader=fs,n.MultiFormatReader=S0,n.MultiFormatWriter=Aw,n.NotFoundException=j,n.OneDReader=me,n.PDF417DecodedBitStreamParser=Q,n.PDF417DecoderErrorCorrection=x0,n.PDF417Reader=Kt,n.PDF417ResultMetadata=w0,n.PerspectiveTransform=ee,n.PlanarYUVLuminanceSource=wr,n.QRCodeByteMatrix=Ya,n.QRCodeDataMask=Wn,n.QRCodeDecodedBitStreamParser=Ct,n.QRCodeDecoderErrorCorrectionLevel=ut,n.QRCodeDecoderFormatInformation=tn,n.QRCodeEncoder=ht,n.QRCodeEncoderQRCode=Vi,n.QRCodeMaskUtil=Nt,n.QRCodeMatrixUtil=_e,n.QRCodeMode=De,n.QRCodeReader=ri,n.QRCodeVersion=Re,n.QRCodeWriter=gs,n.RGBLuminanceSource=ou,n.RSS14Reader=bt,n.RSSExpandedReader=ne,n.ReaderException=Ga,n.ReedSolomonDecoder=tr,n.ReedSolomonEncoder=su,n.ReedSolomonException=_t,n.Result=He,n.ResultMetadataType=nt,n.ResultPoint=ge,n.StringUtils=de,n.UnsupportedOperationException=te,n.VideoInputDevice=Le,n.WhiteRectangleDetector=mn,n.WriterException=at,n.ZXingArrays=b,n.ZXingCharset=A0,n.ZXingInteger=S,n.ZXingStandardCharsets=au,n.ZXingStringBuilder=Ee,n.ZXingStringEncoding=we,n.ZXingSystem=P,n.createAbstractExpandedDecoder=p0,Object.defineProperty(n,"__esModule",{value:!0})})})(Sf,Sf.exports);var pt=Sf.exports;const NI=Tp(pt),RI=Ow({__proto__:null,default:NI},[pt]);var fp=function(){function e(t,n,i){if(this.formatMap=new Map([[ye.QR_CODE,pt.BarcodeFormat.QR_CODE],[ye.AZTEC,pt.BarcodeFormat.AZTEC],[ye.CODABAR,pt.BarcodeFormat.CODABAR],[ye.CODE_39,pt.BarcodeFormat.CODE_39],[ye.CODE_93,pt.BarcodeFormat.CODE_93],[ye.CODE_128,pt.BarcodeFormat.CODE_128],[ye.DATA_MATRIX,pt.BarcodeFormat.DATA_MATRIX],[ye.MAXICODE,pt.BarcodeFormat.MAXICODE],[ye.ITF,pt.BarcodeFormat.ITF],[ye.EAN_13,pt.BarcodeFormat.EAN_13],[ye.EAN_8,pt.BarcodeFormat.EAN_8],[ye.PDF_417,pt.BarcodeFormat.PDF_417],[ye.RSS_14,pt.BarcodeFormat.RSS_14],[ye.RSS_EXPANDED,pt.BarcodeFormat.RSS_EXPANDED],[ye.UPC_A,pt.BarcodeFormat.UPC_A],[ye.UPC_E,pt.BarcodeFormat.UPC_E],[ye.UPC_EAN_EXTENSION,pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!RI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),l=new Map;l.set(pt.DecodeHintType.POSSIBLE_FORMATS,a),l.set(pt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(l){a(l)}})},e.prototype.decode=function(t){var n=new pt.MultiFormatReader(this.verbose,this.hints),i=new pt.HTMLCanvasElementLuminanceSource(t),a=new pt.BinaryBitmap(new pt.HybridBinarizer(i)),l=n.decode(a);return{text:l.text,format:Xy.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),MI=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},DI=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},hp=function(){function e(t,n,i){if(this.formatMap=new Map([[ye.QR_CODE,"qr_code"],[ye.AZTEC,"aztec"],[ye.CODABAR,"codabar"],[ye.CODE_39,"code_39"],[ye.CODE_93,"code_93"],[ye.CODE_128,"code_128"],[ye.DATA_MATRIX,"data_matrix"],[ye.ITF,"itf"],[ye.EAN_13,"ean_13"],[ye.EAN_8,"ean_8"],[ye.PDF_417,"pdf417"],[ye.UPC_A,"upc_a"],[ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return MI(this,void 0,void 0,function(){var n,i;return DI(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Xy.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,l=t;a<l.length;a++){var f=l[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),gp=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},pp=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},_I=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&hp.isSupported()?(this.primaryDecoder=new hp(t,i,a),this.secondaryDecoder=new fp(t,i,a)):this.primaryDecoder=new fp(t,i,a)}return e.prototype.decodeAsync=function(t){return gp(this,void 0,void 0,function(){var n;return pp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return gp(this,void 0,void 0,function(){var n,i;return pp(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),h0=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),mc=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},xc=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},$y=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),OI=function(e){h0(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}($y),PI=function(e){h0(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(OI),kI=function(e){h0(t,e);function t(n){return e.call(this,"torch",n)||this}return t}($y),LI=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new PI(this.track)},e.prototype.torchFeature=function(){return new kI(this.track)},e}(),BI=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return mc(this,void 0,void 0,function(){var l,f;return xc(this,function(g){switch(g.label){case 0:return l=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return mc(this,void 0,void 0,function(){return xc(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),l=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new LI(this.getFirstTrackOrFail())},e}(),jI=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return mc(this,void 0,void 0,function(){return xc(this,function(a){return[2,BI.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return mc(this,void 0,void 0,function(){var n,i;return xc(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),mp=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},xp=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},FI=function(){function e(){}return e.failIfNotSupported=function(){return mp(this,void 0,void 0,function(){return xp(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return mp(this,void 0,void 0,function(){return xp(this,function(n){return[2,jI.create(t)]})})},e}(),UI=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},VI=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},zI=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ls.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ls.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return UI(this,void 0,void 0,function(){var t,n,i,a,l,f,g;return VI(this,function(p){switch(p.label){case 0:return t=function(m){for(var C=m.getVideoTracks(),E=0,A=C;E<A.length;E++){var R=A[E];R.enabled=!1,R.stop(),m.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=p.sent(),a=[],l=0,f=i;l<f.length;l++)g=f[l],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(l){for(var f=[],g=0,p=l;g<p.length;g++){var m=p[g];m.kind==="video"&&f.push({id:m.id,label:m.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),Rt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Rt||(Rt={}));var WI=function(){function e(){this.state=Rt.NOT_STARTED,this.onGoingTransactionNewState=Rt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Rt.UNKNOWN:throw"Transition from unknown is not allowed";case Rt.NOT_STARTED:this.failIfNewStateIs(t,[Rt.PAUSED]);break;case Rt.SCANNING:break;case Rt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var l=a[i];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),HI=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Rt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Rt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Rt.PAUSED},e}(),GI=function(){function e(){}return e.create=function(){return new HI(new WI)},e}(),YI=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Dn=function(e){YI(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(lr),XI=function(){function e(t,n){this.logger=n,this.fps=Dn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Dn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Zy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ar(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),yp=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Ky(this.verbose),this.qrcode=new _I(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=GI.create()}return e.prototype.start=function(t,n,i,a){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=XI.create(n,this.logger);this.clearElement();var p=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Dn.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var E=this,A=this.stateManagerProxy.startTransition(Rt.SCANNING);return new Promise(function(R,_){var P=m?g.videoConstraints:E.createVideoConstraints(t);if(!P){A.cancel(),_("videoConstraints should be defined");return}var U={};(!m||g.aspectRatio)&&(U.aspectRatio=g.aspectRatio);var N={onRenderSurfaceReady:function(b,S){E.setupUi(b,S,g),E.isScanning=!0,E.foreverScan(g,i,f)}};FI.failIfNotSupported().then(function(b){b.create(P).then(function(S){return S.render(l.element,U,N).then(function(O){E.renderedCamera=O,A.execute(),R(null)}).catch(function(O){A.cancel(),_(O)})}).catch(function(S){A.cancel(),_(Ls.errorGettingUserMedia(S))})}).catch(function(b){A.cancel(),_(Ls.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rt.PAUSED),this.showPausedState(),(Ar(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Rt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Rt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var l=document.getElementById(Dn.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ar(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,p=f.height,m=document.getElementById(i.elementId),C=m.clientWidth?m.clientWidth:Dn.DEFAULT_WIDTH,E=Math.max(m.clientHeight?m.clientHeight:p,Dn.FILE_SCAN_MIN_HEIGHT),A=i.computeCanvasDrawConfig(g,p,C,E);if(n){var R=i.createCanvasElement(C,E,"qr-canvas-visible");R.style.display="inline-block",m.appendChild(R);var _=R.getContext("2d");if(!_)throw"Unable to get 2d context from canvas";_.canvas.width=C,_.canvas.height=E,_.drawImage(f,0,0,g,p,A.x,A.y,A.width,A.height)}var P=Dn.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(f.width,A.width),N=Math.max(f.height,A.height),b=U+2*P,S=N+2*P,O=i.createCanvasElement(b,S);m.appendChild(O);var V=O.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=b,V.canvas.height=S,V.drawImage(f,0,0,g,p,P,P,U,N);try{i.qrcode.decodeRobustlyAsync(O).then(function(z){a(up.createFromQrcodeResult(z))}).catch(l)}catch(z){l("QR code parse error, error = ".concat(z))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return zI.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Zy.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[ye.QR_CODE,ye.AZTEC,ye.CODABAR,ye.CODE_39,ye.CODE_93,ye.CODE_128,ye.DATA_MATRIX,ye.MAXICODE,ye.ITF,ye.EAN_13,ye.EAN_8,ye.PDF_417,ye.RSS_14,ye.RSS_EXPANDED,ye.UPC_A,ye.UPC_E,ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,l=t.formatsToSupport;a<l.length;a++){var f=l[a];II(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ar(t))return!0;if(!Ar(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ar(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ar(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(t,n,l),g=function(m){if(m<Dn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Dn.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};g(f.width),g(f.height),f.width=p(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=Ar(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:t,height:n},p=f?this.getShadedRegionBounds(t,n,l):g,m=this.createCanvasElement(p.width,p.height),C={willReadFrequently:!0},E=m.getContext("2d",C);E.canvas.width=p.width,E.canvas.height=p.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=E,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ls.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,up.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var l=Ls.codeParseError(a);return n(l,Qy.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*f,m=this.qrRegion.height*g,C=this.qrRegion.x*f,E=this.qrRegion.y*g;this.context.drawImage(l,C,E,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(R){!R&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){A()})):A()}).catch(function(R){a.logger.logError("Error happend while scanning context",R),A()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},l="exact",f=function(_){if(_ in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(_,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var p=Object.keys(t)[0];if(p!==n&&p!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var m=t.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(f(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var C=typeof m;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(l in E)return{deviceId:{exact:E["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var A=typeof E;throw"Invalid type of 'deviceId' = ".concat(A)}}}var R=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var l=(i-t)/2,f=(a-n)/2;return{x:l,y:f,width:t,height:n}}else{var g=t,p=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(p)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Dn.BORDER_SHADER_MATCH_COLOR:Dn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,l=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Ar(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Dn.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var p=5,m=40;this.insertShaderBorders(l,m,p,-p,null,0,!0),this.insertShaderBorders(l,m,p,-p,null,0,!1),this.insertShaderBorders(l,m,p,null,-p,0,!0),this.insertShaderBorders(l,m,p,null,-p,0,!1),this.insertShaderBorders(l,p,m+p,-p,null,-p,!0),this.insertShaderBorders(l,p,m+p,null,-p,-p,!0),this.insertShaderBorders(l,p,m+p,-p,null,-p,!1),this.insertShaderBorders(l,p,m+p,null,-p,-p,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,i,a,l,f,g){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Dn.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(i,"px"),a!==null&&(p.style.top="".concat(a,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),g?p.style.left="".concat(f,"px"):p.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),g0="data:image/svg+xml;base64,",QI=g0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",KI=g0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",wp=g0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ZI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Cp=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),$I=function(){function e(){this.data=Cp.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Cp.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),qI=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=dp.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=dp.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),JI=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=wp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ZI,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=wp,this.infoIcon.style.opacity="0.6")},e}(),eb=function(){function e(){var t=this;this.infoDiv=new qI,this.infoIcon=new JI(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),tb=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},nb=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Ep=function(){function e(){}return e.hasPermissions=function(){return tb(this,void 0,void 0,function(){var t,n,i,a;return nb(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),ai=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===Qr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Qr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return lr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=lr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var l=a[i];if(!lr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}(),Pn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),jr=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(Pn.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),qy=globalThis&&globalThis.__awaiter||function(e,t,n,i){function a(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(C){try{m(i.next(C))}catch(E){f(E)}}function p(C){try{m(i.throw(C))}catch(E){f(E)}}function m(C){C.done?l(C.value):a(C.value).then(g,p)}m((i=i.apply(e,t||[])).next())})},Jy=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(C){return p([m,C])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],a=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},vp=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return qy(this,void 0,void 0,function(){var t,n;return Jy(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?it.torchOffButton():it.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?it.torchOnFailedMessage():it.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),rb=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=jr.createElement("button",Pn.TORCH_BUTTON_ID),this.torchController=new vp(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=it.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return qy(i,void 0,void 0,function(){return Jy(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(Pn.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(Pn.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(Pn.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(Pn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new vp(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=it.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var l=new e(n,a);return l.render(t,i),l},e}(),ib=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=jr.createElement("button",Pn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=jr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var p=g.target;if(!(p.files&&p.files.length===0)){var m=p.files,C=m[0],E=C.name;l.setImageNameToButton(E),i(C)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var p=g.dataTransfer;if(p){var m=p.files;if(!m||m.length===0)return;for(var C=!1,E=0;E<m.length;++E){var A=m.item(E);if(A){var R=/image.*/;if(A.type.match(R)){C=!0;var _=A.name;l.setImageNameToButton(_),i(A),f.innerText=it.dragAndDropMessage();break}}}C||(f.innerText=it.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=it.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,l=t.substring(a-8,a);t="".concat(i,"....").concat(l)}var f=it.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=it.fileSelectionChooseImage()+" - "+it.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),sb=function(){function e(t){this.selectElement=jr.createElement("select",Pn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=it.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,f=0,g=this.cameras;f<g.length;f++){var p=g[f],m=p.id,C=p.label==null?m:p.label;(!C||C==="")&&(C=[it.anonymousCameraPrefix(),l++].join(" "));var E=document.createElement("option");E.value=m,E.innerText=C,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),ob=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=jr.createElement("input",Pn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=it.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=it.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),_n;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(_n||(_n={}));function ab(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function lb(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var cb=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ai(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ky(this.verbose),this.persistedDataManager=new $I,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(t)t(l,f);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(it.lastMatch(l),_n.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new yp(this.getScanRegionId(),lb(this.config,this.verbose))},e.prototype.pause=function(t){(Ar(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=lr.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!lr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=lr.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=lr.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:lr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:lr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:lr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ai.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new eb;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(it.cameraPermissionRequesting());var l=function(){i||a.createPermissionButton(t,n)};yp.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage(it.noCameraFound(),_n.STATUS_WARNING),l())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),a.setHeaderMessage(f,_n.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=jr.createElement("button",this.getCameraPermissionButtonId());a.innerText=it.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(ai.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Ep.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=ai.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=ai.isFileScanType(this.currentScanType),i=this,a=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";ai.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(it.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,_n.STATUS_WARNING),i.qrCodeErrorCallback(f,Qy.createFrom(f))}))};this.fileSelectionUi=ib.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=ob.create(a,!1),f=function(P){var U=P.zoomFeature();if(U.isSupported()){l.setOnCameraZoomValueChangeCallback(function(b){U.apply(b)});var N=1;n.config.defaultZoomValueIfSupported&&(N=n.config.defaultZoomValueIfSupported),N=bI(N,U.min(),U.max()),l.setValues(U.min(),U.max(),N,U.step()),l.show()}},g=sb.create(a,t),p=document.createElement("span"),m=jr.createElement("button",Pn.CAMERA_START_BUTTON_ID);m.innerText=it.scanButtonStartScanningText(),p.appendChild(m);var C=jr.createElement("button",Pn.CAMERA_STOP_BUTTON_ID);C.innerText=it.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,p.appendChild(C);var E,A=function(P){if(!P.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(P.torchFeature()):E=rb.create(p,P.torchFeature(),{display:"none",marginLeft:"5px"},function(U){i.setHeaderMessage(U,_n.STATUS_WARNING)}),E.show()};a.appendChild(p);var R=function(P){P||(m.style.display="none"),m.innerText=it.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,P&&(m.style.display="inline-block")};if(m.addEventListener("click",function(P){m.innerText=it.scanButtonScanningStarting(),g.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var U=g.getValue();i.persistedDataManager.setLastUsedCameraId(U),i.html5Qrcode.start(U,ab(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(N){C.disabled=!1,C.style.display="inline-block",R(!1);var b=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&A(b),n.config.showZoomSliderIfSupported===!0&&f(b)}).catch(function(N){i.showHideScanTypeSwapLink(!0),g.enable(),R(!0),i.setHeaderMessage(N,_n.STATUS_WARNING)})}),g.hasSingleItem()&&m.click(),C.addEventListener("click",function(P){if(!i.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,i.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),m.disabled=!1,C.style.display="none",m.style.display="inline-block",E&&(E.reset(),E.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(U){C.disabled=!1,i.setHeaderMessage(U,_n.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var _=i.persistedDataManager.getLastUsedCameraId();g.hasValue(_)?(g.setValue(_),m.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=it.textIfCameraScanSelected(),i=it.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=jr.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=ai.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ai.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=Qr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=Qr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(f),a.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Ep.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=_n.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case _n.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case _n.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case _n.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=QI,this.cameraScanImage.alt=it.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=KI,this.fileScanImage.alt=it.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Pn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Pn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function ub(){var ki,mn,$r;const{user:e}=ja(),t=hi(e,Fe.EDIT_WEAPON_STORAGE);M.useEffect(()=>{console.log("=== GunBorrowing Debug ==="),console.log("User:",e),console.log("User Role:",e==null?void 0:e.role),console.log("Is Admin:",e==null?void 0:e.admin),console.log("Can Edit Weapon Storage:",t),console.log("EDIT_WEAPON_STORAGE permission:",Fe.EDIT_WEAPON_STORAGE),console.log("========================")},[e,t]);const[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),[C,E]=M.useState(""),[A,R]=M.useState(!1),[_,P]=M.useState([]),[U,N]=M.useState(""),[b,S]=M.useState(""),[O,V]=M.useState(!1),[z,F]=M.useState([]),[B,G]=M.useState(new Date().toISOString().split("T")[0]);M.useState(!1);const[te,we]=M.useState(!1),[de,Ee]=M.useState(!1),[Oe,j]=M.useState(0),[$,oe]=M.useState(window.innerWidth<=768),[J,he]=M.useState(window.innerWidth>window.innerHeight),[ue,Le]=M.useState(!1),[ve,ct]=M.useState(null);M.useEffect(()=>{const ee=()=>{oe(window.innerWidth<=768),he(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]),M.useEffect(()=>{Ie(),nt()},[]),M.useEffect(()=>()=>{ve&&ve.clear().catch(console.error)},[ve]);const He=async(ee,Be,Xe=3)=>{we(!0),Ee(!1);for(let Pe=1;Pe<=Xe;Pe++)try{const ft=await fetch(ee,{...Be,timeout:1e4});if(!ft.ok)throw new Error(`HTTP ${ft.status}: ${ft.statusText}`);const Z=await ft.json();return we(!1),j(0),{success:!0,data:Z}}catch(ft){if(console.error(`API call attempt ${Pe}:`,ft),Pe===Xe)return we(!1),Ee(!0),j(Pe),{success:!1,error:ft.message,isNetworkError:ft.name==="TypeError"||ft.message.includes("fetch")};await new Promise(Z=>setTimeout(Z,Math.pow(2,Pe)*1e3))}},Bt=async(ee,Be,Xe,Pe)=>{var Z;if(!t)return g(`❌ คุณไม่มีสิทธิ์ในการ${Pe==="borrow"?"เบิก":"คืน"}อาวุธ - เฉพาะดูข้อมูลเท่านั้น`),!1;const ft=await He("/api/gun-borrowing-record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userQRCode:ee,gunQRCode:Be,realname:Xe,action:Pe})});return ft.success?(console.log(`Auto-saved ${Pe} record:`,ft.data),nt(),g(`✅ ${Pe==="borrow"?"เบิก":"คืน"}อาวุธและบันทึกข้อมูลสำเร็จ`),!0):(console.error("Auto-save failed:",ft.error),(Z=ft.data)!=null&&Z.conflictType?fe(ft.data):g(`❌ ไม่สามารถบันทึกข้อมูลได้: ${ft.error}`),!1)},fe=ee=>{switch(ee.conflictType){case"duplicate_borrow":g("⚠️ เบิกปืนนี้ไปแล้ววันนี้");break;case"user_has_other_gun":g(`⚠️ คุณเบิกปืน ${ee.existingRecord.gunQRCode} ไว้แล้ว`);break;case"gun_borrowed_by_other":g(`⚠️ ปืนนี้ถูก ${ee.existingRecord.realname} เบิกไว้แล้ว`);break;default:g("⚠️ ข้อมูลซ้ำซ้อน")}},Ie=async()=>{try{const ee=localStorage.getItem("token"),Xe=await(await fetch("/api/public-gun",{headers:{Authorization:`Bearer ${ee}`}})).json();Xe.success!==!1?P(Xe):S(Xe.message||"ไม่สามารถโหลดข้อมูลปืนสาธารณะ")}catch{S("ไม่สามารถโหลดข้อมูลปืนสาธารณะ")}},nt=async()=>{try{const ee=localStorage.getItem("token"),Xe=await(await fetch(`/api/gun-borrowing-record?date=${B}`,{headers:{Authorization:`Bearer ${ee}`}})).json();Xe.success&&F(Xe.data)}catch(ee){console.error("Failed to fetch records:",ee)}},cn=async ee=>{try{const Be=localStorage.getItem("token"),Pe=await(await fetch(`/api/gun-borrowing-record?date=${ee}`,{headers:{Authorization:`Bearer ${Be}`}})).json();Pe.success&&(F(Pe.data),G(ee))}catch(Be){console.error("Failed to load records:",Be)}},Se=async ee=>{if(window.confirm(`ต้องการลบข้อมูลนี้หรือไม่?

⚠️ การลบจะไม่สามารถกู้คืนได้`))try{(await(await fetch("/api/gun-borrowing-record",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({recordId:ee})})).json()).success?(g("✅ ลบข้อมูลสำเร็จ"),cn(B)):g("❌ ลบข้อมูลไม่สำเร็จ")}catch(Be){console.error("Failed to delete record:",Be),g("❌ เกิดข้อผิดพลาดในการลบข้อมูล")}},Ae=async()=>{const ee=`ต้องการลบข้อมูลทั้งหมดในวันที่ ${B} หรือไม่?

จำนวนข้อมูลที่จะถูกลบ: ${z.all.length} รายการ

⚠️ การลบจะไม่สามารถกู้คืนได้`;if(window.confirm(ee))try{const Xe=await(await fetch("/api/gun-borrowing-record",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:B})})).json();Xe.success?(g(`✅ ลบข้อมูลทั้งหมดในวันที่ ${B} สำเร็จ (${Xe.deletedCount||0} รายการ)`),cn(B)):g("❌ ลบข้อมูลไม่สำเร็จ")}catch(Be){console.error("Failed to delete all records:",Be),g("❌ เกิดข้อผิดพลาดในการลบข้อมูล")}},Ge=async ee=>{if(ee.preventDefault(),!!U){if(!t){S("❌ คุณไม่มีสิทธิ์เพิ่มปืน - เฉพาะดูข้อมูลเท่านั้น");return}try{(await fetch("/api/public-gun",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gunQRCode:U})})).ok?(N(""),S("เพิ่มปืนสำเร็จ"),Ie()):S("เพิ่มปืนไม่สำเร็จ")}catch{S("เกิดข้อผิดพลาด")}}},pe=async ee=>{if(!t){S("❌ คุณไม่มีสิทธิ์ลบปืน - เฉพาะดูข้อมูลเท่านั้น");return}if(window.confirm(`ลบปืน ${ee} ?`))try{(await fetch("/api/public-gun",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({gunQRCode:ee})})).ok?(S("ลบปืนสำเร็จ"),Ie()):S("ลบปืนไม่สำเร็จ")}catch{S("เกิดข้อผิดพลาด")}},_t=ee=>{ee.preventDefault(),p&&C?(i(p),l(C),g("กรอกข้อมูล QR Code สำเร็จ"),m(""),E("")):g("กรุณากรอกข้อมูลให้ครบ")},Ot=async ee=>{console.log("Scanned QR Code:",ee);const Be=await tr(ee);if(console.log("Detection result - Is User QR:",Be),console.log(`🎯 Detected: ${ee} = ${Be?"User":"Gun"} QR`),Be&&!n)i(ee),g(`✅ ตรวจจับ User QR: ${ee}`);else if(!Be&&!a){const Pe=ee.replace(/^(GUN-|WEAPON-|W-|G-|gun-|Gun-|RIFLE-|rifle-)/i,"");l(Pe),g(`✅ ตรวจจับ Gun QR: ${ee} (บันทึกเป็น: ${Pe})`)}else if(Be&&n)n===ee?g(`⚠️ User QR [${ee}] สแกนไปแล้ว`):(g(`⚠️ เปลี่ยน User QR: ${n} → ${ee}`),i(ee));else if(!Be&&a){const Pe=ee.replace(/^(GUN-|WEAPON-|W-|G-|gun-|Gun-|RIFLE-|rifle-)/i,"");a===Pe?g(`⚠️ Gun QR [${ee}] สแกนไปแล้ว`):(g(`⚠️ เปลี่ยน Gun QR: ${a} → ${Pe}`),l(Pe))}},tr=async ee=>{console.log("Checking QR Code from database:",ee);try{const Xe=await(await fetch(`/api/check-user-qr?qr=${encodeURIComponent(ee)}`)).json();return Xe.success?Xe.isUser?(console.log("Detected as User QR from database:",Xe.userInfo),!0):(console.log("QR not found in user database, checking patterns"),se(ee)):(console.log("Database check failed, using pattern matching"),se(ee))}catch(Be){return console.error("Error checking QR code:",Be),console.log("Database unavailable, using pattern matching"),se(ee)}},se=ee=>(console.log("Checking pattern for QR:",ee),/^(GUN-|WEAPON-|W-|G-|gun-|Gun-|RIFLE-|rifle-)/i.test(ee)?(console.log("Pattern: Detected as Gun QR - has gun prefix"),!1):/^[0-9]{1,3}[-_][0-9]+$/.test(ee)||/^[A-Z][0-9]{3,6}$/.test(ee)?(console.log("Pattern: Detected as Gun QR - serial number format"),!1):/^\d+$/.test(ee)?ee.length>=3?(console.log("Pattern: Detected as User QR - numeric user ID"),!0):(console.log("Pattern: Detected as Gun QR - too short for user ID"),!1):/^[A-Za-z][0-9]+$/.test(ee)?(console.log("Pattern: Detected as User QR - alphanumeric user ID"),!0):/[^A-Za-z0-9]/.test(ee)&&!/^[A-Za-z0-9]+$/.test(ee)?(console.log("Pattern: Detected as Gun QR - contains special characters"),!1):ee.length<=2?(console.log("Pattern: Detected as Gun QR - very short"),!1):(console.log("Pattern: Detected as User QR - default case"),!0)),Te=async()=>{if(ue&&ve){Me();return}const ee="qr-reader";if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){g("เบราว์เซอร์ไม่รองรับการใช้กล้อง");return}try{await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}catch(Pe){console.error("Camera permission error:",Pe),g("ไม่สามารถเข้าถึงกล้องได้ กรุณาอนุญาตการใช้กล้อง");return}const Be={fps:$?5:10,qrbox:$?{width:Math.min(300,window.innerWidth-40),height:Math.min(300,window.innerWidth-40)}:{width:250,height:250},aspectRatio:1,supportedScanTypes:[Qr.SCAN_TYPE_CAMERA],videoConstraints:{facingMode:"environment",width:$?{ideal:640}:{ideal:1280},height:$?{ideal:480}:{ideal:720}}},Xe=new cb(ee,Be);ct(Xe),Le(!0),Xe.render(Pe=>{navigator.vibrate&&$&&navigator.vibrate(200),Ot(Pe)},Pe=>{console.log("Scan failed:",Pe),Pe.includes("NotAllowedError")?g("ไม่ได้รับอนุญาตให้ใช้กล้อง"):Pe.includes("NotFoundError")?g("ไม่พบกล้อง"):Pe.includes("NotReadableError")&&g("กล้องถูกใช้งานโดยแอปอื่น")})},Me=()=>{ve&&(ve.clear().catch(console.error),ct(null),Le(!1))};M.useEffect(()=>{n&&a&&Ue()},[n,a]);const Ue=async()=>{try{g("🔍 กำลังตรวจสอบข้อมูลกับ Database...");const Be=await(await fetch(`/api/get-user-details?userQRCode=${n}`)).json();if(!Be.success){g(`❌ ไม่พบข้อมูล User: ${n} ในระบบ`);return}const Xe=new Date().toISOString().split("T")[0],ft=await(await fetch(`/api/gun-borrowing-record?date=${Xe}&userQRCode=${n}&gunQRCode=${a}`)).json();if(ft.success&&ft.data.length>0){ft.data[0].status==="borrowed"?await Bt(n,a,Be.realname,"return")&&(g(`✅ คืนปืนสำเร็จ: ${Be.realname} คืนปืน ${a}`),ge()):g(`⚠️ ${Be.realname} คืนปืน ${a} ไปแล้ววันนี้`);return}const Z=Be.gunNumber;Z&&Z===a?(g(`✅ ตรวจสอบสำเร็จ: ${Be.realname} | ปืน: ${a}`),await Bt(n,a,Be.realname,"borrow")&&ge()):Z?(g(`⚠️ ปืนไม่ตรงกัน! ${Be.realname} ควรใช้ปืน: ${Z} แต่สแกน: ${a}`),setTimeout(async()=>{await Bt(n,a,Be.realname,"borrow")&&ge()},2e3)):(g(`⚠️ ${Be.realname} ไม่มีปืนที่กำหนดในระบบ แต่สแกนปืน: ${a}`),await Bt(n,a,Be.realname,"borrow")&&ge())}catch(ee){console.error("Check user-gun match error:",ee),g("❌ เกิดข้อผิดพลาดในการตรวจสอบข้อมูล")}},ge=()=>{setTimeout(()=>{i(""),l(""),g("🔄 พร้อมสแกนคู่ต่อไป")},3e3)},Vn=()=>{Me(),i(""),l(""),g("🔄 รีเซ็ตเรียบร้อย - พร้อมสแกนใหม่"),setTimeout(()=>{g("")},2e3)};return x.jsx("div",{className:"gun-borrowing-bg",children:x.jsxs("div",{className:"gun-borrowing-container",children:[x.jsx("h1",{className:"gun-borrowing-title",children:"ระบบยืม-คืนปืน"}),x.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0284c7",borderRadius:"8px",padding:"12px",margin:"16px 0",fontSize:"14px"},children:[x.jsxs("div",{children:[x.jsx("strong",{children:"ผู้ใช้:"})," ",(e==null?void 0:e.realname)||(e==null?void 0:e.username)||"ไม่ระบุ"]}),x.jsxs("div",{children:[x.jsx("strong",{children:"Role:"})," ",(e==null?void 0:e.role)||"ไม่ระบุ"]}),x.jsxs("div",{children:[x.jsx("strong",{children:"Admin:"})," ",e!=null&&e.admin?"ใช่":"ไม่ใช่"]}),x.jsxs("div",{children:[x.jsx("strong",{children:"สิทธิ์แก้ไขคลังอาวุธ:"})," ",x.jsx("span",{style:{color:t?"#059669":"#dc2626"},children:t?"✅ มีสิทธิ์":"❌ ไม่มีสิทธิ์"})]})]}),x.jsxs("div",{className:"gun-borrowing-card",children:[t?x.jsxs("div",{className:"edit-mode",children:[x.jsxs("div",{className:"qr-section",children:[x.jsx("label",{className:"qr-label",children:"สแกน QR Code (User หรือ Gun)"}),x.jsx("div",{id:"qr-reader",className:"qr-reader"}),x.jsx("button",{onClick:()=>Te(),className:"qr-scan-btn",disabled:te,style:{background:te?"#f3f4f6":ue?"#dc2626":"#3b82f6",color:te?"#9ca3af":"white",border:"1px solid #d1d5db",borderRadius:"8px",padding:"12px 24px",cursor:te?"not-allowed":"pointer",fontSize:"16px",fontWeight:"500",width:"100%",margin:"8px 0"},children:te?"🔄 กำลังเปิดกล้อง...":ue?"🛑 หยุดสแกน QR Code":"📷 เปิดกล้องสแกน QR Code"}),x.jsxs("div",{className:"qr-help-text",children:["💡 ",$?ue?"📱 กล้องเปิดแล้ว - สแกน User QR หรือ Gun QR ได้ทันที":"หมุนโทรศัพท์เป็นแนวตั้ง สแกน User QR หรือ Gun QR ได้ทันที":ue?"🎥 กล้องเปิดแล้ว - สแกน QR Code ใดก็ได้ (User หรือ Gun) ระบบจะแยกแยะให้อัตโนมัติ":"สแกน QR Code ใดก็ได้ (User หรือ Gun) ระบบจะแยกแยะให้อัตโนมัติ"]}),x.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"12px",flexDirection:$?"column":"row"},children:[x.jsxs("div",{className:"qr-result",style:{flex:1},children:[x.jsx("b",{children:"👤 User:"})," ",n?x.jsxs("span",{className:"qr-result-value",style:{color:"#059669"},children:["✅ ",n]}):x.jsx("span",{className:"qr-result-none",style:{color:"#6b7280"},children:"ยังไม่ได้สแกน"})]}),x.jsxs("div",{className:"qr-result",style:{flex:1},children:[x.jsx("b",{children:"🔫 Gun:"})," ",a?x.jsxs("span",{className:"qr-result-value",style:{color:"#dc2626"},children:["✅ ",a]}):x.jsx("span",{className:"qr-result-none",style:{color:"#6b7280"},children:"ยังไม่ได้สแกน"})]})]}),(n||a)&&x.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:n&&a?"#dcfce7":"#fef3c7",border:`1px solid ${n&&a?"#16a34a":"#f59e0b"}`,borderRadius:"6px",fontSize:"14px",color:n&&a?"#166534":"#92400e"},children:n&&a?"✅ สแกนครบแล้ว! กำลังตรวจสอบข้อมูล...":`⏳ สแกนแล้ว ${(n?1:0)+(a?1:0)}/2 รายการ - ${n?"ต้องการ Gun QR":"ต้องการ User QR"}`}),ue&&x.jsx("div",{style:{marginTop:"8px",padding:"6px 10px",background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"6px",fontSize:"12px",color:"#0369a1",textAlign:"center"},children:"🎥 กล้องเปิดอยู่ - พร้อมสแกน QR Code"}),(n||a)&&x.jsxs("div",{style:{marginTop:"8px",padding:"6px 10px",background:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"11px",color:"#475569"},children:["🔍 Debug: ",n?`User(${n})`:"User(-)"," | ",a?`Gun(${a})`:"Gun(-)"]})]}),x.jsx("button",{onClick:Vn,className:"btn-reset",style:{background:"#f59e0b",color:"white",border:"1px solid #d97706",borderRadius:"8px",padding:"10px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",marginTop:"12px"},children:"🔄 เริ่มสแกนใหม่"}),x.jsx("button",{type:"button",className:"gun-borrowing-print-btn btn-toggle-form",onClick:()=>R(ee=>!ee),children:A?"❌ ปิดฟอร์มกรอกข้อมูล":"⌨️ กรอกข้อมูลด้วยตนเอง"}),A&&x.jsxs("form",{onSubmit:_t,className:"manual-form",children:[x.jsx("div",{className:"manual-form-title",children:"⌨️ กรอกข้อมูล QR Code ด้วยตนเอง"}),x.jsx("input",{type:"text",placeholder:"รหัสผู้ใช้ (User ID)",value:p,onChange:ee=>m(ee.target.value),className:"manual-input"}),x.jsx("input",{type:"text",placeholder:"หมายเลขปืน (Gun Number)",value:C,onChange:ee=>E(ee.target.value),className:"manual-input"}),x.jsx("button",{type:"submit",className:"gun-borrowing-print-btn manual-submit",disabled:te,children:te?"🔄 กำลังประมวลผล...":"✅ ยืนยันข้อมูล"})]}),x.jsx("div",{style:{marginTop:"12px"},children:x.jsxs("details",{style:{marginBottom:"8px"},children:[x.jsx("summary",{style:{cursor:"pointer",fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"🧪 ทดสอบการตรวจจับ QR Code"}),x.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[x.jsx("button",{onClick:()=>Ot("1234567890"),style:{fontSize:"10px",padding:"4px 8px",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px"},children:"Test: 1234567890"}),x.jsx("button",{onClick:()=>Ot("A123"),style:{fontSize:"10px",padding:"4px 8px",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px"},children:"Test: A123"}),x.jsx("button",{onClick:()=>Ot("GUN-001"),style:{fontSize:"10px",padding:"4px 8px",background:"#ef4444",color:"white",border:"none",borderRadius:"4px"},children:"Test: GUN-001"}),x.jsx("button",{onClick:()=>Ot("WEAPON-123"),style:{fontSize:"10px",padding:"4px 8px",background:"#ef4444",color:"white",border:"none",borderRadius:"4px"},children:"Test: WEAPON-123"}),x.jsx("button",{onClick:()=>Ot("ABC123DEF"),style:{fontSize:"10px",padding:"4px 8px",background:"#6b7280",color:"white",border:"none",borderRadius:"4px"},children:"Test: ABC123DEF"})]})]})}),f&&x.jsx("div",{className:`gun-borrowing-status ${f.includes("Successful")||f.includes("✅")?"success":"error"}`,children:f}),te&&x.jsx("div",{className:"loading-message",children:x.jsx("div",{className:"loading-text",children:"🔄 กำลังประมวลผล..."})}),de&&x.jsxs("div",{className:"network-error",children:[x.jsx("div",{className:"network-error-title",children:"❌ ไม่สามารถเชื่อมต่อได้"}),x.jsxs("div",{className:"network-error-text",children:["ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต (ลองใหม่ ",Oe," ครั้ง)"]}),x.jsx("button",{onClick:()=>{Ee(!1),nt()},className:"retry-btn",children:"ลองใหม่"})]})]}):x.jsxs("div",{style:{padding:"20px",textAlign:"center",background:"#f8fafc",border:"2px dashed #cbd5e1",borderRadius:"8px",color:"#64748b",margin:"16px 0"},children:[x.jsx("h3",{style:{margin:"0 0 8px 0",color:"#475569"},children:"📖 โหมดดูข้อมูลเท่านั้น"}),x.jsx("p",{style:{margin:0,fontSize:"14px"},children:"คุณสามารถดูข้อมูลการเบิก-คืนปืนได้ แต่ไม่สามารถทำการเบิก/คืนหรือเพิ่มปืนใหม่ได้"})]}),x.jsxs("div",{className:"public-gun-section",children:[x.jsx("h2",{className:"public-gun-title",children:"ปืนสาธารณะ (Public Gun)"}),t&&x.jsx("button",{type:"button",className:"gun-borrowing-print-btn",style:{width:"100%",marginBottom:O?0:16},onClick:()=>V(ee=>!ee),children:O?"ปิดฟอร์มเพิ่มปืน":"เพิ่มปืนสาธารณะ"}),t&&O&&x.jsxs("form",{onSubmit:Ge,className:"public-gun-form",children:[x.jsx("input",{type:"text",placeholder:"Gun QR Code",value:U,onChange:ee=>N(ee.target.value),className:"public-gun-input"}),x.jsx("button",{type:"submit",className:"gun-borrowing-print-btn public-gun-add-btn",children:"เพิ่ม"})]}),b&&x.jsx("div",{className:"public-gun-status",children:b}),x.jsx("div",{style:{maxHeight:120,overflowY:"auto"},children:x.jsxs("table",{style:{width:"100%",fontSize:"1rem"},children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:{width:"70%"},children:"Gun QR Code"}),x.jsx("th",{style:{width:"30%"},children:"ลบ"})]})}),x.jsx("tbody",{children:_.length===0?x.jsx("tr",{children:x.jsx("td",{colSpan:2,style:{color:"#888",textAlign:"center"},children:"ไม่มีข้อมูล"})}):_.map(ee=>x.jsxs("tr",{children:[x.jsx("td",{children:ee.gunQRCode}),x.jsx("td",{children:t&&x.jsx("button",{type:"button",style:{background:"#e53935",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",cursor:"pointer"},onClick:()=>pe(ee.gunQRCode),children:"ลบ"})})]},ee.gunQRCode))})]})})]}),x.jsxs("div",{style:{background:z.all&&z.all.length>0?"#e8f5e8":"#f0f4f8",borderRadius:10,padding:16,margin:"16px auto",maxWidth:1200,border:z.all&&z.all.length>0?"2px solid #4caf50":"2px solid #e0e0e0"},children:[x.jsxs("h3",{style:{color:"#2e7d32",marginBottom:12},children:["📊 ข้อมูลที่บันทึกแล้วในวันที่ ",B]}),x.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:12},children:[x.jsxs("div",{style:{color:"#1976d2"},children:[x.jsx("strong",{children:"เบิกทั้งหมด:"})," ",((ki=z.summary)==null?void 0:ki.totalBorrowed)||0," คน"]}),x.jsxs("div",{style:{color:"#388e3c"},children:[x.jsx("strong",{children:"คืนแล้ว:"})," ",((mn=z.summary)==null?void 0:mn.totalReturned)||0," คน"]}),x.jsxs("div",{style:{color:"#f57c00"},children:[x.jsx("strong",{children:"ยังไม่คืน:"})," ",(($r=z.summary)==null?void 0:$r.notReturned)||0," คน"]})]}),x.jsxs("div",{style:{marginTop:16},children:[x.jsx("h4",{style:{color:"#1976d2",marginBottom:8},children:"รายละเอียดจาก Database:"}),x.jsx("div",{style:{maxHeight:200,overflowY:"auto",background:"white",borderRadius:6,padding:8},children:!z.all||z.all.length===0?x.jsx("div",{style:{textAlign:"center",color:"#666",padding:16},children:"ไม่มีข้อมูลในวันนี้"}):x.jsxs("table",{style:{width:"100%",fontSize:"0.9rem"},children:[x.jsx("thead",{children:x.jsxs("tr",{style:{background:"#f5f5f5"},children:[x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ชื่อ"}),x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ปืน"}),x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"เวลาเบิก"}),x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"เวลาคืน"}),x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"สถานะ"}),x.jsx("th",{style:{padding:8,border:"1px solid #ddd"},children:"ลบ"})]})}),x.jsx("tbody",{children:z.all.map((ee,Be)=>x.jsxs("tr",{children:[x.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ee.realname}),x.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ee.gunQRCode}),x.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:new Date(ee.borrowTime).toLocaleString("th-TH")}),x.jsx("td",{style:{padding:8,border:"1px solid #ddd"},children:ee.returnTime?new Date(ee.returnTime).toLocaleString("th-TH"):"-"}),x.jsx("td",{style:{padding:8,border:"1px solid #ddd",color:ee.status==="returned"?"#388e3c":"#f57c00",fontWeight:"bold"},children:ee.status==="borrowed"?"🔴 ยังไม่คืน":"✅ คืนแล้ว"}),x.jsx("td",{style:{padding:8,border:"1px solid #ddd",textAlign:"center"},children:x.jsx("button",{onClick:()=>Se(ee.id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:"0.8rem"},children:"🗑️ ลบ"})})]},Be))})]})})]}),x.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginTop:8},children:["💡 ข้อมูลนี้ดึงมาจาก Database",z.all&&z.all.length>0?` (มี ${z.all.length} รายการ)`:" (ยังไม่มีข้อมูลบันทึก)"]})]}),x.jsxs("div",{style:{background:"#f0f4f8",borderRadius:10,padding:16,margin:"16px auto",maxWidth:1200,textAlign:"center"},children:[x.jsx("h3",{style:{color:"#1976d2",marginBottom:12},children:"📅 ดูข้อมูลจาก Database"}),x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:16},children:[x.jsx("label",{style:{fontWeight:"500"},children:"เลือกวันที่:"}),x.jsx("input",{type:"date",value:B,onChange:ee=>cn(ee.target.value),style:{padding:"8px 12px",borderRadius:6,border:"1px solid #d1d9e6",fontSize:"1rem"}})]}),z.all&&z.all.length>0&&x.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:16},children:[x.jsxs("button",{onClick:Ae,style:{background:"#d32f2f",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:["🗑️ ลบข้อมูลทั้งวันที่ ",B]}),x.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:8},children:"⚠️ การลบจะไม่สามารถกู้คืนได้"})]})]})]})]})})}const db="/assets/logo-9e493622.jpeg";var ew={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Sp=xi.createContext&&xi.createContext(ew),fb=["attr","size","title"];function hb(e,t){if(e==null)return{};var n=gb(e,t),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)i=l[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function gb(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yc.apply(this,arguments)}function Ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ap(Object(n),!0).forEach(function(i){pb(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ap(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function pb(e,t,n){return t=mb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mb(e){var t=xb(e,"string");return typeof t=="symbol"?t:t+""}function xb(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tw(e){return e&&e.map((t,n)=>xi.createElement(t.tag,wc({key:n},t.attr),tw(t.child)))}function Yc(e){return t=>xi.createElement(yb,yc({attr:wc({},e.attr)},t),tw(e.child))}function yb(e){var t=n=>{var{attr:i,size:a,title:l}=e,f=hb(e,fb),g=a||n.size||"1em",p;return n.className&&(p=n.className),e.className&&(p=(p?p+" ":"")+e.className),xi.createElement("svg",yc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,f,{className:p,style:wc(wc({color:e.color||n.color},n.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),l&&xi.createElement("title",null,l),e.children)};return Sp!==void 0?xi.createElement(Sp.Consumer,null,n=>t(n)):t(ew)}function wb(e){return Yc({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09.016.016.032.016.032.032.144.112.288.224.448.336.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16.144-.111.304-.223.448-.335.016-.016.032-.016.032-.032 1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816.24-.24.528-.463.816-.639.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023.144-.32.336-.607.576-.847.24-.24.528-.431.848-.575.32-.144.672-.208 1.024-.208.368 0 .704.064 1.024.208.32.144.608.336.848.575.24.24.432.528.576.847.144.32.208.672.208 1.023 0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848 2.84 2.84 0 0 1-.848.575 2.715 2.715 0 0 1-2.064 0 2.84 2.84 0 0 1-.848-.575 2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406 4.883 4.883 0 0 0-1.088-1.135 5.207 5.207 0 0 0-1.04-.608 2.82 2.82 0 0 0 .464-.383 4.2 4.2 0 0 0 .624-.784 3.624 3.624 0 0 0 .528-1.934 3.71 3.71 0 0 0-.288-1.47 3.799 3.799 0 0 0-.816-1.199 3.845 3.845 0 0 0-1.2-.8 3.72 3.72 0 0 0-1.472-.287 3.72 3.72 0 0 0-1.472.288 3.631 3.631 0 0 0-1.2.815 3.84 3.84 0 0 0-.8 1.199 3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007.096.336.224.64.4.927.16.288.384.544.624.784.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"},child:[]}]})(e)}function Cb(e){return Yc({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8 8.707l3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z"},child:[]}]})(e)}function Eb(e){return Yc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.25 0a8.25 8.25 0 0 0-6.18 13.72L1 22.88l1.12 1 8.05-9.12A8.251 8.251 0 1 0 15.25.01V0zm0 15a6.75 6.75 0 1 1 0-13.5 6.75 6.75 0 0 1 0 13.5z"},child:[]}]})(e)}function vb(e){return Yc({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14 5H2V3h12v2zm0 4H2V7h12v2zM2 13h12v-2H2v2z"},child:[]}]})(e)}function Sb(){const[e,t]=M.useState(!1),[n,i]=M.useState(""),[a,l]=M.useState([]),[f,g]=M.useState(!1),[p,m]=M.useState(!1),[C,E]=M.useState(!1),A=M.useRef(null),R=M.useRef(null),_="";M.useEffect(()=>{const B=()=>{E(window.innerWidth<=768)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),M.useEffect(()=>{function B(G){A.current&&!A.current.contains(G.target)&&(t(!1),m(!1),i(""))}return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[]),M.useEffect(()=>{e&&R.current&&setTimeout(()=>{R.current.focus()},200)},[e]);const P=async B=>{if(!B.trim()){l([]),m(!1);return}g(!0);try{const te=await(await fetch(`${_}/api/search-users?q=${encodeURIComponent(B.trim())}`)).json();te.status?(l(te.data),m(!0)):(l([]),m(!1))}catch(G){console.error("Search error:",G),l([]),m(!1)}finally{g(!1)}};M.useEffect(()=>{const B=setTimeout(()=>{n&&e&&P(n)},300);return()=>clearTimeout(B)},[n,e]);const U=()=>{t(!e),e||(m(!1),i(""),l([]))},N=B=>{i(B.target.value)},b=B=>{console.log("Selected user:",B),m(!1),i(""),t(!1)},S=B=>B?typeof B=="string"?`data:image/png;base64,${B}`:B.data?`data:image/png;base64,${btoa(new Uint8Array(B.data).reduce((te,we)=>te+String.fromCharCode(we),""))}`:"":"",O={ME:"วิศวกรรมเครื่องกล",EE:"วิศวกรรมไฟฟ้าสื่อสาร",CYBER:"ความมั่นคงปลอดภัยทางไซเบอร์",SCIEN:"วิทยาศาสตร์และเทคโนโลยี (EN)",CE:"วิศวกรรมโยธา",GEO:"วิศวกรรมแผนที่",IE:"วิศวกรรมอุตสาหการ",SCI:"วิทยาศาสตร์และเทคโนโลยี",SOC:"สังคมศาสตร์เพื่อการพัฒนา"},V={student:"นักเรียนนายสิบ",teacher:"อาจารย์",officer:"นายทหาร",admin:"ผู้ดูแลระบบ"},z=B=>{switch(B){case"admin":return"role-badge admin";case"officer":return"role-badge officer";case"teacher":return"role-badge teacher";case"student":default:return"role-badge student"}},F=B=>{const G=[];return B.battalion&&G.push(`กองพัน ${B.battalion}`),B.company&&G.push(`ร้อย ${B.company}`),B.platoon&&G.push(`หมู่ ${B.platoon}`),B.squad&&G.push(`หมวด ${B.squad}`),G.length>0?G.join(" "):""};return x.jsxs("div",{ref:A,className:"user-search-container",children:[x.jsxs(ns.div,{className:`user-search ${e?"expanded":""}`,initial:!1,animate:{width:e?window.innerWidth<=480?"220px":window.innerWidth<=360?"200px":"280px":"40px"},transition:{duration:.3,ease:"easeInOut"},children:[x.jsx("div",{className:"search-icon-container",onClick:U,children:e?x.jsx(Cb,{size:20,className:"search-icon"}):x.jsx(Eb,{size:20,className:"search-icon"})}),x.jsx($s,{children:e&&x.jsx(ns.input,{ref:R,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},type:"text",placeholder:"ค้นหาผู้ใช้...",value:n,onChange:N,className:"search-input"})})]}),x.jsx($s,{children:p&&a.length>0&&x.jsxs(ns.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"search-results",children:[f&&x.jsx("div",{className:"search-loading",children:"กำลังค้นหา..."}),!f&&a.map(B=>x.jsxs("div",{className:"search-result-item",onClick:()=>b(B),children:[x.jsx("div",{className:"user-avatar",children:B.profileImage&&B.profileImage.data?x.jsx("img",{src:S(B.profileImage),alt:"Profile",className:"userlist-avatar"}):x.jsx("div",{className:"no-avatar",children:B.realname?B.realname.charAt(0).toUpperCase():"?"})}),x.jsxs("div",{className:"user-info",children:[x.jsxs("div",{className:"user-name-row",children:[x.jsx("div",{className:"user-name",children:B.realname||"ไม่ระบุชื่อ"}),x.jsxs("div",{className:"badges",children:[B.role&&x.jsx("div",{className:z(B.role),children:V[B.role]||B.role}),B.admin&&x.jsx("div",{className:"admin-badge",children:"Admin"})]})]}),x.jsxs("div",{className:"user-details",children:[x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"label",children:"ID:"}),x.jsx("span",{className:"value",children:B.userid})]}),B.year&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"label",children:"ชั้นปี:"}),x.jsx("span",{className:"value",children:B.year})]}),B.major&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"label",children:"กองวิชา:"}),x.jsx("span",{className:"value major-text",children:O[B.major]||B.major})]}),F(B)&&x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"label",children:"สังกัด:"}),x.jsx("span",{className:"value",children:F(B)})]}),x.jsxs("div",{className:"detail-row",children:[x.jsx("span",{className:"label",children:"Username:"}),x.jsxs("span",{className:"value username",children:["@",B.username]})]})]})]})]},B.id)),!f&&a.length===0&&n&&x.jsx("div",{className:"no-results",children:"ไม่พบผู้ใช้ที่ค้นหา"})]})})]})}function nw(){var Oe;const[e,t]=M.useState(""),[n,i]=M.useState(""),[a,l]=M.useState(""),[f,g]=M.useState(""),[p,m]=M.useState(""),[C,E]=M.useState(!1),[A,R]=M.useState(null),[_,P]=M.useState(!1),[U,N]=M.useState(!1),b=Zr(),S=_r(),O=M.useRef(null),V=M.useRef(null),z=My(A),F=[{value:"ME",label:"วิศวกรรมเครื่องกล"},{value:"EE",label:"วิศวกรรมไฟฟ้าสื่อสาร"},{value:"CYBER",label:"ความมั่นคงปลอดภัยทางไซเบอร์"},{value:"SCIEN",label:"วิทยาศาสตร์และเทคโนโลยี (EN)"},{value:"CE",label:"วิศวกรรมโยธา"},{value:"GEO",label:"วิศวกรรมแผนที่"},{value:"IE",label:"วิศวกรรมอุตสาหการ"},{value:"SCI",label:"วิทยาศาสตร์และเทคโนโลยี"},{value:"SOC",label:"สังคมศาสตร์เพื่อการพัฒนา"}];M.useEffect(()=>{const j=localStorage.getItem("token");!j&&S.pathname!=="/login"&&S.pathname!=="/register"?b("/login"):j&&fetch(`/api/user/${j}`).then($=>$.json()).then($=>{$.data&&(t($.data.realname),i($.data.userid),l($.data.blood),g($.data.major),E($.data.admin||!1),R({id:$.data.id,realname:$.data.realname,userid:$.data.userid,username:$.data.username,role:$.data.role||"student",admin:$.data.admin||!1,...$.data}),$.data.profileImage?m(`data:image/jpeg;base64,${$.data.profileImage}`):m(""))})},[b,S]);const B=()=>{P(j=>(j||N(!1),!j))},G=()=>{N(j=>(j||P(!1),!j))},te=()=>{localStorage.removeItem("token"),P(!1),b("/login")},we=()=>{b("/")},de=()=>{P(!1),b("/edit-profile")},Ee=()=>{P(!1),b("/view-profile")};return M.useEffect(()=>{function j($){O.current&&!O.current.contains($.target)&&V.current&&!V.current.contains($.target)&&(P(!1),N(!1))}return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]),x.jsxs("nav",{className:"navbar bg-white text-black shadow-md border-b border-gray-300 flex items-center justify-between px-4 py-2",children:[x.jsx("div",{className:"flex items-center",children:x.jsxs("span",{className:"btn btn-ghost normal-case text-xl text-black flex items-center cursor-pointer",onClick:we,children:[x.jsx("img",{src:db,alt:"Logo",className:"logo-img"}),x.jsx("span",{className:"ml-2",children:"CRMA"})]})}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(Sb,{}),x.jsxs("div",{ref:V,className:"relative",children:[x.jsx("button",{className:"btn btn-ghost",onClick:G,children:x.jsx(vb,{size:28})}),x.jsx($s,{children:U&&x.jsxs(ns.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.18},className:"absolute right-0 mt-2 w-56 bg-white border border-gray-300 rounded shadow-md z-50 dropdown-content show",children:[z.filter(j=>j.path!=="/"&&j.path!=="/profile").map((j,$)=>x.jsxs("p",{className:`block px-4 py-2 text-black cursor-pointer hover:bg-gray-200 ${j.path==="/role-manager"?"font-semibold border-t border-gray-200":""}`,onClick:()=>{N(!1),b(j.path)},children:[j.icon&&x.jsx("span",{className:"mr-2",children:j.icon}),j.label]},`menu-${j.path}-${$}`)),z.filter(j=>j.path!=="/"&&j.path!=="/profile").length===0&&x.jsx("p",{className:"block px-4 py-2 text-gray-500 text-center",children:"ไม่มีเมนูเพิ่มเติม"})]})})]}),x.jsxs("div",{ref:O,className:"relative",children:[x.jsx("button",{className:"btn btn-ghost",onClick:B,children:x.jsx(wb,{size:28})}),x.jsx($s,{children:_&&x.jsxs(ns.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.18},className:"dropdown-content show absolute right-0 mt-2 w-52 bg-white border border-gray-300 rounded shadow-md z-50 p-4",children:[p?x.jsx("img",{src:p,alt:"Profile",className:"dropdown-profile-img mb-2 rounded-full w-16 h-16 object-cover mx-auto"}):x.jsx("div",{className:"dropdown-profile-img mb-2 rounded-full w-16 h-16 bg-gray-300 mx-auto flex items-center justify-center text-gray-600",children:"No Image"}),x.jsxs("p",{children:[x.jsx("strong",{children:"ชื่อ:"})," ",e]}),x.jsxs("p",{children:[x.jsx("strong",{children:"User ID:"})," ",n]}),x.jsxs("p",{children:[x.jsx("strong",{children:"สาขา:"})," ",((Oe=F.find(j=>j.value===f))==null?void 0:Oe.label)||f]}),x.jsxs("div",{className:"mt-3 space-y-1",children:[x.jsx("p",{className:"btn btn-ghost text-left w-full edit-profile-item",onClick:de,children:"Edit Profile"}),x.jsx("p",{className:"btn btn-ghost text-left w-full view-profile-item",onClick:Ee,children:"View Profile"}),x.jsx("p",{className:"btn btn-ghost text-left w-full logout-item",onClick:te,children:"Logout"})]})]})})]})]})]})}function Ab(){const[e,t]=M.useState([]),[n,i]=M.useState(!1),[a,l]=M.useState([]),[f,g]=M.useState(null),[p,m]=M.useState(""),[C,E]=M.useState([]),[A,R]=M.useState(""),[_,P]=M.useState(""),[U,N]=M.useState(""),[b,S]=M.useState(""),[O,V]=M.useState(""),[z,F]=M.useState(""),[B,G]=M.useState({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),[te,we]=M.useState([{key:"",value:"",names:[""],counted:!0}]),[de,Ee]=M.useState({}),[Oe,j]=M.useState({}),[$,oe]=M.useState(null),[J,he]=M.useState({}),[ue,Le]=M.useState(!1),[ve,ct]=M.useState(null),[He,Bt]=M.useState(null),[fe,Ie]=M.useState(!1),[nt,cn]=M.useState(""),[Se,Ae]=M.useState("success"),Ge="",pe=(Z,re="success")=>{cn(Z),Ae(re),Ie(!0)},_t=()=>{Ie(!1)};M.useEffect(()=>{console.log("API URL:",Ge);const Z=localStorage.getItem("token");fetch("/api/summary",{headers:{Authorization:`Bearer ${Z}`}}).then(re=>re.json()).then(re=>{re.success||re.status!==!1?t(re.data||[]):(console.error("Failed to fetch summaries:",re.message),pe(re.message||"ไม่สามารถดึงข้อมูลสรุปยอดได้","error"))}).catch(re=>{console.error("Error fetching summaries:",re),pe("เกิดข้อผิดพลาดในการดึงข้อมูล","error")})},[]),M.useEffect(()=>{if(console.log("User สังกัด:",{userBattalion:U,userCompany:b}),console.log("Summaries:",e),U&&b&&e.length>0){const Z=e.filter(re=>(console.log("Comparing:",{summaryBattalion:re.battalion,userBattalion:U,summaryCompany:re.company,userCompany:b,match:Number(re.battalion)===Number(U)&&Number(re.company)===Number(b)}),Number(re.battalion)===Number(U)&&Number(re.company)===Number(b)));console.log("Filtered summaries:",Z),E(Z)}else E(e)},[U,b,e]),M.useEffect(()=>{const Z=localStorage.getItem("token");fetch("/api/user/me",{headers:{Authorization:`Bearer ${Z}`}}).then(re=>re.json()).then(re=>{if(re.data&&(R(re.data.realname||""),P(re.data.year||""),N(re.data.battalion||""),S(re.data.company||""),V(re.data.platoon||""),F(re.data.squad||"")),re.data&&re.data.other)try{const me=typeof re.data.other=="string"?JSON.parse(re.data.other):re.data.other;l(Array.isArray(me)?me.map(be=>({...be,value:Number(be.value)||1})):[]);const q={};(Array.isArray(me)?me:[]).forEach((be,Ne)=>{q[Ne]=!0}),g(q)}catch{l([]),g({})}})},[]);const Ot=Z=>{g(Z)},tr=Z=>{m(Z.target.value)},se=async()=>{var pr,go;if(!p){pe("กรุณาเลือกใบยอดที่ต้องการลงยอด","error");return}if(f==null){pe("กรุณาเลือกรายการจำหน่ายอย่างน้อย 1 รายการ","error");return}const Z=C.find(nr=>String(nr.id)===String(p));if(!Z){pe("ไม่พบใบยอดที่เลือก กรุณาลองใหม่อีกครั้ง","error");return}let re={};try{re=Z.other?JSON.parse(Z.other):{}}catch{pe("เกิดข้อผิดพลาดในการอ่านข้อมูลใบยอด","error");return}const me={...re},q=A&&_?`${A}(${_})`:A||"";if(!q){pe("ไม่พบข้อมูลชื่อผู้ใช้ กรุณาตรวจสอบโปรไฟล์ของคุณ","error");return}let be=!1;if(Object.values(re).forEach(nr=>{Array.isArray(nr.names)&&nr.names.includes(q)&&(be=!0)}),be){pe("คุณได้ส่งยอดจำหน่ายในใบนี้ไปแล้ว","error");return}const Ne=a[f];if(!Ne||!Ne.key){pe("ไม่พบรายการจำหน่ายที่เลือก กรุณาลองใหม่อีกครั้ง","error");return}const Ye=Number((pr=re[Ne.key])==null?void 0:pr.count)||0,Wt=Number(Ne.value)||1,qr=Array.isArray((go=re[Ne.key])==null?void 0:go.names)?re[Ne.key].names:[],Ua=q?[q]:[],qe=Array.from(new Set([...qr,...Ua].filter(Boolean)));me[Ne.key]={count:Ye+Wt,names:qe};try{const nr=localStorage.getItem("token"),xn=await fetch(`/api/summary?id=${Z.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${nr}`},body:JSON.stringify({...Z,other:me})});if(xn.ok){pe("ส่งยอดจำหน่ายสำเร็จ! 🎉","success"),m(""),g(null);const Li=localStorage.getItem("token");fetch("/api/summary",{headers:{Authorization:`Bearer ${Li}`}}).then(It=>It.json()).then(It=>{if(t(It.data||[]),U&&b){const Jr=(It.data||[]).filter(Bi=>Number(Bi.battalion)===Number(U)&&Number(Bi.company)===Number(b));E(Jr)}else E(It.data||[])}),i(!1)}else{const Li=await xn.json();pe("เกิดข้อผิดพลาดในการส่งยอด: "+(Li.message||"กรุณาลองใหม่อีกครั้ง"),"error")}}catch(nr){console.error("Error:",nr),pe("เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ต","error")}},Te=Z=>G({...B,[Z.target.name]:Z.target.value}),Me=Number(B.total)||0,Ue=te.reduce((Z,re)=>re.counted!==!1?Z+(Number(re.value)||0):Z,0),ge=Me-Ue,Vn=["5","4","3","2","1"].reduce((Z,re)=>(Z[re]=Number(B[`total_year_${re}`])||0,Z),{});Object.values(Vn).reduce((Z,re)=>Z+re,0);const ki=Z=>{G({date:Z.date,time:Z.time,battalion:String(Z.battalion),company:String(Z.company),total:String(Z.total),note:Z.note||"",other:"",total_year_5:Z.total_year_5||"",total_year_4:Z.total_year_4||"",total_year_3:Z.total_year_3||"",total_year_2:Z.total_year_2||"",total_year_1:Z.total_year_1||""});try{const re=JSON.parse(Z.other);we(Object.entries(re).map(([me,q])=>({key:me,value:q.count,names:q.names&&Array.isArray(q.names)?q.names:[""],counted:q.counted!==!1})))}catch{we([{key:"",value:"",names:[""],counted:!0}])}oe(Z.id),window.scrollTo({top:0,behavior:"smooth"})},mn=async Z=>{if(window.confirm("ต้องการลบข้อมูลนี้ใช่หรือไม่?")){const re=localStorage.getItem("token");await fetch(`/api/summary?id=${Z}`,{method:"DELETE",headers:{Authorization:`Bearer ${re}`}}),t(me=>me.filter(q=>q.id!==Z))}},$r=async Z=>{if(Z.preventDefault(),!B.date){pe("กรุณาเลือกวันที่","error");return}if(!B.time){pe("กรุณากรอกเวลา","error");return}if(!B.battalion){pe("กรุณาเลือกกองพัน","error");return}if(!B.company){pe("กรุณาเลือกกองร้อย","error");return}if(!B.total||Number(B.total)<=0){pe("กรุณากรอกจำนวนคนทั้งหมดที่ถูกต้อง","error");return}if(!B.note){pe("กรุณากรอกชื่อตัวแทนชั้น","error");return}const re={};te.forEach(Ne=>{Ne.key&&(re[Ne.key]={count:Ne.value,names:Ne.names.filter(Ye=>Ye),counted:Ne.counted!==!1})});const me=$?"PUT":"POST",q=$?`/api/summary?id=${$}`:"/api/summary",be={...B,battalion:Number(B.battalion),company:Number(B.company),total:Number(B.total),other:re,total_year_5:B.total_year_5,total_year_4:B.total_year_4,total_year_3:B.total_year_3,total_year_2:B.total_year_2,total_year_1:B.total_year_1};try{const Ne=localStorage.getItem("token"),Wt=await(await fetch(q,{method:me,headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne}`},body:JSON.stringify(be)})).json();Wt.success?($?(t(e.map(qr=>qr.id===$?Wt.data:qr)),oe(null),pe("แก้ไขข้อมูลสำเร็จ! ✅","success")):(t([Wt.data,...e]),pe("บันทึกใบยอดสำเร็จ! 🎉","success")),G({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),we([{key:"",value:"",names:[""],counted:!0}])):pe("เกิดข้อผิดพลาด: "+(Wt.message||"ไม่สามารถบันทึกข้อมูลได้"),"error")}catch(Ne){console.error("Error:",Ne),pe("เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาลองใหม่อีกครั้ง","error")}},ee={};e.forEach(Z=>{ee[Z.battalion]||(ee[Z.battalion]={}),ee[Z.battalion][Z.company]||(ee[Z.battalion][Z.company]=[]),ee[Z.battalion][Z.company].push(Z)});const Be=Z=>{Ee(re=>({...re,[Z]:!re[Z]}))},Xe=(Z,re)=>{j(me=>({...me,[`${Z}-${re}`]:!me[`${Z}-${re}`]}))},Pe=(Z,re)=>{ct(Z),Bt(re),Le(!0)},ft=async(Z,re,me)=>{const q=e.find(Ye=>Ye.id===Z);if(!q)return;let be={};try{be=q.other?JSON.parse(q.other):{}}catch{}if(!be[re]||!Array.isArray(be[re].names))return;be[re].names=be[re].names.filter(Ye=>Ye!==me),be[re].names.length===0&&delete be[re];const Ne=localStorage.getItem("token");await fetch(`/api/summary?id=${Z}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne}`},body:JSON.stringify({...q,other:be})}),t(Ye=>Ye.map(Wt=>Wt.id===Z?{...Wt,other:JSON.stringify(be)}:Wt)),Object.keys(be).length===0?Le(!1):ct(be)};return x.jsx("div",{className:"summary-bg",children:x.jsxs("div",{className:"summary-container",children:[x.jsx("h1",{className:"summary-title",children:"ระบบสรุปยอดจำหน่าย"}),x.jsxs("div",{className:"summary-card",children:[x.jsx("h4",{className:"summary-section-title",children:"สถานะการส่งยอดจำหน่ายของคุณ"}),U&&b?x.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"12px"},children:["📍 แสดงเฉพาะใบยอดของ กองพัน ",U," กองร้อย ",b]}):x.jsx("p",{style:{color:"#ff9800",fontSize:"0.9rem",marginBottom:"12px"},children:"⚠️ กรุณากรอกข้อมูลสังกัด (กองพัน/กองร้อย) เพื่อแสดงใบยอดที่เกี่ยวข้อง"}),x.jsx("div",{className:"table-wrapper",children:x.jsxs("table",{className:"summary-table",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"วันที่"}),x.jsx("th",{children:"เวลา"}),x.jsx("th",{children:"สถานะ"}),x.jsx("th",{children:"รายการที่ส่ง"})]})}),x.jsx("tbody",{children:C.length===0?x.jsx("tr",{children:x.jsx("td",{colSpan:4,style:{textAlign:"center",color:"#666",padding:"20px"},children:U&&b?`ไม่มีใบยอดสำหรับ กองพัน ${U} กองร้อย ${b}`:"ไม่มีข้อมูลใบยอด กรุณากรอกข้อมูลสังกัดด้านล่าง"})}):C.map(Z=>{let re=!1,me=[];try{const q=Z.other?JSON.parse(Z.other):{},be=A&&_?`${A}(${_})`:A||"";Object.entries(q).forEach(([Ne,Ye])=>{Array.isArray(Ye.names)&&Ye.names.includes(be)&&(re=!0,me.push(Ne))})}catch{}return x.jsxs("tr",{children:[x.jsx("td",{children:Z.date}),x.jsx("td",{children:Z.time}),x.jsx("td",{children:re?x.jsx("span",{className:"status-sent",children:"ส่งจำหน่ายแล้ว"}):x.jsx("span",{className:"status-not-sent",children:"ยังไม่ได้ส่ง"})}),x.jsx("td",{children:me.length>0?me.map((q,be)=>x.jsxs("span",{children:[q,be<me.length-1?", ":""]},q)):"-"})]},Z.id)})})]})})]}),x.jsxs("div",{style:{marginBottom:32,border:"2px solid #007bff",borderRadius:8,padding:16,background:"#f8faff"},children:[x.jsx("h3",{style:{color:"#007bff"},children:"ส่งยอดจำหน่าย (สำหรับผู้ใช้ทั่วไป)"}),n?x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{marginBottom:8},children:[x.jsx("b",{children:"เลือกใบยอดที่ต้องการลงยอด:"}),x.jsxs("select",{value:p,onChange:tr,style:{marginLeft:8},children:[x.jsx("option",{value:"",children:"-- เลือกใบยอด --"}),C.map(Z=>x.jsxs("option",{value:Z.id,children:[Z.date," | ",Z.time]},Z.id))]})]}),x.jsxs("div",{style:{marginBottom:8},children:[x.jsx("b",{children:"รายการจำหน่ายของคุณ:"}),a.length===0&&x.jsx("div",{style:{color:"#888"},children:"ไม่มีรายการจำหน่าย"}),a.map((Z,re)=>{let me=!1;if(p){const q=C.find(be=>String(be.id)===String(p));if(q)try{const be=q.other?JSON.parse(q.other):{},Ne=A&&_?`${A}(${_})`:A||"";be[Z.key]&&Array.isArray(be[Z.key].names)&&be[Z.key].names.includes(Ne)&&(me=!0)}catch{}}return x.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4,alignItems:"center"},children:[x.jsx("input",{type:"checkbox",checked:f===re,onChange:()=>Ot(re),style:{marginRight:4},disabled:me}),x.jsxs("span",{style:{flex:2},children:[Z.key,me&&x.jsx("span",{style:{color:"#1976d2",fontWeight:500,marginLeft:8},children:"(คุณส่งยอดนี้แล้ว)✅"})]}),x.jsxs("span",{style:{flex:1},children:["จำนวน ",Z.value]})]},re)})]}),x.jsxs("div",{style:{display:"flex",gap:8},children:[x.jsx("button",{className:"btn btn-primary",style:{marginBottom:0},onClick:se,children:"ส่งยอดจำหน่าย"}),x.jsx("button",{type:"button",className:"btn",style:{marginBottom:0,background:"#eee",color:"#333"},onClick:()=>{m(""),g(null),i(!1)},children:"ยกเลิก"})]})]}):x.jsx("button",{className:"btn btn-primary",onClick:()=>i(!0),style:{marginBottom:0},children:"+ เพิ่มส่งยอดจำหน่าย"})]}),x.jsx("h2",{children:"สร้างใบยอด(สำหรับตัวแทนชั้น)"}),x.jsxs("form",{className:"summary-form",onSubmit:$r,style:{marginBottom:32},children:[x.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[x.jsxs("select",{name:"battalion",value:B.battalion,onChange:Te,required:!0,children:[x.jsx("option",{value:"",children:"เลือกกองพัน"}),x.jsx("option",{value:"1",children:"กองพัน 1"}),x.jsx("option",{value:"2",children:"กองพัน 2"}),x.jsx("option",{value:"3",children:"กองพัน 3"}),x.jsx("option",{value:"4",children:"กองพัน 4"})]}),x.jsxs("select",{name:"company",value:B.company,onChange:Te,required:!0,children:[x.jsx("option",{value:"",children:"เลือกกองร้อย"}),x.jsx("option",{value:"1",children:"กองร้อย 1"}),x.jsx("option",{value:"2",children:"กองร้อย 2"}),x.jsx("option",{value:"3",children:"กองร้อย 3"})]})]}),x.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:x.jsxs("div",{style:{flex:1},children:[x.jsx("b",{children:"วันที่ :"}),x.jsxs("div",{style:{position:"relative",display:"inline-block",width:"100%"},children:[x.jsx("input",{name:"date",type:"date",value:B.date,onChange:Te,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",background:"white",cursor:"pointer",colorScheme:"light"},onFocus:Z=>Z.target.showPicker&&Z.target.showPicker()}),!B.date&&x.jsx("div",{style:{position:"absolute",top:"50%",left:"12px",transform:"translateY(-50%)",color:"#999",pointerEvents:"none",fontSize:"14px"},children:"เลือกวันที่"})]})]})}),x.jsxs("div",{style:{flex:1},children:[x.jsx("b",{children:"เวลา :"}),x.jsx("input",{name:"time",type:"text",placeholder:"เช่น 0530, 0700, 0800, 1800, 2100",value:B.time,onChange:Te,required:!0,style:{width:"100%"}})]}),x.jsxs("div",{style:{margin:"16px 0",padding:12,border:"1px solid #eee",borderRadius:8,background:"#f9f9f9"},children:[x.jsx("b",{children:"จำนวนคนทั้งหมด (แยกชั้นปี):"}),x.jsx("div",{className:"summary-year-row",children:["5","4","3","2","1"].map(Z=>x.jsxs("div",{className:"summary-year-col",children:[x.jsxs("label",{children:["ชั้น ",Z,":"]}),x.jsx("input",{type:"number",min:"0",value:B[`total_year_${Z}`]||"",onChange:re=>G(me=>({...me,[`total_year_${Z}`]:re.target.value})),placeholder:`ชั้น ${Z}`})]},Z))}),x.jsxs("div",{style:{marginTop:8},children:[x.jsx("b",{children:"รวมทั้งหมด:"})," ",["5","4","3","2","1"].reduce((Z,re)=>Z+(Number(B[`total_year_${re}`])||0),0)]})]}),x.jsx("input",{name:"total",type:"number",placeholder:"จำนวนคนทั้งหมด",value:B.total,onChange:Te,required:!0,style:{marginBottom:8,width:"100%"}}),x.jsx("div",{style:{marginBottom:8},children:x.jsxs("div",{className:`remain ${ge<0?"negative":"positive"}`,children:[x.jsx("b",{children:"ยอดที่เหลือ:"})," ",ge]})}),x.jsx("input",{name:"note",placeholder:"ชื่อตัวแทนชั้น (ชั้นปี)",value:B.note,onChange:Te,style:{marginBottom:8,width:"100%"}}),x.jsx("button",{type:"submit",children:$?"บันทึกการแก้ไข":"บันทึกยอด"}),$&&x.jsx("button",{type:"button",onClick:()=>{oe(null),G({date:"",time:"",battalion:"",company:"",total:"",other:"",note:"",total_year_5:"",total_year_4:"",total_year_3:"",total_year_2:"",total_year_1:""}),we([{key:"",value:"",names:[""],counted:!0}])},children:"ยกเลิก"})]}),x.jsx("h3",{children:"ผลลัพธ์ยอด (แยกตามกองพัน/กองร้อย)"}),Object.keys(ee).sort().map(Z=>x.jsxs("div",{style:{marginBottom:24},children:[x.jsxs("button",{type:"button",className:"summary-accordion-btn",onClick:()=>Be(Z),children:[de[Z]?"▼":"►"," กองพัน ",Z]}),de[Z]&&x.jsx("div",{children:Object.keys(ee[Z]).sort().map(re=>x.jsxs("div",{style:{marginBottom:12,marginLeft:24},children:[x.jsxs("button",{type:"button",className:"summary-company-btn",onClick:()=>Xe(Z,re),children:[Oe[`${Z}-${re}`]?"▼":"►"," กองร้อย ",re]}),Oe[`${Z}-${re}`]&&x.jsx("div",{className:"table-wrapper",children:x.jsxs("table",{className:"summary-table",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"วันที่"}),x.jsx("th",{children:"เวลา"}),x.jsx("th",{children:"ทั้งหมด"}),x.jsx("th",{children:"จำหน่าย"}),x.jsx("th",{children:"ยอดที่เหลือ"}),x.jsx("th",{children:"ตัวแทนชั้น"}),x.jsx("th",{children:"แก้ไข"})]})}),x.jsx("tbody",{children:ee[Z][re].map(me=>{let q=Number(me.total)||0,be={};try{be=JSON.parse(me.other),q-=Object.entries(be).reduce((Ne,[Ye,Wt])=>J[me.id]&&J[me.id][Ye]?Ne:Ne+(Number(Wt.count)||0),0)}catch{}return x.jsxs("tr",{children:[x.jsx("td",{"data-label":"วันที่",children:me.date}),x.jsx("td",{"data-label":"แถวกี่โมง",children:me.time}),x.jsx("td",{"data-label":"ทั้งหมด",children:me.total}),x.jsx("td",{"data-label":"จำหน่าย",className:"summary-sale-cell",children:be&&Object.entries(be).length>0?x.jsx("button",{type:"button",className:"summary-view-btn",onClick:()=>Pe(be,me.id),children:"ดูรายการจำหน่าย"}):x.jsx("span",{className:"summary-no-data",children:"-"})}),x.jsx("td",{"data-label":"ยอดที่เหลือ",children:x.jsx("span",{className:q<0?"summary-remain-negative":"summary-remain-positive",children:q})}),x.jsx("td",{"data-label":"ตัวแทนชั้น",children:me.note}),x.jsxs("td",{"data-label":"แก้ไข",children:[x.jsx("button",{type:"button",className:"summary-edit-btn",onClick:()=>ki(me),children:"แก้ไข"}),x.jsx("button",{type:"button",className:"summary-delete-btn",onClick:()=>mn(me.id),title:"ลบ",children:"ลบ"})]})]},me.id)})})]})})]},re))})]},Z)),ue&&x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Le(!1),children:x.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:24,minWidth:260,maxWidth:350,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",position:"relative"},onClick:Z=>Z.stopPropagation(),children:[x.jsx("h4",{style:{marginTop:0},children:"รายการจำหน่าย"}),x.jsx("div",{children:ve&&Object.keys(ve).length>0?Object.entries(ve).map(([Z,re])=>x.jsxs("div",{style:{marginBottom:12},children:[x.jsxs("div",{style:{fontWeight:600,marginBottom:2},children:[Z," : ",re.count]}),x.jsx("ul",{style:{paddingLeft:18,margin:0},children:Array.isArray(re.names)&&re.names.length>0?re.names.map((me,q)=>x.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[x.jsx("span",{style:{flex:1},children:me}),x.jsx("button",{style:{marginLeft:8,background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 10px",fontSize:"0.92em",cursor:"pointer"},onClick:()=>ft(He,Z,me),children:"ลบ"})]},me)):x.jsx("li",{style:{color:"#888"},children:"ไม่มีชื่อผู้ใช้"})})]},Z)):x.jsx("div",{style:{color:"#888"},children:"ไม่มีรายการ"})}),x.jsx("button",{style:{marginTop:16,background:"#1976d2",color:"#fff",border:"none",borderRadius:4,padding:"4px 16px",cursor:"pointer"},onClick:()=>Le(!1),children:"ปิด"})]})}),fe&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"15px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)",textAlign:"center",maxWidth:"400px",margin:"20px",border:`3px solid ${Se==="success"?"#4CAF50":"#f44336"}`},children:[x.jsx("div",{style:{fontSize:"3rem",marginBottom:"15px"},children:Se==="success"?"✅":"❌"}),x.jsx("h3",{style:{margin:"0 0 15px 0",color:Se==="success"?"#4CAF50":"#f44336",fontSize:"1.3rem"},children:Se==="success"?"สำเร็จ!":"เกิดข้อผิดพลาด!"}),x.jsx("p",{style:{margin:"0 0 25px 0",color:"#666",fontSize:"1.1rem",lineHeight:"1.5"},children:nt}),x.jsx("button",{onClick:_t,style:{backgroundColor:Se==="success"?"#4CAF50":"#f44336",color:"white",border:"none",padding:"12px 30px",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"500",cursor:"pointer",minWidth:"100px",transition:"all 0.3s ease"},onMouseOver:Z=>Z.target.style.opacity="0.9",onMouseOut:Z=>Z.target.style.opacity="1",children:"ตกลง"})]})})]})})}const Xc=(e,t,n={})=>{const{redirectTo:i="/login",showMessage:a=!0,fallbackComponent:l=null}=n;return function(g){const{user:p,isLoading:m}=ja();return m?x.jsx("div",{className:"permission-loading",children:x.jsxs("div",{className:"loading",children:[x.jsx("div",{className:"spinner"}),"กำลังตรวจสอบสิทธิ์..."]})}):p?bT(p,t)?x.jsx(e,{...g,user:p}):l?x.jsx(l,{user:p,requiredPage:t}):a?x.jsx("div",{className:"permission-denied",children:x.jsxs("div",{className:"permission-denied-container",children:[x.jsx("div",{className:"permission-denied-icon",children:"🚫"}),x.jsx("h2",{children:"ไม่มีสิทธิ์เข้าถึง"}),x.jsx("p",{children:Ry(p.role,"เข้าถึงหน้านี้")}),x.jsxs("div",{className:"permission-actions",children:[x.jsx("button",{onClick:()=>window.history.back(),className:"btn-back",children:"กลับหน้าก่อนหน้า"}),x.jsx("button",{onClick:()=>window.location.href="/",className:"btn-home",children:"กลับหน้าหลัก"})]})]})}):x.jsx(lc,{to:"/",replace:!0}):x.jsx(lc,{to:i,replace:!0})}},Tb=({user:e,requiredPage:t,onBack:n,onHome:i})=>x.jsx("div",{className:"permission-denied",children:x.jsxs("div",{className:"permission-denied-container",children:[x.jsx("div",{className:"permission-denied-icon",children:"🚫"}),x.jsx("h2",{children:"ไม่มีสิทธิ์เข้าถึง"}),x.jsx("p",{children:Ry(e==null?void 0:e.role,"เข้าถึงหน้านี้")}),x.jsxs("div",{className:"permission-denied-info",children:[x.jsx("p",{children:"หน้านี้เฉพาะสำหรับผู้ที่มีสิทธิ์เท่านั้น"}),x.jsx("p",{children:"หากคุณเชื่อว่านี่เป็นข้อผิดพลาด กรุณาติดต่อผู้ดูแลระบบ"})]}),x.jsxs("div",{className:"permission-actions",children:[x.jsx("button",{onClick:n||(()=>window.history.back()),className:"btn-back",children:"กลับหน้าก่อนหน้า"}),x.jsx("button",{onClick:i||(()=>window.location.href="/"),className:"btn-home",children:"กลับหน้าหลัก"})]})]})});const Ib=()=>{const{user:e,isLoading:t}=ja(),[n,i]=M.useState([]),[a,l]=M.useState(""),[f,g]=M.useState(!1),[p,m]=M.useState(null),[C,E]=M.useState(""),[A,R]=M.useState("");console.log("RoleManager - User data:",e),console.log("RoleManager - Loading:",t),console.log("RoleManager - User admin status:",e==null?void 0:e.admin);const _=async()=>{g(!0),E("");try{const S=localStorage.getItem("token"),O=await fetch("/api/search-users?q=",{headers:{Authorization:`Bearer ${S}`}});if(!O.ok)throw new Error("Failed to load users");const V=await O.json();V.status?i(V.data||[]):E(V.message||"Failed to load users")}catch(S){console.error("Error loading users:",S),E("เกิดข้อผิดพลาดในการโหลดข้อมูลผู้ใช้")}finally{g(!1)}},P=async S=>{if(!S.trim()){_();return}g(!0),E("");try{const O=localStorage.getItem("token"),V=await fetch(`/api/search-users?q=${encodeURIComponent(S)}`,{headers:{Authorization:`Bearer ${O}`}});if(!V.ok)throw new Error("Failed to search users");const z=await V.json();z.status?i(z.data||[]):E(z.message||"Failed to search users")}catch(O){console.error("Error searching users:",O),E("เกิดข้อผิดพลาดในการค้นหาผู้ใช้")}finally{g(!1)}},U=async(S,O)=>{m(S),E(""),R("");try{const V=localStorage.getItem("token"),z=await fetch("/api/user/role",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({userId:S,role:O})});if(!z.ok)throw new Error("Failed to update role");const F=await z.json();F.status?(R(`อัปเดต role เป็น ${N(O)} สำเร็จ`),i(B=>B.map(G=>G.id===S?{...G,role:O,admin:O==="admin"}:G)),setTimeout(()=>R(""),3e3)):E(F.message||"Failed to update role")}catch(V){console.error("Error updating role:",V),E("เกิดข้อผิดพลาดในการอัปเดต role")}finally{m(null)}},N=S=>({student:"นักเรียน",teacher:"อาจารย์",officer:"นายทหาร",admin:"แอดมิน"})[S]||S,b=S=>({student:"role-student",teacher:"role-teacher",officer:"role-officer",admin:"role-admin"})[S]||"";return M.useEffect(()=>{e&&e.admin&&_()},[e]),M.useEffect(()=>{const S=setTimeout(()=>{e&&e.admin&&P(a)},500);return()=>clearTimeout(S)},[a,e]),t?x.jsx("div",{className:"role-manager",children:x.jsxs("div",{className:"loading",children:[x.jsx("div",{className:"spinner"}),"กำลังโหลด..."]})}):e?hi(e,Fe.MANAGE_ROLES)?x.jsxs("div",{className:"role-manager",children:[x.jsx(nw,{}),x.jsxs("div",{className:"role-manager-container",children:[x.jsx("div",{className:"role-manager-header",children:x.jsxs("div",{className:"header-content",children:[x.jsxs("div",{className:"title-section",children:[x.jsx("h1",{children:"การจัดการสิทธิ์ผู้ใช้"}),x.jsx("p",{className:"subtitle",children:"จัดการ Role และสิทธิ์การเข้าถึงของผู้ใช้ในระบบ"})]}),x.jsx("div",{className:"stats-section",children:x.jsxs("div",{className:"stats-card",children:[x.jsx("span",{className:"stats-number",children:n.length}),x.jsx("span",{className:"stats-label",children:"ผู้ใช้ทั้งหมด"})]})})]})}),x.jsx("div",{className:"search-section",children:x.jsxs("div",{className:"search-container",children:[x.jsx("div",{className:"search-icon",children:"🔍"}),x.jsx("input",{type:"text",placeholder:"ค้นหาผู้ใช้ (ชื่อ, รหัสประจำตัว, username)",value:a,onChange:S=>l(S.target.value),className:"search-input"}),a&&x.jsx("button",{onClick:()=>l(""),className:"clear-search","aria-label":"ล้างการค้นหา",children:"✕"})]})}),C&&x.jsx("div",{className:"alert alert-error",children:C}),A&&x.jsx("div",{className:"alert alert-success",children:A}),x.jsx("div",{className:"users-section",children:f?x.jsxs("div",{className:"loading-users",children:[x.jsx("div",{className:"spinner"}),x.jsx("span",{children:"กำลังโหลดข้อมูลผู้ใช้..."})]}):x.jsx("div",{className:"users-grid",children:n.length===0?x.jsx("div",{className:"no-users",children:"ไม่พบผู้ใช้"}):n.map(S=>{var O;return x.jsxs("div",{className:"user-card",children:[x.jsxs("div",{className:"user-card-header",children:[x.jsx("div",{className:"user-avatar",children:((O=S.realname)==null?void 0:O.charAt(0))||"?"}),x.jsxs("div",{className:"user-basic-info",children:[x.jsx("div",{className:"user-name",children:x.jsx("strong",{children:S.realname})}),x.jsxs("div",{className:"user-username",children:["@",S.username]})]}),x.jsx("div",{className:"current-role-badge",children:x.jsx("span",{className:`role-badge ${b(S.role)}`,children:N(S.role)})})]}),x.jsx("div",{className:"user-card-body",children:x.jsxs("div",{className:"user-details-grid",children:[x.jsxs("div",{className:"detail-item",children:[x.jsx("span",{className:"detail-label",children:"รหัสประจำตัว:"}),x.jsx("span",{className:"detail-value",children:S.userid})]}),x.jsxs("div",{className:"detail-item",children:[x.jsx("span",{className:"detail-label",children:"หน่วย:"}),x.jsxs("span",{className:"detail-value",children:[S.battalion,"-",S.company,"-",S.platoon,"-",S.squad]})]}),x.jsxs("div",{className:"detail-item",children:[x.jsx("span",{className:"detail-label",children:"ชั้นปี:"}),x.jsx("span",{className:"detail-value",children:S.year})]})]})}),x.jsx("div",{className:"user-card-footer",children:x.jsxs("div",{className:"role-controls",children:[x.jsx("label",{children:"เปลี่ยนสิทธิ์:"}),x.jsxs("div",{className:"role-select-container",children:[x.jsxs("select",{value:S.role,onChange:V=>U(S.id,V.target.value),disabled:p===S.id,className:"role-select",children:[x.jsx("option",{value:"student",children:"นักเรียน"}),x.jsx("option",{value:"teacher",children:"อาจารย์"}),x.jsx("option",{value:"officer",children:"นายทหาร"}),x.jsx("option",{value:"admin",children:"แอดมิน"})]}),p===S.id&&x.jsxs("div",{className:"updating-indicator",children:[x.jsx("div",{className:"small-spinner"}),x.jsx("span",{children:"อัปเดต..."})]})]})]})})]},`user-${S.id}-${S.username}`)})})})]})]}):x.jsx("div",{className:"role-manager",children:x.jsx(Tb,{user:e,requiredPage:"role-manager"})}):(console.log("No user found, redirecting to login"),x.jsx(lc,{to:"/login",replace:!0}))},bb=()=>{const{user:e,isLoading:t}=ja();if(t)return x.jsx("div",{children:"กำลังโหลด..."});if(!e)return x.jsx("div",{children:"กรุณาเข้าสู่ระบบ"});const n=My(e),i=[{permission:Fe.VIEW_USER_DATA,label:"ดูข้อมูลผู้ใช้"},{permission:Fe.EDIT_OWN_PROFILE,label:"แก้ไขโปรไฟล์ตัวเอง"},{permission:Fe.EDIT_OTHER_PROFILES,label:"แก้ไขโปรไฟล์คนอื่น"},{permission:Fe.DEDUCT_POINTS,label:"ตัดคะแนน"},{permission:Fe.VIEW_WEAPON_STORAGE,label:"ดูคลังอาวุธ"},{permission:Fe.EDIT_WEAPON_STORAGE,label:"แก้ไขคลังอาวุธ"},{permission:Fe.ADD_SUMMARY,label:"เพิ่มสรุปยอด"},{permission:Fe.VIEW_SUMMARY,label:"ดูสรุปยอด"},{permission:Fe.EDIT_SUMMARY,label:"แก้ไขสรุปยอด"},{permission:Fe.DELETE_SUMMARY,label:"ลบสรุปยอด"},{permission:Fe.MANAGE_USERS,label:"จัดการผู้ใช้"},{permission:Fe.MANAGE_ROLES,label:"จัดการสิทธิ์"}],a=l=>({[$e.STUDENT]:"นักเรียน (นนร.)",[$e.TEACHER]:"อาจารย์",[$e.OFFICER]:"นายทหาร",[$e.ADMIN]:"แอดมิน"})[l]||l;return x.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",maxWidth:"800px",margin:"0 auto"},children:[x.jsx("h1",{children:"🧪 ทดสอบระบบสิทธิ์การใช้งาน (RBAC)"}),x.jsxs("div",{style:{backgroundColor:"#f0f8ff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[x.jsx("h2",{children:"ข้อมูลผู้ใช้ปัจจุบัน"}),x.jsxs("p",{children:[x.jsx("strong",{children:"ชื่อ:"})," ",e.realname]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Username:"})," ",e.username]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Role:"})," ",a(e.role)," (",e.role,")"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Admin:"})," ",e.admin?"✅ ใช่":"❌ ไม่ใช่"]})]}),x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsx("h2",{children:"🔑 สิทธิ์การใช้งาน"}),x.jsx("div",{style:{display:"grid",gap:"8px"},children:i.map(({permission:l,label:f})=>{const g=hi(e,l);return x.jsxs("div",{style:{padding:"10px",backgroundColor:g?"#e8f5e8":"#ffe8e8",border:`2px solid ${g?"#4caf50":"#f44336"}`,borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsx("span",{children:f}),x.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:g?"#4caf50":"#f44336"},children:g?"✅ อนุญาต":"❌ ไม่อนุญาต"})]},l)})})]}),x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsx("h2",{children:"📱 เมนูที่แสดงตาม Role"}),x.jsx("div",{style:{display:"grid",gap:"8px"},children:n.map((l,f)=>x.jsxs("div",{style:{padding:"12px",backgroundColor:"#e3f2fd",border:"2px solid #2196f3",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:l.icon}),x.jsxs("span",{children:[x.jsx("strong",{children:l.label})," (",l.path,")"]})]},f))})]}),x.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"15px",borderRadius:"8px",border:"2px solid #ff9800"},children:[x.jsx("h3",{children:"📋 สรุปสิทธิ์ตาม Role"}),e.role===$e.STUDENT&&x.jsxs("div",{children:[x.jsx("h4",{children:"👨‍🎓 นักเรียน (นนร.)"}),x.jsxs("ul",{children:[x.jsx("li",{children:"✅ แก้ไขข้อมูลตัวเอง"}),x.jsx("li",{children:"✅ เพิ่มและดูสรุปยอด"}),x.jsx("li",{children:"❌ ไม่สามารถตัดคะแนนได้"}),x.jsx("li",{children:"❌ ไม่สามารถดูคลังอาวุธได้"}),x.jsx("li",{children:"❌ ไม่สามารถแก้ไขข้อมูลคนอื่นได้"})]})]}),e.role===$e.TEACHER&&x.jsxs("div",{children:[x.jsx("h4",{children:"👨‍🏫 อาจารย์"}),x.jsxs("ul",{children:[x.jsx("li",{children:"✅ ดูข้อมูลผู้ใช้"}),x.jsx("li",{children:"✅ ตัดคะแนนได้"}),x.jsx("li",{children:"✅ ดูสรุปยอด"}),x.jsx("li",{children:"❌ ไม่สามารถแก้ไขข้อมูลคลังอาวุธได้"}),x.jsx("li",{children:"❌ ไม่สามารถแก้ไขข้อมูลคนอื่นได้"})]})]}),e.role===$e.OFFICER&&x.jsxs("div",{children:[x.jsx("h4",{children:"🪖 นายทหาร"}),x.jsxs("ul",{children:[x.jsx("li",{children:"✅ ดูข้อมูลผู้ใช้"}),x.jsx("li",{children:"✅ ตัดคะแนนได้"}),x.jsx("li",{children:"✅ ดูข้อมูลคลังอาวุธ"}),x.jsx("li",{children:"✅ ดูสรุปยอด"}),x.jsx("li",{children:"❌ ไม่สามารถแก้ไขข้อมูลคนอื่นได้"}),x.jsx("li",{children:"❌ ไม่สามารถแก้ไขคลังอาวุธได้"})]})]}),(e.role===$e.ADMIN||e.admin)&&x.jsxs("div",{children:[x.jsx("h4",{children:"🔧 แอดมิน"}),x.jsxs("ul",{children:[x.jsx("li",{children:"✅ ทำได้ทุกอย่าง"}),x.jsx("li",{children:"✅ จัดการสิทธิ์ผู้ใช้"}),x.jsx("li",{children:"✅ แก้ไขข้อมูลทุกคน"}),x.jsx("li",{children:"✅ จัดการคลังอาวุธ"}),x.jsx("li",{children:"✅ จัดการสรุปยอด"})]})]})]}),x.jsx("div",{style:{marginTop:"20px",textAlign:"center",color:"#666"},children:x.jsx("p",{children:"🧪 นี่คือหน้าทดสอบระบบสิทธิ์ - ใช้สำหรับตรวจสอบการทำงานของ RBAC"})})]})},Nb=Xc(LT,"deduct-point"),Rb=Xc(ub,"gun-borrowing"),Mb=Xc(Ib,"role-manager"),Db=Xc(Ab,"summary");function _b(){const e=_r(),t=e.pathname==="/login"||e.pathname==="/register";return x.jsxs(x.Fragment,{children:[!t&&x.jsx(nw,{}),x.jsxs(lv,{children:[x.jsx(Sn,{path:"/",element:x.jsx(Po,{children:x.jsx(MT,{})})}),x.jsx(Sn,{path:"/users",element:x.jsx(Po,{children:x.jsx(PT,{})})}),x.jsx(Sn,{path:"/login",element:x.jsx(_T,{})}),x.jsx(Sn,{path:"/register",element:x.jsx(OT,{})}),x.jsx(Sn,{path:"/behavior-point",element:x.jsx(kT,{})}),x.jsx(Sn,{path:"/DeductPoint",element:x.jsx(Nb,{})}),x.jsx(Sn,{path:"/edit-profile",element:x.jsx(Po,{children:x.jsx(BT,{})})}),x.jsx(Sn,{path:"/view-profile",element:x.jsx(Po,{children:x.jsx(TI,{})})}),x.jsx(Sn,{path:"/gun-borrowing",element:x.jsx(Rb,{})}),x.jsx(Sn,{path:"/summary",element:x.jsx(Db,{})}),x.jsx(Sn,{path:"/role-manager",element:x.jsx(Mb,{})}),x.jsx(Sn,{path:"/permission-test",element:x.jsx(Po,{children:x.jsx(bb,{})})}),x.jsx(Sn,{path:"*",element:x.jsx("h1",{children:"404 Not Found"})})]})]})}const Ob=()=>x.jsx(Ov,{children:x.jsx(_b,{})});jx(document.getElementById("root")).render(x.jsx(xi.StrictMode,{children:x.jsx(Ob,{})}));
